function wT(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function TT(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var dp={exports:{}},yu={},pp={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function ST(){if(kg)return St;kg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),h=Symbol.iterator;function d(L){return L===null||typeof L!="object"?null:(L=h&&L[h]||L["@@iterator"],typeof L=="function"?L:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function T(L,k,X){this.props=L,this.context=k,this.refs=w,this.updater=X||m}T.prototype.isReactComponent={},T.prototype.setState=function(L,k){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,k,"setState")},T.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function E(){}E.prototype=T.prototype;function I(L,k,X){this.props=L,this.context=k,this.refs=w,this.updater=X||m}var D=I.prototype=new E;D.constructor=I,x(D,T.prototype),D.isPureReactComponent=!0;var z=Array.isArray,O=Object.prototype.hasOwnProperty,U={current:null},y={key:!0,ref:!0,__self:!0,__source:!0};function te(L,k,X){var se,fe={},be=null,Ee=null;if(k!=null)for(se in k.ref!==void 0&&(Ee=k.ref),k.key!==void 0&&(be=""+k.key),k)O.call(k,se)&&!y.hasOwnProperty(se)&&(fe[se]=k[se]);var Ae=arguments.length-2;if(Ae===1)fe.children=X;else if(1<Ae){for(var Re=Array(Ae),Se=0;Se<Ae;Se++)Re[Se]=arguments[Se+2];fe.children=Re}if(L&&L.defaultProps)for(se in Ae=L.defaultProps,Ae)fe[se]===void 0&&(fe[se]=Ae[se]);return{$$typeof:n,type:L,key:be,ref:Ee,props:fe,_owner:U.current}}function F(L,k){return{$$typeof:n,type:L.type,key:k,ref:L.ref,props:L.props,_owner:L._owner}}function W(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function ne(L){var k={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(X){return k[X]})}var ee=/\/+/g;function ue(L,k){return typeof L=="object"&&L!==null&&L.key!=null?ne(""+L.key):k.toString(36)}function ye(L,k,X,se,fe){var be=typeof L;(be==="undefined"||be==="boolean")&&(L=null);var Ee=!1;if(L===null)Ee=!0;else switch(be){case"string":case"number":Ee=!0;break;case"object":switch(L.$$typeof){case n:case e:Ee=!0}}if(Ee)return Ee=L,fe=fe(Ee),L=se===""?"."+ue(Ee,0):se,z(fe)?(X="",L!=null&&(X=L.replace(ee,"$&/")+"/"),ye(fe,k,X,"",function(Se){return Se})):fe!=null&&(W(fe)&&(fe=F(fe,X+(!fe.key||Ee&&Ee.key===fe.key?"":(""+fe.key).replace(ee,"$&/")+"/")+L)),k.push(fe)),1;if(Ee=0,se=se===""?".":se+":",z(L))for(var Ae=0;Ae<L.length;Ae++){be=L[Ae];var Re=se+ue(be,Ae);Ee+=ye(be,k,X,Re,fe)}else if(Re=d(L),typeof Re=="function")for(L=Re.call(L),Ae=0;!(be=L.next()).done;)be=be.value,Re=se+ue(be,Ae++),Ee+=ye(be,k,X,Re,fe);else if(be==="object")throw k=String(L),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.");return Ee}function K(L,k,X){if(L==null)return L;var se=[],fe=0;return ye(L,se,"","",function(be){return k.call(X,be,fe++)}),se}function B(L){if(L._status===-1){var k=L._result;k=k(),k.then(function(X){(L._status===0||L._status===-1)&&(L._status=1,L._result=X)},function(X){(L._status===0||L._status===-1)&&(L._status=2,L._result=X)}),L._status===-1&&(L._status=0,L._result=k)}if(L._status===1)return L._result.default;throw L._result}var V={current:null},G={transition:null},Y={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:G,ReactCurrentOwner:U};function q(){throw Error("act(...) is not supported in production builds of React.")}return St.Children={map:K,forEach:function(L,k,X){K(L,function(){k.apply(this,arguments)},X)},count:function(L){var k=0;return K(L,function(){k++}),k},toArray:function(L){return K(L,function(k){return k})||[]},only:function(L){if(!W(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},St.Component=T,St.Fragment=t,St.Profiler=i,St.PureComponent=I,St.StrictMode=r,St.Suspense=c,St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,St.act=q,St.cloneElement=function(L,k,X){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var se=x({},L.props),fe=L.key,be=L.ref,Ee=L._owner;if(k!=null){if(k.ref!==void 0&&(be=k.ref,Ee=U.current),k.key!==void 0&&(fe=""+k.key),L.type&&L.type.defaultProps)var Ae=L.type.defaultProps;for(Re in k)O.call(k,Re)&&!y.hasOwnProperty(Re)&&(se[Re]=k[Re]===void 0&&Ae!==void 0?Ae[Re]:k[Re])}var Re=arguments.length-2;if(Re===1)se.children=X;else if(1<Re){Ae=Array(Re);for(var Se=0;Se<Re;Se++)Ae[Se]=arguments[Se+2];se.children=Ae}return{$$typeof:n,type:L.type,key:fe,ref:be,props:se,_owner:Ee}},St.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:s,_context:L},L.Consumer=L},St.createElement=te,St.createFactory=function(L){var k=te.bind(null,L);return k.type=L,k},St.createRef=function(){return{current:null}},St.forwardRef=function(L){return{$$typeof:u,render:L}},St.isValidElement=W,St.lazy=function(L){return{$$typeof:_,_payload:{_status:-1,_result:L},_init:B}},St.memo=function(L,k){return{$$typeof:v,type:L,compare:k===void 0?null:k}},St.startTransition=function(L){var k=G.transition;G.transition={};try{L()}finally{G.transition=k}},St.unstable_act=q,St.useCallback=function(L,k){return V.current.useCallback(L,k)},St.useContext=function(L){return V.current.useContext(L)},St.useDebugValue=function(){},St.useDeferredValue=function(L){return V.current.useDeferredValue(L)},St.useEffect=function(L,k){return V.current.useEffect(L,k)},St.useId=function(){return V.current.useId()},St.useImperativeHandle=function(L,k,X){return V.current.useImperativeHandle(L,k,X)},St.useInsertionEffect=function(L,k){return V.current.useInsertionEffect(L,k)},St.useLayoutEffect=function(L,k){return V.current.useLayoutEffect(L,k)},St.useMemo=function(L,k){return V.current.useMemo(L,k)},St.useReducer=function(L,k,X){return V.current.useReducer(L,k,X)},St.useRef=function(L){return V.current.useRef(L)},St.useState=function(L){return V.current.useState(L)},St.useSyncExternalStore=function(L,k,X){return V.current.useSyncExternalStore(L,k,X)},St.useTransition=function(){return V.current.useTransition()},St.version="18.3.1",St}var Dg;function om(){return Dg||(Dg=1,pp.exports=ST()),pp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function ET(){if(Ng)return yu;Ng=1;var n=om(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(u,c,v){var _,h={},d=null,m=null;v!==void 0&&(d=""+v),c.key!==void 0&&(d=""+c.key),c.ref!==void 0&&(m=c.ref);for(_ in c)r.call(c,_)&&!s.hasOwnProperty(_)&&(h[_]=c[_]);if(u&&u.defaultProps)for(_ in c=u.defaultProps,c)h[_]===void 0&&(h[_]=c[_]);return{$$typeof:e,type:u,key:d,ref:m,props:h,_owner:i.current}}return yu.Fragment=t,yu.jsx=o,yu.jsxs=o,yu}var Fg;function CT(){return Fg||(Fg=1,dp.exports=ET()),dp.exports}var N=CT(),AT=om();const Lt=Rl(AT);var Sh={},vp={exports:{}},Tn={},_p={exports:{}},mp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function PT(){return Lg||(Lg=1,function(n){function e(G,Y){var q=G.length;G.push(Y);e:for(;0<q;){var L=q-1>>>1,k=G[L];if(0<i(k,Y))G[L]=Y,G[q]=k,q=L;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],q=G.pop();if(q!==Y){G[0]=q;e:for(var L=0,k=G.length,X=k>>>1;L<X;){var se=2*(L+1)-1,fe=G[se],be=se+1,Ee=G[be];if(0>i(fe,q))be<k&&0>i(Ee,fe)?(G[L]=Ee,G[be]=q,L=be):(G[L]=fe,G[se]=q,L=se);else if(be<k&&0>i(Ee,q))G[L]=Ee,G[be]=q,L=be;else break e}}return Y}function i(G,Y){var q=G.sortIndex-Y.sortIndex;return q!==0?q:G.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var c=[],v=[],_=1,h=null,d=3,m=!1,x=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(G){for(var Y=t(v);Y!==null;){if(Y.callback===null)r(v);else if(Y.startTime<=G)r(v),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=t(v)}}function z(G){if(w=!1,D(G),!x)if(t(c)!==null)x=!0,B(O);else{var Y=t(v);Y!==null&&V(z,Y.startTime-G)}}function O(G,Y){x=!1,w&&(w=!1,E(te),te=-1),m=!0;var q=d;try{for(D(Y),h=t(c);h!==null&&(!(h.expirationTime>Y)||G&&!ne());){var L=h.callback;if(typeof L=="function"){h.callback=null,d=h.priorityLevel;var k=L(h.expirationTime<=Y);Y=n.unstable_now(),typeof k=="function"?h.callback=k:h===t(c)&&r(c),D(Y)}else r(c);h=t(c)}if(h!==null)var X=!0;else{var se=t(v);se!==null&&V(z,se.startTime-Y),X=!1}return X}finally{h=null,d=q,m=!1}}var U=!1,y=null,te=-1,F=5,W=-1;function ne(){return!(n.unstable_now()-W<F)}function ee(){if(y!==null){var G=n.unstable_now();W=G;var Y=!0;try{Y=y(!0,G)}finally{Y?ue():(U=!1,y=null)}}else U=!1}var ue;if(typeof I=="function")ue=function(){I(ee)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,K=ye.port2;ye.port1.onmessage=ee,ue=function(){K.postMessage(null)}}else ue=function(){T(ee,0)};function B(G){y=G,U||(U=!0,ue())}function V(G,Y){te=T(function(){G(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){x||m||(x=!0,B(O))},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(G){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var q=d;d=Y;try{return G()}finally{d=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var q=d;d=G;try{return Y()}finally{d=q}},n.unstable_scheduleCallback=function(G,Y,q){var L=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?L+q:L):q=L,G){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=q+k,G={id:_++,callback:Y,priorityLevel:G,startTime:q,expirationTime:k,sortIndex:-1},q>L?(G.sortIndex=q,e(v,G),t(c)===null&&G===t(v)&&(w?(E(te),te=-1):w=!0,V(z,q-L))):(G.sortIndex=k,e(c,G),x||m||(x=!0,B(O))),G},n.unstable_shouldYield=ne,n.unstable_wrapCallback=function(G){var Y=d;return function(){var q=d;d=Y;try{return G.apply(this,arguments)}finally{d=q}}}}(mp)),mp}var Bg;function IT(){return Bg||(Bg=1,_p.exports=PT()),_p.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function OT(){if(jg)return Tn;jg=1;var n=om(),e=IT();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},h={};function d(a){return c.call(h,a)?!0:c.call(_,a)?!1:v.test(a)?h[a]=!0:(_[a]=!0,!1)}function m(a,l,f,g){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function x(a,l,f,g){if(l===null||typeof l>"u"||m(a,l,f,g))return!0;if(g)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function w(a,l,f,g,S,A,j){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=S,this.mustUseProperty=f,this.propertyName=a,this.type=l,this.sanitizeURL=A,this.removeEmptyString=j}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){T[a]=new w(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];T[l]=new w(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){T[a]=new w(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){T[a]=new w(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){T[a]=new w(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){T[a]=new w(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){T[a]=new w(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){T[a]=new w(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){T[a]=new w(a,5,!1,a.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function I(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(E,I);T[l]=new w(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(E,I);T[l]=new w(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(E,I);T[l]=new w(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){T[a]=new w(a,1,!1,a.toLowerCase(),null,!1,!1)}),T.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){T[a]=new w(a,1,!1,a.toLowerCase(),null,!0,!0)});function D(a,l,f,g){var S=T.hasOwnProperty(l)?T[l]:null;(S!==null?S.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(x(l,f,S,g)&&(f=null),g||S===null?d(l)&&(f===null?a.removeAttribute(l):a.setAttribute(l,""+f)):S.mustUseProperty?a[S.propertyName]=f===null?S.type===3?!1:"":f:(l=S.attributeName,g=S.attributeNamespace,f===null?a.removeAttribute(l):(S=S.type,f=S===3||S===4&&f===!0?"":""+f,g?a.setAttributeNS(g,l,f):a.setAttribute(l,f))))}var z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),U=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),ne=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),G=Symbol.iterator;function Y(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var q=Object.assign,L;function k(a){if(L===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);L=l&&l[1]||""}return`
`+L+a}var X=!1;function se(a,l){if(!a||X)return"";X=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(me){var g=me}Reflect.construct(a,[],l)}else{try{l.call()}catch(me){g=me}a.call(l.prototype)}else{try{throw Error()}catch(me){g=me}a()}}catch(me){if(me&&g&&typeof me.stack=="string"){for(var S=me.stack.split(`
`),A=g.stack.split(`
`),j=S.length-1,Z=A.length-1;1<=j&&0<=Z&&S[j]!==A[Z];)Z--;for(;1<=j&&0<=Z;j--,Z--)if(S[j]!==A[Z]){if(j!==1||Z!==1)do if(j--,Z--,0>Z||S[j]!==A[Z]){var re=`
`+S[j].replace(" at new "," at ");return a.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",a.displayName)),re}while(1<=j&&0<=Z);break}}}finally{X=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?k(a):""}function fe(a){switch(a.tag){case 5:return k(a.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 2:case 15:return a=se(a.type,!1),a;case 11:return a=se(a.type.render,!1),a;case 1:return a=se(a.type,!0),a;default:return""}}function be(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case y:return"Fragment";case U:return"Portal";case F:return"Profiler";case te:return"StrictMode";case ue:return"Suspense";case ye:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case ne:return(a.displayName||"Context")+".Consumer";case W:return(a._context.displayName||"Context")+".Provider";case ee:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case K:return l=a.displayName||null,l!==null?l:be(a.type)||"Memo";case B:l=a._payload,a=a._init;try{return be(a(l))}catch{}}return null}function Ee(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(l);case 8:return l===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Ae(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Re(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Se(a){var l=Re(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,A=f.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return S.call(this)},set:function(j){g=""+j,A.call(this,j)}}),Object.defineProperty(a,l,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(j){g=""+j},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Ue(a){a._valueTracker||(a._valueTracker=Se(a))}function je(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return a&&(g=Re(a)?a.checked?"true":"false":a.value),a=g,a!==f?(l.setValue(a),!0):!1}function et(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Xe(a,l){var f=l.checked;return q({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function ze(a,l){var f=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;f=Ae(l.value!=null?l.value:f),a._wrapperState={initialChecked:g,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Be(a,l){l=l.checked,l!=null&&D(a,"checked",l,!1)}function tt(a,l){Be(a,l);var f=Ae(l.value),g=l.type;if(f!=null)g==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?Tr(a,l.type,f):l.hasOwnProperty("defaultValue")&&Tr(a,l.type,Ae(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function bt(a,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,f||l===a.value||(a.value=l),a.defaultValue=l}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function Tr(a,l,f){(l!=="number"||et(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var ur=Array.isArray;function tr(a,l,f,g){if(a=a.options,l){l={};for(var S=0;S<f.length;S++)l["$"+f[S]]=!0;for(f=0;f<a.length;f++)S=l.hasOwnProperty("$"+a[f].value),a[f].selected!==S&&(a[f].selected=S),S&&g&&(a[f].defaultSelected=!0)}else{for(f=""+Ae(f),l=null,S=0;S<a.length;S++){if(a[S].value===f){a[S].selected=!0,g&&(a[S].defaultSelected=!0);return}l!==null||a[S].disabled||(l=a[S])}l!==null&&(l.selected=!0)}}function Wt(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Mr(a,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(t(92));if(ur(f)){if(1<f.length)throw Error(t(93));f=f[0]}l=f}l==null&&(l=""),f=l}a._wrapperState={initialValue:Ae(f)}}function kr(a,l){var f=Ae(l.value),g=Ae(l.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),l.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),g!=null&&(a.defaultValue=""+g)}function Qe(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Sr(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ls(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Sr(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Bs,Ei=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,g,S){MSApp.execUnsafeLocalFunction(function(){return a(l,f,g,S)})}:a}(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Bs=Bs||document.createElement("div"),Bs.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Bs.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Un(a,l){if(l){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=l;return}}a.textContent=l}var ti={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zi=["Webkit","ms","Moz","O"];Object.keys(ti).forEach(function(a){Zi.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),ti[l]=ti[a]})});function hn(a,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||ti.hasOwnProperty(a)&&ti[a]?(""+l).trim():l+"px"}function fn(a,l){a=a.style;for(var f in l)if(l.hasOwnProperty(f)){var g=f.indexOf("--")===0,S=hn(f,l[f],g);f==="float"&&(f="cssFloat"),g?a.setProperty(f,S):a[f]=S}}var Sn=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function de(a,l){if(l){if(Sn[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function _e(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function Ot(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var kt=null,it=null,cr=null;function En(a){if(a=nu(a)){if(typeof kt!="function")throw Error(t(280));var l=a.stateNode;l&&(l=jc(l),kt(a.stateNode,a.type,l))}}function Er(a){it?cr?cr.push(a):cr=[a]:it=a}function $t(){if(it){var a=it,l=cr;if(cr=it=null,En(a),l)for(a=0;a<l.length;a++)En(l[a])}}function hr(a,l){return a(l)}function Cn(){}var Ur=!1;function js(a,l,f){if(Ur)return a(l,f);Ur=!0;try{return hr(a,l,f)}finally{Ur=!1,(it!==null||cr!==null)&&(Cn(),$t())}}function ri(a,l){var f=a.stateNode;if(f===null)return null;var g=jc(f);if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,l,typeof f));return f}var An=!1;if(u)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){An=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{An=!1}function Ji(a,l,f,g,S,A,j,Z,re){var me=Array.prototype.slice.call(arguments,3);try{l.apply(f,me)}catch(Pe){this.onError(Pe)}}var rn=!1,Ci=null,Ai=!1,Us=null,Ca={onError:function(a){rn=!0,Ci=a}};function Aa(a,l,f,g,S,A,j,Z,re){rn=!1,Ci=null,Ji.apply(Ca,arguments)}function Ao(a,l,f,g,S,A,j,Z,re){if(Aa.apply(this,arguments),rn){if(rn){var me=Ci;rn=!1,Ci=null}else throw Error(t(198));Ai||(Ai=!0,Us=me)}}function dn(a){var l=a,f=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(f=l.return),a=l.return;while(a)}return l.tag===3?f:null}function Pa(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function ni(a){if(dn(a)!==a)throw Error(t(188))}function Gs(a){var l=a.alternate;if(!l){if(l=dn(a),l===null)throw Error(t(188));return l!==a?null:a}for(var f=a,g=l;;){var S=f.return;if(S===null)break;var A=S.alternate;if(A===null){if(g=S.return,g!==null){f=g;continue}break}if(S.child===A.child){for(A=S.child;A;){if(A===f)return ni(S),a;if(A===g)return ni(S),l;A=A.sibling}throw Error(t(188))}if(f.return!==g.return)f=S,g=A;else{for(var j=!1,Z=S.child;Z;){if(Z===f){j=!0,f=S,g=A;break}if(Z===g){j=!0,g=S,f=A;break}Z=Z.sibling}if(!j){for(Z=A.child;Z;){if(Z===f){j=!0,f=A,g=S;break}if(Z===g){j=!0,g=A,f=S;break}Z=Z.sibling}if(!j)throw Error(t(189))}}if(f.alternate!==g)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:l}function Pn(a){return a=Gs(a),a!==null?ii(a):null}function ii(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=ii(a);if(l!==null)return l;a=a.sibling}return null}var es=e.unstable_scheduleCallback,Hs=e.unstable_cancelCallback,Yf=e.unstable_shouldYield,Ia=e.unstable_requestPaint,Yt=e.unstable_now,_c=e.unstable_getCurrentPriorityLevel,Po=e.unstable_ImmediatePriority,Ul=e.unstable_UserBlockingPriority,Io=e.unstable_NormalPriority,Gl=e.unstable_LowPriority,mc=e.unstable_IdlePriority,Oo=null,In=null;function yc(a){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Oo,a,void 0,(a.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:zs,gc=Math.log,$r=Math.LN2;function zs(a){return a>>>=0,a===0?32:31-(gc(a)/$r|0)|0}var ts=64,Ro=4194304;function Oa(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Xs(a,l){var f=a.pendingLanes;if(f===0)return 0;var g=0,S=a.suspendedLanes,A=a.pingedLanes,j=f&268435455;if(j!==0){var Z=j&~S;Z!==0?g=Oa(Z):(A&=j,A!==0&&(g=Oa(A)))}else j=f&~S,j!==0?g=Oa(j):A!==0&&(g=Oa(A));if(g===0)return 0;if(l!==0&&l!==g&&(l&S)===0&&(S=g&-g,A=l&-l,S>=A||S===16&&(A&4194240)!==0))return l;if((g&4)!==0&&(g|=f&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=g;0<l;)f=31-nn(l),S=1<<f,g|=a[f],l&=~S;return g}function xc(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mo(a,l){for(var f=a.suspendedLanes,g=a.pingedLanes,S=a.expirationTimes,A=a.pendingLanes;0<A;){var j=31-nn(A),Z=1<<j,re=S[j];re===-1?((Z&f)===0||(Z&g)!==0)&&(S[j]=xc(Z,l)):re<=l&&(a.expiredLanes|=Z),A&=~Z}}function ko(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function bc(){var a=ts;return ts<<=1,(ts&4194240)===0&&(ts=64),a}function Hl(a){for(var l=[],f=0;31>f;f++)l.push(a);return l}function Gr(a,l,f){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-nn(l),a[l]=f}function wc(a,l){var f=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<f;){var S=31-nn(f),A=1<<S;l[S]=0,g[S]=-1,a[S]=-1,f&=~A}}function rs(a,l){var f=a.entangledLanes|=l;for(a=a.entanglements;f;){var g=31-nn(f),S=1<<g;S&l|a[g]&l&&(a[g]|=l),f&=~S}}var Dt=0;function Tc(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Pi,si,Do,Sc,Vs,No=!1,qs=[],ai=null,oi=null,Ii=null,Ws=new Map,Ra=new Map,Oi=[],zl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ec(a,l){switch(a){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Ws.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(l.pointerId)}}function Ma(a,l,f,g,S,A){return a===null||a.nativeEvent!==A?(a={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:A,targetContainers:[S]},l!==null&&(l=nu(l),l!==null&&si(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),a)}function Kf(a,l,f,g,S){switch(l){case"focusin":return ai=Ma(ai,a,l,f,g,S),!0;case"dragenter":return oi=Ma(oi,a,l,f,g,S),!0;case"mouseover":return Ii=Ma(Ii,a,l,f,g,S),!0;case"pointerover":var A=S.pointerId;return Ws.set(A,Ma(Ws.get(A)||null,a,l,f,g,S)),!0;case"gotpointercapture":return A=S.pointerId,Ra.set(A,Ma(Ra.get(A)||null,a,l,f,g,S)),!0}return!1}function Cc(a){var l=Ba(a.target);if(l!==null){var f=dn(l);if(f!==null){if(l=f.tag,l===13){if(l=Pa(f),l!==null){a.blockedOn=l,Vs(a.priority,function(){Do(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Fo(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var f=Xl(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);wt=g,f.target.dispatchEvent(g),wt=null}else return l=nu(f),l!==null&&si(l),a.blockedOn=f,!1;l.shift()}return!0}function Ac(a,l,f){Fo(a)&&f.delete(l)}function Qf(){No=!1,ai!==null&&Fo(ai)&&(ai=null),oi!==null&&Fo(oi)&&(oi=null),Ii!==null&&Fo(Ii)&&(Ii=null),Ws.forEach(Ac),Ra.forEach(Ac)}function $s(a,l){a.blockedOn===l&&(a.blockedOn=null,No||(No=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Qf)))}function ns(a){function l(S){return $s(S,a)}if(0<qs.length){$s(qs[0],a);for(var f=1;f<qs.length;f++){var g=qs[f];g.blockedOn===a&&(g.blockedOn=null)}}for(ai!==null&&$s(ai,a),oi!==null&&$s(oi,a),Ii!==null&&$s(Ii,a),Ws.forEach(l),Ra.forEach(l),f=0;f<Oi.length;f++)g=Oi[f],g.blockedOn===a&&(g.blockedOn=null);for(;0<Oi.length&&(f=Oi[0],f.blockedOn===null);)Cc(f),f.blockedOn===null&&Oi.shift()}var is=z.ReactCurrentBatchConfig,Ys=!0;function Pc(a,l,f,g){var S=Dt,A=is.transition;is.transition=null;try{Dt=1,ka(a,l,f,g)}finally{Dt=S,is.transition=A}}function Ic(a,l,f,g){var S=Dt,A=is.transition;is.transition=null;try{Dt=4,ka(a,l,f,g)}finally{Dt=S,is.transition=A}}function ka(a,l,f,g){if(Ys){var S=Xl(a,l,f,g);if(S===null)nd(a,l,g,Lo,f),Ec(a,g);else if(Kf(S,a,l,f,g))g.stopPropagation();else if(Ec(a,g),l&4&&-1<zl.indexOf(a)){for(;S!==null;){var A=nu(S);if(A!==null&&Pi(A),A=Xl(a,l,f,g),A===null&&nd(a,l,g,Lo,f),A===S)break;S=A}S!==null&&g.stopPropagation()}else nd(a,l,g,null,f)}}var Lo=null;function Xl(a,l,f,g){if(Lo=null,a=Ot(g),a=Ba(a),a!==null)if(l=dn(a),l===null)a=null;else if(f=l.tag,f===13){if(a=Pa(l),a!==null)return a;a=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Lo=a,null}function Oc(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_c()){case Po:return 1;case Ul:return 4;case Io:case Gl:return 16;case mc:return 536870912;default:return 16}default:return 16}}var pn=null,Bo=null,Ks=null;function Rc(){if(Ks)return Ks;var a,l=Bo,f=l.length,g,S="value"in pn?pn.value:pn.textContent,A=S.length;for(a=0;a<f&&l[a]===S[a];a++);var j=f-a;for(g=1;g<=j&&l[f-g]===S[A-g];g++);return Ks=S.slice(a,1<g?1-g:void 0)}function jo(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Uo(){return!0}function p(){return!1}function b(a){function l(f,g,S,A,j){this._reactName=f,this._targetInst=S,this.type=g,this.nativeEvent=A,this.target=j,this.currentTarget=null;for(var Z in a)a.hasOwnProperty(Z)&&(f=a[Z],this[Z]=f?f(A):A[Z]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Uo:p,this.isPropagationStopped=p,this}return q(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),l}var C={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},P=b(C),R=q({},C,{view:0,detail:0}),M=b(R),H,J,Q,oe=q({},R,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:as,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Q&&(Q&&a.type==="mousemove"?(H=a.screenX-Q.screenX,J=a.screenY-Q.screenY):J=H=0,Q=a),H)},movementY:function(a){return"movementY"in a?a.movementY:J}}),xe=b(oe),Te=q({},oe,{dataTransfer:0}),ve=b(Te),Ie=q({},R,{relatedTarget:0}),ct=b(Ie),Et=q({},C,{animationName:0,elapsedTime:0,pseudoElement:0}),mt=b(Et),Cr=q({},C,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),fr=b(Cr),Gn=q({},C,{data:0}),On=b(Gn),Tt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ss={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},At={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kt(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=At[a])?!!l[a]:!1}function as(){return Kt}var Vl=q({},R,{key:function(a){if(a.key){var l=Tt[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=jo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ss[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:as,charCode:function(a){return a.type==="keypress"?jo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?jo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Hn=b(Vl),Da=q({},oe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rn=b(Da),Ri=q({},R,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:as}),Mi=b(Ri),vn=q({},C,{propertyName:0,elapsedTime:0,pseudoElement:0}),ql=b(vn),li=q({},oe,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),ui=b(li),Zf=[9,13,27,32],Wl=u&&"CompositionEvent"in window,Na=null;u&&"documentMode"in document&&(Na=document.documentMode);var Nt=u&&"TextEvent"in window&&!Na,Fa=u&&(!Wl||Na&&8<Na&&11>=Na),_n=" ",os=!1;function Mc(a,l){switch(a){case"keyup":return Zf.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kc(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ls=!1;function us(a,l){switch(a){case"compositionend":return kc(l);case"keypress":return l.which!==32?null:(os=!0,_n);case"textInput":return a=l.data,a===_n&&os?null:a;default:return null}}function $l(a,l){if(ls)return a==="compositionend"||!Wl&&Mc(a,l)?(a=Rc(),Ks=Bo=pn=null,ls=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Fa&&l.locale!=="ko"?null:l.data;default:return null}}var ki={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yl(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!ki[a.type]:l==="textarea"}function Qs(a,l,f,g){Er(g),l=Fc(l,"onChange"),0<l.length&&(f=new P("onChange","change",null,f,g),a.push({event:f,listeners:l}))}var Di=null,Ni=null;function Kl(a){Ym(a,0)}function Go(a){var l=$o(a);if(je(l))return a}function Ho(a,l){if(a==="change")return l}var zo=!1;if(u){var La;if(u){var Ql="oninput"in document;if(!Ql){var Xo=document.createElement("div");Xo.setAttribute("oninput","return;"),Ql=typeof Xo.oninput=="function"}La=Ql}else La=!1;zo=La&&(!document.documentMode||9<document.documentMode)}function Zl(){Di&&(Di.detachEvent("onpropertychange",$),Ni=Di=null)}function $(a){if(a.propertyName==="value"&&Go(Ni)){var l=[];Qs(l,Ni,a,Ot(a)),js(Kl,l)}}function ie(a,l,f){a==="focusin"?(Zl(),Di=l,Ni=f,Di.attachEvent("onpropertychange",$)):a==="focusout"&&Zl()}function he(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Go(Ni)}function ge(a,l){if(a==="click")return Go(l)}function we(a,l){if(a==="input"||a==="change")return Go(l)}function De(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Fe=typeof Object.is=="function"?Object.is:De;function qe(a,l){if(Fe(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var f=Object.keys(a),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var S=f[g];if(!c.call(l,S)||!Fe(a[S],l[S]))return!1}return!0}function Le(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function xt(a,l){var f=Le(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=l&&g>=l)return{node:f,offset:l-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Le(f)}}function ut(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?ut(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function ht(){for(var a=window,l=et();l instanceof a.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)a=l.contentWindow;else break;l=et(a.document)}return l}function yt(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function nt(a){var l=ht(),f=a.focusedElem,g=a.selectionRange;if(l!==f&&f&&f.ownerDocument&&ut(f.ownerDocument.documentElement,f)){if(g!==null&&yt(f)){if(l=g.start,a=g.end,a===void 0&&(a=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(a,f.value.length);else if(a=(l=f.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var S=f.textContent.length,A=Math.min(g.start,S);g=g.end===void 0?A:Math.min(g.end,S),!a.extend&&A>g&&(S=g,g=A,A=S),S=xt(f,A);var j=xt(f,g);S&&j&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==j.node||a.focusOffset!==j.offset)&&(l=l.createRange(),l.setStart(S.node,S.offset),a.removeAllRanges(),A>g?(a.addRange(l),a.extend(j.node,j.offset)):(l.setEnd(j.node,j.offset),a.addRange(l)))}}for(l=[],a=f;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)a=l[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Bt=u&&"documentMode"in document&&11>=document.documentMode,dr=null,yr=null,Nr=null,mn=!1;function cs(a,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;mn||dr==null||dr!==et(g)||(g=dr,"selectionStart"in g&&yt(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Nr&&qe(Nr,g)||(Nr=g,g=Fc(yr,"onSelect"),0<g.length&&(l=new P("onSelect","select",null,l,f),a.push({event:l,listeners:g}),l.target=dr)))}function gr(a,l){var f={};return f[a.toLowerCase()]=l.toLowerCase(),f["Webkit"+a]="webkit"+l,f["Moz"+a]="moz"+l,f}var Vo={animationend:gr("Animation","AnimationEnd"),animationiteration:gr("Animation","AnimationIteration"),animationstart:gr("Animation","AnimationStart"),transitionend:gr("Transition","TransitionEnd")},Jf={},Gm={};u&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function Dc(a){if(Jf[a])return Jf[a];if(!Vo[a])return a;var l=Vo[a],f;for(f in l)if(l.hasOwnProperty(f)&&f in Gm)return Jf[a]=l[f];return a}var Hm=Dc("animationend"),zm=Dc("animationiteration"),Xm=Dc("animationstart"),Vm=Dc("transitionend"),qm=new Map,Wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(a,l){qm.set(a,l),s(l,[a])}for(var ed=0;ed<Wm.length;ed++){var td=Wm[ed],Rw=td.toLowerCase(),Mw=td[0].toUpperCase()+td.slice(1);Zs(Rw,"on"+Mw)}Zs(Hm,"onAnimationEnd"),Zs(zm,"onAnimationIteration"),Zs(Xm,"onAnimationStart"),Zs("dblclick","onDoubleClick"),Zs("focusin","onFocus"),Zs("focusout","onBlur"),Zs(Vm,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jl));function $m(a,l,f){var g=a.type||"unknown-event";a.currentTarget=f,Ao(g,l,void 0,a),a.currentTarget=null}function Ym(a,l){l=(l&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],S=g.event;g=g.listeners;e:{var A=void 0;if(l)for(var j=g.length-1;0<=j;j--){var Z=g[j],re=Z.instance,me=Z.currentTarget;if(Z=Z.listener,re!==A&&S.isPropagationStopped())break e;$m(S,Z,me),A=re}else for(j=0;j<g.length;j++){if(Z=g[j],re=Z.instance,me=Z.currentTarget,Z=Z.listener,re!==A&&S.isPropagationStopped())break e;$m(S,Z,me),A=re}}}if(Ai)throw a=Us,Ai=!1,Us=null,a}function Xt(a,l){var f=l[ud];f===void 0&&(f=l[ud]=new Set);var g=a+"__bubble";f.has(g)||(Km(l,a,2,!1),f.add(g))}function rd(a,l,f){var g=0;l&&(g|=4),Km(f,a,g,l)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function eu(a){if(!a[Nc]){a[Nc]=!0,r.forEach(function(f){f!=="selectionchange"&&(kw.has(f)||rd(f,!1,a),rd(f,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Nc]||(l[Nc]=!0,rd("selectionchange",!1,l))}}function Km(a,l,f,g){switch(Oc(l)){case 1:var S=Pc;break;case 4:S=Ic;break;default:S=ka}f=S.bind(null,l,f,a),S=void 0,!An||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),g?S!==void 0?a.addEventListener(l,f,{capture:!0,passive:S}):a.addEventListener(l,f,!0):S!==void 0?a.addEventListener(l,f,{passive:S}):a.addEventListener(l,f,!1)}function nd(a,l,f,g,S){var A=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var j=g.tag;if(j===3||j===4){var Z=g.stateNode.containerInfo;if(Z===S||Z.nodeType===8&&Z.parentNode===S)break;if(j===4)for(j=g.return;j!==null;){var re=j.tag;if((re===3||re===4)&&(re=j.stateNode.containerInfo,re===S||re.nodeType===8&&re.parentNode===S))return;j=j.return}for(;Z!==null;){if(j=Ba(Z),j===null)return;if(re=j.tag,re===5||re===6){g=A=j;continue e}Z=Z.parentNode}}g=g.return}js(function(){var me=A,Pe=Ot(f),Oe=[];e:{var Ce=qm.get(a);if(Ce!==void 0){var Ge=P,$e=a;switch(a){case"keypress":if(jo(f)===0)break e;case"keydown":case"keyup":Ge=Hn;break;case"focusin":$e="focus",Ge=ct;break;case"focusout":$e="blur",Ge=ct;break;case"beforeblur":case"afterblur":Ge=ct;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=xe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=ve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=Mi;break;case Hm:case zm:case Xm:Ge=mt;break;case Vm:Ge=ql;break;case"scroll":Ge=M;break;case"wheel":Ge=ui;break;case"copy":case"cut":case"paste":Ge=fr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=Rn}var Ze=(l&4)!==0,pr=!Ze&&a==="scroll",ce=Ze?Ce!==null?Ce+"Capture":null:Ce;Ze=[];for(var ae=me,pe;ae!==null;){pe=ae;var Me=pe.stateNode;if(pe.tag===5&&Me!==null&&(pe=Me,ce!==null&&(Me=ri(ae,ce),Me!=null&&Ze.push(tu(ae,Me,pe)))),pr)break;ae=ae.return}0<Ze.length&&(Ce=new Ge(Ce,$e,null,f,Pe),Oe.push({event:Ce,listeners:Ze}))}}if((l&7)===0){e:{if(Ce=a==="mouseover"||a==="pointerover",Ge=a==="mouseout"||a==="pointerout",Ce&&f!==wt&&($e=f.relatedTarget||f.fromElement)&&(Ba($e)||$e[hs]))break e;if((Ge||Ce)&&(Ce=Pe.window===Pe?Pe:(Ce=Pe.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Ge?($e=f.relatedTarget||f.toElement,Ge=me,$e=$e?Ba($e):null,$e!==null&&(pr=dn($e),$e!==pr||$e.tag!==5&&$e.tag!==6)&&($e=null)):(Ge=null,$e=me),Ge!==$e)){if(Ze=xe,Me="onMouseLeave",ce="onMouseEnter",ae="mouse",(a==="pointerout"||a==="pointerover")&&(Ze=Rn,Me="onPointerLeave",ce="onPointerEnter",ae="pointer"),pr=Ge==null?Ce:$o(Ge),pe=$e==null?Ce:$o($e),Ce=new Ze(Me,ae+"leave",Ge,f,Pe),Ce.target=pr,Ce.relatedTarget=pe,Me=null,Ba(Pe)===me&&(Ze=new Ze(ce,ae+"enter",$e,f,Pe),Ze.target=pe,Ze.relatedTarget=pr,Me=Ze),pr=Me,Ge&&$e)t:{for(Ze=Ge,ce=$e,ae=0,pe=Ze;pe;pe=qo(pe))ae++;for(pe=0,Me=ce;Me;Me=qo(Me))pe++;for(;0<ae-pe;)Ze=qo(Ze),ae--;for(;0<pe-ae;)ce=qo(ce),pe--;for(;ae--;){if(Ze===ce||ce!==null&&Ze===ce.alternate)break t;Ze=qo(Ze),ce=qo(ce)}Ze=null}else Ze=null;Ge!==null&&Qm(Oe,Ce,Ge,Ze,!1),$e!==null&&pr!==null&&Qm(Oe,pr,$e,Ze,!0)}}e:{if(Ce=me?$o(me):window,Ge=Ce.nodeName&&Ce.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Ce.type==="file")var Je=Ho;else if(Yl(Ce))if(zo)Je=we;else{Je=he;var at=ie}else(Ge=Ce.nodeName)&&Ge.toLowerCase()==="input"&&(Ce.type==="checkbox"||Ce.type==="radio")&&(Je=ge);if(Je&&(Je=Je(a,me))){Qs(Oe,Je,f,Pe);break e}at&&at(a,Ce,me),a==="focusout"&&(at=Ce._wrapperState)&&at.controlled&&Ce.type==="number"&&Tr(Ce,"number",Ce.value)}switch(at=me?$o(me):window,a){case"focusin":(Yl(at)||at.contentEditable==="true")&&(dr=at,yr=me,Nr=null);break;case"focusout":Nr=yr=dr=null;break;case"mousedown":mn=!0;break;case"contextmenu":case"mouseup":case"dragend":mn=!1,cs(Oe,f,Pe);break;case"selectionchange":if(Bt)break;case"keydown":case"keyup":cs(Oe,f,Pe)}var ot;if(Wl)e:{switch(a){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else ls?Mc(a,f)&&(dt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(dt="onCompositionStart");dt&&(Fa&&f.locale!=="ko"&&(ls||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&ls&&(ot=Rc()):(pn=Pe,Bo="value"in pn?pn.value:pn.textContent,ls=!0)),at=Fc(me,dt),0<at.length&&(dt=new On(dt,a,null,f,Pe),Oe.push({event:dt,listeners:at}),ot?dt.data=ot:(ot=kc(f),ot!==null&&(dt.data=ot)))),(ot=Nt?us(a,f):$l(a,f))&&(me=Fc(me,"onBeforeInput"),0<me.length&&(Pe=new On("onBeforeInput","beforeinput",null,f,Pe),Oe.push({event:Pe,listeners:me}),Pe.data=ot))}Ym(Oe,l)})}function tu(a,l,f){return{instance:a,listener:l,currentTarget:f}}function Fc(a,l){for(var f=l+"Capture",g=[];a!==null;){var S=a,A=S.stateNode;S.tag===5&&A!==null&&(S=A,A=ri(a,f),A!=null&&g.unshift(tu(a,A,S)),A=ri(a,l),A!=null&&g.push(tu(a,A,S))),a=a.return}return g}function qo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Qm(a,l,f,g,S){for(var A=l._reactName,j=[];f!==null&&f!==g;){var Z=f,re=Z.alternate,me=Z.stateNode;if(re!==null&&re===g)break;Z.tag===5&&me!==null&&(Z=me,S?(re=ri(f,A),re!=null&&j.unshift(tu(f,re,Z))):S||(re=ri(f,A),re!=null&&j.push(tu(f,re,Z)))),f=f.return}j.length!==0&&a.push({event:l,listeners:j})}var Dw=/\r\n?/g,Nw=/\u0000|\uFFFD/g;function Zm(a){return(typeof a=="string"?a:""+a).replace(Dw,`
`).replace(Nw,"")}function Lc(a,l,f){if(l=Zm(l),Zm(a)!==l&&f)throw Error(t(425))}function Bc(){}var id=null,sd=null;function ad(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var od=typeof setTimeout=="function"?setTimeout:void 0,Fw=typeof clearTimeout=="function"?clearTimeout:void 0,Jm=typeof Promise=="function"?Promise:void 0,Lw=typeof queueMicrotask=="function"?queueMicrotask:typeof Jm<"u"?function(a){return Jm.resolve(null).then(a).catch(Bw)}:od;function Bw(a){setTimeout(function(){throw a})}function ld(a,l){var f=l,g=0;do{var S=f.nextSibling;if(a.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(g===0){a.removeChild(S),ns(l);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=S}while(f);ns(l)}function Js(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function ey(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return a;l--}else f==="/$"&&l++}a=a.previousSibling}return null}var Wo=Math.random().toString(36).slice(2),Fi="__reactFiber$"+Wo,ru="__reactProps$"+Wo,hs="__reactContainer$"+Wo,ud="__reactEvents$"+Wo,jw="__reactListeners$"+Wo,Uw="__reactHandles$"+Wo;function Ba(a){var l=a[Fi];if(l)return l;for(var f=a.parentNode;f;){if(l=f[hs]||f[Fi]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(a=ey(a);a!==null;){if(f=a[Fi])return f;a=ey(a)}return l}a=f,f=a.parentNode}return null}function nu(a){return a=a[Fi]||a[hs],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function $o(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function jc(a){return a[ru]||null}var cd=[],Yo=-1;function ea(a){return{current:a}}function Vt(a){0>Yo||(a.current=cd[Yo],cd[Yo]=null,Yo--)}function Ht(a,l){Yo++,cd[Yo]=a.current,a.current=l}var ta={},Yr=ea(ta),yn=ea(!1),ja=ta;function Ko(a,l){var f=a.type.contextTypes;if(!f)return ta;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var S={},A;for(A in f)S[A]=l[A];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=S),S}function gn(a){return a=a.childContextTypes,a!=null}function Uc(){Vt(yn),Vt(Yr)}function ty(a,l,f){if(Yr.current!==ta)throw Error(t(168));Ht(Yr,l),Ht(yn,f)}function ry(a,l,f){var g=a.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return f;g=g.getChildContext();for(var S in g)if(!(S in l))throw Error(t(108,Ee(a)||"Unknown",S));return q({},f,g)}function Gc(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ta,ja=Yr.current,Ht(Yr,a),Ht(yn,yn.current),!0}function ny(a,l,f){var g=a.stateNode;if(!g)throw Error(t(169));f?(a=ry(a,l,ja),g.__reactInternalMemoizedMergedChildContext=a,Vt(yn),Vt(Yr),Ht(Yr,a)):Vt(yn),Ht(yn,f)}var fs=null,Hc=!1,hd=!1;function iy(a){fs===null?fs=[a]:fs.push(a)}function Gw(a){Hc=!0,iy(a)}function ra(){if(!hd&&fs!==null){hd=!0;var a=0,l=Dt;try{var f=fs;for(Dt=1;a<f.length;a++){var g=f[a];do g=g(!0);while(g!==null)}fs=null,Hc=!1}catch(S){throw fs!==null&&(fs=fs.slice(a+1)),es(Po,ra),S}finally{Dt=l,hd=!1}}return null}var Qo=[],Zo=0,zc=null,Xc=0,zn=[],Xn=0,Ua=null,ds=1,ps="";function Ga(a,l){Qo[Zo++]=Xc,Qo[Zo++]=zc,zc=a,Xc=l}function sy(a,l,f){zn[Xn++]=ds,zn[Xn++]=ps,zn[Xn++]=Ua,Ua=a;var g=ds;a=ps;var S=32-nn(g)-1;g&=~(1<<S),f+=1;var A=32-nn(l)+S;if(30<A){var j=S-S%5;A=(g&(1<<j)-1).toString(32),g>>=j,S-=j,ds=1<<32-nn(l)+S|f<<S|g,ps=A+a}else ds=1<<A|f<<S|g,ps=a}function fd(a){a.return!==null&&(Ga(a,1),sy(a,1,0))}function dd(a){for(;a===zc;)zc=Qo[--Zo],Qo[Zo]=null,Xc=Qo[--Zo],Qo[Zo]=null;for(;a===Ua;)Ua=zn[--Xn],zn[Xn]=null,ps=zn[--Xn],zn[Xn]=null,ds=zn[--Xn],zn[Xn]=null}var Mn=null,kn=null,Qt=!1,ci=null;function ay(a,l){var f=$n(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=a,l=a.deletions,l===null?(a.deletions=[f],a.flags|=16):l.push(f)}function oy(a,l){switch(a.tag){case 5:var f=a.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,Mn=a,kn=Js(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,Mn=a,kn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=Ua!==null?{id:ds,overflow:ps}:null,a.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=$n(18,null,null,0),f.stateNode=l,f.return=a,a.child=f,Mn=a,kn=null,!0):!1;default:return!1}}function pd(a){return(a.mode&1)!==0&&(a.flags&128)===0}function vd(a){if(Qt){var l=kn;if(l){var f=l;if(!oy(a,l)){if(pd(a))throw Error(t(418));l=Js(f.nextSibling);var g=Mn;l&&oy(a,l)?ay(g,f):(a.flags=a.flags&-4097|2,Qt=!1,Mn=a)}}else{if(pd(a))throw Error(t(418));a.flags=a.flags&-4097|2,Qt=!1,Mn=a}}}function ly(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Mn=a}function Vc(a){if(a!==Mn)return!1;if(!Qt)return ly(a),Qt=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!ad(a.type,a.memoizedProps)),l&&(l=kn)){if(pd(a))throw uy(),Error(t(418));for(;l;)ay(a,l),l=Js(l.nextSibling)}if(ly(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(l===0){kn=Js(a.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}a=a.nextSibling}kn=null}}else kn=Mn?Js(a.stateNode.nextSibling):null;return!0}function uy(){for(var a=kn;a;)a=Js(a.nextSibling)}function Jo(){kn=Mn=null,Qt=!1}function _d(a){ci===null?ci=[a]:ci.push(a)}var Hw=z.ReactCurrentBatchConfig;function iu(a,l,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var g=f.stateNode}if(!g)throw Error(t(147,a));var S=g,A=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===A?l.ref:(l=function(j){var Z=S.refs;j===null?delete Z[A]:Z[A]=j},l._stringRef=A,l)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function qc(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function cy(a){var l=a._init;return l(a._payload)}function hy(a){function l(ce,ae){if(a){var pe=ce.deletions;pe===null?(ce.deletions=[ae],ce.flags|=16):pe.push(ae)}}function f(ce,ae){if(!a)return null;for(;ae!==null;)l(ce,ae),ae=ae.sibling;return null}function g(ce,ae){for(ce=new Map;ae!==null;)ae.key!==null?ce.set(ae.key,ae):ce.set(ae.index,ae),ae=ae.sibling;return ce}function S(ce,ae){return ce=ca(ce,ae),ce.index=0,ce.sibling=null,ce}function A(ce,ae,pe){return ce.index=pe,a?(pe=ce.alternate,pe!==null?(pe=pe.index,pe<ae?(ce.flags|=2,ae):pe):(ce.flags|=2,ae)):(ce.flags|=1048576,ae)}function j(ce){return a&&ce.alternate===null&&(ce.flags|=2),ce}function Z(ce,ae,pe,Me){return ae===null||ae.tag!==6?(ae=op(pe,ce.mode,Me),ae.return=ce,ae):(ae=S(ae,pe),ae.return=ce,ae)}function re(ce,ae,pe,Me){var Je=pe.type;return Je===y?Pe(ce,ae,pe.props.children,Me,pe.key):ae!==null&&(ae.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===B&&cy(Je)===ae.type)?(Me=S(ae,pe.props),Me.ref=iu(ce,ae,pe),Me.return=ce,Me):(Me=_h(pe.type,pe.key,pe.props,null,ce.mode,Me),Me.ref=iu(ce,ae,pe),Me.return=ce,Me)}function me(ce,ae,pe,Me){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==pe.containerInfo||ae.stateNode.implementation!==pe.implementation?(ae=lp(pe,ce.mode,Me),ae.return=ce,ae):(ae=S(ae,pe.children||[]),ae.return=ce,ae)}function Pe(ce,ae,pe,Me,Je){return ae===null||ae.tag!==7?(ae=Ya(pe,ce.mode,Me,Je),ae.return=ce,ae):(ae=S(ae,pe),ae.return=ce,ae)}function Oe(ce,ae,pe){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return ae=op(""+ae,ce.mode,pe),ae.return=ce,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case O:return pe=_h(ae.type,ae.key,ae.props,null,ce.mode,pe),pe.ref=iu(ce,null,ae),pe.return=ce,pe;case U:return ae=lp(ae,ce.mode,pe),ae.return=ce,ae;case B:var Me=ae._init;return Oe(ce,Me(ae._payload),pe)}if(ur(ae)||Y(ae))return ae=Ya(ae,ce.mode,pe,null),ae.return=ce,ae;qc(ce,ae)}return null}function Ce(ce,ae,pe,Me){var Je=ae!==null?ae.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Je!==null?null:Z(ce,ae,""+pe,Me);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case O:return pe.key===Je?re(ce,ae,pe,Me):null;case U:return pe.key===Je?me(ce,ae,pe,Me):null;case B:return Je=pe._init,Ce(ce,ae,Je(pe._payload),Me)}if(ur(pe)||Y(pe))return Je!==null?null:Pe(ce,ae,pe,Me,null);qc(ce,pe)}return null}function Ge(ce,ae,pe,Me,Je){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return ce=ce.get(pe)||null,Z(ae,ce,""+Me,Je);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case O:return ce=ce.get(Me.key===null?pe:Me.key)||null,re(ae,ce,Me,Je);case U:return ce=ce.get(Me.key===null?pe:Me.key)||null,me(ae,ce,Me,Je);case B:var at=Me._init;return Ge(ce,ae,pe,at(Me._payload),Je)}if(ur(Me)||Y(Me))return ce=ce.get(pe)||null,Pe(ae,ce,Me,Je,null);qc(ae,Me)}return null}function $e(ce,ae,pe,Me){for(var Je=null,at=null,ot=ae,dt=ae=0,Br=null;ot!==null&&dt<pe.length;dt++){ot.index>dt?(Br=ot,ot=null):Br=ot.sibling;var Mt=Ce(ce,ot,pe[dt],Me);if(Mt===null){ot===null&&(ot=Br);break}a&&ot&&Mt.alternate===null&&l(ce,ot),ae=A(Mt,ae,dt),at===null?Je=Mt:at.sibling=Mt,at=Mt,ot=Br}if(dt===pe.length)return f(ce,ot),Qt&&Ga(ce,dt),Je;if(ot===null){for(;dt<pe.length;dt++)ot=Oe(ce,pe[dt],Me),ot!==null&&(ae=A(ot,ae,dt),at===null?Je=ot:at.sibling=ot,at=ot);return Qt&&Ga(ce,dt),Je}for(ot=g(ce,ot);dt<pe.length;dt++)Br=Ge(ot,ce,dt,pe[dt],Me),Br!==null&&(a&&Br.alternate!==null&&ot.delete(Br.key===null?dt:Br.key),ae=A(Br,ae,dt),at===null?Je=Br:at.sibling=Br,at=Br);return a&&ot.forEach(function(ha){return l(ce,ha)}),Qt&&Ga(ce,dt),Je}function Ze(ce,ae,pe,Me){var Je=Y(pe);if(typeof Je!="function")throw Error(t(150));if(pe=Je.call(pe),pe==null)throw Error(t(151));for(var at=Je=null,ot=ae,dt=ae=0,Br=null,Mt=pe.next();ot!==null&&!Mt.done;dt++,Mt=pe.next()){ot.index>dt?(Br=ot,ot=null):Br=ot.sibling;var ha=Ce(ce,ot,Mt.value,Me);if(ha===null){ot===null&&(ot=Br);break}a&&ot&&ha.alternate===null&&l(ce,ot),ae=A(ha,ae,dt),at===null?Je=ha:at.sibling=ha,at=ha,ot=Br}if(Mt.done)return f(ce,ot),Qt&&Ga(ce,dt),Je;if(ot===null){for(;!Mt.done;dt++,Mt=pe.next())Mt=Oe(ce,Mt.value,Me),Mt!==null&&(ae=A(Mt,ae,dt),at===null?Je=Mt:at.sibling=Mt,at=Mt);return Qt&&Ga(ce,dt),Je}for(ot=g(ce,ot);!Mt.done;dt++,Mt=pe.next())Mt=Ge(ot,ce,dt,Mt.value,Me),Mt!==null&&(a&&Mt.alternate!==null&&ot.delete(Mt.key===null?dt:Mt.key),ae=A(Mt,ae,dt),at===null?Je=Mt:at.sibling=Mt,at=Mt);return a&&ot.forEach(function(bT){return l(ce,bT)}),Qt&&Ga(ce,dt),Je}function pr(ce,ae,pe,Me){if(typeof pe=="object"&&pe!==null&&pe.type===y&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case O:e:{for(var Je=pe.key,at=ae;at!==null;){if(at.key===Je){if(Je=pe.type,Je===y){if(at.tag===7){f(ce,at.sibling),ae=S(at,pe.props.children),ae.return=ce,ce=ae;break e}}else if(at.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===B&&cy(Je)===at.type){f(ce,at.sibling),ae=S(at,pe.props),ae.ref=iu(ce,at,pe),ae.return=ce,ce=ae;break e}f(ce,at);break}else l(ce,at);at=at.sibling}pe.type===y?(ae=Ya(pe.props.children,ce.mode,Me,pe.key),ae.return=ce,ce=ae):(Me=_h(pe.type,pe.key,pe.props,null,ce.mode,Me),Me.ref=iu(ce,ae,pe),Me.return=ce,ce=Me)}return j(ce);case U:e:{for(at=pe.key;ae!==null;){if(ae.key===at)if(ae.tag===4&&ae.stateNode.containerInfo===pe.containerInfo&&ae.stateNode.implementation===pe.implementation){f(ce,ae.sibling),ae=S(ae,pe.children||[]),ae.return=ce,ce=ae;break e}else{f(ce,ae);break}else l(ce,ae);ae=ae.sibling}ae=lp(pe,ce.mode,Me),ae.return=ce,ce=ae}return j(ce);case B:return at=pe._init,pr(ce,ae,at(pe._payload),Me)}if(ur(pe))return $e(ce,ae,pe,Me);if(Y(pe))return Ze(ce,ae,pe,Me);qc(ce,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,ae!==null&&ae.tag===6?(f(ce,ae.sibling),ae=S(ae,pe),ae.return=ce,ce=ae):(f(ce,ae),ae=op(pe,ce.mode,Me),ae.return=ce,ce=ae),j(ce)):f(ce,ae)}return pr}var el=hy(!0),fy=hy(!1),Wc=ea(null),$c=null,tl=null,md=null;function yd(){md=tl=$c=null}function gd(a){var l=Wc.current;Vt(Wc),a._currentValue=l}function xd(a,l,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===f)break;a=a.return}}function rl(a,l){$c=a,md=tl=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(xn=!0),a.firstContext=null)}function Vn(a){var l=a._currentValue;if(md!==a)if(a={context:a,memoizedValue:l,next:null},tl===null){if($c===null)throw Error(t(308));tl=a,$c.dependencies={lanes:0,firstContext:a}}else tl=tl.next=a;return l}var Ha=null;function bd(a){Ha===null?Ha=[a]:Ha.push(a)}function dy(a,l,f,g){var S=l.interleaved;return S===null?(f.next=f,bd(l)):(f.next=S.next,S.next=f),l.interleaved=f,vs(a,g)}function vs(a,l){a.lanes|=l;var f=a.alternate;for(f!==null&&(f.lanes|=l),f=a,a=a.return;a!==null;)a.childLanes|=l,f=a.alternate,f!==null&&(f.childLanes|=l),f=a,a=a.return;return f.tag===3?f.stateNode:null}var na=!1;function wd(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function py(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function _s(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function ia(a,l,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Rt&2)!==0){var S=g.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),g.pending=l,vs(a,f)}return S=g.interleaved,S===null?(l.next=l,bd(g)):(l.next=S.next,S.next=l),g.interleaved=l,vs(a,f)}function Yc(a,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,rs(a,f)}}function vy(a,l){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var S=null,A=null;if(f=f.firstBaseUpdate,f!==null){do{var j={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};A===null?S=A=j:A=A.next=j,f=f.next}while(f!==null);A===null?S=A=l:A=A.next=l}else S=A=l;f={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:A,shared:g.shared,effects:g.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=l}function Kc(a,l,f,g){var S=a.updateQueue;na=!1;var A=S.firstBaseUpdate,j=S.lastBaseUpdate,Z=S.shared.pending;if(Z!==null){S.shared.pending=null;var re=Z,me=re.next;re.next=null,j===null?A=me:j.next=me,j=re;var Pe=a.alternate;Pe!==null&&(Pe=Pe.updateQueue,Z=Pe.lastBaseUpdate,Z!==j&&(Z===null?Pe.firstBaseUpdate=me:Z.next=me,Pe.lastBaseUpdate=re))}if(A!==null){var Oe=S.baseState;j=0,Pe=me=re=null,Z=A;do{var Ce=Z.lane,Ge=Z.eventTime;if((g&Ce)===Ce){Pe!==null&&(Pe=Pe.next={eventTime:Ge,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var $e=a,Ze=Z;switch(Ce=l,Ge=f,Ze.tag){case 1:if($e=Ze.payload,typeof $e=="function"){Oe=$e.call(Ge,Oe,Ce);break e}Oe=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Ze.payload,Ce=typeof $e=="function"?$e.call(Ge,Oe,Ce):$e,Ce==null)break e;Oe=q({},Oe,Ce);break e;case 2:na=!0}}Z.callback!==null&&Z.lane!==0&&(a.flags|=64,Ce=S.effects,Ce===null?S.effects=[Z]:Ce.push(Z))}else Ge={eventTime:Ge,lane:Ce,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Pe===null?(me=Pe=Ge,re=Oe):Pe=Pe.next=Ge,j|=Ce;if(Z=Z.next,Z===null){if(Z=S.shared.pending,Z===null)break;Ce=Z,Z=Ce.next,Ce.next=null,S.lastBaseUpdate=Ce,S.shared.pending=null}}while(!0);if(Pe===null&&(re=Oe),S.baseState=re,S.firstBaseUpdate=me,S.lastBaseUpdate=Pe,l=S.shared.interleaved,l!==null){S=l;do j|=S.lane,S=S.next;while(S!==l)}else A===null&&(S.shared.lanes=0);Va|=j,a.lanes=j,a.memoizedState=Oe}}function _y(a,l,f){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var g=a[l],S=g.callback;if(S!==null){if(g.callback=null,g=f,typeof S!="function")throw Error(t(191,S));S.call(g)}}}var su={},Li=ea(su),au=ea(su),ou=ea(su);function za(a){if(a===su)throw Error(t(174));return a}function Td(a,l){switch(Ht(ou,l),Ht(au,a),Ht(Li,su),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Ls(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Ls(l,a)}Vt(Li),Ht(Li,l)}function nl(){Vt(Li),Vt(au),Vt(ou)}function my(a){za(ou.current);var l=za(Li.current),f=Ls(l,a.type);l!==f&&(Ht(au,a),Ht(Li,f))}function Sd(a){au.current===a&&(Vt(Li),Vt(au))}var rr=ea(0);function Qc(a){for(var l=a;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ed=[];function Cd(){for(var a=0;a<Ed.length;a++)Ed[a]._workInProgressVersionPrimary=null;Ed.length=0}var Zc=z.ReactCurrentDispatcher,Ad=z.ReactCurrentBatchConfig,Xa=0,nr=null,Ar=null,Fr=null,Jc=!1,lu=!1,uu=0,zw=0;function Kr(){throw Error(t(321))}function Pd(a,l){if(l===null)return!1;for(var f=0;f<l.length&&f<a.length;f++)if(!Fe(a[f],l[f]))return!1;return!0}function Id(a,l,f,g,S,A){if(Xa=A,nr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Zc.current=a===null||a.memoizedState===null?Ww:$w,a=f(g,S),lu){A=0;do{if(lu=!1,uu=0,25<=A)throw Error(t(301));A+=1,Fr=Ar=null,l.updateQueue=null,Zc.current=Yw,a=f(g,S)}while(lu)}if(Zc.current=rh,l=Ar!==null&&Ar.next!==null,Xa=0,Fr=Ar=nr=null,Jc=!1,l)throw Error(t(300));return a}function Od(){var a=uu!==0;return uu=0,a}function Bi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?nr.memoizedState=Fr=a:Fr=Fr.next=a,Fr}function qn(){if(Ar===null){var a=nr.alternate;a=a!==null?a.memoizedState:null}else a=Ar.next;var l=Fr===null?nr.memoizedState:Fr.next;if(l!==null)Fr=l,Ar=a;else{if(a===null)throw Error(t(310));Ar=a,a={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Fr===null?nr.memoizedState=Fr=a:Fr=Fr.next=a}return Fr}function cu(a,l){return typeof l=="function"?l(a):l}function Rd(a){var l=qn(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var g=Ar,S=g.baseQueue,A=f.pending;if(A!==null){if(S!==null){var j=S.next;S.next=A.next,A.next=j}g.baseQueue=S=A,f.pending=null}if(S!==null){A=S.next,g=g.baseState;var Z=j=null,re=null,me=A;do{var Pe=me.lane;if((Xa&Pe)===Pe)re!==null&&(re=re.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),g=me.hasEagerState?me.eagerState:a(g,me.action);else{var Oe={lane:Pe,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};re===null?(Z=re=Oe,j=g):re=re.next=Oe,nr.lanes|=Pe,Va|=Pe}me=me.next}while(me!==null&&me!==A);re===null?j=g:re.next=Z,Fe(g,l.memoizedState)||(xn=!0),l.memoizedState=g,l.baseState=j,l.baseQueue=re,f.lastRenderedState=g}if(a=f.interleaved,a!==null){S=a;do A=S.lane,nr.lanes|=A,Va|=A,S=S.next;while(S!==a)}else S===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function Md(a){var l=qn(),f=l.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var g=f.dispatch,S=f.pending,A=l.memoizedState;if(S!==null){f.pending=null;var j=S=S.next;do A=a(A,j.action),j=j.next;while(j!==S);Fe(A,l.memoizedState)||(xn=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),f.lastRenderedState=A}return[A,g]}function yy(){}function gy(a,l){var f=nr,g=qn(),S=l(),A=!Fe(g.memoizedState,S);if(A&&(g.memoizedState=S,xn=!0),g=g.queue,kd(wy.bind(null,f,g,a),[a]),g.getSnapshot!==l||A||Fr!==null&&Fr.memoizedState.tag&1){if(f.flags|=2048,hu(9,by.bind(null,f,g,S,l),void 0,null),Lr===null)throw Error(t(349));(Xa&30)!==0||xy(f,l,S)}return S}function xy(a,l,f){a.flags|=16384,a={getSnapshot:l,value:f},l=nr.updateQueue,l===null?(l={lastEffect:null,stores:null},nr.updateQueue=l,l.stores=[a]):(f=l.stores,f===null?l.stores=[a]:f.push(a))}function by(a,l,f,g){l.value=f,l.getSnapshot=g,Ty(l)&&Sy(a)}function wy(a,l,f){return f(function(){Ty(l)&&Sy(a)})}function Ty(a){var l=a.getSnapshot;a=a.value;try{var f=l();return!Fe(a,f)}catch{return!0}}function Sy(a){var l=vs(a,1);l!==null&&pi(l,a,1,-1)}function Ey(a){var l=Bi();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cu,lastRenderedState:a},l.queue=a,a=a.dispatch=qw.bind(null,nr,a),[l.memoizedState,a]}function hu(a,l,f,g){return a={tag:a,create:l,destroy:f,deps:g,next:null},l=nr.updateQueue,l===null?(l={lastEffect:null,stores:null},nr.updateQueue=l,l.lastEffect=a.next=a):(f=l.lastEffect,f===null?l.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,l.lastEffect=a)),a}function Cy(){return qn().memoizedState}function eh(a,l,f,g){var S=Bi();nr.flags|=a,S.memoizedState=hu(1|l,f,void 0,g===void 0?null:g)}function th(a,l,f,g){var S=qn();g=g===void 0?null:g;var A=void 0;if(Ar!==null){var j=Ar.memoizedState;if(A=j.destroy,g!==null&&Pd(g,j.deps)){S.memoizedState=hu(l,f,A,g);return}}nr.flags|=a,S.memoizedState=hu(1|l,f,A,g)}function Ay(a,l){return eh(8390656,8,a,l)}function kd(a,l){return th(2048,8,a,l)}function Py(a,l){return th(4,2,a,l)}function Iy(a,l){return th(4,4,a,l)}function Oy(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Ry(a,l,f){return f=f!=null?f.concat([a]):null,th(4,4,Oy.bind(null,l,a),f)}function Dd(){}function My(a,l){var f=qn();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&Pd(l,g[1])?g[0]:(f.memoizedState=[a,l],a)}function ky(a,l){var f=qn();l=l===void 0?null:l;var g=f.memoizedState;return g!==null&&l!==null&&Pd(l,g[1])?g[0]:(a=a(),f.memoizedState=[a,l],a)}function Dy(a,l,f){return(Xa&21)===0?(a.baseState&&(a.baseState=!1,xn=!0),a.memoizedState=f):(Fe(f,l)||(f=bc(),nr.lanes|=f,Va|=f,a.baseState=!0),l)}function Xw(a,l){var f=Dt;Dt=f!==0&&4>f?f:4,a(!0);var g=Ad.transition;Ad.transition={};try{a(!1),l()}finally{Dt=f,Ad.transition=g}}function Ny(){return qn().memoizedState}function Vw(a,l,f){var g=la(a);if(f={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null},Fy(a))Ly(l,f);else if(f=dy(a,l,f,g),f!==null){var S=an();pi(f,a,g,S),By(f,l,g)}}function qw(a,l,f){var g=la(a),S={lane:g,action:f,hasEagerState:!1,eagerState:null,next:null};if(Fy(a))Ly(l,S);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var j=l.lastRenderedState,Z=A(j,f);if(S.hasEagerState=!0,S.eagerState=Z,Fe(Z,j)){var re=l.interleaved;re===null?(S.next=S,bd(l)):(S.next=re.next,re.next=S),l.interleaved=S;return}}catch{}finally{}f=dy(a,l,S,g),f!==null&&(S=an(),pi(f,a,g,S),By(f,l,g))}}function Fy(a){var l=a.alternate;return a===nr||l!==null&&l===nr}function Ly(a,l){lu=Jc=!0;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}function By(a,l,f){if((f&4194240)!==0){var g=l.lanes;g&=a.pendingLanes,f|=g,l.lanes=f,rs(a,f)}}var rh={readContext:Vn,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},Ww={readContext:Vn,useCallback:function(a,l){return Bi().memoizedState=[a,l===void 0?null:l],a},useContext:Vn,useEffect:Ay,useImperativeHandle:function(a,l,f){return f=f!=null?f.concat([a]):null,eh(4194308,4,Oy.bind(null,l,a),f)},useLayoutEffect:function(a,l){return eh(4194308,4,a,l)},useInsertionEffect:function(a,l){return eh(4,2,a,l)},useMemo:function(a,l){var f=Bi();return l=l===void 0?null:l,a=a(),f.memoizedState=[a,l],a},useReducer:function(a,l,f){var g=Bi();return l=f!==void 0?f(l):l,g.memoizedState=g.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},g.queue=a,a=a.dispatch=Vw.bind(null,nr,a),[g.memoizedState,a]},useRef:function(a){var l=Bi();return a={current:a},l.memoizedState=a},useState:Ey,useDebugValue:Dd,useDeferredValue:function(a){return Bi().memoizedState=a},useTransition:function(){var a=Ey(!1),l=a[0];return a=Xw.bind(null,a[1]),Bi().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,f){var g=nr,S=Bi();if(Qt){if(f===void 0)throw Error(t(407));f=f()}else{if(f=l(),Lr===null)throw Error(t(349));(Xa&30)!==0||xy(g,l,f)}S.memoizedState=f;var A={value:f,getSnapshot:l};return S.queue=A,Ay(wy.bind(null,g,A,a),[a]),g.flags|=2048,hu(9,by.bind(null,g,A,f,l),void 0,null),f},useId:function(){var a=Bi(),l=Lr.identifierPrefix;if(Qt){var f=ps,g=ds;f=(g&~(1<<32-nn(g)-1)).toString(32)+f,l=":"+l+"R"+f,f=uu++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=zw++,l=":"+l+"r"+f.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},$w={readContext:Vn,useCallback:My,useContext:Vn,useEffect:kd,useImperativeHandle:Ry,useInsertionEffect:Py,useLayoutEffect:Iy,useMemo:ky,useReducer:Rd,useRef:Cy,useState:function(){return Rd(cu)},useDebugValue:Dd,useDeferredValue:function(a){var l=qn();return Dy(l,Ar.memoizedState,a)},useTransition:function(){var a=Rd(cu)[0],l=qn().memoizedState;return[a,l]},useMutableSource:yy,useSyncExternalStore:gy,useId:Ny,unstable_isNewReconciler:!1},Yw={readContext:Vn,useCallback:My,useContext:Vn,useEffect:kd,useImperativeHandle:Ry,useInsertionEffect:Py,useLayoutEffect:Iy,useMemo:ky,useReducer:Md,useRef:Cy,useState:function(){return Md(cu)},useDebugValue:Dd,useDeferredValue:function(a){var l=qn();return Ar===null?l.memoizedState=a:Dy(l,Ar.memoizedState,a)},useTransition:function(){var a=Md(cu)[0],l=qn().memoizedState;return[a,l]},useMutableSource:yy,useSyncExternalStore:gy,useId:Ny,unstable_isNewReconciler:!1};function hi(a,l){if(a&&a.defaultProps){l=q({},l),a=a.defaultProps;for(var f in a)l[f]===void 0&&(l[f]=a[f]);return l}return l}function Nd(a,l,f,g){l=a.memoizedState,f=f(g,l),f=f==null?l:q({},l,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var nh={isMounted:function(a){return(a=a._reactInternals)?dn(a)===a:!1},enqueueSetState:function(a,l,f){a=a._reactInternals;var g=an(),S=la(a),A=_s(g,S);A.payload=l,f!=null&&(A.callback=f),l=ia(a,A,S),l!==null&&(pi(l,a,S,g),Yc(l,a,S))},enqueueReplaceState:function(a,l,f){a=a._reactInternals;var g=an(),S=la(a),A=_s(g,S);A.tag=1,A.payload=l,f!=null&&(A.callback=f),l=ia(a,A,S),l!==null&&(pi(l,a,S,g),Yc(l,a,S))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var f=an(),g=la(a),S=_s(f,g);S.tag=2,l!=null&&(S.callback=l),l=ia(a,S,g),l!==null&&(pi(l,a,g,f),Yc(l,a,g))}};function jy(a,l,f,g,S,A,j){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,A,j):l.prototype&&l.prototype.isPureReactComponent?!qe(f,g)||!qe(S,A):!0}function Uy(a,l,f){var g=!1,S=ta,A=l.contextType;return typeof A=="object"&&A!==null?A=Vn(A):(S=gn(l)?ja:Yr.current,g=l.contextTypes,A=(g=g!=null)?Ko(a,S):ta),l=new l(f,A),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=nh,a.stateNode=l,l._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=A),l}function Gy(a,l,f,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==a&&nh.enqueueReplaceState(l,l.state,null)}function Fd(a,l,f,g){var S=a.stateNode;S.props=f,S.state=a.memoizedState,S.refs={},wd(a);var A=l.contextType;typeof A=="object"&&A!==null?S.context=Vn(A):(A=gn(l)?ja:Yr.current,S.context=Ko(a,A)),S.state=a.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Nd(a,l,A,f),S.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(l=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),l!==S.state&&nh.enqueueReplaceState(S,S.state,null),Kc(a,f,S,g),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function il(a,l){try{var f="",g=l;do f+=fe(g),g=g.return;while(g);var S=f}catch(A){S=`
Error generating stack: `+A.message+`
`+A.stack}return{value:a,source:l,stack:S,digest:null}}function Ld(a,l,f){return{value:a,source:null,stack:f??null,digest:l??null}}function Bd(a,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var Kw=typeof WeakMap=="function"?WeakMap:Map;function Hy(a,l,f){f=_s(-1,f),f.tag=3,f.payload={element:null};var g=l.value;return f.callback=function(){ch||(ch=!0,Jd=g),Bd(a,l)},f}function zy(a,l,f){f=_s(-1,f),f.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var S=l.value;f.payload=function(){return g(S)},f.callback=function(){Bd(a,l)}}var A=a.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(f.callback=function(){Bd(a,l),typeof g!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var j=l.stack;this.componentDidCatch(l.value,{componentStack:j!==null?j:""})}),f}function Xy(a,l,f){var g=a.pingCache;if(g===null){g=a.pingCache=new Kw;var S=new Set;g.set(l,S)}else S=g.get(l),S===void 0&&(S=new Set,g.set(l,S));S.has(f)||(S.add(f),a=cT.bind(null,a,l,f),l.then(a,a))}function Vy(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function qy(a,l,f,g,S){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=_s(-1,1),l.tag=2,ia(f,l,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var Qw=z.ReactCurrentOwner,xn=!1;function sn(a,l,f,g){l.child=a===null?fy(l,null,f,g):el(l,a.child,f,g)}function Wy(a,l,f,g,S){f=f.render;var A=l.ref;return rl(l,S),g=Id(a,l,f,g,A,S),f=Od(),a!==null&&!xn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,ms(a,l,S)):(Qt&&f&&fd(l),l.flags|=1,sn(a,l,g,S),l.child)}function $y(a,l,f,g,S){if(a===null){var A=f.type;return typeof A=="function"&&!ap(A)&&A.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=A,Yy(a,l,A,g,S)):(a=_h(f.type,null,g,l,l.mode,S),a.ref=l.ref,a.return=l,l.child=a)}if(A=a.child,(a.lanes&S)===0){var j=A.memoizedProps;if(f=f.compare,f=f!==null?f:qe,f(j,g)&&a.ref===l.ref)return ms(a,l,S)}return l.flags|=1,a=ca(A,g),a.ref=l.ref,a.return=l,l.child=a}function Yy(a,l,f,g,S){if(a!==null){var A=a.memoizedProps;if(qe(A,g)&&a.ref===l.ref)if(xn=!1,l.pendingProps=g=A,(a.lanes&S)!==0)(a.flags&131072)!==0&&(xn=!0);else return l.lanes=a.lanes,ms(a,l,S)}return jd(a,l,f,g,S)}function Ky(a,l,f){var g=l.pendingProps,S=g.children,A=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(al,Dn),Dn|=f;else{if((f&1073741824)===0)return a=A!==null?A.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Ht(al,Dn),Dn|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=A!==null?A.baseLanes:f,Ht(al,Dn),Dn|=g}else A!==null?(g=A.baseLanes|f,l.memoizedState=null):g=f,Ht(al,Dn),Dn|=g;return sn(a,l,S,f),l.child}function Qy(a,l){var f=l.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function jd(a,l,f,g,S){var A=gn(f)?ja:Yr.current;return A=Ko(l,A),rl(l,S),f=Id(a,l,f,g,A,S),g=Od(),a!==null&&!xn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~S,ms(a,l,S)):(Qt&&g&&fd(l),l.flags|=1,sn(a,l,f,S),l.child)}function Zy(a,l,f,g,S){if(gn(f)){var A=!0;Gc(l)}else A=!1;if(rl(l,S),l.stateNode===null)sh(a,l),Uy(l,f,g),Fd(l,f,g,S),g=!0;else if(a===null){var j=l.stateNode,Z=l.memoizedProps;j.props=Z;var re=j.context,me=f.contextType;typeof me=="object"&&me!==null?me=Vn(me):(me=gn(f)?ja:Yr.current,me=Ko(l,me));var Pe=f.getDerivedStateFromProps,Oe=typeof Pe=="function"||typeof j.getSnapshotBeforeUpdate=="function";Oe||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(Z!==g||re!==me)&&Gy(l,j,g,me),na=!1;var Ce=l.memoizedState;j.state=Ce,Kc(l,g,j,S),re=l.memoizedState,Z!==g||Ce!==re||yn.current||na?(typeof Pe=="function"&&(Nd(l,f,Pe,g),re=l.memoizedState),(Z=na||jy(l,f,Z,g,Ce,re,me))?(Oe||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(l.flags|=4194308)):(typeof j.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=re),j.props=g,j.state=re,j.context=me,g=Z):(typeof j.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{j=l.stateNode,py(a,l),Z=l.memoizedProps,me=l.type===l.elementType?Z:hi(l.type,Z),j.props=me,Oe=l.pendingProps,Ce=j.context,re=f.contextType,typeof re=="object"&&re!==null?re=Vn(re):(re=gn(f)?ja:Yr.current,re=Ko(l,re));var Ge=f.getDerivedStateFromProps;(Pe=typeof Ge=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(Z!==Oe||Ce!==re)&&Gy(l,j,g,re),na=!1,Ce=l.memoizedState,j.state=Ce,Kc(l,g,j,S);var $e=l.memoizedState;Z!==Oe||Ce!==$e||yn.current||na?(typeof Ge=="function"&&(Nd(l,f,Ge,g),$e=l.memoizedState),(me=na||jy(l,f,me,g,Ce,$e,re)||!1)?(Pe||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(g,$e,re),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(g,$e,re)),typeof j.componentDidUpdate=="function"&&(l.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof j.componentDidUpdate!="function"||Z===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Z===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=$e),j.props=g,j.state=$e,j.context=re,g=me):(typeof j.componentDidUpdate!="function"||Z===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Z===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=1024),g=!1)}return Ud(a,l,f,g,A,S)}function Ud(a,l,f,g,S,A){Qy(a,l);var j=(l.flags&128)!==0;if(!g&&!j)return S&&ny(l,f,!1),ms(a,l,A);g=l.stateNode,Qw.current=l;var Z=j&&typeof f.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,a!==null&&j?(l.child=el(l,a.child,null,A),l.child=el(l,null,Z,A)):sn(a,l,Z,A),l.memoizedState=g.state,S&&ny(l,f,!0),l.child}function Jy(a){var l=a.stateNode;l.pendingContext?ty(a,l.pendingContext,l.pendingContext!==l.context):l.context&&ty(a,l.context,!1),Td(a,l.containerInfo)}function eg(a,l,f,g,S){return Jo(),_d(S),l.flags|=256,sn(a,l,f,g),l.child}var Gd={dehydrated:null,treeContext:null,retryLane:0};function Hd(a){return{baseLanes:a,cachePool:null,transitions:null}}function tg(a,l,f){var g=l.pendingProps,S=rr.current,A=!1,j=(l.flags&128)!==0,Z;if((Z=j)||(Z=a!==null&&a.memoizedState===null?!1:(S&2)!==0),Z?(A=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),Ht(rr,S&1),a===null)return vd(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(j=g.children,a=g.fallback,A?(g=l.mode,A=l.child,j={mode:"hidden",children:j},(g&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=j):A=mh(j,g,0,null),a=Ya(a,g,f,null),A.return=l,a.return=l,A.sibling=a,l.child=A,l.child.memoizedState=Hd(f),l.memoizedState=Gd,a):zd(l,j));if(S=a.memoizedState,S!==null&&(Z=S.dehydrated,Z!==null))return Zw(a,l,j,g,Z,S,f);if(A){A=g.fallback,j=l.mode,S=a.child,Z=S.sibling;var re={mode:"hidden",children:g.children};return(j&1)===0&&l.child!==S?(g=l.child,g.childLanes=0,g.pendingProps=re,l.deletions=null):(g=ca(S,re),g.subtreeFlags=S.subtreeFlags&14680064),Z!==null?A=ca(Z,A):(A=Ya(A,j,f,null),A.flags|=2),A.return=l,g.return=l,g.sibling=A,l.child=g,g=A,A=l.child,j=a.child.memoizedState,j=j===null?Hd(f):{baseLanes:j.baseLanes|f,cachePool:null,transitions:j.transitions},A.memoizedState=j,A.childLanes=a.childLanes&~f,l.memoizedState=Gd,g}return A=a.child,a=A.sibling,g=ca(A,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=f),g.return=l,g.sibling=null,a!==null&&(f=l.deletions,f===null?(l.deletions=[a],l.flags|=16):f.push(a)),l.child=g,l.memoizedState=null,g}function zd(a,l){return l=mh({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function ih(a,l,f,g){return g!==null&&_d(g),el(l,a.child,null,f),a=zd(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function Zw(a,l,f,g,S,A,j){if(f)return l.flags&256?(l.flags&=-257,g=Ld(Error(t(422))),ih(a,l,j,g)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(A=g.fallback,S=l.mode,g=mh({mode:"visible",children:g.children},S,0,null),A=Ya(A,S,j,null),A.flags|=2,g.return=l,A.return=l,g.sibling=A,l.child=g,(l.mode&1)!==0&&el(l,a.child,null,j),l.child.memoizedState=Hd(j),l.memoizedState=Gd,A);if((l.mode&1)===0)return ih(a,l,j,null);if(S.data==="$!"){if(g=S.nextSibling&&S.nextSibling.dataset,g)var Z=g.dgst;return g=Z,A=Error(t(419)),g=Ld(A,g,void 0),ih(a,l,j,g)}if(Z=(j&a.childLanes)!==0,xn||Z){if(g=Lr,g!==null){switch(j&-j){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(g.suspendedLanes|j))!==0?0:S,S!==0&&S!==A.retryLane&&(A.retryLane=S,vs(a,S),pi(g,a,S,-1))}return sp(),g=Ld(Error(t(421))),ih(a,l,j,g)}return S.data==="$?"?(l.flags|=128,l.child=a.child,l=hT.bind(null,a),S._reactRetry=l,null):(a=A.treeContext,kn=Js(S.nextSibling),Mn=l,Qt=!0,ci=null,a!==null&&(zn[Xn++]=ds,zn[Xn++]=ps,zn[Xn++]=Ua,ds=a.id,ps=a.overflow,Ua=l),l=zd(l,g.children),l.flags|=4096,l)}function rg(a,l,f){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),xd(a.return,l,f)}function Xd(a,l,f,g,S){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:S}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=f,A.tailMode=S)}function ng(a,l,f){var g=l.pendingProps,S=g.revealOrder,A=g.tail;if(sn(a,l,g.children,f),g=rr.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&rg(a,f,l);else if(a.tag===19)rg(a,f,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(Ht(rr,g),(l.mode&1)===0)l.memoizedState=null;else switch(S){case"forwards":for(f=l.child,S=null;f!==null;)a=f.alternate,a!==null&&Qc(a)===null&&(S=f),f=f.sibling;f=S,f===null?(S=l.child,l.child=null):(S=f.sibling,f.sibling=null),Xd(l,!1,S,f,A);break;case"backwards":for(f=null,S=l.child,l.child=null;S!==null;){if(a=S.alternate,a!==null&&Qc(a)===null){l.child=S;break}a=S.sibling,S.sibling=f,f=S,S=a}Xd(l,!0,f,null,A);break;case"together":Xd(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function sh(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function ms(a,l,f){if(a!==null&&(l.dependencies=a.dependencies),Va|=l.lanes,(f&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,f=ca(a,a.pendingProps),l.child=f,f.return=l;a.sibling!==null;)a=a.sibling,f=f.sibling=ca(a,a.pendingProps),f.return=l;f.sibling=null}return l.child}function Jw(a,l,f){switch(l.tag){case 3:Jy(l),Jo();break;case 5:my(l);break;case 1:gn(l.type)&&Gc(l);break;case 4:Td(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,S=l.memoizedProps.value;Ht(Wc,g._currentValue),g._currentValue=S;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(Ht(rr,rr.current&1),l.flags|=128,null):(f&l.child.childLanes)!==0?tg(a,l,f):(Ht(rr,rr.current&1),a=ms(a,l,f),a!==null?a.sibling:null);Ht(rr,rr.current&1);break;case 19:if(g=(f&l.childLanes)!==0,(a.flags&128)!==0){if(g)return ng(a,l,f);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Ht(rr,rr.current),g)break;return null;case 22:case 23:return l.lanes=0,Ky(a,l,f)}return ms(a,l,f)}var ig,Vd,sg,ag;ig=function(a,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},Vd=function(){},sg=function(a,l,f,g){var S=a.memoizedProps;if(S!==g){a=l.stateNode,za(Li.current);var A=null;switch(f){case"input":S=Xe(a,S),g=Xe(a,g),A=[];break;case"select":S=q({},S,{value:void 0}),g=q({},g,{value:void 0}),A=[];break;case"textarea":S=Wt(a,S),g=Wt(a,g),A=[];break;default:typeof S.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=Bc)}de(f,g);var j;f=null;for(me in S)if(!g.hasOwnProperty(me)&&S.hasOwnProperty(me)&&S[me]!=null)if(me==="style"){var Z=S[me];for(j in Z)Z.hasOwnProperty(j)&&(f||(f={}),f[j]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(i.hasOwnProperty(me)?A||(A=[]):(A=A||[]).push(me,null));for(me in g){var re=g[me];if(Z=S?.[me],g.hasOwnProperty(me)&&re!==Z&&(re!=null||Z!=null))if(me==="style")if(Z){for(j in Z)!Z.hasOwnProperty(j)||re&&re.hasOwnProperty(j)||(f||(f={}),f[j]="");for(j in re)re.hasOwnProperty(j)&&Z[j]!==re[j]&&(f||(f={}),f[j]=re[j])}else f||(A||(A=[]),A.push(me,f)),f=re;else me==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,Z=Z?Z.__html:void 0,re!=null&&Z!==re&&(A=A||[]).push(me,re)):me==="children"?typeof re!="string"&&typeof re!="number"||(A=A||[]).push(me,""+re):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(i.hasOwnProperty(me)?(re!=null&&me==="onScroll"&&Xt("scroll",a),A||Z===re||(A=[])):(A=A||[]).push(me,re))}f&&(A=A||[]).push("style",f);var me=A;(l.updateQueue=me)&&(l.flags|=4)}},ag=function(a,l,f,g){f!==g&&(l.flags|=4)};function fu(a,l){if(!Qt)switch(a.tailMode){case"hidden":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Qr(a){var l=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(l)for(var S=a.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags&14680064,g|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=g,a.childLanes=f,l}function eT(a,l,f){var g=l.pendingProps;switch(dd(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(l),null;case 1:return gn(l.type)&&Uc(),Qr(l),null;case 3:return g=l.stateNode,nl(),Vt(yn),Vt(Yr),Cd(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(Vc(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,ci!==null&&(rp(ci),ci=null))),Vd(a,l),Qr(l),null;case 5:Sd(l);var S=za(ou.current);if(f=l.type,a!==null&&l.stateNode!=null)sg(a,l,f,g,S),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return Qr(l),null}if(a=za(Li.current),Vc(l)){g=l.stateNode,f=l.type;var A=l.memoizedProps;switch(g[Fi]=l,g[ru]=A,a=(l.mode&1)!==0,f){case"dialog":Xt("cancel",g),Xt("close",g);break;case"iframe":case"object":case"embed":Xt("load",g);break;case"video":case"audio":for(S=0;S<Jl.length;S++)Xt(Jl[S],g);break;case"source":Xt("error",g);break;case"img":case"image":case"link":Xt("error",g),Xt("load",g);break;case"details":Xt("toggle",g);break;case"input":ze(g,A),Xt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!A.multiple},Xt("invalid",g);break;case"textarea":Mr(g,A),Xt("invalid",g)}de(f,A),S=null;for(var j in A)if(A.hasOwnProperty(j)){var Z=A[j];j==="children"?typeof Z=="string"?g.textContent!==Z&&(A.suppressHydrationWarning!==!0&&Lc(g.textContent,Z,a),S=["children",Z]):typeof Z=="number"&&g.textContent!==""+Z&&(A.suppressHydrationWarning!==!0&&Lc(g.textContent,Z,a),S=["children",""+Z]):i.hasOwnProperty(j)&&Z!=null&&j==="onScroll"&&Xt("scroll",g)}switch(f){case"input":Ue(g),bt(g,A,!0);break;case"textarea":Ue(g),Qe(g);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(g.onclick=Bc)}g=S,l.updateQueue=g,g!==null&&(l.flags|=4)}else{j=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Sr(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=j.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=j.createElement(f,{is:g.is}):(a=j.createElement(f),f==="select"&&(j=a,g.multiple?j.multiple=!0:g.size&&(j.size=g.size))):a=j.createElementNS(a,f),a[Fi]=l,a[ru]=g,ig(a,l,!1,!1),l.stateNode=a;e:{switch(j=_e(f,g),f){case"dialog":Xt("cancel",a),Xt("close",a),S=g;break;case"iframe":case"object":case"embed":Xt("load",a),S=g;break;case"video":case"audio":for(S=0;S<Jl.length;S++)Xt(Jl[S],a);S=g;break;case"source":Xt("error",a),S=g;break;case"img":case"image":case"link":Xt("error",a),Xt("load",a),S=g;break;case"details":Xt("toggle",a),S=g;break;case"input":ze(a,g),S=Xe(a,g),Xt("invalid",a);break;case"option":S=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},S=q({},g,{value:void 0}),Xt("invalid",a);break;case"textarea":Mr(a,g),S=Wt(a,g),Xt("invalid",a);break;default:S=g}de(f,S),Z=S;for(A in Z)if(Z.hasOwnProperty(A)){var re=Z[A];A==="style"?fn(a,re):A==="dangerouslySetInnerHTML"?(re=re?re.__html:void 0,re!=null&&Ei(a,re)):A==="children"?typeof re=="string"?(f!=="textarea"||re!=="")&&Un(a,re):typeof re=="number"&&Un(a,""+re):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?re!=null&&A==="onScroll"&&Xt("scroll",a):re!=null&&D(a,A,re,j))}switch(f){case"input":Ue(a),bt(a,g,!1);break;case"textarea":Ue(a),Qe(a);break;case"option":g.value!=null&&a.setAttribute("value",""+Ae(g.value));break;case"select":a.multiple=!!g.multiple,A=g.value,A!=null?tr(a,!!g.multiple,A,!1):g.defaultValue!=null&&tr(a,!!g.multiple,g.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=Bc)}switch(f){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Qr(l),null;case 6:if(a&&l.stateNode!=null)ag(a,l,a.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(f=za(ou.current),za(Li.current),Vc(l)){if(g=l.stateNode,f=l.memoizedProps,g[Fi]=l,(A=g.nodeValue!==f)&&(a=Mn,a!==null))switch(a.tag){case 3:Lc(g.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Lc(g.nodeValue,f,(a.mode&1)!==0)}A&&(l.flags|=4)}else g=(f.nodeType===9?f:f.ownerDocument).createTextNode(g),g[Fi]=l,l.stateNode=g}return Qr(l),null;case 13:if(Vt(rr),g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Qt&&kn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)uy(),Jo(),l.flags|=98560,A=!1;else if(A=Vc(l),g!==null&&g.dehydrated!==null){if(a===null){if(!A)throw Error(t(318));if(A=l.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(t(317));A[Fi]=l}else Jo(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Qr(l),A=!1}else ci!==null&&(rp(ci),ci=null),A=!0;if(!A)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=f,l):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(rr.current&1)!==0?Pr===0&&(Pr=3):sp())),l.updateQueue!==null&&(l.flags|=4),Qr(l),null);case 4:return nl(),Vd(a,l),a===null&&eu(l.stateNode.containerInfo),Qr(l),null;case 10:return gd(l.type._context),Qr(l),null;case 17:return gn(l.type)&&Uc(),Qr(l),null;case 19:if(Vt(rr),A=l.memoizedState,A===null)return Qr(l),null;if(g=(l.flags&128)!==0,j=A.rendering,j===null)if(g)fu(A,!1);else{if(Pr!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(j=Qc(a),j!==null){for(l.flags|=128,fu(A,!1),g=j.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=f,f=l.child;f!==null;)A=f,a=g,A.flags&=14680066,j=A.alternate,j===null?(A.childLanes=0,A.lanes=a,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=j.childLanes,A.lanes=j.lanes,A.child=j.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=j.memoizedProps,A.memoizedState=j.memoizedState,A.updateQueue=j.updateQueue,A.type=j.type,a=j.dependencies,A.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return Ht(rr,rr.current&1|2),l.child}a=a.sibling}A.tail!==null&&Yt()>ol&&(l.flags|=128,g=!0,fu(A,!1),l.lanes=4194304)}else{if(!g)if(a=Qc(j),a!==null){if(l.flags|=128,g=!0,f=a.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),fu(A,!0),A.tail===null&&A.tailMode==="hidden"&&!j.alternate&&!Qt)return Qr(l),null}else 2*Yt()-A.renderingStartTime>ol&&f!==1073741824&&(l.flags|=128,g=!0,fu(A,!1),l.lanes=4194304);A.isBackwards?(j.sibling=l.child,l.child=j):(f=A.last,f!==null?f.sibling=j:l.child=j,A.last=j)}return A.tail!==null?(l=A.tail,A.rendering=l,A.tail=l.sibling,A.renderingStartTime=Yt(),l.sibling=null,f=rr.current,Ht(rr,g?f&1|2:f&1),l):(Qr(l),null);case 22:case 23:return ip(),g=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Dn&1073741824)!==0&&(Qr(l),l.subtreeFlags&6&&(l.flags|=8192)):Qr(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function tT(a,l){switch(dd(l),l.tag){case 1:return gn(l.type)&&Uc(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return nl(),Vt(yn),Vt(Yr),Cd(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Sd(l),null;case 13:if(Vt(rr),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));Jo()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Vt(rr),null;case 4:return nl(),null;case 10:return gd(l.type._context),null;case 22:case 23:return ip(),null;case 24:return null;default:return null}}var ah=!1,Zr=!1,rT=typeof WeakSet=="function"?WeakSet:Set,We=null;function sl(a,l){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){or(a,l,g)}else f.current=null}function qd(a,l,f){try{f()}catch(g){or(a,l,g)}}var og=!1;function nT(a,l){if(id=Ys,a=ht(),yt(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var S=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{f.nodeType,A.nodeType}catch{f=null;break e}var j=0,Z=-1,re=-1,me=0,Pe=0,Oe=a,Ce=null;t:for(;;){for(var Ge;Oe!==f||S!==0&&Oe.nodeType!==3||(Z=j+S),Oe!==A||g!==0&&Oe.nodeType!==3||(re=j+g),Oe.nodeType===3&&(j+=Oe.nodeValue.length),(Ge=Oe.firstChild)!==null;)Ce=Oe,Oe=Ge;for(;;){if(Oe===a)break t;if(Ce===f&&++me===S&&(Z=j),Ce===A&&++Pe===g&&(re=j),(Ge=Oe.nextSibling)!==null)break;Oe=Ce,Ce=Oe.parentNode}Oe=Ge}f=Z===-1||re===-1?null:{start:Z,end:re}}else f=null}f=f||{start:0,end:0}}else f=null;for(sd={focusedElem:a,selectionRange:f},Ys=!1,We=l;We!==null;)if(l=We,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,We=a;else for(;We!==null;){l=We;try{var $e=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if($e!==null){var Ze=$e.memoizedProps,pr=$e.memoizedState,ce=l.stateNode,ae=ce.getSnapshotBeforeUpdate(l.elementType===l.type?Ze:hi(l.type,Ze),pr);ce.__reactInternalSnapshotBeforeUpdate=ae}break;case 3:var pe=l.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Me){or(l,l.return,Me)}if(a=l.sibling,a!==null){a.return=l.return,We=a;break}We=l.return}return $e=og,og=!1,$e}function du(a,l,f){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&a)===a){var A=S.destroy;S.destroy=void 0,A!==void 0&&qd(l,f,A)}S=S.next}while(S!==g)}}function oh(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&a)===a){var g=f.create;f.destroy=g()}f=f.next}while(f!==l)}}function Wd(a){var l=a.ref;if(l!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof l=="function"?l(a):l.current=a}}function lg(a){var l=a.alternate;l!==null&&(a.alternate=null,lg(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[Fi],delete l[ru],delete l[ud],delete l[jw],delete l[Uw])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function ug(a){return a.tag===5||a.tag===3||a.tag===4}function cg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ug(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function $d(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(a,l):f.insertBefore(a,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(a,f)):(l=f,l.appendChild(a)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=Bc));else if(g!==4&&(a=a.child,a!==null))for($d(a,l,f),a=a.sibling;a!==null;)$d(a,l,f),a=a.sibling}function Yd(a,l,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?f.insertBefore(a,l):f.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(Yd(a,l,f),a=a.sibling;a!==null;)Yd(a,l,f),a=a.sibling}var Hr=null,fi=!1;function sa(a,l,f){for(f=f.child;f!==null;)hg(a,l,f),f=f.sibling}function hg(a,l,f){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Oo,f)}catch{}switch(f.tag){case 5:Zr||sl(f,l);case 6:var g=Hr,S=fi;Hr=null,sa(a,l,f),Hr=g,fi=S,Hr!==null&&(fi?(a=Hr,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):Hr.removeChild(f.stateNode));break;case 18:Hr!==null&&(fi?(a=Hr,f=f.stateNode,a.nodeType===8?ld(a.parentNode,f):a.nodeType===1&&ld(a,f),ns(a)):ld(Hr,f.stateNode));break;case 4:g=Hr,S=fi,Hr=f.stateNode.containerInfo,fi=!0,sa(a,l,f),Hr=g,fi=S;break;case 0:case 11:case 14:case 15:if(!Zr&&(g=f.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){S=g=g.next;do{var A=S,j=A.destroy;A=A.tag,j!==void 0&&((A&2)!==0||(A&4)!==0)&&qd(f,l,j),S=S.next}while(S!==g)}sa(a,l,f);break;case 1:if(!Zr&&(sl(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=f.memoizedProps,g.state=f.memoizedState,g.componentWillUnmount()}catch(Z){or(f,l,Z)}sa(a,l,f);break;case 21:sa(a,l,f);break;case 22:f.mode&1?(Zr=(g=Zr)||f.memoizedState!==null,sa(a,l,f),Zr=g):sa(a,l,f);break;default:sa(a,l,f)}}function fg(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new rT),l.forEach(function(g){var S=fT.bind(null,a,g);f.has(g)||(f.add(g),g.then(S,S))})}}function di(a,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var S=f[g];try{var A=a,j=l,Z=j;e:for(;Z!==null;){switch(Z.tag){case 5:Hr=Z.stateNode,fi=!1;break e;case 3:Hr=Z.stateNode.containerInfo,fi=!0;break e;case 4:Hr=Z.stateNode.containerInfo,fi=!0;break e}Z=Z.return}if(Hr===null)throw Error(t(160));hg(A,j,S),Hr=null,fi=!1;var re=S.alternate;re!==null&&(re.return=null),S.return=null}catch(me){or(S,l,me)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)dg(l,a),l=l.sibling}function dg(a,l){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(di(l,a),ji(a),g&4){try{du(3,a,a.return),oh(3,a)}catch(Ze){or(a,a.return,Ze)}try{du(5,a,a.return)}catch(Ze){or(a,a.return,Ze)}}break;case 1:di(l,a),ji(a),g&512&&f!==null&&sl(f,f.return);break;case 5:if(di(l,a),ji(a),g&512&&f!==null&&sl(f,f.return),a.flags&32){var S=a.stateNode;try{Un(S,"")}catch(Ze){or(a,a.return,Ze)}}if(g&4&&(S=a.stateNode,S!=null)){var A=a.memoizedProps,j=f!==null?f.memoizedProps:A,Z=a.type,re=a.updateQueue;if(a.updateQueue=null,re!==null)try{Z==="input"&&A.type==="radio"&&A.name!=null&&Be(S,A),_e(Z,j);var me=_e(Z,A);for(j=0;j<re.length;j+=2){var Pe=re[j],Oe=re[j+1];Pe==="style"?fn(S,Oe):Pe==="dangerouslySetInnerHTML"?Ei(S,Oe):Pe==="children"?Un(S,Oe):D(S,Pe,Oe,me)}switch(Z){case"input":tt(S,A);break;case"textarea":kr(S,A);break;case"select":var Ce=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!A.multiple;var Ge=A.value;Ge!=null?tr(S,!!A.multiple,Ge,!1):Ce!==!!A.multiple&&(A.defaultValue!=null?tr(S,!!A.multiple,A.defaultValue,!0):tr(S,!!A.multiple,A.multiple?[]:"",!1))}S[ru]=A}catch(Ze){or(a,a.return,Ze)}}break;case 6:if(di(l,a),ji(a),g&4){if(a.stateNode===null)throw Error(t(162));S=a.stateNode,A=a.memoizedProps;try{S.nodeValue=A}catch(Ze){or(a,a.return,Ze)}}break;case 3:if(di(l,a),ji(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{ns(l.containerInfo)}catch(Ze){or(a,a.return,Ze)}break;case 4:di(l,a),ji(a);break;case 13:di(l,a),ji(a),S=a.child,S.flags&8192&&(A=S.memoizedState!==null,S.stateNode.isHidden=A,!A||S.alternate!==null&&S.alternate.memoizedState!==null||(Zd=Yt())),g&4&&fg(a);break;case 22:if(Pe=f!==null&&f.memoizedState!==null,a.mode&1?(Zr=(me=Zr)||Pe,di(l,a),Zr=me):di(l,a),ji(a),g&8192){if(me=a.memoizedState!==null,(a.stateNode.isHidden=me)&&!Pe&&(a.mode&1)!==0)for(We=a,Pe=a.child;Pe!==null;){for(Oe=We=Pe;We!==null;){switch(Ce=We,Ge=Ce.child,Ce.tag){case 0:case 11:case 14:case 15:du(4,Ce,Ce.return);break;case 1:sl(Ce,Ce.return);var $e=Ce.stateNode;if(typeof $e.componentWillUnmount=="function"){g=Ce,f=Ce.return;try{l=g,$e.props=l.memoizedProps,$e.state=l.memoizedState,$e.componentWillUnmount()}catch(Ze){or(g,f,Ze)}}break;case 5:sl(Ce,Ce.return);break;case 22:if(Ce.memoizedState!==null){_g(Oe);continue}}Ge!==null?(Ge.return=Ce,We=Ge):_g(Oe)}Pe=Pe.sibling}e:for(Pe=null,Oe=a;;){if(Oe.tag===5){if(Pe===null){Pe=Oe;try{S=Oe.stateNode,me?(A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(Z=Oe.stateNode,re=Oe.memoizedProps.style,j=re!=null&&re.hasOwnProperty("display")?re.display:null,Z.style.display=hn("display",j))}catch(Ze){or(a,a.return,Ze)}}}else if(Oe.tag===6){if(Pe===null)try{Oe.stateNode.nodeValue=me?"":Oe.memoizedProps}catch(Ze){or(a,a.return,Ze)}}else if((Oe.tag!==22&&Oe.tag!==23||Oe.memoizedState===null||Oe===a)&&Oe.child!==null){Oe.child.return=Oe,Oe=Oe.child;continue}if(Oe===a)break e;for(;Oe.sibling===null;){if(Oe.return===null||Oe.return===a)break e;Pe===Oe&&(Pe=null),Oe=Oe.return}Pe===Oe&&(Pe=null),Oe.sibling.return=Oe.return,Oe=Oe.sibling}}break;case 19:di(l,a),ji(a),g&4&&fg(a);break;case 21:break;default:di(l,a),ji(a)}}function ji(a){var l=a.flags;if(l&2){try{e:{for(var f=a.return;f!==null;){if(ug(f)){var g=f;break e}f=f.return}throw Error(t(160))}switch(g.tag){case 5:var S=g.stateNode;g.flags&32&&(Un(S,""),g.flags&=-33);var A=cg(a);Yd(a,A,S);break;case 3:case 4:var j=g.stateNode.containerInfo,Z=cg(a);$d(a,Z,j);break;default:throw Error(t(161))}}catch(re){or(a,a.return,re)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function iT(a,l,f){We=a,pg(a)}function pg(a,l,f){for(var g=(a.mode&1)!==0;We!==null;){var S=We,A=S.child;if(S.tag===22&&g){var j=S.memoizedState!==null||ah;if(!j){var Z=S.alternate,re=Z!==null&&Z.memoizedState!==null||Zr;Z=ah;var me=Zr;if(ah=j,(Zr=re)&&!me)for(We=S;We!==null;)j=We,re=j.child,j.tag===22&&j.memoizedState!==null?mg(S):re!==null?(re.return=j,We=re):mg(S);for(;A!==null;)We=A,pg(A),A=A.sibling;We=S,ah=Z,Zr=me}vg(a)}else(S.subtreeFlags&8772)!==0&&A!==null?(A.return=S,We=A):vg(a)}}function vg(a){for(;We!==null;){var l=We;if((l.flags&8772)!==0){var f=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Zr||oh(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Zr)if(f===null)g.componentDidMount();else{var S=l.elementType===l.type?f.memoizedProps:hi(l.type,f.memoizedProps);g.componentDidUpdate(S,f.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var A=l.updateQueue;A!==null&&_y(l,A,g);break;case 3:var j=l.updateQueue;if(j!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}_y(l,j,f)}break;case 5:var Z=l.stateNode;if(f===null&&l.flags&4){f=Z;var re=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":re.autoFocus&&f.focus();break;case"img":re.src&&(f.src=re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var me=l.alternate;if(me!==null){var Pe=me.memoizedState;if(Pe!==null){var Oe=Pe.dehydrated;Oe!==null&&ns(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zr||l.flags&512&&Wd(l)}catch(Ce){or(l,l.return,Ce)}}if(l===a){We=null;break}if(f=l.sibling,f!==null){f.return=l.return,We=f;break}We=l.return}}function _g(a){for(;We!==null;){var l=We;if(l===a){We=null;break}var f=l.sibling;if(f!==null){f.return=l.return,We=f;break}We=l.return}}function mg(a){for(;We!==null;){var l=We;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{oh(4,l)}catch(re){or(l,f,re)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var S=l.return;try{g.componentDidMount()}catch(re){or(l,S,re)}}var A=l.return;try{Wd(l)}catch(re){or(l,A,re)}break;case 5:var j=l.return;try{Wd(l)}catch(re){or(l,j,re)}}}catch(re){or(l,l.return,re)}if(l===a){We=null;break}var Z=l.sibling;if(Z!==null){Z.return=l.return,We=Z;break}We=l.return}}var sT=Math.ceil,lh=z.ReactCurrentDispatcher,Kd=z.ReactCurrentOwner,Wn=z.ReactCurrentBatchConfig,Rt=0,Lr=null,xr=null,zr=0,Dn=0,al=ea(0),Pr=0,pu=null,Va=0,uh=0,Qd=0,vu=null,bn=null,Zd=0,ol=1/0,ys=null,ch=!1,Jd=null,aa=null,hh=!1,oa=null,fh=0,_u=0,ep=null,dh=-1,ph=0;function an(){return(Rt&6)!==0?Yt():dh!==-1?dh:dh=Yt()}function la(a){return(a.mode&1)===0?1:(Rt&2)!==0&&zr!==0?zr&-zr:Hw.transition!==null?(ph===0&&(ph=bc()),ph):(a=Dt,a!==0||(a=window.event,a=a===void 0?16:Oc(a.type)),a)}function pi(a,l,f,g){if(50<_u)throw _u=0,ep=null,Error(t(185));Gr(a,f,g),((Rt&2)===0||a!==Lr)&&(a===Lr&&((Rt&2)===0&&(uh|=f),Pr===4&&ua(a,zr)),wn(a,g),f===1&&Rt===0&&(l.mode&1)===0&&(ol=Yt()+500,Hc&&ra()))}function wn(a,l){var f=a.callbackNode;Mo(a,l);var g=Xs(a,a===Lr?zr:0);if(g===0)f!==null&&Hs(f),a.callbackNode=null,a.callbackPriority=0;else if(l=g&-g,a.callbackPriority!==l){if(f!=null&&Hs(f),l===1)a.tag===0?Gw(gg.bind(null,a)):iy(gg.bind(null,a)),Lw(function(){(Rt&6)===0&&ra()}),f=null;else{switch(Tc(g)){case 1:f=Po;break;case 4:f=Ul;break;case 16:f=Io;break;case 536870912:f=mc;break;default:f=Io}f=Ag(f,yg.bind(null,a))}a.callbackPriority=l,a.callbackNode=f}}function yg(a,l){if(dh=-1,ph=0,(Rt&6)!==0)throw Error(t(327));var f=a.callbackNode;if(ll()&&a.callbackNode!==f)return null;var g=Xs(a,a===Lr?zr:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||l)l=vh(a,g);else{l=g;var S=Rt;Rt|=2;var A=bg();(Lr!==a||zr!==l)&&(ys=null,ol=Yt()+500,Wa(a,l));do try{lT();break}catch(Z){xg(a,Z)}while(!0);yd(),lh.current=A,Rt=S,xr!==null?l=0:(Lr=null,zr=0,l=Pr)}if(l!==0){if(l===2&&(S=ko(a),S!==0&&(g=S,l=tp(a,S))),l===1)throw f=pu,Wa(a,0),ua(a,g),wn(a,Yt()),f;if(l===6)ua(a,g);else{if(S=a.current.alternate,(g&30)===0&&!aT(S)&&(l=vh(a,g),l===2&&(A=ko(a),A!==0&&(g=A,l=tp(a,A))),l===1))throw f=pu,Wa(a,0),ua(a,g),wn(a,Yt()),f;switch(a.finishedWork=S,a.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:$a(a,bn,ys);break;case 3:if(ua(a,g),(g&130023424)===g&&(l=Zd+500-Yt(),10<l)){if(Xs(a,0)!==0)break;if(S=a.suspendedLanes,(S&g)!==g){an(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=od($a.bind(null,a,bn,ys),l);break}$a(a,bn,ys);break;case 4:if(ua(a,g),(g&4194240)===g)break;for(l=a.eventTimes,S=-1;0<g;){var j=31-nn(g);A=1<<j,j=l[j],j>S&&(S=j),g&=~A}if(g=S,g=Yt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*sT(g/1960))-g,10<g){a.timeoutHandle=od($a.bind(null,a,bn,ys),g);break}$a(a,bn,ys);break;case 5:$a(a,bn,ys);break;default:throw Error(t(329))}}}return wn(a,Yt()),a.callbackNode===f?yg.bind(null,a):null}function tp(a,l){var f=vu;return a.current.memoizedState.isDehydrated&&(Wa(a,l).flags|=256),a=vh(a,l),a!==2&&(l=bn,bn=f,l!==null&&rp(l)),a}function rp(a){bn===null?bn=a:bn.push.apply(bn,a)}function aT(a){for(var l=a;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var g=0;g<f.length;g++){var S=f[g],A=S.getSnapshot;S=S.value;try{if(!Fe(A(),S))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ua(a,l){for(l&=~Qd,l&=~uh,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var f=31-nn(l),g=1<<f;a[f]=-1,l&=~g}}function gg(a){if((Rt&6)!==0)throw Error(t(327));ll();var l=Xs(a,0);if((l&1)===0)return wn(a,Yt()),null;var f=vh(a,l);if(a.tag!==0&&f===2){var g=ko(a);g!==0&&(l=g,f=tp(a,g))}if(f===1)throw f=pu,Wa(a,0),ua(a,l),wn(a,Yt()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,$a(a,bn,ys),wn(a,Yt()),null}function np(a,l){var f=Rt;Rt|=1;try{return a(l)}finally{Rt=f,Rt===0&&(ol=Yt()+500,Hc&&ra())}}function qa(a){oa!==null&&oa.tag===0&&(Rt&6)===0&&ll();var l=Rt;Rt|=1;var f=Wn.transition,g=Dt;try{if(Wn.transition=null,Dt=1,a)return a()}finally{Dt=g,Wn.transition=f,Rt=l,(Rt&6)===0&&ra()}}function ip(){Dn=al.current,Vt(al)}function Wa(a,l){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,Fw(f)),xr!==null)for(f=xr.return;f!==null;){var g=f;switch(dd(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Uc();break;case 3:nl(),Vt(yn),Vt(Yr),Cd();break;case 5:Sd(g);break;case 4:nl();break;case 13:Vt(rr);break;case 19:Vt(rr);break;case 10:gd(g.type._context);break;case 22:case 23:ip()}f=f.return}if(Lr=a,xr=a=ca(a.current,null),zr=Dn=l,Pr=0,pu=null,Qd=uh=Va=0,bn=vu=null,Ha!==null){for(l=0;l<Ha.length;l++)if(f=Ha[l],g=f.interleaved,g!==null){f.interleaved=null;var S=g.next,A=f.pending;if(A!==null){var j=A.next;A.next=S,g.next=j}f.pending=g}Ha=null}return a}function xg(a,l){do{var f=xr;try{if(yd(),Zc.current=rh,Jc){for(var g=nr.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}Jc=!1}if(Xa=0,Fr=Ar=nr=null,lu=!1,uu=0,Kd.current=null,f===null||f.return===null){Pr=1,pu=l,xr=null;break}e:{var A=a,j=f.return,Z=f,re=l;if(l=zr,Z.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var me=re,Pe=Z,Oe=Pe.tag;if((Pe.mode&1)===0&&(Oe===0||Oe===11||Oe===15)){var Ce=Pe.alternate;Ce?(Pe.updateQueue=Ce.updateQueue,Pe.memoizedState=Ce.memoizedState,Pe.lanes=Ce.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var Ge=Vy(j);if(Ge!==null){Ge.flags&=-257,qy(Ge,j,Z,A,l),Ge.mode&1&&Xy(A,me,l),l=Ge,re=me;var $e=l.updateQueue;if($e===null){var Ze=new Set;Ze.add(re),l.updateQueue=Ze}else $e.add(re);break e}else{if((l&1)===0){Xy(A,me,l),sp();break e}re=Error(t(426))}}else if(Qt&&Z.mode&1){var pr=Vy(j);if(pr!==null){(pr.flags&65536)===0&&(pr.flags|=256),qy(pr,j,Z,A,l),_d(il(re,Z));break e}}A=re=il(re,Z),Pr!==4&&(Pr=2),vu===null?vu=[A]:vu.push(A),A=j;do{switch(A.tag){case 3:A.flags|=65536,l&=-l,A.lanes|=l;var ce=Hy(A,re,l);vy(A,ce);break e;case 1:Z=re;var ae=A.type,pe=A.stateNode;if((A.flags&128)===0&&(typeof ae.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(aa===null||!aa.has(pe)))){A.flags|=65536,l&=-l,A.lanes|=l;var Me=zy(A,Z,l);vy(A,Me);break e}}A=A.return}while(A!==null)}Tg(f)}catch(Je){l=Je,xr===f&&f!==null&&(xr=f=f.return);continue}break}while(!0)}function bg(){var a=lh.current;return lh.current=rh,a===null?rh:a}function sp(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Lr===null||(Va&268435455)===0&&(uh&268435455)===0||ua(Lr,zr)}function vh(a,l){var f=Rt;Rt|=2;var g=bg();(Lr!==a||zr!==l)&&(ys=null,Wa(a,l));do try{oT();break}catch(S){xg(a,S)}while(!0);if(yd(),Rt=f,lh.current=g,xr!==null)throw Error(t(261));return Lr=null,zr=0,Pr}function oT(){for(;xr!==null;)wg(xr)}function lT(){for(;xr!==null&&!Yf();)wg(xr)}function wg(a){var l=Cg(a.alternate,a,Dn);a.memoizedProps=a.pendingProps,l===null?Tg(a):xr=l,Kd.current=null}function Tg(a){var l=a;do{var f=l.alternate;if(a=l.return,(l.flags&32768)===0){if(f=eT(f,l,Dn),f!==null){xr=f;return}}else{if(f=tT(f,l),f!==null){f.flags&=32767,xr=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Pr=6,xr=null;return}}if(l=l.sibling,l!==null){xr=l;return}xr=l=a}while(l!==null);Pr===0&&(Pr=5)}function $a(a,l,f){var g=Dt,S=Wn.transition;try{Wn.transition=null,Dt=1,uT(a,l,f,g)}finally{Wn.transition=S,Dt=g}return null}function uT(a,l,f,g){do ll();while(oa!==null);if((Rt&6)!==0)throw Error(t(327));f=a.finishedWork;var S=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var A=f.lanes|f.childLanes;if(wc(a,A),a===Lr&&(xr=Lr=null,zr=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||hh||(hh=!0,Ag(Io,function(){return ll(),null})),A=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||A){A=Wn.transition,Wn.transition=null;var j=Dt;Dt=1;var Z=Rt;Rt|=4,Kd.current=null,nT(a,f),dg(f,a),nt(sd),Ys=!!id,sd=id=null,a.current=f,iT(f),Ia(),Rt=Z,Dt=j,Wn.transition=A}else a.current=f;if(hh&&(hh=!1,oa=a,fh=S),A=a.pendingLanes,A===0&&(aa=null),yc(f.stateNode),wn(a,Yt()),l!==null)for(g=a.onRecoverableError,f=0;f<l.length;f++)S=l[f],g(S.value,{componentStack:S.stack,digest:S.digest});if(ch)throw ch=!1,a=Jd,Jd=null,a;return(fh&1)!==0&&a.tag!==0&&ll(),A=a.pendingLanes,(A&1)!==0?a===ep?_u++:(_u=0,ep=a):_u=0,ra(),null}function ll(){if(oa!==null){var a=Tc(fh),l=Wn.transition,f=Dt;try{if(Wn.transition=null,Dt=16>a?16:a,oa===null)var g=!1;else{if(a=oa,oa=null,fh=0,(Rt&6)!==0)throw Error(t(331));var S=Rt;for(Rt|=4,We=a.current;We!==null;){var A=We,j=A.child;if((We.flags&16)!==0){var Z=A.deletions;if(Z!==null){for(var re=0;re<Z.length;re++){var me=Z[re];for(We=me;We!==null;){var Pe=We;switch(Pe.tag){case 0:case 11:case 15:du(8,Pe,A)}var Oe=Pe.child;if(Oe!==null)Oe.return=Pe,We=Oe;else for(;We!==null;){Pe=We;var Ce=Pe.sibling,Ge=Pe.return;if(lg(Pe),Pe===me){We=null;break}if(Ce!==null){Ce.return=Ge,We=Ce;break}We=Ge}}}var $e=A.alternate;if($e!==null){var Ze=$e.child;if(Ze!==null){$e.child=null;do{var pr=Ze.sibling;Ze.sibling=null,Ze=pr}while(Ze!==null)}}We=A}}if((A.subtreeFlags&2064)!==0&&j!==null)j.return=A,We=j;else e:for(;We!==null;){if(A=We,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:du(9,A,A.return)}var ce=A.sibling;if(ce!==null){ce.return=A.return,We=ce;break e}We=A.return}}var ae=a.current;for(We=ae;We!==null;){j=We;var pe=j.child;if((j.subtreeFlags&2064)!==0&&pe!==null)pe.return=j,We=pe;else e:for(j=ae;We!==null;){if(Z=We,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:oh(9,Z)}}catch(Je){or(Z,Z.return,Je)}if(Z===j){We=null;break e}var Me=Z.sibling;if(Me!==null){Me.return=Z.return,We=Me;break e}We=Z.return}}if(Rt=S,ra(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Oo,a)}catch{}g=!0}return g}finally{Dt=f,Wn.transition=l}}return!1}function Sg(a,l,f){l=il(f,l),l=Hy(a,l,1),a=ia(a,l,1),l=an(),a!==null&&(Gr(a,1,l),wn(a,l))}function or(a,l,f){if(a.tag===3)Sg(a,a,f);else for(;l!==null;){if(l.tag===3){Sg(l,a,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(aa===null||!aa.has(g))){a=il(f,a),a=zy(l,a,1),l=ia(l,a,1),a=an(),l!==null&&(Gr(l,1,a),wn(l,a));break}}l=l.return}}function cT(a,l,f){var g=a.pingCache;g!==null&&g.delete(l),l=an(),a.pingedLanes|=a.suspendedLanes&f,Lr===a&&(zr&f)===f&&(Pr===4||Pr===3&&(zr&130023424)===zr&&500>Yt()-Zd?Wa(a,0):Qd|=f),wn(a,l)}function Eg(a,l){l===0&&((a.mode&1)===0?l=1:(l=Ro,Ro<<=1,(Ro&130023424)===0&&(Ro=4194304)));var f=an();a=vs(a,l),a!==null&&(Gr(a,l,f),wn(a,f))}function hT(a){var l=a.memoizedState,f=0;l!==null&&(f=l.retryLane),Eg(a,f)}function fT(a,l){var f=0;switch(a.tag){case 13:var g=a.stateNode,S=a.memoizedState;S!==null&&(f=S.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),Eg(a,f)}var Cg;Cg=function(a,l,f){if(a!==null)if(a.memoizedProps!==l.pendingProps||yn.current)xn=!0;else{if((a.lanes&f)===0&&(l.flags&128)===0)return xn=!1,Jw(a,l,f);xn=(a.flags&131072)!==0}else xn=!1,Qt&&(l.flags&1048576)!==0&&sy(l,Xc,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;sh(a,l),a=l.pendingProps;var S=Ko(l,Yr.current);rl(l,f),S=Id(null,l,g,a,S,f);var A=Od();return l.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,gn(g)?(A=!0,Gc(l)):A=!1,l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,wd(l),S.updater=nh,l.stateNode=S,S._reactInternals=l,Fd(l,g,a,f),l=Ud(null,l,g,!0,A,f)):(l.tag=0,Qt&&A&&fd(l),sn(null,l,S,f),l=l.child),l;case 16:g=l.elementType;e:{switch(sh(a,l),a=l.pendingProps,S=g._init,g=S(g._payload),l.type=g,S=l.tag=pT(g),a=hi(g,a),S){case 0:l=jd(null,l,g,a,f);break e;case 1:l=Zy(null,l,g,a,f);break e;case 11:l=Wy(null,l,g,a,f);break e;case 14:l=$y(null,l,g,hi(g.type,a),f);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:hi(g,S),jd(a,l,g,S,f);case 1:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:hi(g,S),Zy(a,l,g,S,f);case 3:e:{if(Jy(l),a===null)throw Error(t(387));g=l.pendingProps,A=l.memoizedState,S=A.element,py(a,l),Kc(l,g,null,f);var j=l.memoizedState;if(g=j.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){S=il(Error(t(423)),l),l=eg(a,l,g,f,S);break e}else if(g!==S){S=il(Error(t(424)),l),l=eg(a,l,g,f,S);break e}else for(kn=Js(l.stateNode.containerInfo.firstChild),Mn=l,Qt=!0,ci=null,f=fy(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Jo(),g===S){l=ms(a,l,f);break e}sn(a,l,g,f)}l=l.child}return l;case 5:return my(l),a===null&&vd(l),g=l.type,S=l.pendingProps,A=a!==null?a.memoizedProps:null,j=S.children,ad(g,S)?j=null:A!==null&&ad(g,A)&&(l.flags|=32),Qy(a,l),sn(a,l,j,f),l.child;case 6:return a===null&&vd(l),null;case 13:return tg(a,l,f);case 4:return Td(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=el(l,null,g,f):sn(a,l,g,f),l.child;case 11:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:hi(g,S),Wy(a,l,g,S,f);case 7:return sn(a,l,l.pendingProps,f),l.child;case 8:return sn(a,l,l.pendingProps.children,f),l.child;case 12:return sn(a,l,l.pendingProps.children,f),l.child;case 10:e:{if(g=l.type._context,S=l.pendingProps,A=l.memoizedProps,j=S.value,Ht(Wc,g._currentValue),g._currentValue=j,A!==null)if(Fe(A.value,j)){if(A.children===S.children&&!yn.current){l=ms(a,l,f);break e}}else for(A=l.child,A!==null&&(A.return=l);A!==null;){var Z=A.dependencies;if(Z!==null){j=A.child;for(var re=Z.firstContext;re!==null;){if(re.context===g){if(A.tag===1){re=_s(-1,f&-f),re.tag=2;var me=A.updateQueue;if(me!==null){me=me.shared;var Pe=me.pending;Pe===null?re.next=re:(re.next=Pe.next,Pe.next=re),me.pending=re}}A.lanes|=f,re=A.alternate,re!==null&&(re.lanes|=f),xd(A.return,f,l),Z.lanes|=f;break}re=re.next}}else if(A.tag===10)j=A.type===l.type?null:A.child;else if(A.tag===18){if(j=A.return,j===null)throw Error(t(341));j.lanes|=f,Z=j.alternate,Z!==null&&(Z.lanes|=f),xd(j,f,l),j=A.sibling}else j=A.child;if(j!==null)j.return=A;else for(j=A;j!==null;){if(j===l){j=null;break}if(A=j.sibling,A!==null){A.return=j.return,j=A;break}j=j.return}A=j}sn(a,l,S.children,f),l=l.child}return l;case 9:return S=l.type,g=l.pendingProps.children,rl(l,f),S=Vn(S),g=g(S),l.flags|=1,sn(a,l,g,f),l.child;case 14:return g=l.type,S=hi(g,l.pendingProps),S=hi(g.type,S),$y(a,l,g,S,f);case 15:return Yy(a,l,l.type,l.pendingProps,f);case 17:return g=l.type,S=l.pendingProps,S=l.elementType===g?S:hi(g,S),sh(a,l),l.tag=1,gn(g)?(a=!0,Gc(l)):a=!1,rl(l,f),Uy(l,g,S),Fd(l,g,S,f),Ud(null,l,g,!0,a,f);case 19:return ng(a,l,f);case 22:return Ky(a,l,f)}throw Error(t(156,l.tag))};function Ag(a,l){return es(a,l)}function dT(a,l,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(a,l,f,g){return new dT(a,l,f,g)}function ap(a){return a=a.prototype,!(!a||!a.isReactComponent)}function pT(a){if(typeof a=="function")return ap(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ee)return 11;if(a===K)return 14}return 2}function ca(a,l){var f=a.alternate;return f===null?(f=$n(a.tag,l,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=l,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,l=a.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function _h(a,l,f,g,S,A){var j=2;if(g=a,typeof a=="function")ap(a)&&(j=1);else if(typeof a=="string")j=5;else e:switch(a){case y:return Ya(f.children,S,A,l);case te:j=8,S|=8;break;case F:return a=$n(12,f,l,S|2),a.elementType=F,a.lanes=A,a;case ue:return a=$n(13,f,l,S),a.elementType=ue,a.lanes=A,a;case ye:return a=$n(19,f,l,S),a.elementType=ye,a.lanes=A,a;case V:return mh(f,S,A,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case W:j=10;break e;case ne:j=9;break e;case ee:j=11;break e;case K:j=14;break e;case B:j=16,g=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=$n(j,f,l,S),l.elementType=a,l.type=g,l.lanes=A,l}function Ya(a,l,f,g){return a=$n(7,a,g,l),a.lanes=f,a}function mh(a,l,f,g){return a=$n(22,a,g,l),a.elementType=V,a.lanes=f,a.stateNode={isHidden:!1},a}function op(a,l,f){return a=$n(6,a,null,l),a.lanes=f,a}function lp(a,l,f){return l=$n(4,a.children!==null?a.children:[],a.key,l),l.lanes=f,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function vT(a,l,f,g,S){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=g,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function up(a,l,f,g,S,A,j,Z,re){return a=new vT(a,l,f,Z,re),l===1?(l=1,A===!0&&(l|=8)):l=0,A=$n(3,null,null,l),a.current=A,A.stateNode=a,A.memoizedState={element:g,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},wd(A),a}function _T(a,l,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:g==null?null:""+g,children:a,containerInfo:l,implementation:f}}function Pg(a){if(!a)return ta;a=a._reactInternals;e:{if(dn(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(gn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(gn(f))return ry(a,f,l)}return l}function Ig(a,l,f,g,S,A,j,Z,re){return a=up(f,g,!0,a,S,A,j,Z,re),a.context=Pg(null),f=a.current,g=an(),S=la(f),A=_s(g,S),A.callback=l??null,ia(f,A,S),a.current.lanes=S,Gr(a,S,g),wn(a,g),a}function yh(a,l,f,g){var S=l.current,A=an(),j=la(S);return f=Pg(f),l.context===null?l.context=f:l.pendingContext=f,l=_s(A,j),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=ia(S,l,j),a!==null&&(pi(a,S,j,A),Yc(a,S,j)),j}function gh(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Og(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<l?f:l}}function cp(a,l){Og(a,l),(a=a.alternate)&&Og(a,l)}function mT(){return null}var Rg=typeof reportError=="function"?reportError:function(a){console.error(a)};function hp(a){this._internalRoot=a}xh.prototype.render=hp.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));yh(a,l,null,null)},xh.prototype.unmount=hp.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;qa(function(){yh(null,a,null,null)}),l[hs]=null}};function xh(a){this._internalRoot=a}xh.prototype.unstable_scheduleHydration=function(a){if(a){var l=Sc();a={blockedOn:null,target:a,priority:l};for(var f=0;f<Oi.length&&l!==0&&l<Oi[f].priority;f++);Oi.splice(f,0,a),f===0&&Cc(a)}};function fp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function bh(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Mg(){}function yT(a,l,f,g,S){if(S){if(typeof g=="function"){var A=g;g=function(){var me=gh(j);A.call(me)}}var j=Ig(l,g,a,0,null,!1,!1,"",Mg);return a._reactRootContainer=j,a[hs]=j.current,eu(a.nodeType===8?a.parentNode:a),qa(),j}for(;S=a.lastChild;)a.removeChild(S);if(typeof g=="function"){var Z=g;g=function(){var me=gh(re);Z.call(me)}}var re=up(a,0,!1,null,null,!1,!1,"",Mg);return a._reactRootContainer=re,a[hs]=re.current,eu(a.nodeType===8?a.parentNode:a),qa(function(){yh(l,re,f,g)}),re}function wh(a,l,f,g,S){var A=f._reactRootContainer;if(A){var j=A;if(typeof S=="function"){var Z=S;S=function(){var re=gh(j);Z.call(re)}}yh(l,j,a,S)}else j=yT(f,l,a,S,g);return gh(j)}Pi=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var f=Oa(l.pendingLanes);f!==0&&(rs(l,f|1),wn(l,Yt()),(Rt&6)===0&&(ol=Yt()+500,ra()))}break;case 13:qa(function(){var g=vs(a,1);if(g!==null){var S=an();pi(g,a,1,S)}}),cp(a,1)}},si=function(a){if(a.tag===13){var l=vs(a,134217728);if(l!==null){var f=an();pi(l,a,134217728,f)}cp(a,134217728)}},Do=function(a){if(a.tag===13){var l=la(a),f=vs(a,l);if(f!==null){var g=an();pi(f,a,l,g)}cp(a,l)}},Sc=function(){return Dt},Vs=function(a,l){var f=Dt;try{return Dt=a,l()}finally{Dt=f}},kt=function(a,l,f){switch(l){case"input":if(tt(a,f),l=f.name,f.type==="radio"&&l!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==a&&g.form===a.form){var S=jc(g);if(!S)throw Error(t(90));je(g),tt(g,S)}}}break;case"textarea":kr(a,f);break;case"select":l=f.value,l!=null&&tr(a,!!f.multiple,l,!1)}},hr=np,Cn=qa;var gT={usingClientEntryPoint:!1,Events:[nu,$o,jc,Er,$t,np]},mu={findFiberByHostInstance:Ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xT={bundleType:mu.bundleType,version:mu.version,rendererPackageName:mu.rendererPackageName,rendererConfig:mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Pn(a),a===null?null:a.stateNode},findFiberByHostInstance:mu.findFiberByHostInstance||mT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{Oo=Th.inject(xT),In=Th}catch{}}return Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gT,Tn.createPortal=function(a,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fp(l))throw Error(t(200));return _T(a,l,null,f)},Tn.createRoot=function(a,l){if(!fp(a))throw Error(t(299));var f=!1,g="",S=Rg;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),l=up(a,1,!1,null,null,f,!1,g,S),a[hs]=l.current,eu(a.nodeType===8?a.parentNode:a),new hp(l)},Tn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Pn(l),a=a===null?null:a.stateNode,a},Tn.flushSync=function(a){return qa(a)},Tn.hydrate=function(a,l,f){if(!bh(l))throw Error(t(200));return wh(null,a,l,!0,f)},Tn.hydrateRoot=function(a,l,f){if(!fp(a))throw Error(t(405));var g=f!=null&&f.hydratedSources||null,S=!1,A="",j=Rg;if(f!=null&&(f.unstable_strictMode===!0&&(S=!0),f.identifierPrefix!==void 0&&(A=f.identifierPrefix),f.onRecoverableError!==void 0&&(j=f.onRecoverableError)),l=Ig(l,null,a,1,f??null,S,!1,A,j),a[hs]=l.current,eu(a),g)for(a=0;a<g.length;a++)f=g[a],S=f._getVersion,S=S(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,S]:l.mutableSourceEagerHydrationData.push(f,S);return new xh(l)},Tn.render=function(a,l,f){if(!bh(l))throw Error(t(200));return wh(null,a,l,!1,f)},Tn.unmountComponentAtNode=function(a){if(!bh(a))throw Error(t(40));return a._reactRootContainer?(qa(function(){wh(null,null,a,!1,function(){a._reactRootContainer=null,a[hs]=null})}),!0):!1},Tn.unstable_batchedUpdates=np,Tn.unstable_renderSubtreeIntoContainer=function(a,l,f,g){if(!bh(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return wh(a,l,f,!1,g)},Tn.version="18.3.1-next-f1338f8080-20240426",Tn}var Ug;function RT(){if(Ug)return vp.exports;Ug=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vp.exports=OT(),vp.exports}var Gg;function MT(){if(Gg)return Sh;Gg=1;var n=RT();return Sh.createRoot=n.createRoot,Sh.hydrateRoot=n.hydrateRoot,Sh}var kT=MT();const qt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wr=Object.keys,tn=Array.isArray;function cn(n,e){return typeof e!="object"||wr(e).forEach(function(t){n[t]=e[t]}),n}typeof Promise>"u"||qt.Promise||(qt.Promise=Promise);const Vu=Object.getPrototypeOf,DT={}.hasOwnProperty;function jn(n,e){return DT.call(n,e)}function Pl(n,e){typeof e=="function"&&(e=e(Vu(n))),(typeof Reflect>"u"?wr:Reflect.ownKeys)(e).forEach(t=>{Os(n,t,e[t])})}const v1=Object.defineProperty;function Os(n,e,t,r){v1(n,e,cn(t&&jn(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function wl(n){return{from:function(e){return n.prototype=Object.create(e.prototype),Os(n.prototype,"constructor",n),{extend:Pl.bind(null,n.prototype)}}}}const NT=Object.getOwnPropertyDescriptor;function lm(n,e){let t;return NT(n,e)||(t=Vu(n))&&lm(t,e)}const FT=[].slice;function mf(n,e,t){return FT.call(n,e,t)}function _1(n,e){return e(n)}function Ru(n){if(!n)throw new Error("Assertion Failed")}function m1(n){qt.setImmediate?setImmediate(n):setTimeout(n,0)}function y1(n,e){return n.reduce((t,r,i)=>{var s=e(r,i);return s&&(t[s[0]]=s[1]),t},{})}function Rs(n,e){if(typeof e=="string"&&jn(n,e))return n[e];if(!e)return n;if(typeof e!="string"){for(var t=[],r=0,i=e.length;r<i;++r){var s=Rs(n,e[r]);t.push(s)}return t}var o=e.indexOf(".");if(o!==-1){var u=n[e.substr(0,o)];return u==null?void 0:Rs(u,e.substr(o+1))}}function xi(n,e,t){if(n&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(n)))if(typeof e!="string"&&"length"in e){Ru(typeof t!="string"&&"length"in t);for(var r=0,i=e.length;r<i;++r)xi(n,e[r],t[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),u=e.substr(s+1);if(u==="")t===void 0?tn(n)&&!isNaN(parseInt(o))?n.splice(o,1):delete n[o]:n[o]=t;else{var c=n[o];c&&jn(n,o)||(c=n[o]={}),xi(c,u,t)}}else t===void 0?tn(n)&&!isNaN(parseInt(e))?n.splice(e,1):delete n[e]:n[e]=t}}function g1(n){var e={};for(var t in n)jn(n,t)&&(e[t]=n[t]);return e}const LT=[].concat;function x1(n){return LT.apply([],n)}const b1="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(x1([8,16,32,64].map(n=>["Int","Uint","Float"].map(e=>e+n+"Array")))).filter(n=>qt[n]),BT=b1.map(n=>qt[n]);y1(b1,n=>[n,!0]);let pa=null;function sc(n){pa=typeof WeakMap<"u"&&new WeakMap;const e=e_(n);return pa=null,e}function e_(n){if(!n||typeof n!="object")return n;let e=pa&&pa.get(n);if(e)return e;if(tn(n)){e=[],pa&&pa.set(n,e);for(var t=0,r=n.length;t<r;++t)e.push(e_(n[t]))}else if(BT.indexOf(n.constructor)>=0)e=n;else{const s=Vu(n);for(var i in e=s===Object.prototype?{}:Object.create(s),pa&&pa.set(n,e),n)jn(n,i)&&(e[i]=e_(n[i]))}return e}const{toString:jT}={};function t_(n){return jT.call(n).slice(8,-1)}const r_=typeof Symbol<"u"?Symbol.iterator:"@@iterator",UT=typeof r_=="symbol"?function(n){var e;return n!=null&&(e=n[r_])&&e.apply(n)}:function(){return null},_l={};function Es(n){var e,t,r,i;if(arguments.length===1){if(tn(n))return n.slice();if(this===_l&&typeof n=="string")return[n];if(i=UT(n)){for(t=[];!(r=i.next()).done;)t.push(r.value);return t}if(n==null)return[n];if(typeof(e=n.length)=="number"){for(t=new Array(e);e--;)t[e]=n[e];return t}return[n]}for(e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return t}const um=typeof Symbol<"u"?n=>n[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Ki=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function w1(n,e){Ki=n,T1=e}var T1=()=>!0;const GT=!new Error("").stack;function wo(){if(GT)try{throw wo.arguments,new Error}catch(n){return n}return new Error}function n_(n,e){var t=n.stack;return t?(e=e||0,t.indexOf(n.name)===0&&(e+=(n.name+n.message).split(`
`).length),t.split(`
`).slice(e).filter(T1).map(r=>`
`+r).join("")):""}var S1=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],cm=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(S1),HT={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Tl(n,e){this._e=wo(),this.name=n,this.message=e}function E1(n,e){return n+". Errors: "+Object.keys(e).map(t=>e[t].toString()).filter((t,r,i)=>i.indexOf(t)===r).join(`
`)}function yf(n,e,t,r){this._e=wo(),this.failures=e,this.failedKeys=r,this.successCount=t,this.message=E1(n,e)}function Fu(n,e){this._e=wo(),this.name="BulkError",this.failures=Object.keys(e).map(t=>e[t]),this.failuresByPos=e,this.message=E1(n,e)}wl(Tl).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+n_(this._e,2))}},toString:function(){return this.name+": "+this.message}}),wl(yf).from(Tl),wl(Fu).from(Tl);var hm=cm.reduce((n,e)=>(n[e]=e+"Error",n),{});const zT=Tl;var ft=cm.reduce((n,e)=>{var t=e+"Error";function r(i,s){this._e=wo(),this.name=t,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=HT[e]||t,this.inner=null)}return wl(r).from(zT),n[e]=r,n},{});ft.Syntax=SyntaxError,ft.Type=TypeError,ft.Range=RangeError;var Hg=S1.reduce((n,e)=>(n[e+"Error"]=ft[e],n),{}),nf=cm.reduce((n,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(n[e+"Error"]=ft[e]),n),{});function Ut(){}function qu(n){return n}function XT(n,e){return n==null||n===qu?e:function(t){return e(n(t))}}function _o(n,e){return function(){n.apply(this,arguments),e.apply(this,arguments)}}function VT(n,e){return n===Ut?e:function(){var t=n.apply(this,arguments);t!==void 0&&(arguments[0]=t);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?_o(r,this.onsuccess):r),i&&(this.onerror=this.onerror?_o(i,this.onerror):i),s!==void 0?s:t}}function qT(n,e){return n===Ut?e:function(){n.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?_o(t,this.onsuccess):t),r&&(this.onerror=this.onerror?_o(r,this.onerror):r)}}function WT(n,e){return n===Ut?e:function(t){var r=n.apply(this,arguments);cn(t,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?_o(i,this.onsuccess):i),s&&(this.onerror=this.onerror?_o(s,this.onerror):s),r===void 0?o===void 0?void 0:o:cn(r,o)}}function $T(n,e){return n===Ut?e:function(){return e.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function fm(n,e){return n===Ut?e:function(){var t=n.apply(this,arguments);if(t&&typeof t.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return t.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}nf.ModifyError=yf,nf.DexieError=Tl,nf.BulkError=Fu;var Wu={};const C1=100,[i_,gf,s_]=typeof Promise>"u"?[]:(()=>{let n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,Vu(n),n];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Vu(e),n]})(),A1=gf&&gf.then,sf=i_&&i_.constructor,dm=!!s_;var a_=!1,YT=s_?()=>{s_.then(Eh)}:qt.setImmediate?setImmediate.bind(null,Eh):qt.MutationObserver?()=>{var n=document.createElement("div");new MutationObserver(()=>{Eh(),n=null}).observe(n,{attributes:!0}),n.setAttribute("i","1")}:()=>{setTimeout(Eh,0)},Lu=function(n,e){Mu.push([n,e]),xf&&(YT(),xf=!1)},o_=!0,xf=!0,co=[],af=[],l_=null,u_=qu,Sl={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Vg,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(n=>{try{Vg(n[0],n[1])}catch{}})}},st=Sl,Mu=[],ho=0,of=[];function Ve(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ut,this._lib=!1;var e=this._PSD=st;if(Ki&&(this._stackHolder=wo(),this._prev=null,this._numPrev=0),typeof n!="function"){if(n!==Wu)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&h_(this,this._value))}this._state=null,this._value=null,++e.ref,I1(this,n)}const c_={get:function(){var n=st,e=bf;function t(r,i){var s=!n.global&&(n!==st||e!==bf);const o=s&&!Ms();var u=new Ve((c,v)=>{pm(this,new P1(wf(r,n,s,o),wf(i,n,s,o),c,v,n))});return Ki&&M1(u,this),u}return t.prototype=Wu,t},set:function(n){Os(this,"then",n&&n.prototype===Wu?c_:{get:function(){return n},set:c_.set})}};function P1(n,e,t,r,i){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof e=="function"?e:null,this.resolve=t,this.reject=r,this.psd=i}function I1(n,e){try{e(t=>{if(n._state===null){if(t===n)throw new TypeError("A promise cannot be resolved with itself.");var r=n._lib&&ac();t&&typeof t.then=="function"?I1(n,(i,s)=>{t instanceof Ve?t._then(i,s):t.then(i,s)}):(n._state=!0,n._value=t,O1(n)),r&&oc()}},h_.bind(null,n))}catch(t){h_(n,t)}}function h_(n,e){if(af.push(e),n._state===null){var t=n._lib&&ac();e=u_(e),n._state=!1,n._value=e,Ki&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,s){try{r.apply(null,s)}catch{}}(()=>{var r=lm(e,"stack");e._promise=n,Os(e,"stack",{get:()=>a_?r&&(r.get?r.get.apply(e):r.value):n.stack})}),function(r){co.some(i=>i._value===r._value)||co.push(r)}(n),O1(n),t&&oc()}}function O1(n){var e=n._listeners;n._listeners=[];for(var t=0,r=e.length;t<r;++t)pm(n,e[t]);var i=n._PSD;--i.ref||i.finalize(),ho===0&&(++ho,Lu(()=>{--ho==0&&vm()},[]))}function pm(n,e){if(n._state!==null){var t=n._state?e.onFulfilled:e.onRejected;if(t===null)return(n._state?e.resolve:e.reject)(n._value);++e.psd.ref,++ho,Lu(KT,[t,n,e])}else n._listeners.push(e)}function KT(n,e,t){try{l_=e;var r,i=e._value;e._state?r=n(i):(af.length&&(af=[]),r=n(i),af.indexOf(i)===-1&&function(s){for(var o=co.length;o;)if(co[--o]._value===s._value)return void co.splice(o,1)}(e)),t.resolve(r)}catch(s){t.reject(s)}finally{l_=null,--ho==0&&vm(),--t.psd.ref||t.psd.finalize()}}function R1(n,e,t){if(e.length===t)return e;var r="";if(n._state===!1){var i,s,o=n._value;o!=null?(i=o.name||"Error",s=o.message||o,r=n_(o,0)):(i=o,s=""),e.push(i+(s?": "+s:"")+r)}return Ki&&((r=n_(n._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),n._prev&&R1(n._prev,e,t)),e}function M1(n,e){var t=e?e._numPrev+1:0;t<100&&(n._prev=e,n._numPrev=t)}function Eh(){ac()&&oc()}function ac(){var n=o_;return o_=!1,xf=!1,n}function oc(){var n,e,t;do for(;Mu.length>0;)for(n=Mu,Mu=[],t=n.length,e=0;e<t;++e){var r=n[e];r[0].apply(null,r[1])}while(Mu.length>0);o_=!0,xf=!0}function vm(){var n=co;co=[],n.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=of.slice(0),t=e.length;t;)e[--t]()}function Ch(n){return new Ve(Wu,!1,n)}function Zt(n,e){var t=st;return function(){var r=ac(),i=st;try{return wa(t,!0),n.apply(this,arguments)}catch(s){e&&e(s)}finally{wa(i,!1),r&&oc()}}}Pl(Ve.prototype,{then:c_,_then:function(n,e){pm(this,new P1(null,null,n,e,st))},catch:function(n){if(arguments.length===1)return this.then(null,n);var e=arguments[0],t=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?t(r):Ch(r)):this.then(null,r=>r&&r.name===e?t(r):Ch(r))},finally:function(n){return this.then(e=>(n(),e),e=>(n(),Ch(e)))},stack:{get:function(){if(this._stack)return this._stack;try{a_=!0;var n=R1(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=n),n}finally{a_=!1}}},timeout:function(n,e){return n<1/0?new Ve((t,r)=>{var i=setTimeout(()=>r(new ft.Timeout(e)),n);this.then(t,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Os(Ve.prototype,Symbol.toStringTag,"Dexie.Promise"),Sl.env=k1(),Pl(Ve,{all:function(){var n=Es.apply(null,arguments).map(Ah);return new Ve(function(e,t){n.length===0&&e([]);var r=n.length;n.forEach((i,s)=>Ve.resolve(i).then(o=>{n[s]=o,--r||e(n)},t))})},resolve:n=>{if(n instanceof Ve)return n;if(n&&typeof n.then=="function")return new Ve((t,r)=>{n.then(t,r)});var e=new Ve(Wu,!0,n);return M1(e,l_),e},reject:Ch,race:function(){var n=Es.apply(null,arguments).map(Ah);return new Ve((e,t)=>{n.map(r=>Ve.resolve(r).then(e,t))})},PSD:{get:()=>st,set:n=>st=n},totalEchoes:{get:()=>bf},newPSD:ba,usePSD:kl,scheduler:{get:()=>Lu,set:n=>{Lu=n}},rejectionMapper:{get:()=>u_,set:n=>{u_=n}},follow:(n,e)=>new Ve((t,r)=>ba((i,s)=>{var o=st;o.unhandleds=[],o.onunhandled=s,o.finalize=_o(function(){(function(u){function c(){u(),of.splice(of.indexOf(c),1)}of.push(c),++ho,Lu(()=>{--ho==0&&vm()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),n()},e,t,r))}),sf&&(sf.allSettled&&Os(Ve,"allSettled",function(){const n=Es.apply(null,arguments).map(Ah);return new Ve(e=>{n.length===0&&e([]);let t=n.length;const r=new Array(t);n.forEach((i,s)=>Ve.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--t||e(r)))})}),sf.any&&typeof AggregateError<"u"&&Os(Ve,"any",function(){const n=Es.apply(null,arguments).map(Ah);return new Ve((e,t)=>{n.length===0&&t(new AggregateError([]));let r=n.length;const i=new Array(r);n.forEach((s,o)=>Ve.resolve(s).then(u=>e(u),u=>{i[o]=u,--r||t(new AggregateError(i))}))})}));const en={awaits:0,echoes:0,id:0};var QT=0,lf=[],yp=0,bf=0,ZT=0;function ba(n,e,t,r){var i=st,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++ZT;var o=Sl.env;s.env=dm?{Promise:Ve,PromiseProp:{value:Ve,configurable:!0,writable:!0},all:Ve.all,race:Ve.race,allSettled:Ve.allSettled,any:Ve.any,resolve:Ve.resolve,reject:Ve.reject,nthen:zg(o.nthen,s),gthen:zg(o.gthen,s)}:{},e&&cn(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=kl(s,n,t,r);return s.ref===0&&s.finalize(),u}function Ml(){return en.id||(en.id=++QT),++en.awaits,en.echoes+=C1,en.id}function Ms(){return!!en.awaits&&(--en.awaits==0&&(en.id=0),en.echoes=en.awaits*C1,!0)}function Ah(n){return en.echoes&&n&&n.constructor===sf?(Ml(),n.then(e=>(Ms(),e),e=>(Ms(),Rr(e)))):n}function JT(n){++bf,en.echoes&&--en.echoes!=0||(en.echoes=en.id=0),lf.push(st),wa(n,!0)}function eS(){var n=lf[lf.length-1];lf.pop(),wa(n,!1)}function wa(n,e){var t=st;if((e?!en.echoes||yp++&&n===st:!yp||--yp&&n===st)||D1(e?JT.bind(null,n):eS),n!==st&&(st=n,t===Sl&&(Sl.env=k1()),dm)){var r=Sl.env.Promise,i=n.env;gf.then=i.nthen,r.prototype.then=i.gthen,(t.global||n.global)&&(Object.defineProperty(qt,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function k1(){var n=qt.Promise;return dm?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(qt,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject,nthen:gf.then,gthen:n.prototype.then}:{}}function kl(n,e,t,r,i){var s=st;try{return wa(n,!0),e(t,r,i)}finally{wa(s,!1)}}function D1(n){A1.call(i_,n)}function wf(n,e,t,r){return typeof n!="function"?n:function(){var i=st;t&&Ml(),wa(e,!0);try{return n.apply(this,arguments)}finally{wa(i,!1),r&&D1(Ms)}}}function zg(n,e){return function(t,r){return n.call(this,wf(t,e),wf(r,e))}}(""+A1).indexOf("[native code]")===-1&&(Ml=Ms=Ut);const Xg="unhandledrejection";function Vg(n,e){var t;try{t=e.onuncatched(n)}catch{}if(t!==!1)try{var r,i={promise:e,reason:n};if(qt.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Xg,!0,!0),cn(r,i)):qt.CustomEvent&&cn(r=new CustomEvent(Xg,{detail:i}),i),r&&qt.dispatchEvent&&(dispatchEvent(r),!qt.PromiseRejectionEvent&&qt.onunhandledrejection))try{qt.onunhandledrejection(r)}catch{}Ki&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${n.stack||n}`)}catch{}}var Rr=Ve.reject;function f_(n,e,t,r){if(n.idbdb&&(n._state.openComplete||st.letThrough||n._vip)){var i=n._createTransaction(e,t,n._dbSchema);try{i.create(),n._state.PR1398_maxLoop=3}catch(s){return s.name===hm.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(()=>f_(n,e,t,r))):Rr(s)}return i._promise(e,(s,o)=>ba(()=>(st.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(n._state.openComplete)return Rr(new ft.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen)return Rr(new ft.DatabaseClosed);n.open().catch(Ut)}return n._state.dbReadyPromise.then(()=>f_(n,e,t,r))}const qg="3.2.7",uo="",d_=-1/0,gs="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",N1="String expected.",Bu=[],Uf=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),tS=Uf,rS=Uf,F1=n=>!/(dexie\.js|dexie\.min\.js)/.test(n),Gf="__dbnames",gp="readonly",xp="readwrite";function mo(n,e){return n?e?function(){return n.apply(this,arguments)&&e.apply(this,arguments)}:n:e}const L1={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ph(n){return typeof n!="string"||/\./.test(n)?e=>e:e=>(e[n]===void 0&&n in e&&delete(e=sc(e))[n],e)}class nS{_trans(e,t,r){const i=this._tx||st.trans,s=this.name;function o(c,v,_){if(!_.schema[s])throw new ft.NotFound("Table "+s+" not part of transaction");return t(_.idbtrans,_)}const u=ac();try{return i&&i.db===this.db?i===st.trans?i._promise(e,o,r):ba(()=>i._promise(e,o,r),{trans:i,transless:st.transless||st}):f_(this.db,e,[this.name],o)}finally{u&&oc()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(t)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(tn(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=wr(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(v=>{if(v.compound&&t.every(_=>v.keyPath.indexOf(_)>=0)){for(let _=0;_<t.length;++_)if(t.indexOf(v.keyPath[_])===-1)return!1;return!0}return!1}).sort((v,_)=>v.keyPath.length-_.keyPath.length)[0];if(r&&this.db._maxKey!==uo){const v=r.keyPath.slice(0,t.length);return this.where(v).equals(v.map(_=>e[_]))}!r&&Ki&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(v,_){try{return s.cmp(v,_)===0}catch{return!1}}const[u,c]=t.reduce(([v,_],h)=>{const d=i[h],m=e[h];return[v||d,v||!d?mo(_,d&&d.multi?x=>{const w=Rs(x,h);return tn(w)&&w.some(T=>o(m,T))}:x=>o(m,Rs(x,h))):_]},[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(c):r?this.filter(c):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,tn(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var s in r)if(jn(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass(function(e){cn(this,e)})}add(e,t){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Ph(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:t!=null?[t]:null,values:[s]})).then(o=>o.numFailures?Ve.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{xi(e,i,o)}catch{}return o})}update(e,t){if(typeof e!="object"||tn(e))return this.where(":id").equals(e).modify(t);{const r=Rs(e,this.schema.primKey.keyPath);if(r===void 0)return Rr(new ft.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?wr(t).forEach(i=>{xi(e,i,t[i])}):t(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(t)}}put(e,t){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Ph(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:t!=null?[t]:null})).then(o=>o.numFailures?Ve.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{xi(e,i,o)}catch{}return o})}delete(e){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[e]})).then(t=>t.numFailures?Ve.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:L1})).then(e=>e.numFailures?Ve.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",t=>this.core.getMany({keys:e,trans:t}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,t,r){const i=Array.isArray(t)?t:void 0,s=(r=r||(i?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:u,keyPath:c}=this.schema.primKey;if(c&&i)throw new ft.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ft.InvalidArgument("Arguments objects and keys must have the same length");const v=e.length;let _=c&&u?e.map(Ph(c)):e;return this.core.mutate({trans:o,type:"add",keys:i,values:_,wantResults:s}).then(({numFailures:h,results:d,lastResult:m,failures:x})=>{if(h===0)return s?d:m;throw new Fu(`${this.name}.bulkAdd(): ${h} of ${v} operations failed`,x)})})}bulkPut(e,t,r){const i=Array.isArray(t)?t:void 0,s=(r=r||(i?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:u,keyPath:c}=this.schema.primKey;if(c&&i)throw new ft.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ft.InvalidArgument("Arguments objects and keys must have the same length");const v=e.length;let _=c&&u?e.map(Ph(c)):e;return this.core.mutate({trans:o,type:"put",keys:i,values:_,wantResults:s}).then(({numFailures:h,results:d,lastResult:m,failures:x})=>{if(h===0)return s?d:m;throw new Fu(`${this.name}.bulkPut(): ${h} of ${v} operations failed`,x)})})}bulkDelete(e){const t=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new Fu(`${this.name}.bulkDelete(): ${r} of ${t} operations failed`,s)})}}function ju(n){var e={},t=function(o,u){if(u){for(var c=arguments.length,v=new Array(c-1);--c;)v[c-1]=arguments[c];return e[o].subscribe.apply(null,v),n}if(typeof o=="string")return e[o]};t.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return t;function s(o,u,c){if(typeof o!="object"){var v;u||(u=$T),c||(c=Ut);var _={subscribers:[],fire:c,subscribe:function(h){_.subscribers.indexOf(h)===-1&&(_.subscribers.push(h),_.fire=u(_.fire,h))},unsubscribe:function(h){_.subscribers=_.subscribers.filter(function(d){return d!==h}),_.fire=_.subscribers.reduce(u,c)}};return e[o]=t[o]=_,_}wr(v=o).forEach(function(h){var d=v[h];if(tn(d))s(h,v[h][0],v[h][1]);else{if(d!=="asap")throw new ft.InvalidArgument("Invalid event config");var m=s(h,qu,function(){for(var x=arguments.length,w=new Array(x);x--;)w[x]=arguments[x];m.subscribers.forEach(function(T){m1(function(){T.apply(null,w)})})})}})}}function gu(n,e){return wl(e).from({prototype:n}),e}function ul(n,e){return!(n.filter||n.algorithm||n.or)&&(e?n.justLimit:!n.replayFilter)}function bp(n,e){n.filter=mo(n.filter,e)}function wp(n,e,t){var r=n.replayFilter;n.replayFilter=r?()=>mo(r(),e()):e,n.justLimit=t&&!r}function uf(n,e){if(n.isPrimKey)return e.primaryKey;const t=e.getIndexByKeyPath(n.index);if(!t)throw new ft.Schema("KeyPath "+n.index+" on object store "+e.name+" is not indexed");return t}function Wg(n,e,t){const r=uf(n,e.schema);return e.openCursor({trans:t,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:r,range:n.range}})}function Ih(n,e,t,r){const i=n.replayFilter?mo(n.filter,n.replayFilter()):n.filter;if(n.or){const s={},o=(u,c,v)=>{if(!i||i(c,v,d=>c.stop(d),d=>c.fail(d))){var _=c.primaryKey,h=""+_;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(_)),jn(s,h)||(s[h]=!0,e(u,c,v))}};return Promise.all([n.or._iterate(o,t),$g(Wg(n,r,t),n.algorithm,o,!n.keysOnly&&n.valueMapper)])}return $g(Wg(n,r,t),mo(n.algorithm,i),e,!n.keysOnly&&n.valueMapper)}function $g(n,e,t,r){var i=Zt(r?(s,o,u)=>t(r(s),o,u):t);return n.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,u=>o=u,u=>{s.stop(u),o=Ut},u=>{s.fail(u),o=Ut})||i(s.value,s,u=>o=u),o()})})}function on(n,e){try{const t=Yg(n),r=Yg(e);if(t!==r)return t==="Array"?1:r==="Array"?-1:t==="binary"?1:r==="binary"?-1:t==="string"?1:r==="string"?-1:t==="Date"?1:r!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return n>e?1:n<e?-1:0;case"binary":return function(i,s){const o=i.length,u=s.length,c=o<u?o:u;for(let v=0;v<c;++v)if(i[v]!==s[v])return i[v]<s[v]?-1:1;return o===u?0:o<u?-1:1}(Kg(n),Kg(e));case"Array":return function(i,s){const o=i.length,u=s.length,c=o<u?o:u;for(let v=0;v<c;++v){const _=on(i[v],s[v]);if(_!==0)return _}return o===u?0:o<u?-1:1}(n,e)}}catch{}return NaN}function Yg(n){const e=typeof n;if(e!=="object")return e;if(ArrayBuffer.isView(n))return"binary";const t=t_(n);return t==="ArrayBuffer"?"binary":t}function Kg(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}class iS{_read(e,t){var r=this._ctx;return r.error?r.table._trans(null,Rr.bind(null,r.error)):r.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,Rr.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=mo(t.algorithm,e)}_iterate(e,t){return Ih(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&cn(r,e),t._ctx=r,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read(r=>Ih(t,e,r,t.table.core))}count(e){return this._read(t=>{const r=this._ctx,i=r.table.core;if(ul(r,!0))return i.count({trans:t,query:{index:uf(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return Ih(r,()=>(++s,!1),t,i).then(()=>s)}).then(e)}sortBy(e,t){const r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(v,_){return _?o(v[r[_]],_-1):v[i]}var u=this._ctx.dir==="next"?1:-1;function c(v,_){var h=o(v,s),d=o(_,s);return h<d?-u:h>d?u:0}return this.toArray(function(v){return v.sort(c)}).then(t)}toArray(e){return this._read(t=>{var r=this._ctx;if(r.dir==="next"&&ul(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=uf(r,r.table.core.schema);return r.table.core.query({trans:t,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return Ih(r,s=>i.push(s),t,r.table.core).then(()=>i)}},e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,ul(t)?wp(t,()=>{var r=e;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):wp(t,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),wp(this._ctx,()=>{var t=e;return function(r,i,s){return--t<=0&&i(s),t>=0}},!0),this}until(e,t){return bp(this._ctx,function(r,i,s){return!e(r.value)||(i(s),t)}),this}first(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,r;return bp(this._ctx,function(i){return e(i.value)}),t=this._ctx,r=e,t.isMatch=mo(t.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var t=this._ctx;if(t.dir==="next"&&ul(t,!0)&&t.limit>0)return this._read(i=>{var s=uf(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(({result:i})=>i).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(t){return t[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return bp(this._ctx,function(i){var s=i.primaryKey.toString(),o=jn(r,s);return r[s]=!0,!o}),this}modify(e){var t=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=wr(e),o=s.length;i=function(w){for(var T=!1,E=0;E<o;++E){var I=s[E],D=e[I];Rs(w,I)!==D&&(xi(w,I,D),T=!0)}return T}}const u=t.table.core,{outbound:c,extractKey:v}=u.schema.primaryKey,_=this.db._options.modifyChunkSize||200,h=[];let d=0;const m=[],x=(w,T)=>{const{failures:E,numFailures:I}=T;d+=w-I;for(let D of wr(E))h.push(E[D])};return this.clone().primaryKeys().then(w=>{const T=E=>{const I=Math.min(_,w.length-E);return u.getMany({trans:r,keys:w.slice(E,E+I),cache:"immutable"}).then(D=>{const z=[],O=[],U=c?[]:null,y=[];for(let F=0;F<I;++F){const W=D[F],ne={value:sc(W),primKey:w[E+F]};i.call(ne,ne.value,ne)!==!1&&(ne.value==null?y.push(w[E+F]):c||on(v(W),v(ne.value))===0?(O.push(ne.value),c&&U.push(w[E+F])):(y.push(w[E+F]),z.push(ne.value)))}const te=ul(t)&&t.limit===1/0&&(typeof e!="function"||e===Tp)&&{index:t.index,range:t.range};return Promise.resolve(z.length>0&&u.mutate({trans:r,type:"add",values:z}).then(F=>{for(let W in F.failures)y.splice(parseInt(W),1);x(z.length,F)})).then(()=>(O.length>0||te&&typeof e=="object")&&u.mutate({trans:r,type:"put",keys:U,values:O,criteria:te,changeSpec:typeof e!="function"&&e}).then(F=>x(O.length,F))).then(()=>(y.length>0||te&&e===Tp)&&u.mutate({trans:r,type:"delete",keys:y,criteria:te}).then(F=>x(y.length,F))).then(()=>w.length>E+I&&T(E+_))})};return T(0).then(()=>{if(h.length>0)throw new yf("Error modifying one or more objects",h,d,m);return w.length})})})}delete(){var e=this._ctx,t=e.range;return ul(e)&&(e.isPrimKey&&!rS||t.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,s=t;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:u,lastResult:c,results:v,numFailures:_})=>{if(_)throw new yf("Could not delete some values",Object.keys(u).map(h=>u[h]),o-_);return o-_}))}):this.modify(Tp)}}const Tp=(n,e)=>e.value=null;function sS(n,e){return n<e?-1:n===e?0:1}function aS(n,e){return n>e?-1:n===e?0:1}function Nn(n,e,t){var r=n instanceof j1?new n.Collection(n):n;return r._ctx.error=t?new t(e):new TypeError(e),r}function cl(n){return new n.Collection(n,()=>B1("")).limit(0)}function oS(n,e,t,r,i,s){for(var o=Math.min(n.length,r.length),u=-1,c=0;c<o;++c){var v=e[c];if(v!==r[c])return i(n[c],t[c])<0?n.substr(0,c)+t[c]+t.substr(c+1):i(n[c],r[c])<0?n.substr(0,c)+r[c]+t.substr(c+1):u>=0?n.substr(0,u)+e[u]+t.substr(u+1):null;i(n[c],v)<0&&(u=c)}return o<r.length&&s==="next"?n+t.substr(n.length):o<n.length&&s==="prev"?n.substr(0,t.length):u<0?null:n.substr(0,u)+r[u]+t.substr(u+1)}function Oh(n,e,t,r){var i,s,o,u,c,v,_,h=t.length;if(!t.every(w=>typeof w=="string"))return Nn(n,N1);function d(w){i=function(E){return E==="next"?I=>I.toUpperCase():I=>I.toLowerCase()}(w),s=function(E){return E==="next"?I=>I.toLowerCase():I=>I.toUpperCase()}(w),o=w==="next"?sS:aS;var T=t.map(function(E){return{lower:s(E),upper:i(E)}}).sort(function(E,I){return o(E.lower,I.lower)});u=T.map(function(E){return E.upper}),c=T.map(function(E){return E.lower}),v=w,_=w==="next"?"":r}d("next");var m=new n.Collection(n,()=>da(u[0],c[h-1]+r));m._ondirectionchange=function(w){d(w)};var x=0;return m._addAlgorithm(function(w,T,E){var I=w.key;if(typeof I!="string")return!1;var D=s(I);if(e(D,c,x))return!0;for(var z=null,O=x;O<h;++O){var U=oS(I,D,u[O],c[O],o,v);U===null&&z===null?x=O+1:(z===null||o(z,U)>0)&&(z=U)}return T(z!==null?function(){w.continue(z+_)}:E),!1}),m}function da(n,e,t,r){return{type:2,lower:n,upper:e,lowerOpen:t,upperOpen:r}}function B1(n){return{type:1,lower:n,upper:n}}class j1{get Collection(){return this._ctx.table.db.Collection}between(e,t,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,t)>0||this._cmp(e,t)===0&&(r||i)&&(!r||!i)?cl(this):new this.Collection(this,()=>da(e,t,!r,!i))}catch{return Nn(this,gs)}}equals(e){return e==null?Nn(this,gs):new this.Collection(this,()=>B1(e))}above(e){return e==null?Nn(this,gs):new this.Collection(this,()=>da(e,void 0,!0))}aboveOrEqual(e){return e==null?Nn(this,gs):new this.Collection(this,()=>da(e,void 0,!1))}below(e){return e==null?Nn(this,gs):new this.Collection(this,()=>da(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Nn(this,gs):new this.Collection(this,()=>da(void 0,e))}startsWith(e){return typeof e!="string"?Nn(this,N1):this.between(e,e+uo,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Oh(this,(t,r)=>t.indexOf(r[0])===0,[e],uo)}equalsIgnoreCase(e){return Oh(this,(t,r)=>t===r[0],[e],"")}anyOfIgnoreCase(){var e=Es.apply(_l,arguments);return e.length===0?cl(this):Oh(this,(t,r)=>r.indexOf(t)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Es.apply(_l,arguments);return e.length===0?cl(this):Oh(this,(t,r)=>r.some(i=>t.indexOf(i)===0),e,uo)}anyOf(){const e=Es.apply(_l,arguments);let t=this._cmp;try{e.sort(t)}catch{return Nn(this,gs)}if(e.length===0)return cl(this);const r=new this.Collection(this,()=>da(e[0],e[e.length-1]));r._ondirectionchange=s=>{t=s==="next"?this._ascending:this._descending,e.sort(t)};let i=0;return r._addAlgorithm((s,o,u)=>{const c=s.key;for(;t(c,e[i])>0;)if(++i,i===e.length)return o(u),!1;return t(c,e[i])===0||(o(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[d_,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Es.apply(_l,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Nn(this,gs)}const t=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[d_,i]],null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,u=this._max;if(e.length===0)return cl(this);if(!e.every(I=>I[0]!==void 0&&I[1]!==void 0&&i(I[0],I[1])<=0))return Nn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ft.InvalidArgument);const c=!t||t.includeLowers!==!1,v=t&&t.includeUppers===!0;let _,h=i;function d(I,D){return h(I[0],D[0])}try{_=e.reduce(function(I,D){let z=0,O=I.length;for(;z<O;++z){const U=I[z];if(r(D[0],U[1])<0&&r(D[1],U[0])>0){U[0]=o(U[0],D[0]),U[1]=u(U[1],D[1]);break}}return z===O&&I.push(D),I},[]),_.sort(d)}catch{return Nn(this,gs)}let m=0;const x=v?I=>i(I,_[m][1])>0:I=>i(I,_[m][1])>=0,w=c?I=>s(I,_[m][0])>0:I=>s(I,_[m][0])>=0;let T=x;const E=new this.Collection(this,()=>da(_[0][0],_[_.length-1][1],!c,!v));return E._ondirectionchange=I=>{I==="next"?(T=x,h=i):(T=w,h=s),_.sort(d)},E._addAlgorithm((I,D,z)=>{for(var O=I.key;T(O);)if(++m,m===_.length)return D(z),!1;return!!function(U){return!x(U)&&!w(U)}(O)||(this._cmp(O,_[m][1])===0||this._cmp(O,_[m][0])===0||D(()=>{h===i?I.continue(_[m][0]):I.continue(_[m][1])}),!1)}),E}startsWithAnyOf(){const e=Es.apply(_l,arguments);return e.every(t=>typeof t=="string")?e.length===0?cl(this):this.inAnyRange(e.map(t=>[t,t+uo])):Nn(this,"startsWithAnyOf() only works with strings")}}function Gi(n){return Zt(function(e){return $u(e),n(e.target.error),!1})}function $u(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}const Yu="storagemutated",va="x-storagemutated-1",Ta=ju(null,Yu);class lS{_lock(){return Ru(!st.global),++this._reculock,this._reculock!==1||st.global||(st.lockOwnerFor=this),this}_unlock(){if(Ru(!st.global),--this._reculock==0)for(st.global||(st.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{kl(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&st.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,r=this.db._state.dbOpenError;if(Ru(!this.idbtrans),!e&&!t)switch(r&&r.name){case"DatabaseClosedError":throw new ft.DatabaseClosed(r);case"MissingAPIError":throw new ft.MissingAPI(r.message,r);default:throw new ft.OpenFailed(r)}if(!this.active)throw new ft.TransactionInactive;return Ru(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Zt(i=>{$u(i),this._reject(e.error)}),e.onabort=Zt(i=>{$u(i),this.active&&this._reject(new ft.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=Zt(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Ta.storagemutated.fire(e.mutatedParts)}),this}_promise(e,t,r){if(e==="readwrite"&&this.mode!=="readwrite")return Rr(new ft.ReadOnly("Transaction is readonly"));if(!this.active)return Rr(new ft.TransactionInactive);if(this._locked())return new Ve((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,t,r).then(s,o)},st])});if(r)return ba(()=>{var s=new Ve((o,u)=>{this._lock();const c=t(o,u,this);c&&c.then&&c.then(o,u)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new Ve((s,o)=>{var u=t(s,o,this);u&&u.then&&u.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const r=Ve.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>r);else{t._waitingFor=r,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);(function o(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=t._waitingFor;return new Ve((o,u)=>{r.then(c=>t._waitingQueue.push(Zt(o.bind(null,c))),c=>t._waitingQueue.push(Zt(u.bind(null,c)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ft.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(jn(t,e))return t[e];const r=this.schema[e];if(!r)throw new ft.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),t[e]=i,i}}function p_(n,e,t,r,i,s,o){return{name:n,keyPath:e,unique:t,multi:r,auto:i,compound:s,src:(t&&!o?"&":"")+(r?"*":"")+(i?"++":"")+U1(e)}}function U1(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function G1(n,e,t){return{name:n,primKey:e,indexes:t,mappedClass:null,idxByName:y1(t,r=>[r.name,r])}}let Ku=n=>{try{return n.only([[]]),Ku=()=>[[]],[[]]}catch{return Ku=()=>uo,uo}};function v_(n){return n==null?()=>{}:typeof n=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Rs(r,e)}(n):e=>Rs(e,n)}function Qg(n){return[].slice.call(n)}let uS=0;function Uu(n){return n==null?":id":typeof n=="string"?n:`[${n.join("+")}]`}function cS(n,e,t){function r(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:v,upper:_,lowerOpen:h,upperOpen:d}=c;return v===void 0?_===void 0?null:e.upperBound(_,!!d):_===void 0?e.lowerBound(v,!!h):e.bound(v,_,!!h,!!d)}const{schema:i,hasGetAll:s}=function(c,v){const _=Qg(c.objectStoreNames);return{schema:{name:c.name,tables:_.map(h=>v.objectStore(h)).map(h=>{const{keyPath:d,autoIncrement:m}=h,x=tn(d),w=d==null,T={},E={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:x,keyPath:d,autoIncrement:m,unique:!0,extractKey:v_(d)},indexes:Qg(h.indexNames).map(I=>h.index(I)).map(I=>{const{name:D,unique:z,multiEntry:O,keyPath:U}=I,y={name:D,compound:tn(U),keyPath:U,unique:z,multiEntry:O,extractKey:v_(U)};return T[Uu(U)]=y,y}),getIndexByKeyPath:I=>T[Uu(I)]};return T[":id"]=E.primaryKey,d!=null&&(T[Uu(d)]=E.primaryKey),E})},hasGetAll:_.length>0&&"getAll"in v.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(n,t),o=i.tables.map(c=>function(v){const _=v.name;return{name:_,schema:v,mutate:function({trans:h,type:d,keys:m,values:x,range:w}){return new Promise((T,E)=>{T=Zt(T);const I=h.objectStore(_),D=I.keyPath==null,z=d==="put"||d==="add";if(!z&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:O}=m||x||{length:1};if(m&&x&&m.length!==x.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return T({numFailures:0,failures:{},results:[],lastResult:void 0});let U;const y=[],te=[];let F=0;const W=ee=>{++F,$u(ee)};if(d==="deleteRange"){if(w.type===4)return T({numFailures:F,failures:te,results:[],lastResult:void 0});w.type===3?y.push(U=I.clear()):y.push(U=I.delete(r(w)))}else{const[ee,ue]=z?D?[x,m]:[x,null]:[m,null];if(z)for(let ye=0;ye<O;++ye)y.push(U=ue&&ue[ye]!==void 0?I[d](ee[ye],ue[ye]):I[d](ee[ye])),U.onerror=W;else for(let ye=0;ye<O;++ye)y.push(U=I[d](ee[ye])),U.onerror=W}const ne=ee=>{const ue=ee.target.result;y.forEach((ye,K)=>ye.error!=null&&(te[K]=ye.error)),T({numFailures:F,failures:te,results:d==="delete"?m:y.map(ye=>ye.result),lastResult:ue})};U.onerror=ee=>{W(ee),ne(ee)},U.onsuccess=ne})},getMany:({trans:h,keys:d})=>new Promise((m,x)=>{m=Zt(m);const w=h.objectStore(_),T=d.length,E=new Array(T);let I,D=0,z=0;const O=y=>{const te=y.target;E[te._pos]=te.result,++z===D&&m(E)},U=Gi(x);for(let y=0;y<T;++y)d[y]!=null&&(I=w.get(d[y]),I._pos=y,I.onsuccess=O,I.onerror=U,++D);D===0&&m(E)}),get:({trans:h,key:d})=>new Promise((m,x)=>{m=Zt(m);const w=h.objectStore(_).get(d);w.onsuccess=T=>m(T.target.result),w.onerror=Gi(x)}),query:function(h){return d=>new Promise((m,x)=>{m=Zt(m);const{trans:w,values:T,limit:E,query:I}=d,D=E===1/0?void 0:E,{index:z,range:O}=I,U=w.objectStore(_),y=z.isPrimaryKey?U:U.index(z.name),te=r(O);if(E===0)return m({result:[]});if(h){const F=T?y.getAll(te,D):y.getAllKeys(te,D);F.onsuccess=W=>m({result:W.target.result}),F.onerror=Gi(x)}else{let F=0;const W=T||!("openKeyCursor"in y)?y.openCursor(te):y.openKeyCursor(te),ne=[];W.onsuccess=ee=>{const ue=W.result;return ue?(ne.push(T?ue.value:ue.primaryKey),++F===E?m({result:ne}):void ue.continue()):m({result:ne})},W.onerror=Gi(x)}})}(s),openCursor:function({trans:h,values:d,query:m,reverse:x,unique:w}){return new Promise((T,E)=>{T=Zt(T);const{index:I,range:D}=m,z=h.objectStore(_),O=I.isPrimaryKey?z:z.index(I.name),U=x?w?"prevunique":"prev":w?"nextunique":"next",y=d||!("openKeyCursor"in O)?O.openCursor(r(D),U):O.openKeyCursor(r(D),U);y.onerror=Gi(E),y.onsuccess=Zt(te=>{const F=y.result;if(!F)return void T(null);F.___id=++uS,F.done=!1;const W=F.continue.bind(F);let ne=F.continuePrimaryKey;ne&&(ne=ne.bind(F));const ee=F.advance.bind(F),ue=()=>{throw new Error("Cursor not stopped")};F.trans=h,F.stop=F.continue=F.continuePrimaryKey=F.advance=()=>{throw new Error("Cursor not started")},F.fail=Zt(E),F.next=function(){let ye=1;return this.start(()=>ye--?this.continue():this.stop()).then(()=>this)},F.start=ye=>{const K=new Promise((V,G)=>{V=Zt(V),y.onerror=Gi(G),F.fail=G,F.stop=Y=>{F.stop=F.continue=F.continuePrimaryKey=F.advance=ue,V(Y)}}),B=()=>{if(y.result)try{ye()}catch(V){F.fail(V)}else F.done=!0,F.start=()=>{throw new Error("Cursor behind last entry")},F.stop()};return y.onsuccess=Zt(V=>{y.onsuccess=B,B()}),F.continue=W,F.continuePrimaryKey=ne,F.advance=ee,B(),K},T(F)},E)})},count({query:h,trans:d}){const{index:m,range:x}=h;return new Promise((w,T)=>{const E=d.objectStore(_),I=m.isPrimaryKey?E:E.index(m.name),D=r(x),z=D?I.count(D):I.count();z.onsuccess=Zt(O=>w(O.target.result)),z.onerror=Gi(T)})}}}(c)),u={};return o.forEach(c=>u[c.name]=c),{stack:"dbcore",transaction:n.transaction.bind(n),table(c){if(!u[c])throw new Error(`Table '${c}' not found`);return u[c]},MIN_KEY:-1/0,MAX_KEY:Ku(e),schema:i}}function __({_novip:n},e){const t=e.db,r=function(i,s,{IDBKeyRange:o,indexedDB:u},c){return{dbcore:function(_,h){return h.reduce((d,{create:m})=>({...d,...m(d)}),_)}(cS(s,o,c),i.dbcore)}}(n._middlewares,t,n._deps,e);n.core=r.dbcore,n.tables.forEach(i=>{const s=i.name;n.core.schema.tables.some(o=>o.name===s)&&(i.core=n.core.table(s),n[s]instanceof n.Table&&(n[s].core=i.core))})}function Tf({_novip:n},e,t,r){t.forEach(i=>{const s=r[i];e.forEach(o=>{const u=lm(o,i);(!u||"value"in u&&u.value===void 0)&&(o===n.Transaction.prototype||o instanceof n.Transaction?Os(o,i,{get(){return this.table(i)},set(c){v1(this,i,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new n.Table(i,s))})})}function m_({_novip:n},e){e.forEach(t=>{for(let r in t)t[r]instanceof n.Table&&delete t[r]})}function hS(n,e){return n._cfg.version-e._cfg.version}function fS(n,e,t,r){const i=n._dbSchema,s=n._createTransaction("readwrite",n._storeNames,i);s.create(t),s._completion.catch(r);const o=s._reject.bind(s),u=st.transless||st;ba(()=>{st.trans=s,st.transless=u,e===0?(wr(i).forEach(c=>{Sp(t,c,i[c].primKey,i[c].indexes)}),__(n,t),Ve.follow(()=>n.on.populate.fire(s)).catch(o)):function({_novip:c},v,_,h){const d=[],m=c._versions;let x=c._dbSchema=g_(c,c.idbdb,h),w=!1;const T=m.filter(I=>I._cfg.version>=v);function E(){return d.length?Ve.resolve(d.shift()(_.idbtrans)).then(E):Ve.resolve()}return T.forEach(I=>{d.push(()=>{const D=x,z=I._cfg.dbschema;x_(c,D,h),x_(c,z,h),x=c._dbSchema=z;const O=H1(D,z);O.add.forEach(y=>{Sp(h,y[0],y[1].primKey,y[1].indexes)}),O.change.forEach(y=>{if(y.recreate)throw new ft.Upgrade("Not yet support for changing primary key");{const te=h.objectStore(y.name);y.add.forEach(F=>y_(te,F)),y.change.forEach(F=>{te.deleteIndex(F.name),y_(te,F)}),y.del.forEach(F=>te.deleteIndex(F))}});const U=I._cfg.contentUpgrade;if(U&&I._cfg.version>v){__(c,h),_._memoizedTables={},w=!0;let y=g1(z);O.del.forEach(ne=>{y[ne]=D[ne]}),m_(c,[c.Transaction.prototype]),Tf(c,[c.Transaction.prototype],wr(y),y),_.schema=y;const te=um(U);let F;te&&Ml();const W=Ve.follow(()=>{if(F=U(_),F&&te){var ne=Ms.bind(null,null);F.then(ne,ne)}});return F&&typeof F.then=="function"?Ve.resolve(F):W.then(()=>F)}}),d.push(D=>{(!w||!tS)&&function(z,O){[].slice.call(O.db.objectStoreNames).forEach(U=>z[U]==null&&O.db.deleteObjectStore(U))}(I._cfg.dbschema,D),m_(c,[c.Transaction.prototype]),Tf(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),_.schema=c._dbSchema})}),E().then(()=>{var I,D;D=h,wr(I=x).forEach(z=>{D.db.objectStoreNames.contains(z)||Sp(D,z,I[z].primKey,I[z].indexes)})})}(n,e,s,t).catch(o)})}function H1(n,e){const t={del:[],add:[],change:[]};let r;for(r in n)e[r]||t.del.push(r);for(r in e){const i=n[r],s=e[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Uf)o.recreate=!0,t.change.push(o);else{const u=i.idxByName,c=s.idxByName;let v;for(v in u)c[v]||o.del.push(v);for(v in c){const _=u[v],h=c[v];_?_.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&t.change.push(o)}}else t.add.push([r,s])}return t}function Sp(n,e,t,r){const i=n.db.createObjectStore(e,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(s=>y_(i,s)),i}function y_(n,e){n.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function g_(n,e,t){const r={};return mf(e.objectStoreNames,0).forEach(i=>{const s=t.objectStore(i);let o=s.keyPath;const u=p_(U1(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),c=[];for(let _=0;_<s.indexNames.length;++_){const h=s.index(s.indexNames[_]);o=h.keyPath;var v=p_(h.name,o,!!h.unique,!!h.multiEntry,!1,o&&typeof o!="string",!1);c.push(v)}r[i]=G1(i,u,c)}),r}function x_({_novip:n},e,t){const r=t.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=t.objectStore(s);n._hasGetAll="getAll"in o;for(let u=0;u<o.indexNames.length;++u){const c=o.indexNames[u],v=o.index(c).keyPath,_=typeof v=="string"?v:"["+mf(v).join("+")+"]";if(e[s]){const h=e[s].idxByName[_];h&&(h.name=c,delete e[s].idxByName[_],e[s].idxByName[c]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&qt.WorkerGlobalScope&&qt instanceof qt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}class dS{_parseStoresSpec(e,t){wr(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((o,u)=>{const c=(o=o.trim()).replace(/([&*]|\+\+)/g,""),v=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return p_(c,v||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),tn(v),u===0)}),s=i.shift();if(s.multi)throw new ft.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new ft.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new ft.Schema("Index must have a name and cannot be an empty string")}),t[r]=G1(r,s,i)}})}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?cn(this._cfg.storesSource,e):e;const r=t._versions,i={};let s={};return r.forEach(o=>{cn(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),t._dbSchema=s,m_(t,[t._allTables,t,t.Transaction.prototype]),Tf(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],wr(s),s),t._storeNames=wr(s),this}upgrade(e){return this._cfg.contentUpgrade=fm(this._cfg.contentUpgrade||Ut,e),this}}function _m(n,e){let t=n._dbNamesDB;return t||(t=n._dbNamesDB=new fo(Gf,{addons:[],indexedDB:n,IDBKeyRange:e}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function mm(n){return n&&typeof n.databases=="function"}function b_(n){return ba(function(){return st.letThrough=!0,n()})}function pS(){var n;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var t=function(){return indexedDB.databases().finally(e)};n=setInterval(t,100),t()}).finally(function(){return clearInterval(n)}):Promise.resolve()}function vS(n){const e=n._state,{indexedDB:t}=n._deps;if(e.isBeingOpened||n.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Rr(e.dbOpenError):n);Ki&&(e.openCanceller._stackHolder=wo()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new ft.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,u=!1;const c=()=>new Ve((v,_)=>{if(i(),!t)throw new ft.MissingAPI;const h=n.name,d=e.autoSchema?t.open(h):t.open(h,Math.round(10*n.verno));if(!d)throw new ft.MissingAPI;d.onerror=Gi(_),d.onblocked=Zt(n._fireOnBlocked),d.onupgradeneeded=Zt(m=>{if(o=d.transaction,e.autoSchema&&!n._options.allowEmptyDB){d.onerror=$u,o.abort(),d.result.close();const w=t.deleteDatabase(h);w.onsuccess=w.onerror=Zt(()=>{_(new ft.NoSuchDatabase(`Database ${h} doesnt exist`))})}else{o.onerror=Gi(_);var x=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;u=x<1,n._novip.idbdb=d.result,fS(n,x/10,o,_)}},_),d.onsuccess=Zt(()=>{o=null;const m=n._novip.idbdb=d.result,x=mf(m.objectStoreNames);if(x.length>0)try{const T=m.transaction((w=x).length===1?w[0]:w,"readonly");e.autoSchema?function({_novip:E},I,D){E.verno=I.version/10;const z=E._dbSchema=g_(0,I,D);E._storeNames=mf(I.objectStoreNames,0),Tf(E,[E._allTables],wr(z),z)}(n,m,T):(x_(n,n._dbSchema,T),function(E,I){const D=H1(g_(0,E.idbdb,I),E._dbSchema);return!(D.add.length||D.change.some(z=>z.add.length||z.change.length))}(n,T)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),__(n,T)}catch{}var w;Bu.push(n),m.onversionchange=Zt(T=>{e.vcFired=!0,n.on("versionchange").fire(T)}),m.onclose=Zt(T=>{n.on("close").fire(T)}),u&&function({indexedDB:T,IDBKeyRange:E},I){!mm(T)&&I!==Gf&&_m(T,E).put({name:I}).catch(Ut)}(n._deps,h),v()},_)}).catch(v=>v&&v.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c()):Ve.reject(v));return Ve.race([r,(typeof navigator>"u"?Ve.resolve():pS()).then(c)]).then(()=>(i(),e.onReadyBeingFired=[],Ve.resolve(b_(()=>n.on.ready.fire(n.vip))).then(function v(){if(e.onReadyBeingFired.length>0){let _=e.onReadyBeingFired.reduce(fm,Ut);return e.onReadyBeingFired=[],Ve.resolve(b_(()=>_(n.vip))).then(v)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>n).catch(v=>{e.dbOpenError=v;try{o&&o.abort()}catch{}return r===e.openCanceller&&n._close(),Rr(v)}).finally(()=>{e.openComplete=!0,s()})}function w_(n){var e=s=>n.next(s),t=i(e),r=i(s=>n.throw(s));function i(s){return o=>{var u=s(o),c=u.value;return u.done?c:c&&typeof c.then=="function"?c.then(t,r):tn(c)?Promise.all(c).then(t,r):t(c)}}return i(e)()}function _S(n,e,t){var r=arguments.length;if(r<2)throw new ft.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return t=i.pop(),[n,x1(i),t]}function z1(n,e,t,r,i){return Ve.resolve().then(()=>{const s=st.transless||st,o=n._createTransaction(e,t,n._dbSchema,r),u={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),n._state.PR1398_maxLoop=3}catch(h){return h.name===hm.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(()=>z1(n,e,t,null,i))):Rr(h)}const c=um(i);let v;c&&Ml();const _=Ve.follow(()=>{if(v=i.call(o,o),v)if(c){var h=Ms.bind(null,null);v.then(h,h)}else typeof v.next=="function"&&typeof v.throw=="function"&&(v=w_(v))},u);return(v&&typeof v.then=="function"?Ve.resolve(v).then(h=>o.active?h:Rr(new ft.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):_.then(()=>v)).then(h=>(r&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),Rr(h)))})}function Rh(n,e,t){const r=tn(n)?n.slice():[n];for(let i=0;i<t;++i)r.push(e);return r}const mS={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return{...n,table(e){const t=n.table(e),{schema:r}=t,i={},s=[];function o(_,h,d){const m=Uu(_),x=i[m]=i[m]||[],w=_==null?0:typeof _=="string"?1:_.length,T=h>0,E={...d,isVirtual:T,keyTail:h,keyLength:w,extractKey:v_(_),unique:!T&&d.unique};return x.push(E),E.isPrimaryKey||s.push(E),w>1&&o(w===2?_[0]:_.slice(0,w-1),h+1,d),x.sort((I,D)=>I.keyTail-D.keyTail),E}const u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(const _ of r.indexes)o(_.keyPath,0,_);function c(_){const h=_.query.index;return h.isVirtual?{..._,query:{index:h,range:(d=_.query.range,m=h.keyTail,{type:d.type===1?2:d.type,lower:Rh(d.lower,d.lowerOpen?n.MAX_KEY:n.MIN_KEY,m),lowerOpen:!0,upper:Rh(d.upper,d.upperOpen?n.MIN_KEY:n.MAX_KEY,m),upperOpen:!0})}}:_;var d,m}return{...t,schema:{...r,primaryKey:u,indexes:s,getIndexByKeyPath:function(_){const h=i[Uu(_)];return h&&h[0]}},count:_=>t.count(c(_)),query:_=>t.query(c(_)),openCursor(_){const{keyTail:h,isVirtual:d,keyLength:m}=_.query.index;return d?t.openCursor(c(_)).then(x=>x&&function(w){return Object.create(w,{continue:{value:function(E){E!=null?w.continue(Rh(E,_.reverse?n.MAX_KEY:n.MIN_KEY,h)):_.unique?w.continue(w.key.slice(0,m).concat(_.reverse?n.MIN_KEY:n.MAX_KEY,h)):w.continue()}},continuePrimaryKey:{value(E,I){w.continuePrimaryKey(Rh(E,n.MAX_KEY,h),I)}},primaryKey:{get:()=>w.primaryKey},key:{get(){const E=w.key;return m===1?E[0]:E.slice(0,m)}},value:{get:()=>w.value}})}(x)):t.openCursor(_)}}}}}};function ym(n,e,t,r){return t=t||{},r=r||"",wr(n).forEach(i=>{if(jn(e,i)){var s=n[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const u=t_(s);u!==t_(o)?t[r+i]=e[i]:u==="Object"?ym(s,o,t,r+i+"."):s!==o&&(t[r+i]=e[i])}else s!==o&&(t[r+i]=e[i])}else t[r+i]=void 0}),wr(e).forEach(i=>{jn(n,i)||(t[r+i]=e[i])}),t}const yS={stack:"dbcore",name:"HooksMiddleware",level:2,create:n=>({...n,table(e){const t=n.table(e),{primaryKey:r}=t.schema;return{...t,mutate(s){const o=st.trans,{deleting:u,creating:c,updating:v}=o.table(e).hook;switch(s.type){case"add":if(c.fire===Ut)break;return o._promise("readwrite",()=>_(s),!0);case"put":if(c.fire===Ut&&v.fire===Ut)break;return o._promise("readwrite",()=>_(s),!0);case"delete":if(u.fire===Ut)break;return o._promise("readwrite",()=>_(s),!0);case"deleteRange":if(u.fire===Ut)break;return o._promise("readwrite",()=>function(d){return h(d.trans,d.range,1e4)}(s),!0)}return t.mutate(s);function _(d){const m=st.trans,x=d.keys||function(w,T){return T.type==="delete"?T.keys:T.keys||T.values.map(w.extractKey)}(r,d);if(!x)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:x}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(w,T,E){return T.type==="add"?Promise.resolve([]):w.getMany({trans:T.trans,keys:E,cache:"immutable"})}(t,d,x).then(w=>{const T=x.map((E,I)=>{const D=w[I],z={onerror:null,onsuccess:null};if(d.type==="delete")u.fire.call(z,E,D,m);else if(d.type==="add"||D===void 0){const O=c.fire.call(z,E,d.values[I],m);E==null&&O!=null&&(E=O,d.keys[I]=E,r.outbound||xi(d.values[I],r.keyPath,E))}else{const O=ym(D,d.values[I]),U=v.fire.call(z,O,E,D,m);if(U){const y=d.values[I];Object.keys(U).forEach(te=>{jn(y,te)?y[te]=U[te]:xi(y,te,U[te])})}}return z});return t.mutate(d).then(({failures:E,results:I,numFailures:D,lastResult:z})=>{for(let O=0;O<x.length;++O){const U=I?I[O]:x[O],y=T[O];U==null?y.onerror&&y.onerror(E[O]):y.onsuccess&&y.onsuccess(d.type==="put"&&w[O]?d.values[O]:U)}return{failures:E,results:I,numFailures:D,lastResult:z}}).catch(E=>(T.forEach(I=>I.onerror&&I.onerror(E)),Promise.reject(E)))})}function h(d,m,x){return t.query({trans:d,values:!1,query:{index:r,range:m},limit:x}).then(({result:w})=>_({type:"delete",keys:w,trans:d}).then(T=>T.numFailures>0?Promise.reject(T.failures[0]):w.length<x?{failures:[],numFailures:0,lastResult:void 0}:h(d,{...m,lower:w[w.length-1],lowerOpen:!0},x)))}}}}})};function X1(n,e,t){try{if(!e||e.keys.length<n.length)return null;const r=[];for(let i=0,s=0;i<e.keys.length&&s<n.length;++i)on(e.keys[i],n[s])===0&&(r.push(t?sc(e.values[i]):e.values[i]),++s);return r.length===n.length?r:null}catch{return null}}const gS={stack:"dbcore",level:-1,create:n=>({table:e=>{const t=n.table(e);return{...t,getMany:r=>{if(!r.cache)return t.getMany(r);const i=X1(r.keys,r.trans._cache,r.cache==="clone");return i?Ve.resolve(i):t.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?sc(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),t.mutate(r))}}})};function gm(n){return!("from"in n)}const Ts=function(n,e){if(!this){const t=new Ts;return n&&"d"in n&&cn(t,n),t}cn(this,arguments.length?{d:1,from:n,to:arguments.length>1?e:n}:{d:0})};function Qu(n,e,t){const r=on(e,t);if(isNaN(r))return;if(r>0)throw RangeError();if(gm(n))return cn(n,{from:e,to:t,d:1});const i=n.l,s=n.r;if(on(t,n.from)<0)return i?Qu(i,e,t):n.l={from:e,to:t,d:1,l:null,r:null},Zg(n);if(on(e,n.to)>0)return s?Qu(s,e,t):n.r={from:e,to:t,d:1,l:null,r:null},Zg(n);on(e,n.from)<0&&(n.from=e,n.l=null,n.d=s?s.d+1:1),on(t,n.to)>0&&(n.to=t,n.r=null,n.d=n.l?n.l.d+1:1);const o=!n.r;i&&!n.l&&Sf(n,i),s&&o&&Sf(n,s)}function Sf(n,e){gm(e)||function t(r,{from:i,to:s,l:o,r:u}){Qu(r,i,s),o&&t(r,o),u&&t(r,u)}(n,e)}function xS(n,e){const t=T_(e);let r=t.next();if(r.done)return!1;let i=r.value;const s=T_(n);let o=s.next(i.from),u=o.value;for(;!r.done&&!o.done;){if(on(u.from,i.to)<=0&&on(u.to,i.from)>=0)return!0;on(i.from,u.from)<0?i=(r=t.next(u.from)).value:u=(o=s.next(i.from)).value}return!1}function T_(n){let e=gm(n)?null:{s:0,n};return{next(t){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&on(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||on(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Zg(n){var e,t;const r=(((e=n.r)===null||e===void 0?void 0:e.d)||0)-(((t=n.l)===null||t===void 0?void 0:t.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...n},u=n[i];n.from=u.from,n.to=u.to,n[i]=u[i],o[i]=u[s],n[s]=o,o.d=Jg(o)}n.d=Jg(n)}function Jg({r:n,l:e}){return(n?e?Math.max(n.d,e.d):n.d:e?e.d:0)+1}Pl(Ts.prototype,{add(n){return Sf(this,n),this},addKey(n){return Qu(this,n,n),this},addKeys(n){return n.forEach(e=>Qu(this,e,e)),this},[r_](){return T_(this)}});const bS={stack:"dbcore",level:0,create:n=>{const e=n.schema.name,t=new Ts(n.MIN_KEY,n.MAX_KEY);return{...n,table:r=>{const i=n.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:u,outbound:c}=o,v={...i,mutate:d=>{const m=d.trans,x=m.mutatedParts||(m.mutatedParts={}),w=U=>{const y=`idb://${e}/${r}/${U}`;return x[y]||(x[y]=new Ts)},T=w(""),E=w(":dels"),{type:I}=d;let[D,z]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const O=d.trans._cache;return i.mutate(d).then(U=>{if(tn(D)){I!=="delete"&&(D=U.results),T.addKeys(D);const y=X1(D,O);y||I==="add"||E.addKeys(D),(y||z)&&function(te,F,W,ne){function ee(ue){const ye=te(ue.name||"");function K(V){return V!=null?ue.extractKey(V):null}const B=V=>ue.multiEntry&&tn(V)?V.forEach(G=>ye.addKey(G)):ye.addKey(V);(W||ne).forEach((V,G)=>{const Y=W&&K(W[G]),q=ne&&K(ne[G]);on(Y,q)!==0&&(Y!=null&&B(Y),q!=null&&B(q))})}F.indexes.forEach(ee)}(w,s,y,z)}else if(D){const y={from:D.lower,to:D.upper};E.add(y),T.add(y)}else T.add(t),E.add(t),s.indexes.forEach(y=>w(y.name).add(t));return U})}},_=({query:{index:d,range:m}})=>{var x,w;return[d,new Ts((x=m.lower)!==null&&x!==void 0?x:n.MIN_KEY,(w=m.upper)!==null&&w!==void 0?w:n.MAX_KEY)]},h={get:d=>[o,new Ts(d.key)],getMany:d=>[o,new Ts().addKeys(d.keys)],count:_,query:_,openCursor:_};return wr(h).forEach(d=>{v[d]=function(m){const{subscr:x}=st;if(x){const w=z=>{const O=`idb://${e}/${r}/${z}`;return x[O]||(x[O]=new Ts)},T=w(""),E=w(":dels"),[I,D]=h[d](m);if(w(I.name||"").add(D),!I.isPrimaryKey){if(d!=="count"){const z=d==="query"&&c&&m.values&&i.query({...m,values:!1});return i[d].apply(this,arguments).then(O=>{if(d==="query"){if(c&&m.values)return z.then(({result:y})=>(T.addKeys(y),O));const U=m.values?O.result.map(u):O.result;m.values?T.addKeys(U):E.addKeys(U)}else if(d==="openCursor"){const U=O,y=m.values;return U&&Object.create(U,{key:{get:()=>(E.addKey(U.primaryKey),U.key)},primaryKey:{get(){const te=U.primaryKey;return E.addKey(te),te}},value:{get:()=>(y&&T.addKey(U.primaryKey),U.value)}})}return O})}E.add(t)}}return i[d].apply(this,arguments)}}),v}}}};class fo{constructor(e,t){this._middlewares={},this.verno=0;const r=fo.dependencies;this._options=t={addons:fo.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:i}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ut,dbReadyPromise:null,cancelOpen:Ut,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new Ve(u=>{s.dbReadyResolve=u}),s.openCanceller=new Ve((u,c)=>{s.cancelOpen=c}),this._state=s,this.name=e,this.on=ju(this,"populate","blocked","versionchange","close",{ready:[fm,Ut]}),this.on.ready.subscribe=_1(this.on.ready.subscribe,u=>(c,v)=>{fo.vip(()=>{const _=this._state;if(_.openComplete)_.dbOpenError||Ve.resolve().then(c),v&&u(c);else if(_.onReadyBeingFired)_.onReadyBeingFired.push(c),v&&u(c);else{u(c);const h=this;v||u(function d(){h.on.ready.unsubscribe(c),h.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,gu(iS.prototype,function(u,c){this.db=o;let v=L1,_=null;if(c)try{v=c()}catch(x){_=x}const h=u._ctx,d=h.table,m=d.hook.reading.fire;this._ctx={table:d,index:h.index,isPrimKey:!h.index||d.schema.primKey.keyPath&&h.index===d.schema.primKey.name,range:v,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:_,or:h.or,valueMapper:m!==qu?m:null}})),this.Table=function(u){return gu(nS.prototype,function(c,v,_){this.db=u,this._tx=_,this.name=c,this.schema=v,this.hook=u._allTables[c]?u._allTables[c].hook:ju(null,{creating:[VT,Ut],reading:[XT,qu],updating:[WT,Ut],deleting:[qT,Ut]})})}(this),this.Transaction=function(u){return gu(lS.prototype,function(c,v,_,h,d){this.db=u,this.mode=c,this.storeNames=v,this.schema=_,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=ju(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ve((m,x)=>{this._resolve=m,this._reject=x}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var x=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):x&&this.idbtrans&&this.idbtrans.abort(),Rr(m)})})}(this),this.Version=function(u){return gu(dS.prototype,function(c){this.db=u,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(u){return gu(j1.prototype,function(c,v,_){this.db=u,this._ctx={table:c,index:v===":id"?null:v,or:_};const h=u._deps.indexedDB;if(!h)throw new ft.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(d,m)=>h.cmp(m,d),this._max=(d,m)=>h.cmp(d,m)>0?d:m,this._min=(d,m)=>h.cmp(d,m)<0?d:m,this._IDBKeyRange=u._deps.IDBKeyRange})}(this),this.on("versionchange",u=>{u.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",u=>{!u.newVersion||u.newVersion<u.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${u.oldVersion/10}`)}),this._maxKey=Ku(t.IDBKeyRange),this._createTransaction=(u,c,v,_)=>new this.Transaction(u,c,v,this._options.chromeTransactionDurability,_),this._fireOnBlocked=u=>{this.on("blocked").fire(u),Bu.filter(c=>c.name===this.name&&c!==this&&!c._state.vcFired).map(c=>c.on("versionchange").fire(u))},this.use(mS),this.use(yS),this.use(bS),this.use(gS),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(u=>u(this))}version(e){if(isNaN(e)||e<.1)throw new ft.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ft.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var r=t.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),t.push(r),t.sort(hS),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||st.letThrough||this._vip)?e():new Ve((t,r)=>{if(this._state.openComplete)return r(new ft.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new ft.DatabaseClosed);this.open().catch(Ut)}this._state.dbReadyPromise.then(t,r)}).then(e)}use({stack:e,create:t,level:r,name:i}){i&&this.unuse({stack:e,name:i});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:t,level:r??10,name:i}),s.sort((o,u)=>o.level-u.level),this}unuse({stack:e,name:t,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!t&&i.name!==t)),this}open(){return vS(this)}_close(){const e=this._state,t=Bu.indexOf(this);if(t>=0&&Bu.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new Ve(r=>{e.dbReadyResolve=r}),e.openCanceller=new Ve((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ft.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Ve((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=Zt(()=>{(function({indexedDB:u,IDBKeyRange:c},v){!mm(u)&&v!==Gf&&_m(u,c).delete(v).catch(Ut)})(this._deps,this.name),r()}),o.onerror=Gi(i),o.onblocked=this._fireOnBlocked};if(e)throw new ft.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return wr(this._allTables).map(e=>this._allTables[e])}transaction(){const e=_S.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,r){let i=st.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const s=e.indexOf("?")!==-1;let o,u;e=e.replace("!","").replace("?","");try{if(u=t.map(v=>{var _=v instanceof this.Table?v.name:v;if(typeof _!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return _}),e=="r"||e===gp)o=gp;else{if(e!="rw"&&e!=xp)throw new ft.InvalidArgument("Invalid transaction mode: "+e);o=xp}if(i){if(i.mode===gp&&o===xp){if(!s)throw new ft.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&u.forEach(v=>{if(i&&i.storeNames.indexOf(v)===-1){if(!s)throw new ft.SubTransaction("Table "+v+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(v){return i?i._promise(null,(_,h)=>{h(v)}):Rr(v)}const c=z1.bind(null,this,o,u,i,r);return i?i._promise(o,c,"lock"):st.trans?kl(st.transless,()=>this._whenReady(c)):this._whenReady(c)}table(e){if(!jn(this._allTables,e))throw new ft.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const wS=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class TS{constructor(e){this._subscribe=e}subscribe(e,t,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:r})}[wS](){return this}}function V1(n,e){return wr(e).forEach(t=>{Sf(n[t]||(n[t]=new Ts),e[t])}),n}function SS(n){let e,t=!1;const r=new TS(i=>{const s=um(n);let o=!1,u={},c={};const v={get closed(){return o},unsubscribe:()=>{o=!0,Ta.storagemutated.unsubscribe(m)}};i.start&&i.start(v);let _=!1,h=!1;function d(){return wr(c).some(w=>u[w]&&xS(u[w],c[w]))}const m=w=>{V1(u,w),d()&&x()},x=()=>{if(_||o)return;u={};const w={},T=function(E){s&&Ml();const I=()=>ba(n,{subscr:E,trans:null}),D=st.trans?kl(st.transless,I):I();return s&&D.then(Ms,Ms),D}(w);h||(Ta(Yu,m),h=!0),_=!0,Promise.resolve(T).then(E=>{t=!0,e=E,_=!1,o||(d()?x():(u={},c=w,i.next&&i.next(E)))},E=>{_=!1,t=!1,i.error&&i.error(E),v.unsubscribe()})};return x(),v});return r.hasValue=()=>t,r.getValue=()=>e,r}let S_;try{S_={indexedDB:qt.indexedDB||qt.mozIndexedDB||qt.webkitIndexedDB||qt.msIndexedDB,IDBKeyRange:qt.IDBKeyRange||qt.webkitIDBKeyRange}}catch{S_={indexedDB:null,IDBKeyRange:null}}const Ka=fo;function cf(n){let e=Is;try{Is=!0,Ta.storagemutated.fire(n)}finally{Is=e}}Pl(Ka,{...nf,delete:n=>new Ka(n,{addons:[]}).delete(),exists:n=>new Ka(n,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(n){try{return function({indexedDB:e,IDBKeyRange:t}){return mm(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==Gf)):_m(e,t).toCollection().primaryKeys()}(Ka.dependencies).then(n)}catch{return Rr(new ft.MissingAPI)}},defineClass:()=>function(n){cn(this,n)},ignoreTransaction:n=>st.trans?kl(st.transless,n):n(),vip:b_,async:function(n){return function(){try{var e=w_(n.apply(this,arguments));return e&&typeof e.then=="function"?e:Ve.resolve(e)}catch(t){return Rr(t)}}},spawn:function(n,e,t){try{var r=w_(n.apply(t,e||[]));return r&&typeof r.then=="function"?r:Ve.resolve(r)}catch(i){return Rr(i)}},currentTransaction:{get:()=>st.trans||null},waitFor:function(n,e){const t=Ve.resolve(typeof n=="function"?Ka.ignoreTransaction(n):n).timeout(e||6e4);return st.trans?st.trans.waitFor(t):t},Promise:Ve,debug:{get:()=>Ki,set:n=>{w1(n,n==="dexie"?()=>!0:F1)}},derive:wl,extend:cn,props:Pl,override:_1,Events:ju,on:Ta,liveQuery:SS,extendObservabilitySet:V1,getByKeyPath:Rs,setByKeyPath:xi,delByKeyPath:function(n,e){typeof e=="string"?xi(n,e,void 0):"length"in e&&[].map.call(e,function(t){xi(n,t,void 0)})},shallowClone:g1,deepClone:sc,getObjectDiff:ym,cmp:on,asap:m1,minKey:d_,addons:[],connections:Bu,errnames:hm,dependencies:S_,semVer:qg,version:qg.split(".").map(n=>parseInt(n)).reduce((n,e,t)=>n+e/Math.pow(10,2*t))}),Ka.maxKey=Ku(Ka.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ta(Yu,n=>{if(!Is){let e;Uf?(e=document.createEvent("CustomEvent"),e.initCustomEvent(va,!0,!0,n)):e=new CustomEvent(va,{detail:n}),Is=!0,dispatchEvent(e),Is=!1}}),addEventListener(va,({detail:n})=>{Is||cf(n)}));let Is=!1;if(typeof BroadcastChannel<"u"){const n=new BroadcastChannel(va);typeof n.unref=="function"&&n.unref(),Ta(Yu,e=>{Is||n.postMessage(e)}),n.onmessage=e=>{e.data&&cf(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ta(Yu,e=>{try{Is||(typeof localStorage<"u"&&localStorage.setItem(va,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:va,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===va){const t=JSON.parse(e.newValue);t&&cf(t.changedParts)}});const n=self.document&&navigator.serviceWorker;n&&n.addEventListener("message",function({data:e}){e&&e.type===va&&cf(e.changedParts)})}Ve.rejectionMapper=function(n,e){if(!n||n instanceof Tl||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Hg[n.name])return n;var t=new Hg[n.name](e||n.message,n);return"stack"in n&&Os(t,"stack",{get:function(){return this.inner.stack}}),t},w1(Ki,F1);function ES(n){var e=this.constructor;return this.then(function(t){return e.resolve(n()).then(function(){return t})},function(t){return e.resolve(n()).then(function(){return e.reject(t)})})}function CS(n){var e=this;return new e(function(t,r){if(!(n&&typeof n.length<"u"))return r(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(n);if(i.length===0)return t([]);var s=i.length;function o(c,v){if(v&&(typeof v=="object"||typeof v=="function")){var _=v.then;if(typeof _=="function"){_.call(v,function(h){o(c,h)},function(h){i[c]={status:"rejected",reason:h},--s===0&&t(i)});return}}i[c]={status:"fulfilled",value:v},--s===0&&t(i)}for(var u=0;u<i.length;u++)o(u,i[u])})}function q1(n,e){this.name="AggregateError",this.errors=n,this.message=e||""}q1.prototype=Error.prototype;function AS(n){var e=this;return new e(function(t,r){if(!(n&&typeof n.length<"u"))return r(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(n);if(i.length===0)return r();for(var s=[],o=0;o<i.length;o++)try{e.resolve(i[o]).then(t).catch(function(u){s.push(u),s.length===i.length&&r(new q1(s,"All promises were rejected"))})}catch(u){r(u)}})}var PS=setTimeout;function W1(n){return!!(n&&typeof n.length<"u")}function IS(){}function OS(n,e){return function(){n.apply(e,arguments)}}function ar(n){if(!(this instanceof ar))throw new TypeError("Promises must be constructed via new");if(typeof n!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Y1(n,this)}function $1(n,e){for(;n._state===3;)n=n._value;if(n._state===0){n._deferreds.push(e);return}n._handled=!0,ar._immediateFn(function(){var t=n._state===1?e.onFulfilled:e.onRejected;if(t===null){(n._state===1?E_:Zu)(e.promise,n._value);return}var r;try{r=t(n._value)}catch(i){Zu(e.promise,i);return}E_(e.promise,r)})}function E_(n,e){try{if(e===n)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var t=e.then;if(e instanceof ar){n._state=3,n._value=e,C_(n);return}else if(typeof t=="function"){Y1(OS(t,e),n);return}}n._state=1,n._value=e,C_(n)}catch(r){Zu(n,r)}}function Zu(n,e){n._state=2,n._value=e,C_(n)}function C_(n){n._state===2&&n._deferreds.length===0&&ar._immediateFn(function(){n._handled||ar._unhandledRejectionFn(n._value)});for(var e=0,t=n._deferreds.length;e<t;e++)$1(n,n._deferreds[e]);n._deferreds=null}function RS(n,e,t){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof e=="function"?e:null,this.promise=t}function Y1(n,e){var t=!1;try{n(function(r){t||(t=!0,E_(e,r))},function(r){t||(t=!0,Zu(e,r))})}catch(r){if(t)return;t=!0,Zu(e,r)}}ar.prototype.catch=function(n){return this.then(null,n)};ar.prototype.then=function(n,e){var t=new this.constructor(IS);return $1(this,new RS(n,e,t)),t};ar.prototype.finally=ES;ar.all=function(n){return new ar(function(e,t){if(!W1(n))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(n);if(r.length===0)return e([]);var i=r.length;function s(u,c){try{if(c&&(typeof c=="object"||typeof c=="function")){var v=c.then;if(typeof v=="function"){v.call(c,function(_){s(u,_)},t);return}}r[u]=c,--i===0&&e(r)}catch(_){t(_)}}for(var o=0;o<r.length;o++)s(o,r[o])})};ar.any=AS;ar.allSettled=CS;ar.resolve=function(n){return n&&typeof n=="object"&&n.constructor===ar?n:new ar(function(e){e(n)})};ar.reject=function(n){return new ar(function(e,t){t(n)})};ar.race=function(n){return new ar(function(e,t){if(!W1(n))return t(new TypeError("Promise.race accepts an array"));for(var r=0,i=n.length;r<i;r++)ar.resolve(n[r]).then(e,t)})};ar._immediateFn=typeof setImmediate=="function"&&function(n){setImmediate(n)}||function(n){PS(n,0)};ar._unhandledRejectionFn=function(e){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ep,e0;function MS(){if(e0)return Ep;e0=1;var n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function r(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function i(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var o={},u=0;u<10;u++)o["_"+String.fromCharCode(u)]=u;var c=Object.getOwnPropertyNames(o).map(function(_){return o[_]});if(c.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(_){v[_]=_}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Ep=i()?Object.assign:function(s,o){for(var u,c=r(s),v,_=1;_<arguments.length;_++){u=Object(arguments[_]);for(var h in u)e.call(u,h)&&(c[h]=u[h]);if(n){v=n(u);for(var d=0;d<v.length;d++)t.call(u,v[d])&&(c[v[d]]=u[v[d]])}}return c},Ep}var kS=MS();const DS=Rl(kS);/*!
 * @pixi/polyfill - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=ar);Object.assign||(Object.assign=DS);var NS=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var FS=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-FS}}var Cp=Date.now(),t0=["ms","moz","webkit","o"];for(var Ap=0;Ap<t0.length&&!globalThis.requestAnimationFrame;++Ap){var Pp=t0[Ap];globalThis.requestAnimationFrame=globalThis[Pp+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Pp+"CancelAnimationFrame"]||globalThis[Pp+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(n){if(typeof n!="function")throw new TypeError(n+"is not a function");var e=Date.now(),t=NS+Cp-e;return t<0&&(t=0),Cp=e,globalThis.self.setTimeout(function(){Cp=Date.now(),n(performance.now())},t)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(n){return clearTimeout(n)});Math.sign||(Math.sign=function(e){return e=Number(e),e===0||isNaN(e)?e:e>0?1:-1});Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/constants - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ks;(function(n){n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2"})(ks||(ks={}));var Ju;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS"})(Ju||(Ju={}));var Ef;(function(n){n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL"})(Ef||(Ef={}));var lt;(function(n){n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR"})(lt||(lt={}));var Jn;(function(n){n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Jn||(Jn={}));var Ne;(function(n){n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Ne||(Ne={}));var po;(function(n){n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(po||(po={}));var Ke;(function(n){n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT"})(Ke||(Ke={}));var Cf;(function(n){n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT"})(Cf||(Cf={}));var Xi;(function(n){n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR"})(Xi||(Xi={}));var Bn;(function(n){n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Bn||(Bn={}));var Ti;(function(n){n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL"})(Ti||(Ti={}));var Si;(function(n){n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Si||(Si={}));var yi;(function(n){n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT"})(yi||(yi={}));var Af;(function(n){n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL"})(Af||(Af={}));var Fn;(function(n){n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp"})(Fn||(Fn={}));var br;(function(n){n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR"})(br||(br={}));var r0;(function(n){n[n.RED=1]="RED",n[n.GREEN=2]="GREEN",n[n.BLUE=4]="BLUE",n[n.ALPHA=8]="ALPHA"})(r0||(r0={}));var Jt;(function(n){n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH"})(Jt||(Jt={}));var Wi;(function(n){n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Wi||(Wi={}));/*!
 * @pixi/settings - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var LS={createCanvas:function(n,e){var t=document.createElement("canvas");return t.width=n,t.height=e,t},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var n;return(n=document.baseURI)!==null&&n!==void 0?n:window.location.href},fetch:function(n,e){return fetch(n,e)}},Ip=/iPhone/i,n0=/iPod/i,i0=/iPad/i,s0=/\biOS-universal(?:.+)Mac\b/i,Op=/\bAndroid(?:.+)Mobile\b/i,a0=/Android/i,hl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Mh=/Silk/i,xs=/Windows Phone/i,o0=/\bWindows(?:.+)ARM\b/i,l0=/BlackBerry/i,u0=/BB10/i,c0=/Opera Mini/i,h0=/\b(CriOS|Chrome)(?:.+)Mobile/i,f0=/Mobile(?:.+)Firefox\b/i,d0=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function BS(n){return function(e){return e.test(n)}}function jS(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var t=e.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var i=BS(t),s={apple:{phone:i(Ip)&&!i(xs),ipod:i(n0),tablet:!i(Ip)&&(i(i0)||d0(e))&&!i(xs),universal:i(s0),device:(i(Ip)||i(n0)||i(i0)||i(s0)||d0(e))&&!i(xs)},amazon:{phone:i(hl),tablet:!i(hl)&&i(Mh),device:i(hl)||i(Mh)},android:{phone:!i(xs)&&i(hl)||!i(xs)&&i(Op),tablet:!i(xs)&&!i(hl)&&!i(Op)&&(i(Mh)||i(a0)),device:!i(xs)&&(i(hl)||i(Mh)||i(Op)||i(a0))||i(/\bokhttp\b/i)},windows:{phone:i(xs),tablet:i(o0),device:i(xs)||i(o0)},other:{blackberry:i(l0),blackberry10:i(u0),opera:i(c0),firefox:i(f0),chrome:i(h0),device:i(l0)||i(u0)||i(c0)||i(f0)||i(h0)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var Vi=jS(globalThis.navigator);function US(){return!Vi.apple.device}function GS(n){var e=!0;if(Vi.tablet||Vi.phone){if(Vi.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var r=parseInt(t[1],10);r<11&&(e=!1)}}if(Vi.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var r=parseInt(t[1],10);r<7&&(e=!1)}}}return e?n:4}var He={ADAPTER:LS,MIPMAP_TEXTURES:Ti.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Jt.NONE,SPRITE_MAX_TEXTURES:GS(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:Af.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:Bn.CLAMP,SCALE_MODE:Xi.LINEAR,PRECISION_VERTEX:Fn.HIGH,PRECISION_FRAGMENT:Vi.apple.device?Fn.HIGH:Fn.MEDIUM,CAN_UPLOAD_SAME_BUFFER:US(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Rp={exports:{}},p0;function HS(){return p0||(p0=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,v,_){this.fn=c,this.context=v,this.once=_||!1}function s(c,v,_,h,d){if(typeof _!="function")throw new TypeError("The listener must be a function");var m=new i(_,h||c,d),x=t?t+v:v;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],m]:c._events[x].push(m):(c._events[x]=m,c._eventsCount++),c}function o(c,v){--c._eventsCount===0?c._events=new r:delete c._events[v]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var v=[],_,h;if(this._eventsCount===0)return v;for(h in _=this._events)e.call(_,h)&&v.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(_)):v},u.prototype.listeners=function(v){var _=t?t+v:v,h=this._events[_];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,m=h.length,x=new Array(m);d<m;d++)x[d]=h[d].fn;return x},u.prototype.listenerCount=function(v){var _=t?t+v:v,h=this._events[_];return h?h.fn?1:h.length:0},u.prototype.emit=function(v,_,h,d,m,x){var w=t?t+v:v;if(!this._events[w])return!1;var T=this._events[w],E=arguments.length,I,D;if(T.fn){switch(T.once&&this.removeListener(v,T.fn,void 0,!0),E){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,_),!0;case 3:return T.fn.call(T.context,_,h),!0;case 4:return T.fn.call(T.context,_,h,d),!0;case 5:return T.fn.call(T.context,_,h,d,m),!0;case 6:return T.fn.call(T.context,_,h,d,m,x),!0}for(D=1,I=new Array(E-1);D<E;D++)I[D-1]=arguments[D];T.fn.apply(T.context,I)}else{var z=T.length,O;for(D=0;D<z;D++)switch(T[D].once&&this.removeListener(v,T[D].fn,void 0,!0),E){case 1:T[D].fn.call(T[D].context);break;case 2:T[D].fn.call(T[D].context,_);break;case 3:T[D].fn.call(T[D].context,_,h);break;case 4:T[D].fn.call(T[D].context,_,h,d);break;default:if(!I)for(O=1,I=new Array(E-1);O<E;O++)I[O-1]=arguments[O];T[D].fn.apply(T[D].context,I)}}return!0},u.prototype.on=function(v,_,h){return s(this,v,_,h,!1)},u.prototype.once=function(v,_,h){return s(this,v,_,h,!0)},u.prototype.removeListener=function(v,_,h,d){var m=t?t+v:v;if(!this._events[m])return this;if(!_)return o(this,m),this;var x=this._events[m];if(x.fn)x.fn===_&&(!d||x.once)&&(!h||x.context===h)&&o(this,m);else{for(var w=0,T=[],E=x.length;w<E;w++)(x[w].fn!==_||d&&!x[w].once||h&&x[w].context!==h)&&T.push(x[w]);T.length?this._events[m]=T.length===1?T[0]:T:o(this,m)}return this},u.prototype.removeAllListeners=function(v){var _;return v?(_=t?t+v:v,this._events[_]&&o(this,_)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,n.exports=u}(Rp)),Rp.exports}var zS=HS();const lc=Rl(zS);var kh={exports:{}},v0;function XS(){if(v0)return kh.exports;v0=1,kh.exports=n,kh.exports.default=n;function n(B,V,G){G=G||2;var Y=V&&V.length,q=Y?V[0]*G:B.length,L=e(B,0,q,G,!0),k=[];if(!L||L.next===L.prev)return k;var X,se,fe,be,Ee,Ae,Re;if(Y&&(L=c(B,V,L,G)),B.length>80*G){X=fe=B[0],se=be=B[1];for(var Se=G;Se<q;Se+=G)Ee=B[Se],Ae=B[Se+1],Ee<X&&(X=Ee),Ae<se&&(se=Ae),Ee>fe&&(fe=Ee),Ae>be&&(be=Ae);Re=Math.max(fe-X,be-se),Re=Re!==0?32767/Re:0}return r(L,k,G,X,se,Re,0),k}function e(B,V,G,Y,q){var L,k;if(q===K(B,V,G,Y)>0)for(L=V;L<G;L+=Y)k=ee(L,B[L],B[L+1],k);else for(L=G-Y;L>=V;L-=Y)k=ee(L,B[L],B[L+1],k);return k&&z(k,k.next)&&(ue(k),k=k.next),k}function t(B,V){if(!B)return B;V||(V=B);var G=B,Y;do if(Y=!1,!G.steiner&&(z(G,G.next)||D(G.prev,G,G.next)===0)){if(ue(G),G=V=G.prev,G===G.next)break;Y=!0}else G=G.next;while(Y||G!==V);return V}function r(B,V,G,Y,q,L,k){if(B){!k&&L&&m(B,Y,q,L);for(var X=B,se,fe;B.prev!==B.next;){if(se=B.prev,fe=B.next,L?s(B,Y,q,L):i(B)){V.push(se.i/G|0),V.push(B.i/G|0),V.push(fe.i/G|0),ue(B),B=fe.next,X=fe.next;continue}if(B=fe,B===X){k?k===1?(B=o(t(B),V,G),r(B,V,G,Y,q,L,2)):k===2&&u(B,V,G,Y,q,L):r(t(B),V,G,Y,q,L,1);break}}}}function i(B){var V=B.prev,G=B,Y=B.next;if(D(V,G,Y)>=0)return!1;for(var q=V.x,L=G.x,k=Y.x,X=V.y,se=G.y,fe=Y.y,be=q<L?q<k?q:k:L<k?L:k,Ee=X<se?X<fe?X:fe:se<fe?se:fe,Ae=q>L?q>k?q:k:L>k?L:k,Re=X>se?X>fe?X:fe:se>fe?se:fe,Se=Y.next;Se!==V;){if(Se.x>=be&&Se.x<=Ae&&Se.y>=Ee&&Se.y<=Re&&E(q,X,L,se,k,fe,Se.x,Se.y)&&D(Se.prev,Se,Se.next)>=0)return!1;Se=Se.next}return!0}function s(B,V,G,Y){var q=B.prev,L=B,k=B.next;if(D(q,L,k)>=0)return!1;for(var X=q.x,se=L.x,fe=k.x,be=q.y,Ee=L.y,Ae=k.y,Re=X<se?X<fe?X:fe:se<fe?se:fe,Se=be<Ee?be<Ae?be:Ae:Ee<Ae?Ee:Ae,Ue=X>se?X>fe?X:fe:se>fe?se:fe,je=be>Ee?be>Ae?be:Ae:Ee>Ae?Ee:Ae,et=w(Re,Se,V,G,Y),Xe=w(Ue,je,V,G,Y),ze=B.prevZ,Be=B.nextZ;ze&&ze.z>=et&&Be&&Be.z<=Xe;){if(ze.x>=Re&&ze.x<=Ue&&ze.y>=Se&&ze.y<=je&&ze!==q&&ze!==k&&E(X,be,se,Ee,fe,Ae,ze.x,ze.y)&&D(ze.prev,ze,ze.next)>=0||(ze=ze.prevZ,Be.x>=Re&&Be.x<=Ue&&Be.y>=Se&&Be.y<=je&&Be!==q&&Be!==k&&E(X,be,se,Ee,fe,Ae,Be.x,Be.y)&&D(Be.prev,Be,Be.next)>=0))return!1;Be=Be.nextZ}for(;ze&&ze.z>=et;){if(ze.x>=Re&&ze.x<=Ue&&ze.y>=Se&&ze.y<=je&&ze!==q&&ze!==k&&E(X,be,se,Ee,fe,Ae,ze.x,ze.y)&&D(ze.prev,ze,ze.next)>=0)return!1;ze=ze.prevZ}for(;Be&&Be.z<=Xe;){if(Be.x>=Re&&Be.x<=Ue&&Be.y>=Se&&Be.y<=je&&Be!==q&&Be!==k&&E(X,be,se,Ee,fe,Ae,Be.x,Be.y)&&D(Be.prev,Be,Be.next)>=0)return!1;Be=Be.nextZ}return!0}function o(B,V,G){var Y=B;do{var q=Y.prev,L=Y.next.next;!z(q,L)&&O(q,Y,Y.next,L)&&F(q,L)&&F(L,q)&&(V.push(q.i/G|0),V.push(Y.i/G|0),V.push(L.i/G|0),ue(Y),ue(Y.next),Y=B=L),Y=Y.next}while(Y!==B);return t(Y)}function u(B,V,G,Y,q,L){var k=B;do{for(var X=k.next.next;X!==k.prev;){if(k.i!==X.i&&I(k,X)){var se=ne(k,X);k=t(k,k.next),se=t(se,se.next),r(k,V,G,Y,q,L,0),r(se,V,G,Y,q,L,0);return}X=X.next}k=k.next}while(k!==B)}function c(B,V,G,Y){var q=[],L,k,X,se,fe;for(L=0,k=V.length;L<k;L++)X=V[L]*Y,se=L<k-1?V[L+1]*Y:B.length,fe=e(B,X,se,Y,!1),fe===fe.next&&(fe.steiner=!0),q.push(T(fe));for(q.sort(v),L=0;L<q.length;L++)G=_(q[L],G);return G}function v(B,V){return B.x-V.x}function _(B,V){var G=h(B,V);if(!G)return V;var Y=ne(G,B);return t(Y,Y.next),t(G,G.next)}function h(B,V){var G=V,Y=B.x,q=B.y,L=-1/0,k;do{if(q<=G.y&&q>=G.next.y&&G.next.y!==G.y){var X=G.x+(q-G.y)*(G.next.x-G.x)/(G.next.y-G.y);if(X<=Y&&X>L&&(L=X,k=G.x<G.next.x?G:G.next,X===Y))return k}G=G.next}while(G!==V);if(!k)return null;var se=k,fe=k.x,be=k.y,Ee=1/0,Ae;G=k;do Y>=G.x&&G.x>=fe&&Y!==G.x&&E(q<be?Y:L,q,fe,be,q<be?L:Y,q,G.x,G.y)&&(Ae=Math.abs(q-G.y)/(Y-G.x),F(G,B)&&(Ae<Ee||Ae===Ee&&(G.x>k.x||G.x===k.x&&d(k,G)))&&(k=G,Ee=Ae)),G=G.next;while(G!==se);return k}function d(B,V){return D(B.prev,B,V.prev)<0&&D(V.next,B,B.next)<0}function m(B,V,G,Y){var q=B;do q.z===0&&(q.z=w(q.x,q.y,V,G,Y)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==B);q.prevZ.nextZ=null,q.prevZ=null,x(q)}function x(B){var V,G,Y,q,L,k,X,se,fe=1;do{for(G=B,B=null,L=null,k=0;G;){for(k++,Y=G,X=0,V=0;V<fe&&(X++,Y=Y.nextZ,!!Y);V++);for(se=fe;X>0||se>0&&Y;)X!==0&&(se===0||!Y||G.z<=Y.z)?(q=G,G=G.nextZ,X--):(q=Y,Y=Y.nextZ,se--),L?L.nextZ=q:B=q,q.prevZ=L,L=q;G=Y}L.nextZ=null,fe*=2}while(k>1);return B}function w(B,V,G,Y,q){return B=(B-G)*q|0,V=(V-Y)*q|0,B=(B|B<<8)&16711935,B=(B|B<<4)&252645135,B=(B|B<<2)&858993459,B=(B|B<<1)&1431655765,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,B|V<<1}function T(B){var V=B,G=B;do(V.x<G.x||V.x===G.x&&V.y<G.y)&&(G=V),V=V.next;while(V!==B);return G}function E(B,V,G,Y,q,L,k,X){return(q-k)*(V-X)>=(B-k)*(L-X)&&(B-k)*(Y-X)>=(G-k)*(V-X)&&(G-k)*(L-X)>=(q-k)*(Y-X)}function I(B,V){return B.next.i!==V.i&&B.prev.i!==V.i&&!te(B,V)&&(F(B,V)&&F(V,B)&&W(B,V)&&(D(B.prev,B,V.prev)||D(B,V.prev,V))||z(B,V)&&D(B.prev,B,B.next)>0&&D(V.prev,V,V.next)>0)}function D(B,V,G){return(V.y-B.y)*(G.x-V.x)-(V.x-B.x)*(G.y-V.y)}function z(B,V){return B.x===V.x&&B.y===V.y}function O(B,V,G,Y){var q=y(D(B,V,G)),L=y(D(B,V,Y)),k=y(D(G,Y,B)),X=y(D(G,Y,V));return!!(q!==L&&k!==X||q===0&&U(B,G,V)||L===0&&U(B,Y,V)||k===0&&U(G,B,Y)||X===0&&U(G,V,Y))}function U(B,V,G){return V.x<=Math.max(B.x,G.x)&&V.x>=Math.min(B.x,G.x)&&V.y<=Math.max(B.y,G.y)&&V.y>=Math.min(B.y,G.y)}function y(B){return B>0?1:B<0?-1:0}function te(B,V){var G=B;do{if(G.i!==B.i&&G.next.i!==B.i&&G.i!==V.i&&G.next.i!==V.i&&O(G,G.next,B,V))return!0;G=G.next}while(G!==B);return!1}function F(B,V){return D(B.prev,B,B.next)<0?D(B,V,B.next)>=0&&D(B,B.prev,V)>=0:D(B,V,B.prev)<0||D(B,B.next,V)<0}function W(B,V){var G=B,Y=!1,q=(B.x+V.x)/2,L=(B.y+V.y)/2;do G.y>L!=G.next.y>L&&G.next.y!==G.y&&q<(G.next.x-G.x)*(L-G.y)/(G.next.y-G.y)+G.x&&(Y=!Y),G=G.next;while(G!==B);return Y}function ne(B,V){var G=new ye(B.i,B.x,B.y),Y=new ye(V.i,V.x,V.y),q=B.next,L=V.prev;return B.next=V,V.prev=B,G.next=q,q.prev=G,Y.next=G,G.prev=Y,L.next=Y,Y.prev=L,Y}function ee(B,V,G,Y){var q=new ye(B,V,G);return Y?(q.next=Y.next,q.prev=Y,Y.next.prev=q,Y.next=q):(q.prev=q,q.next=q),q}function ue(B){B.next.prev=B.prev,B.prev.next=B.next,B.prevZ&&(B.prevZ.nextZ=B.nextZ),B.nextZ&&(B.nextZ.prevZ=B.prevZ)}function ye(B,V,G){this.i=B,this.x=V,this.y=G,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(B,V,G,Y){var q=V&&V.length,L=q?V[0]*G:B.length,k=Math.abs(K(B,0,L,G));if(q)for(var X=0,se=V.length;X<se;X++){var fe=V[X]*G,be=X<se-1?V[X+1]*G:B.length;k-=Math.abs(K(B,fe,be,G))}var Ee=0;for(X=0;X<Y.length;X+=3){var Ae=Y[X]*G,Re=Y[X+1]*G,Se=Y[X+2]*G;Ee+=Math.abs((B[Ae]-B[Se])*(B[Re+1]-B[Ae+1])-(B[Ae]-B[Re])*(B[Se+1]-B[Ae+1]))}return k===0&&Ee===0?0:Math.abs((Ee-k)/k)};function K(B,V,G,Y){for(var q=0,L=V,k=G-Y;L<G;L+=Y)q+=(B[k]-B[L])*(B[L+1]+B[k+1]),k=L;return q}return n.flatten=function(B){for(var V=B[0][0].length,G={vertices:[],holes:[],dimensions:V},Y=0,q=0;q<B.length;q++){for(var L=0;L<B[q].length;L++)for(var k=0;k<V;k++)G.vertices.push(B[q][L][k]);q>0&&(Y+=B[q-1].length,G.holes.push(Y))}return G},kh.exports}var VS=XS();const K1=Rl(VS);var Qa={},ku={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var qS=ku.exports,_0;function WS(){return _0||(_0=1,function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=n&&!n.nodeType&&n,s=typeof Ss=="object"&&Ss;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,u=2147483647,c=36,v=1,_=26,h=38,d=700,m=72,x=128,w="-",T=/^xn--/,E=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=c-v,O=Math.floor,U=String.fromCharCode,y;function te(q){throw new RangeError(D[q])}function F(q,L){for(var k=q.length,X=[];k--;)X[k]=L(q[k]);return X}function W(q,L){var k=q.split("@"),X="";k.length>1&&(X=k[0]+"@",q=k[1]),q=q.replace(I,".");var se=q.split("."),fe=F(se,L).join(".");return X+fe}function ne(q){for(var L=[],k=0,X=q.length,se,fe;k<X;)se=q.charCodeAt(k++),se>=55296&&se<=56319&&k<X?(fe=q.charCodeAt(k++),(fe&64512)==56320?L.push(((se&1023)<<10)+(fe&1023)+65536):(L.push(se),k--)):L.push(se);return L}function ee(q){return F(q,function(L){var k="";return L>65535&&(L-=65536,k+=U(L>>>10&1023|55296),L=56320|L&1023),k+=U(L),k}).join("")}function ue(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:c}function ye(q,L){return q+22+75*(q<26)-((L!=0)<<5)}function K(q,L,k){var X=0;for(q=k?O(q/d):q>>1,q+=O(q/L);q>z*_>>1;X+=c)q=O(q/z);return O(X+(z+1)*q/(q+h))}function B(q){var L=[],k=q.length,X,se=0,fe=x,be=m,Ee,Ae,Re,Se,Ue,je,et,Xe,ze;for(Ee=q.lastIndexOf(w),Ee<0&&(Ee=0),Ae=0;Ae<Ee;++Ae)q.charCodeAt(Ae)>=128&&te("not-basic"),L.push(q.charCodeAt(Ae));for(Re=Ee>0?Ee+1:0;Re<k;){for(Se=se,Ue=1,je=c;Re>=k&&te("invalid-input"),et=ue(q.charCodeAt(Re++)),(et>=c||et>O((u-se)/Ue))&&te("overflow"),se+=et*Ue,Xe=je<=be?v:je>=be+_?_:je-be,!(et<Xe);je+=c)ze=c-Xe,Ue>O(u/ze)&&te("overflow"),Ue*=ze;X=L.length+1,be=K(se-Se,X,Se==0),O(se/X)>u-fe&&te("overflow"),fe+=O(se/X),se%=X,L.splice(se++,0,fe)}return ee(L)}function V(q){var L,k,X,se,fe,be,Ee,Ae,Re,Se,Ue,je=[],et,Xe,ze,Be;for(q=ne(q),et=q.length,L=x,k=0,fe=m,be=0;be<et;++be)Ue=q[be],Ue<128&&je.push(U(Ue));for(X=se=je.length,se&&je.push(w);X<et;){for(Ee=u,be=0;be<et;++be)Ue=q[be],Ue>=L&&Ue<Ee&&(Ee=Ue);for(Xe=X+1,Ee-L>O((u-k)/Xe)&&te("overflow"),k+=(Ee-L)*Xe,L=Ee,be=0;be<et;++be)if(Ue=q[be],Ue<L&&++k>u&&te("overflow"),Ue==L){for(Ae=k,Re=c;Se=Re<=fe?v:Re>=fe+_?_:Re-fe,!(Ae<Se);Re+=c)Be=Ae-Se,ze=c-Se,je.push(U(ye(Se+Be%ze,0))),Ae=O(Be/ze);je.push(U(ye(Ae,0))),fe=K(k,Xe,X==se),k=0,++X}++k,++L}return je.join("")}function G(q){return W(q,function(L){return T.test(L)?B(L.slice(4).toLowerCase()):L})}function Y(q){return W(q,function(L){return E.test(L)?"xn--"+V(L):L})}if(o={version:"1.4.1",ucs2:{decode:ne,encode:ee},decode:B,encode:V,toASCII:Y,toUnicode:G},r&&i)if(n.exports==r)i.exports=o;else for(y in o)o.hasOwnProperty(y)&&(r[y]=o[y]);else t.punycode=o})(qS)}(ku,ku.exports)),ku.exports}var Mp,m0;function Dl(){return m0||(m0=1,Mp=TypeError),Mp}const $S={},Q1=Object.freeze(Object.defineProperty({__proto__:null,default:$S},Symbol.toStringTag,{value:"Module"})),YS=TT(Q1);var kp,y0;function Hf(){if(y0)return kp;y0=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=i&&s&&typeof s.get=="function"?s.get:null,u=i&&Set.prototype.forEach,c=typeof WeakMap=="function"&&WeakMap.prototype,v=c?WeakMap.prototype.has:null,_=typeof WeakSet=="function"&&WeakSet.prototype,h=_?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,m=d?WeakRef.prototype.deref:null,x=Boolean.prototype.valueOf,w=Object.prototype.toString,T=Function.prototype.toString,E=String.prototype.match,I=String.prototype.slice,D=String.prototype.replace,z=String.prototype.toUpperCase,O=String.prototype.toLowerCase,U=RegExp.prototype.test,y=Array.prototype.concat,te=Array.prototype.join,F=Array.prototype.slice,W=Math.floor,ne=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ee=Object.getOwnPropertySymbols,ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ye=typeof Symbol=="function"&&typeof Symbol.iterator=="object",K=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ye||!0)?Symbol.toStringTag:null,B=Object.prototype.propertyIsEnumerable,V=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(de){return de.__proto__}:null);function G(de,_e){if(de===1/0||de===-1/0||de!==de||de&&de>-1e3&&de<1e3||U.call(/e/,_e))return _e;var wt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof de=="number"){var Ot=de<0?-W(-de):W(de);if(Ot!==de){var kt=String(Ot),it=I.call(_e,kt.length+1);return D.call(kt,wt,"$&_")+"."+D.call(D.call(it,/([0-9]{3})/g,"$&_"),/_$/,"")}}return D.call(_e,wt,"$&_")}var Y=YS,q=Y.custom,L=Xe(q)?q:null,k={__proto__:null,double:'"',single:"'"},X={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};kp=function de(_e,wt,Ot,kt){var it=wt||{};if(tt(it,"quoteStyle")&&!tt(k,it.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(tt(it,"maxStringLength")&&(typeof it.maxStringLength=="number"?it.maxStringLength<0&&it.maxStringLength!==1/0:it.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var cr=tt(it,"customInspect")?it.customInspect:!0;if(typeof cr!="boolean"&&cr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(tt(it,"indent")&&it.indent!==null&&it.indent!=="	"&&!(parseInt(it.indent,10)===it.indent&&it.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(tt(it,"numericSeparator")&&typeof it.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var En=it.numericSeparator;if(typeof _e>"u")return"undefined";if(_e===null)return"null";if(typeof _e=="boolean")return _e?"true":"false";if(typeof _e=="string")return Ls(_e,it);if(typeof _e=="number"){if(_e===0)return 1/0/_e>0?"0":"-0";var Er=String(_e);return En?G(_e,Er):Er}if(typeof _e=="bigint"){var $t=String(_e)+"n";return En?G(_e,$t):$t}var hr=typeof it.depth>"u"?5:it.depth;if(typeof Ot>"u"&&(Ot=0),Ot>=hr&&hr>0&&typeof _e=="object")return Ee(_e)?"[Array]":"[Object]";var Cn=hn(it,Ot);if(typeof kt>"u")kt=[];else if(ur(kt,_e)>=0)return"[Circular]";function Ur(Pn,ii,es){if(ii&&(kt=F.call(kt),kt.push(ii)),es){var Hs={depth:it.depth};return tt(it,"quoteStyle")&&(Hs.quoteStyle=it.quoteStyle),de(Pn,Hs,Ot+1,kt)}return de(Pn,it,Ot+1,kt)}if(typeof _e=="function"&&!Re(_e)){var js=Tr(_e),ri=Sn(_e,Ur);return"[Function"+(js?": "+js:" (anonymous)")+"]"+(ri.length>0?" { "+te.call(ri,", ")+" }":"")}if(Xe(_e)){var An=ye?D.call(String(_e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ue.call(_e);return typeof _e=="object"&&!ye?Ei(An):An}if(Sr(_e)){for(var Dr="<"+O.call(String(_e.nodeName)),Ji=_e.attributes||[],rn=0;rn<Ji.length;rn++)Dr+=" "+Ji[rn].name+"="+se(fe(Ji[rn].value),"double",it);return Dr+=">",_e.childNodes&&_e.childNodes.length&&(Dr+="..."),Dr+="</"+O.call(String(_e.nodeName))+">",Dr}if(Ee(_e)){if(_e.length===0)return"[]";var Ci=Sn(_e,Ur);return Cn&&!Zi(Ci)?"["+fn(Ci,Cn)+"]":"[ "+te.call(Ci,", ")+" ]"}if(Se(_e)){var Ai=Sn(_e,Ur);return!("cause"in Error.prototype)&&"cause"in _e&&!B.call(_e,"cause")?"{ ["+String(_e)+"] "+te.call(y.call("[cause]: "+Ur(_e.cause),Ai),", ")+" }":Ai.length===0?"["+String(_e)+"]":"{ ["+String(_e)+"] "+te.call(Ai,", ")+" }"}if(typeof _e=="object"&&cr){if(L&&typeof _e[L]=="function"&&Y)return Y(_e,{depth:hr-Ot});if(cr!=="symbol"&&typeof _e.inspect=="function")return _e.inspect()}if(tr(_e)){var Us=[];return r&&r.call(_e,function(Pn,ii){Us.push(Ur(ii,_e,!0)+" => "+Ur(Pn,_e))}),ti("Map",t.call(_e),Us,Cn)}if(kr(_e)){var Ca=[];return u&&u.call(_e,function(Pn){Ca.push(Ur(Pn,_e))}),ti("Set",o.call(_e),Ca,Cn)}if(Wt(_e))return Un("WeakMap");if(Qe(_e))return Un("WeakSet");if(Mr(_e))return Un("WeakRef");if(je(_e))return Ei(Ur(Number(_e)));if(ze(_e))return Ei(Ur(ne.call(_e)));if(et(_e))return Ei(x.call(_e));if(Ue(_e))return Ei(Ur(String(_e)));if(typeof window<"u"&&_e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&_e===globalThis||typeof Ss<"u"&&_e===Ss)return"{ [object globalThis] }";if(!Ae(_e)&&!Re(_e)){var Aa=Sn(_e,Ur),Ao=V?V(_e)===Object.prototype:_e instanceof Object||_e.constructor===Object,dn=_e instanceof Object?"":"null prototype",Pa=!Ao&&K&&Object(_e)===_e&&K in _e?I.call(bt(_e),8,-1):dn?"Object":"",ni=Ao||typeof _e.constructor!="function"?"":_e.constructor.name?_e.constructor.name+" ":"",Gs=ni+(Pa||dn?"["+te.call(y.call([],Pa||[],dn||[]),": ")+"] ":"");return Aa.length===0?Gs+"{}":Cn?Gs+"{"+fn(Aa,Cn)+"}":Gs+"{ "+te.call(Aa,", ")+" }"}return String(_e)};function se(de,_e,wt){var Ot=wt.quoteStyle||_e,kt=k[Ot];return kt+de+kt}function fe(de){return D.call(String(de),/"/g,"&quot;")}function be(de){return!K||!(typeof de=="object"&&(K in de||typeof de[K]<"u"))}function Ee(de){return bt(de)==="[object Array]"&&be(de)}function Ae(de){return bt(de)==="[object Date]"&&be(de)}function Re(de){return bt(de)==="[object RegExp]"&&be(de)}function Se(de){return bt(de)==="[object Error]"&&be(de)}function Ue(de){return bt(de)==="[object String]"&&be(de)}function je(de){return bt(de)==="[object Number]"&&be(de)}function et(de){return bt(de)==="[object Boolean]"&&be(de)}function Xe(de){if(ye)return de&&typeof de=="object"&&de instanceof Symbol;if(typeof de=="symbol")return!0;if(!de||typeof de!="object"||!ue)return!1;try{return ue.call(de),!0}catch{}return!1}function ze(de){if(!de||typeof de!="object"||!ne)return!1;try{return ne.call(de),!0}catch{}return!1}var Be=Object.prototype.hasOwnProperty||function(de){return de in this};function tt(de,_e){return Be.call(de,_e)}function bt(de){return w.call(de)}function Tr(de){if(de.name)return de.name;var _e=E.call(T.call(de),/^function\s*([\w$]+)/);return _e?_e[1]:null}function ur(de,_e){if(de.indexOf)return de.indexOf(_e);for(var wt=0,Ot=de.length;wt<Ot;wt++)if(de[wt]===_e)return wt;return-1}function tr(de){if(!t||!de||typeof de!="object")return!1;try{t.call(de);try{o.call(de)}catch{return!0}return de instanceof Map}catch{}return!1}function Wt(de){if(!v||!de||typeof de!="object")return!1;try{v.call(de,v);try{h.call(de,h)}catch{return!0}return de instanceof WeakMap}catch{}return!1}function Mr(de){if(!m||!de||typeof de!="object")return!1;try{return m.call(de),!0}catch{}return!1}function kr(de){if(!o||!de||typeof de!="object")return!1;try{o.call(de);try{t.call(de)}catch{return!0}return de instanceof Set}catch{}return!1}function Qe(de){if(!h||!de||typeof de!="object")return!1;try{h.call(de,h);try{v.call(de,v)}catch{return!0}return de instanceof WeakSet}catch{}return!1}function Sr(de){return!de||typeof de!="object"?!1:typeof HTMLElement<"u"&&de instanceof HTMLElement?!0:typeof de.nodeName=="string"&&typeof de.getAttribute=="function"}function Ls(de,_e){if(de.length>_e.maxStringLength){var wt=de.length-_e.maxStringLength,Ot="... "+wt+" more character"+(wt>1?"s":"");return Ls(I.call(de,0,_e.maxStringLength),_e)+Ot}var kt=X[_e.quoteStyle||"single"];kt.lastIndex=0;var it=D.call(D.call(de,kt,"\\$1"),/[\x00-\x1f]/g,Bs);return se(it,"single",_e)}function Bs(de){var _e=de.charCodeAt(0),wt={8:"b",9:"t",10:"n",12:"f",13:"r"}[_e];return wt?"\\"+wt:"\\x"+(_e<16?"0":"")+z.call(_e.toString(16))}function Ei(de){return"Object("+de+")"}function Un(de){return de+" { ? }"}function ti(de,_e,wt,Ot){var kt=Ot?fn(wt,Ot):te.call(wt,", ");return de+" ("+_e+") {"+kt+"}"}function Zi(de){for(var _e=0;_e<de.length;_e++)if(ur(de[_e],`
`)>=0)return!1;return!0}function hn(de,_e){var wt;if(de.indent==="	")wt="	";else if(typeof de.indent=="number"&&de.indent>0)wt=te.call(Array(de.indent+1)," ");else return null;return{base:wt,prev:te.call(Array(_e+1),wt)}}function fn(de,_e){if(de.length===0)return"";var wt=`
`+_e.prev+_e.base;return wt+te.call(de,","+wt)+`
`+_e.prev}function Sn(de,_e){var wt=Ee(de),Ot=[];if(wt){Ot.length=de.length;for(var kt=0;kt<de.length;kt++)Ot[kt]=tt(de,kt)?_e(de[kt],de):""}var it=typeof ee=="function"?ee(de):[],cr;if(ye){cr={};for(var En=0;En<it.length;En++)cr["$"+it[En]]=it[En]}for(var Er in de)tt(de,Er)&&(wt&&String(Number(Er))===Er&&Er<de.length||ye&&cr["$"+Er]instanceof Symbol||(U.call(/[^\w$]/,Er)?Ot.push(_e(Er,de)+": "+_e(de[Er],de)):Ot.push(Er+": "+_e(de[Er],de))));if(typeof ee=="function")for(var $t=0;$t<it.length;$t++)B.call(de,it[$t])&&Ot.push("["+_e(it[$t])+"]: "+_e(de[it[$t]],de));return Ot}return kp}var Dp,g0;function KS(){if(g0)return Dp;g0=1;var n=Hf(),e=Dl(),t=function(u,c,v){for(var _=u,h;(h=_.next)!=null;_=h)if(h.key===c)return _.next=h.next,v||(h.next=u.next,u.next=h),h},r=function(u,c){if(u){var v=t(u,c);return v&&v.value}},i=function(u,c,v){var _=t(u,c);_?_.value=v:u.next={key:c,next:u.next,value:v}},s=function(u,c){return u?!!t(u,c):!1},o=function(u,c){if(u)return t(u,c,!0)};return Dp=function(){var c,v={assert:function(_){if(!v.has(_))throw new e("Side channel does not contain "+n(_))},delete:function(_){var h=c&&c.next,d=o(c,_);return d&&h&&h===d&&(c=void 0),!!d},get:function(_){return r(c,_)},has:function(_){return s(c,_)},set:function(_,h){c||(c={next:void 0}),i(c,_,h)}};return v},Dp}var Np,x0;function Z1(){return x0||(x0=1,Np=Object),Np}var Fp,b0;function QS(){return b0||(b0=1,Fp=Error),Fp}var Lp,w0;function ZS(){return w0||(w0=1,Lp=EvalError),Lp}var Bp,T0;function JS(){return T0||(T0=1,Bp=RangeError),Bp}var jp,S0;function eE(){return S0||(S0=1,jp=ReferenceError),jp}var Up,E0;function tE(){return E0||(E0=1,Up=SyntaxError),Up}var Gp,C0;function rE(){return C0||(C0=1,Gp=URIError),Gp}var Hp,A0;function nE(){return A0||(A0=1,Hp=Math.abs),Hp}var zp,P0;function iE(){return P0||(P0=1,zp=Math.floor),zp}var Xp,I0;function sE(){return I0||(I0=1,Xp=Math.max),Xp}var Vp,O0;function aE(){return O0||(O0=1,Vp=Math.min),Vp}var qp,R0;function oE(){return R0||(R0=1,qp=Math.pow),qp}var Wp,M0;function lE(){return M0||(M0=1,Wp=Math.round),Wp}var $p,k0;function uE(){return k0||(k0=1,$p=Number.isNaN||function(e){return e!==e}),$p}var Yp,D0;function cE(){if(D0)return Yp;D0=1;var n=uE();return Yp=function(t){return n(t)||t===0?t:t<0?-1:1},Yp}var Kp,N0;function hE(){return N0||(N0=1,Kp=Object.getOwnPropertyDescriptor),Kp}var Qp,F0;function J1(){if(F0)return Qp;F0=1;var n=hE();if(n)try{n([],"length")}catch{n=null}return Qp=n,Qp}var Zp,L0;function fE(){if(L0)return Zp;L0=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return Zp=n,Zp}var Jp,B0;function dE(){return B0||(B0=1,Jp=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,t);if(u.value!==i||u.enumerable!==!0)return!1}return!0}),Jp}var ev,j0;function pE(){if(j0)return ev;j0=1;var n=typeof Symbol<"u"&&Symbol,e=dE();return ev=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ev}var tv,U0;function eb(){return U0||(U0=1,tv=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),tv}var rv,G0;function tb(){if(G0)return rv;G0=1;var n=Z1();return rv=n.getPrototypeOf||null,rv}var nv,H0;function vE(){if(H0)return nv;H0=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",i=function(c,v){for(var _=[],h=0;h<c.length;h+=1)_[h]=c[h];for(var d=0;d<v.length;d+=1)_[d+c.length]=v[d];return _},s=function(c,v){for(var _=[],h=v,d=0;h<c.length;h+=1,d+=1)_[d]=c[h];return _},o=function(u,c){for(var v="",_=0;_<u.length;_+=1)v+=u[_],_+1<u.length&&(v+=c);return v};return nv=function(c){var v=this;if(typeof v!="function"||e.apply(v)!==r)throw new TypeError(n+v);for(var _=s(arguments,1),h,d=function(){if(this instanceof h){var E=v.apply(this,i(_,arguments));return Object(E)===E?E:this}return v.apply(c,i(_,arguments))},m=t(0,v.length-_.length),x=[],w=0;w<m;w++)x[w]="$"+w;if(h=Function("binder","return function ("+o(x,",")+"){ return binder.apply(this,arguments); }")(d),v.prototype){var T=function(){};T.prototype=v.prototype,h.prototype=new T,T.prototype=null}return h},nv}var iv,z0;function zf(){if(z0)return iv;z0=1;var n=vE();return iv=Function.prototype.bind||n,iv}var sv,X0;function xm(){return X0||(X0=1,sv=Function.prototype.call),sv}var av,V0;function rb(){return V0||(V0=1,av=Function.prototype.apply),av}var ov,q0;function _E(){return q0||(q0=1,ov=typeof Reflect<"u"&&Reflect&&Reflect.apply),ov}var lv,W0;function mE(){if(W0)return lv;W0=1;var n=zf(),e=rb(),t=xm(),r=_E();return lv=r||n.call(t,e),lv}var uv,$0;function nb(){if($0)return uv;$0=1;var n=zf(),e=Dl(),t=xm(),r=mE();return uv=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return r(n,t,s)},uv}var cv,Y0;function yE(){if(Y0)return cv;Y0=1;var n=nb(),e=J1(),t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return cv=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(u){return s(u==null?u:i(u))}:!1,cv}var hv,K0;function gE(){if(K0)return hv;K0=1;var n=eb(),e=tb(),t=yE();return hv=n?function(i){return n(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,hv}var fv,Q0;function xE(){if(Q0)return fv;Q0=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=zf();return fv=t.call(n,e),fv}var dv,Z0;function bm(){if(Z0)return dv;Z0=1;var n,e=Z1(),t=QS(),r=ZS(),i=JS(),s=eE(),o=tE(),u=Dl(),c=rE(),v=nE(),_=iE(),h=sE(),d=aE(),m=oE(),x=lE(),w=cE(),T=Function,E=function(Re){try{return T('"use strict"; return ('+Re+").constructor;")()}catch{}},I=J1(),D=fE(),z=function(){throw new u},O=I?function(){try{return arguments.callee,z}catch{try{return I(arguments,"callee").get}catch{return z}}}():z,U=pE()(),y=gE(),te=tb(),F=eb(),W=rb(),ne=xm(),ee={},ue=typeof Uint8Array>"u"||!y?n:y(Uint8Array),ye={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":U&&y?y([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":ee,"%AsyncGenerator%":ee,"%AsyncGeneratorFunction%":ee,"%AsyncIteratorPrototype%":ee,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?n:Float16Array,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":T,"%GeneratorFunction%":ee,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":U&&y?y(y([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!U||!y?n:y(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":I,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!U||!y?n:y(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":U&&y?y(""[Symbol.iterator]()):n,"%Symbol%":U?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":O,"%TypedArray%":ue,"%TypeError%":u,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":ne,"%Function.prototype.apply%":W,"%Object.defineProperty%":D,"%Object.getPrototypeOf%":te,"%Math.abs%":v,"%Math.floor%":_,"%Math.max%":h,"%Math.min%":d,"%Math.pow%":m,"%Math.round%":x,"%Math.sign%":w,"%Reflect.getPrototypeOf%":F};if(y)try{null.error}catch(Re){var K=y(y(Re));ye["%Error.prototype%"]=K}var B=function Re(Se){var Ue;if(Se==="%AsyncFunction%")Ue=E("async function () {}");else if(Se==="%GeneratorFunction%")Ue=E("function* () {}");else if(Se==="%AsyncGeneratorFunction%")Ue=E("async function* () {}");else if(Se==="%AsyncGenerator%"){var je=Re("%AsyncGeneratorFunction%");je&&(Ue=je.prototype)}else if(Se==="%AsyncIteratorPrototype%"){var et=Re("%AsyncGenerator%");et&&y&&(Ue=y(et.prototype))}return ye[Se]=Ue,Ue},V={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},G=zf(),Y=xE(),q=G.call(ne,Array.prototype.concat),L=G.call(W,Array.prototype.splice),k=G.call(ne,String.prototype.replace),X=G.call(ne,String.prototype.slice),se=G.call(ne,RegExp.prototype.exec),fe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,be=/\\(\\)?/g,Ee=function(Se){var Ue=X(Se,0,1),je=X(Se,-1);if(Ue==="%"&&je!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(je==="%"&&Ue!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var et=[];return k(Se,fe,function(Xe,ze,Be,tt){et[et.length]=Be?k(tt,be,"$1"):ze||Xe}),et},Ae=function(Se,Ue){var je=Se,et;if(Y(V,je)&&(et=V[je],je="%"+et[0]+"%"),Y(ye,je)){var Xe=ye[je];if(Xe===ee&&(Xe=B(je)),typeof Xe>"u"&&!Ue)throw new u("intrinsic "+Se+" exists, but is not available. Please file an issue!");return{alias:et,name:je,value:Xe}}throw new o("intrinsic "+Se+" does not exist!")};return dv=function(Se,Ue){if(typeof Se!="string"||Se.length===0)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ue!="boolean")throw new u('"allowMissing" argument must be a boolean');if(se(/^%?[^%]*%?$/,Se)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var je=Ee(Se),et=je.length>0?je[0]:"",Xe=Ae("%"+et+"%",Ue),ze=Xe.name,Be=Xe.value,tt=!1,bt=Xe.alias;bt&&(et=bt[0],L(je,q([0,1],bt)));for(var Tr=1,ur=!0;Tr<je.length;Tr+=1){var tr=je[Tr],Wt=X(tr,0,1),Mr=X(tr,-1);if((Wt==='"'||Wt==="'"||Wt==="`"||Mr==='"'||Mr==="'"||Mr==="`")&&Wt!==Mr)throw new o("property names with quotes must have matching quotes");if((tr==="constructor"||!ur)&&(tt=!0),et+="."+tr,ze="%"+et+"%",Y(ye,ze))Be=ye[ze];else if(Be!=null){if(!(tr in Be)){if(!Ue)throw new u("base intrinsic for "+Se+" exists, but the property is not available.");return}if(I&&Tr+1>=je.length){var kr=I(Be,tr);ur=!!kr,ur&&"get"in kr&&!("originalValue"in kr.get)?Be=kr.get:Be=Be[tr]}else ur=Y(Be,tr),Be=Be[tr];ur&&!tt&&(ye[ze]=Be)}}return Be},dv}var pv,J0;function ib(){if(J0)return pv;J0=1;var n=bm(),e=nb(),t=e([n("%String.prototype.indexOf%")]);return pv=function(i,s){var o=n(i,!!s);return typeof o=="function"&&t(i,".prototype.")>-1?e([o]):o},pv}var vv,ex;function sb(){if(ex)return vv;ex=1;var n=bm(),e=ib(),t=Hf(),r=Dl(),i=n("%Map%",!0),s=e("Map.prototype.get",!0),o=e("Map.prototype.set",!0),u=e("Map.prototype.has",!0),c=e("Map.prototype.delete",!0),v=e("Map.prototype.size",!0);return vv=!!i&&function(){var h,d={assert:function(m){if(!d.has(m))throw new r("Side channel does not contain "+t(m))},delete:function(m){if(h){var x=c(h,m);return v(h)===0&&(h=void 0),x}return!1},get:function(m){if(h)return s(h,m)},has:function(m){return h?u(h,m):!1},set:function(m,x){h||(h=new i),o(h,m,x)}};return d},vv}var _v,tx;function bE(){if(tx)return _v;tx=1;var n=bm(),e=ib(),t=Hf(),r=sb(),i=Dl(),s=n("%WeakMap%",!0),o=e("WeakMap.prototype.get",!0),u=e("WeakMap.prototype.set",!0),c=e("WeakMap.prototype.has",!0),v=e("WeakMap.prototype.delete",!0);return _v=s?function(){var h,d,m={assert:function(x){if(!m.has(x))throw new i("Side channel does not contain "+t(x))},delete:function(x){if(s&&x&&(typeof x=="object"||typeof x=="function")){if(h)return v(h,x)}else if(r&&d)return d.delete(x);return!1},get:function(x){return s&&x&&(typeof x=="object"||typeof x=="function")&&h?o(h,x):d&&d.get(x)},has:function(x){return s&&x&&(typeof x=="object"||typeof x=="function")&&h?c(h,x):!!d&&d.has(x)},set:function(x,w){s&&x&&(typeof x=="object"||typeof x=="function")?(h||(h=new s),u(h,x,w)):r&&(d||(d=r()),d.set(x,w))}};return m}:r,_v}var mv,rx;function wE(){if(rx)return mv;rx=1;var n=Dl(),e=Hf(),t=KS(),r=sb(),i=bE(),s=i||r||t;return mv=function(){var u,c={assert:function(v){if(!c.has(v))throw new n("Side channel does not contain "+e(v))},delete:function(v){return!!u&&u.delete(v)},get:function(v){return u&&u.get(v)},has:function(v){return!!u&&u.has(v)},set:function(v,_){u||(u=s()),u.set(v,_)}};return c},mv}var yv,nx;function wm(){if(nx)return yv;nx=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return yv={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},yv}var gv,ix;function ab(){if(ix)return gv;ix=1;var n=wm(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var T=[],E=0;E<256;++E)T.push("%"+((E<16?"0":"")+E.toString(16)).toUpperCase());return T}(),i=function(E){for(;E.length>1;){var I=E.pop(),D=I.obj[I.prop];if(t(D)){for(var z=[],O=0;O<D.length;++O)typeof D[O]<"u"&&z.push(D[O]);I.obj[I.prop]=z}}},s=function(E,I){for(var D=I&&I.plainObjects?{__proto__:null}:{},z=0;z<E.length;++z)typeof E[z]<"u"&&(D[z]=E[z]);return D},o=function T(E,I,D){if(!I)return E;if(typeof I!="object"&&typeof I!="function"){if(t(E))E.push(I);else if(E&&typeof E=="object")(D&&(D.plainObjects||D.allowPrototypes)||!e.call(Object.prototype,I))&&(E[I]=!0);else return[E,I];return E}if(!E||typeof E!="object")return[E].concat(I);var z=E;return t(E)&&!t(I)&&(z=s(E,D)),t(E)&&t(I)?(I.forEach(function(O,U){if(e.call(E,U)){var y=E[U];y&&typeof y=="object"&&O&&typeof O=="object"?E[U]=T(y,O,D):E.push(O)}else E[U]=O}),E):Object.keys(I).reduce(function(O,U){var y=I[U];return e.call(O,U)?O[U]=T(O[U],y,D):O[U]=y,O},z)},u=function(E,I){return Object.keys(I).reduce(function(D,z){return D[z]=I[z],D},E)},c=function(T,E,I){var D=T.replace(/\+/g," ");if(I==="iso-8859-1")return D.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(D)}catch{return D}},v=1024,_=function(E,I,D,z,O){if(E.length===0)return E;var U=E;if(typeof E=="symbol"?U=Symbol.prototype.toString.call(E):typeof E!="string"&&(U=String(E)),D==="iso-8859-1")return escape(U).replace(/%u[0-9a-f]{4}/gi,function(ue){return"%26%23"+parseInt(ue.slice(2),16)+"%3B"});for(var y="",te=0;te<U.length;te+=v){for(var F=U.length>=v?U.slice(te,te+v):U,W=[],ne=0;ne<F.length;++ne){var ee=F.charCodeAt(ne);if(ee===45||ee===46||ee===95||ee===126||ee>=48&&ee<=57||ee>=65&&ee<=90||ee>=97&&ee<=122||O===n.RFC1738&&(ee===40||ee===41)){W[W.length]=F.charAt(ne);continue}if(ee<128){W[W.length]=r[ee];continue}if(ee<2048){W[W.length]=r[192|ee>>6]+r[128|ee&63];continue}if(ee<55296||ee>=57344){W[W.length]=r[224|ee>>12]+r[128|ee>>6&63]+r[128|ee&63];continue}ne+=1,ee=65536+((ee&1023)<<10|F.charCodeAt(ne)&1023),W[W.length]=r[240|ee>>18]+r[128|ee>>12&63]+r[128|ee>>6&63]+r[128|ee&63]}y+=W.join("")}return y},h=function(E){for(var I=[{obj:{o:E},prop:"o"}],D=[],z=0;z<I.length;++z)for(var O=I[z],U=O.obj[O.prop],y=Object.keys(U),te=0;te<y.length;++te){var F=y[te],W=U[F];typeof W=="object"&&W!==null&&D.indexOf(W)===-1&&(I.push({obj:U,prop:F}),D.push(W))}return i(I),E},d=function(E){return Object.prototype.toString.call(E)==="[object RegExp]"},m=function(E){return!E||typeof E!="object"?!1:!!(E.constructor&&E.constructor.isBuffer&&E.constructor.isBuffer(E))},x=function(E,I){return[].concat(E,I)},w=function(E,I){if(t(E)){for(var D=[],z=0;z<E.length;z+=1)D.push(I(E[z]));return D}return I(E)};return gv={arrayToObject:s,assign:u,combine:x,compact:h,decode:c,encode:_,isBuffer:m,isRegExp:d,maybeMap:w,merge:o},gv}var xv,sx;function TE(){if(sx)return xv;sx=1;var n=wE(),e=ab(),t=wm(),r=Object.prototype.hasOwnProperty,i={brackets:function(T){return T+"[]"},comma:"comma",indices:function(T,E){return T+"["+E+"]"},repeat:function(T){return T}},s=Array.isArray,o=Array.prototype.push,u=function(w,T){o.apply(w,s(T)?T:[T])},c=Date.prototype.toISOString,v=t.default,_={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:v,formatter:t.formatters[v],indices:!1,serializeDate:function(T){return c.call(T)},skipNulls:!1,strictNullHandling:!1},h=function(T){return typeof T=="string"||typeof T=="number"||typeof T=="boolean"||typeof T=="symbol"||typeof T=="bigint"},d={},m=function w(T,E,I,D,z,O,U,y,te,F,W,ne,ee,ue,ye,K,B,V){for(var G=T,Y=V,q=0,L=!1;(Y=Y.get(d))!==void 0&&!L;){var k=Y.get(T);if(q+=1,typeof k<"u"){if(k===q)throw new RangeError("Cyclic object value");L=!0}typeof Y.get(d)>"u"&&(q=0)}if(typeof F=="function"?G=F(E,G):G instanceof Date?G=ee(G):I==="comma"&&s(G)&&(G=e.maybeMap(G,function(ze){return ze instanceof Date?ee(ze):ze})),G===null){if(O)return te&&!K?te(E,_.encoder,B,"key",ue):E;G=""}if(h(G)||e.isBuffer(G)){if(te){var X=K?E:te(E,_.encoder,B,"key",ue);return[ye(X)+"="+ye(te(G,_.encoder,B,"value",ue))]}return[ye(E)+"="+ye(String(G))]}var se=[];if(typeof G>"u")return se;var fe;if(I==="comma"&&s(G))K&&te&&(G=e.maybeMap(G,te)),fe=[{value:G.length>0?G.join(",")||null:void 0}];else if(s(F))fe=F;else{var be=Object.keys(G);fe=W?be.sort(W):be}var Ee=y?String(E).replace(/\./g,"%2E"):String(E),Ae=D&&s(G)&&G.length===1?Ee+"[]":Ee;if(z&&s(G)&&G.length===0)return Ae+"[]";for(var Re=0;Re<fe.length;++Re){var Se=fe[Re],Ue=typeof Se=="object"&&Se&&typeof Se.value<"u"?Se.value:G[Se];if(!(U&&Ue===null)){var je=ne&&y?String(Se).replace(/\./g,"%2E"):String(Se),et=s(G)?typeof I=="function"?I(Ae,je):Ae:Ae+(ne?"."+je:"["+je+"]");V.set(T,q);var Xe=n();Xe.set(d,V),u(se,w(Ue,et,I,D,z,O,U,y,I==="comma"&&K&&s(G)?null:te,F,W,ne,ee,ue,ye,K,B,Xe))}}return se},x=function(T){if(!T)return _;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.encodeDotInKeys<"u"&&typeof T.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(T.encoder!==null&&typeof T.encoder<"u"&&typeof T.encoder!="function")throw new TypeError("Encoder has to be a function.");var E=T.charset||_.charset;if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var I=t.default;if(typeof T.format<"u"){if(!r.call(t.formatters,T.format))throw new TypeError("Unknown format option provided.");I=T.format}var D=t.formatters[I],z=_.filter;(typeof T.filter=="function"||s(T.filter))&&(z=T.filter);var O;if(T.arrayFormat in i?O=T.arrayFormat:"indices"in T?O=T.indices?"indices":"repeat":O=_.arrayFormat,"commaRoundTrip"in T&&typeof T.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var U=typeof T.allowDots>"u"?T.encodeDotInKeys===!0?!0:_.allowDots:!!T.allowDots;return{addQueryPrefix:typeof T.addQueryPrefix=="boolean"?T.addQueryPrefix:_.addQueryPrefix,allowDots:U,allowEmptyArrays:typeof T.allowEmptyArrays=="boolean"?!!T.allowEmptyArrays:_.allowEmptyArrays,arrayFormat:O,charset:E,charsetSentinel:typeof T.charsetSentinel=="boolean"?T.charsetSentinel:_.charsetSentinel,commaRoundTrip:!!T.commaRoundTrip,delimiter:typeof T.delimiter>"u"?_.delimiter:T.delimiter,encode:typeof T.encode=="boolean"?T.encode:_.encode,encodeDotInKeys:typeof T.encodeDotInKeys=="boolean"?T.encodeDotInKeys:_.encodeDotInKeys,encoder:typeof T.encoder=="function"?T.encoder:_.encoder,encodeValuesOnly:typeof T.encodeValuesOnly=="boolean"?T.encodeValuesOnly:_.encodeValuesOnly,filter:z,format:I,formatter:D,serializeDate:typeof T.serializeDate=="function"?T.serializeDate:_.serializeDate,skipNulls:typeof T.skipNulls=="boolean"?T.skipNulls:_.skipNulls,sort:typeof T.sort=="function"?T.sort:null,strictNullHandling:typeof T.strictNullHandling=="boolean"?T.strictNullHandling:_.strictNullHandling}};return xv=function(w,T){var E=w,I=x(T),D,z;typeof I.filter=="function"?(z=I.filter,E=z("",E)):s(I.filter)&&(z=I.filter,D=z);var O=[];if(typeof E!="object"||E===null)return"";var U=i[I.arrayFormat],y=U==="comma"&&I.commaRoundTrip;D||(D=Object.keys(E)),I.sort&&D.sort(I.sort);for(var te=n(),F=0;F<D.length;++F){var W=D[F],ne=E[W];I.skipNulls&&ne===null||u(O,m(ne,W,U,y,I.allowEmptyArrays,I.strictNullHandling,I.skipNulls,I.encodeDotInKeys,I.encode?I.encoder:null,I.filter,I.sort,I.allowDots,I.serializeDate,I.format,I.formatter,I.encodeValuesOnly,I.charset,te))}var ee=O.join(I.delimiter),ue=I.addQueryPrefix===!0?"?":"";return I.charsetSentinel&&(I.charset==="iso-8859-1"?ue+="utf8=%26%2310003%3B&":ue+="utf8=%E2%9C%93&"),ee.length>0?ue+ee:""},xv}var bv,ax;function SE(){if(ax)return bv;ax=1;var n=ab(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},i=function(d){return d.replace(/&#(\d+);/g,function(m,x){return String.fromCharCode(parseInt(x,10))})},s=function(d,m,x){if(d&&typeof d=="string"&&m.comma&&d.indexOf(",")>-1)return d.split(",");if(m.throwOnLimitExceeded&&x>=m.arrayLimit)throw new RangeError("Array limit exceeded. Only "+m.arrayLimit+" element"+(m.arrayLimit===1?"":"s")+" allowed in an array.");return d},o="utf8=%26%2310003%3B",u="utf8=%E2%9C%93",c=function(m,x){var w={__proto__:null},T=x.ignoreQueryPrefix?m.replace(/^\?/,""):m;T=T.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var E=x.parameterLimit===1/0?void 0:x.parameterLimit,I=T.split(x.delimiter,x.throwOnLimitExceeded?E+1:E);if(x.throwOnLimitExceeded&&I.length>E)throw new RangeError("Parameter limit exceeded. Only "+E+" parameter"+(E===1?"":"s")+" allowed.");var D=-1,z,O=x.charset;if(x.charsetSentinel)for(z=0;z<I.length;++z)I[z].indexOf("utf8=")===0&&(I[z]===u?O="utf-8":I[z]===o&&(O="iso-8859-1"),D=z,z=I.length);for(z=0;z<I.length;++z)if(z!==D){var U=I[z],y=U.indexOf("]="),te=y===-1?U.indexOf("="):y+1,F,W;te===-1?(F=x.decoder(U,r.decoder,O,"key"),W=x.strictNullHandling?null:""):(F=x.decoder(U.slice(0,te),r.decoder,O,"key"),W=n.maybeMap(s(U.slice(te+1),x,t(w[F])?w[F].length:0),function(ee){return x.decoder(ee,r.decoder,O,"value")})),W&&x.interpretNumericEntities&&O==="iso-8859-1"&&(W=i(String(W))),U.indexOf("[]=")>-1&&(W=t(W)?[W]:W);var ne=e.call(w,F);ne&&x.duplicates==="combine"?w[F]=n.combine(w[F],W):(!ne||x.duplicates==="last")&&(w[F]=W)}return w},v=function(d,m,x,w){var T=0;if(d.length>0&&d[d.length-1]==="[]"){var E=d.slice(0,-1).join("");T=Array.isArray(m)&&m[E]?m[E].length:0}for(var I=w?m:s(m,x,T),D=d.length-1;D>=0;--D){var z,O=d[D];if(O==="[]"&&x.parseArrays)z=x.allowEmptyArrays&&(I===""||x.strictNullHandling&&I===null)?[]:n.combine([],I);else{z=x.plainObjects?{__proto__:null}:{};var U=O.charAt(0)==="["&&O.charAt(O.length-1)==="]"?O.slice(1,-1):O,y=x.decodeDotInKeys?U.replace(/%2E/g,"."):U,te=parseInt(y,10);!x.parseArrays&&y===""?z={0:I}:!isNaN(te)&&O!==y&&String(te)===y&&te>=0&&x.parseArrays&&te<=x.arrayLimit?(z=[],z[te]=I):y!=="__proto__"&&(z[y]=I)}I=z}return I},_=function(m,x,w,T){if(m){var E=w.allowDots?m.replace(/\.([^.[]+)/g,"[$1]"):m,I=/(\[[^[\]]*])/,D=/(\[[^[\]]*])/g,z=w.depth>0&&I.exec(E),O=z?E.slice(0,z.index):E,U=[];if(O){if(!w.plainObjects&&e.call(Object.prototype,O)&&!w.allowPrototypes)return;U.push(O)}for(var y=0;w.depth>0&&(z=D.exec(E))!==null&&y<w.depth;){if(y+=1,!w.plainObjects&&e.call(Object.prototype,z[1].slice(1,-1))&&!w.allowPrototypes)return;U.push(z[1])}if(z){if(w.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+w.depth+" and strictDepth is true");U.push("["+E.slice(z.index)+"]")}return v(U,x,w,T)}},h=function(m){if(!m)return r;if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.decodeDotInKeys<"u"&&typeof m.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(m.decoder!==null&&typeof m.decoder<"u"&&typeof m.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof m.throwOnLimitExceeded<"u"&&typeof m.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var x=typeof m.charset>"u"?r.charset:m.charset,w=typeof m.duplicates>"u"?r.duplicates:m.duplicates;if(w!=="combine"&&w!=="first"&&w!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var T=typeof m.allowDots>"u"?m.decodeDotInKeys===!0?!0:r.allowDots:!!m.allowDots;return{allowDots:T,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof m.allowPrototypes=="boolean"?m.allowPrototypes:r.allowPrototypes,allowSparse:typeof m.allowSparse=="boolean"?m.allowSparse:r.allowSparse,arrayLimit:typeof m.arrayLimit=="number"?m.arrayLimit:r.arrayLimit,charset:x,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:r.charsetSentinel,comma:typeof m.comma=="boolean"?m.comma:r.comma,decodeDotInKeys:typeof m.decodeDotInKeys=="boolean"?m.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof m.decoder=="function"?m.decoder:r.decoder,delimiter:typeof m.delimiter=="string"||n.isRegExp(m.delimiter)?m.delimiter:r.delimiter,depth:typeof m.depth=="number"||m.depth===!1?+m.depth:r.depth,duplicates:w,ignoreQueryPrefix:m.ignoreQueryPrefix===!0,interpretNumericEntities:typeof m.interpretNumericEntities=="boolean"?m.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof m.parameterLimit=="number"?m.parameterLimit:r.parameterLimit,parseArrays:m.parseArrays!==!1,plainObjects:typeof m.plainObjects=="boolean"?m.plainObjects:r.plainObjects,strictDepth:typeof m.strictDepth=="boolean"?!!m.strictDepth:r.strictDepth,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof m.throwOnLimitExceeded=="boolean"?m.throwOnLimitExceeded:!1}};return bv=function(d,m){var x=h(m);if(d===""||d===null||typeof d>"u")return x.plainObjects?{__proto__:null}:{};for(var w=typeof d=="string"?c(d,x):d,T=x.plainObjects?{__proto__:null}:{},E=Object.keys(w),I=0;I<E.length;++I){var D=E[I],z=_(D,w[D],x,typeof d=="string");T=n.merge(T,z,x)}return x.allowSparse===!0?T:n.compact(T)},bv}var wv,ox;function EE(){if(ox)return wv;ox=1;var n=TE(),e=SE(),t=wm();return wv={formats:t,parse:e,stringify:n},wv}var lx;function CE(){if(lx)return Qa;lx=1;var n=WS();function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var t=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,s=["<",">",'"',"`"," ","\r",`
`,"	"],o=["{","}","|","\\","^","`"].concat(s),u=["'"].concat(o),c=["%","/","?",";","#"].concat(u),v=["/","?","#"],_=255,h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=EE();function E(O,U,y){if(O&&typeof O=="object"&&O instanceof e)return O;var te=new e;return te.parse(O,U,y),te}e.prototype.parse=function(O,U,y){if(typeof O!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof O);var te=O.indexOf("?"),F=te!==-1&&te<O.indexOf("#")?"?":"#",W=O.split(F),ne=/\\/g;W[0]=W[0].replace(ne,"/"),O=W.join(F);var ee=O;if(ee=ee.trim(),!y&&O.split("#").length===1){var ue=i.exec(ee);if(ue)return this.path=ee,this.href=ee,this.pathname=ue[1],ue[2]?(this.search=ue[2],U?this.query=T.parse(this.search.substr(1)):this.query=this.search.substr(1)):U&&(this.search="",this.query={}),this}var ye=t.exec(ee);if(ye){ye=ye[0];var K=ye.toLowerCase();this.protocol=K,ee=ee.substr(ye.length)}if(y||ye||ee.match(/^\/\/[^@/]+@[^@/]+/)){var B=ee.substr(0,2)==="//";B&&!(ye&&x[ye])&&(ee=ee.substr(2),this.slashes=!0)}if(!x[ye]&&(B||ye&&!w[ye])){for(var V=-1,G=0;G<v.length;G++){var Y=ee.indexOf(v[G]);Y!==-1&&(V===-1||Y<V)&&(V=Y)}var q,L;V===-1?L=ee.lastIndexOf("@"):L=ee.lastIndexOf("@",V),L!==-1&&(q=ee.slice(0,L),ee=ee.slice(L+1),this.auth=decodeURIComponent(q)),V=-1;for(var G=0;G<c.length;G++){var Y=ee.indexOf(c[G]);Y!==-1&&(V===-1||Y<V)&&(V=Y)}V===-1&&(V=ee.length),this.host=ee.slice(0,V),ee=ee.slice(V),this.parseHost(),this.hostname=this.hostname||"";var k=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!k)for(var X=this.hostname.split(/\./),G=0,se=X.length;G<se;G++){var fe=X[G];if(fe&&!fe.match(h)){for(var be="",Ee=0,Ae=fe.length;Ee<Ae;Ee++)fe.charCodeAt(Ee)>127?be+="x":be+=fe[Ee];if(!be.match(h)){var Re=X.slice(0,G),Se=X.slice(G+1),Ue=fe.match(d);Ue&&(Re.push(Ue[1]),Se.unshift(Ue[2])),Se.length&&(ee="/"+Se.join(".")+ee),this.hostname=Re.join(".");break}}}this.hostname.length>_?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=n.toASCII(this.hostname));var je=this.port?":"+this.port:"",et=this.hostname||"";this.host=et+je,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),ee[0]!=="/"&&(ee="/"+ee))}if(!m[K])for(var G=0,se=u.length;G<se;G++){var Xe=u[G];if(ee.indexOf(Xe)!==-1){var ze=encodeURIComponent(Xe);ze===Xe&&(ze=escape(Xe)),ee=ee.split(Xe).join(ze)}}var Be=ee.indexOf("#");Be!==-1&&(this.hash=ee.substr(Be),ee=ee.slice(0,Be));var tt=ee.indexOf("?");if(tt!==-1?(this.search=ee.substr(tt),this.query=ee.substr(tt+1),U&&(this.query=T.parse(this.query)),ee=ee.slice(0,tt)):U&&(this.search="",this.query={}),ee&&(this.pathname=ee),w[K]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var je=this.pathname||"",bt=this.search||"";this.path=je+bt}return this.href=this.format(),this};function I(O){return typeof O=="string"&&(O=E(O)),O instanceof e?O.format():e.prototype.format.call(O)}e.prototype.format=function(){var O=this.auth||"";O&&(O=encodeURIComponent(O),O=O.replace(/%3A/i,":"),O+="@");var U=this.protocol||"",y=this.pathname||"",te=this.hash||"",F=!1,W="";this.host?F=O+this.host:this.hostname&&(F=O+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(F+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(W=T.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var ne=this.search||W&&"?"+W||"";return U&&U.substr(-1)!==":"&&(U+=":"),this.slashes||(!U||w[U])&&F!==!1?(F="//"+(F||""),y&&y.charAt(0)!=="/"&&(y="/"+y)):F||(F=""),te&&te.charAt(0)!=="#"&&(te="#"+te),ne&&ne.charAt(0)!=="?"&&(ne="?"+ne),y=y.replace(/[?#]/g,function(ee){return encodeURIComponent(ee)}),ne=ne.replace("#","%23"),U+F+y+ne+te};function D(O,U){return E(O,!1,!0).resolve(U)}e.prototype.resolve=function(O){return this.resolveObject(E(O,!1,!0)).format()};function z(O,U){return O?E(O,!1,!0).resolveObject(U):U}return e.prototype.resolveObject=function(O){if(typeof O=="string"){var U=new e;U.parse(O,!1,!0),O=U}for(var y=new e,te=Object.keys(this),F=0;F<te.length;F++){var W=te[F];y[W]=this[W]}if(y.hash=O.hash,O.href==="")return y.href=y.format(),y;if(O.slashes&&!O.protocol){for(var ne=Object.keys(O),ee=0;ee<ne.length;ee++){var ue=ne[ee];ue!=="protocol"&&(y[ue]=O[ue])}return w[y.protocol]&&y.hostname&&!y.pathname&&(y.pathname="/",y.path=y.pathname),y.href=y.format(),y}if(O.protocol&&O.protocol!==y.protocol){if(!w[O.protocol]){for(var ye=Object.keys(O),K=0;K<ye.length;K++){var B=ye[K];y[B]=O[B]}return y.href=y.format(),y}if(y.protocol=O.protocol,!O.host&&!x[O.protocol]){for(var se=(O.pathname||"").split("/");se.length&&!(O.host=se.shift()););O.host||(O.host=""),O.hostname||(O.hostname=""),se[0]!==""&&se.unshift(""),se.length<2&&se.unshift(""),y.pathname=se.join("/")}else y.pathname=O.pathname;if(y.search=O.search,y.query=O.query,y.host=O.host||"",y.auth=O.auth,y.hostname=O.hostname||O.host,y.port=O.port,y.pathname||y.search){var V=y.pathname||"",G=y.search||"";y.path=V+G}return y.slashes=y.slashes||O.slashes,y.href=y.format(),y}var Y=y.pathname&&y.pathname.charAt(0)==="/",q=O.host||O.pathname&&O.pathname.charAt(0)==="/",L=q||Y||y.host&&O.pathname,k=L,X=y.pathname&&y.pathname.split("/")||[],se=O.pathname&&O.pathname.split("/")||[],fe=y.protocol&&!w[y.protocol];if(fe&&(y.hostname="",y.port=null,y.host&&(X[0]===""?X[0]=y.host:X.unshift(y.host)),y.host="",O.protocol&&(O.hostname=null,O.port=null,O.host&&(se[0]===""?se[0]=O.host:se.unshift(O.host)),O.host=null),L=L&&(se[0]===""||X[0]==="")),q)y.host=O.host||O.host===""?O.host:y.host,y.hostname=O.hostname||O.hostname===""?O.hostname:y.hostname,y.search=O.search,y.query=O.query,X=se;else if(se.length)X||(X=[]),X.pop(),X=X.concat(se),y.search=O.search,y.query=O.query;else if(O.search!=null){if(fe){y.host=X.shift(),y.hostname=y.host;var be=y.host&&y.host.indexOf("@")>0?y.host.split("@"):!1;be&&(y.auth=be.shift(),y.hostname=be.shift(),y.host=y.hostname)}return y.search=O.search,y.query=O.query,(y.pathname!==null||y.search!==null)&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.href=y.format(),y}if(!X.length)return y.pathname=null,y.search?y.path="/"+y.search:y.path=null,y.href=y.format(),y;for(var Ee=X.slice(-1)[0],Ae=(y.host||O.host||X.length>1)&&(Ee==="."||Ee==="..")||Ee==="",Re=0,Se=X.length;Se>=0;Se--)Ee=X[Se],Ee==="."?X.splice(Se,1):Ee===".."?(X.splice(Se,1),Re++):Re&&(X.splice(Se,1),Re--);if(!L&&!k)for(;Re--;Re)X.unshift("..");L&&X[0]!==""&&(!X[0]||X[0].charAt(0)!=="/")&&X.unshift(""),Ae&&X.join("/").substr(-1)!=="/"&&X.push("");var Ue=X[0]===""||X[0]&&X[0].charAt(0)==="/";if(fe){y.hostname=Ue?"":X.length?X.shift():"",y.host=y.hostname;var be=y.host&&y.host.indexOf("@")>0?y.host.split("@"):!1;be&&(y.auth=be.shift(),y.hostname=be.shift(),y.host=y.hostname)}return L=L||y.host&&X.length,L&&!Ue&&X.unshift(""),X.length>0?y.pathname=X.join("/"):(y.pathname=null,y.path=null),(y.pathname!==null||y.search!==null)&&(y.path=(y.pathname?y.pathname:"")+(y.search?y.search:"")),y.auth=O.auth||y.auth,y.slashes=y.slashes||O.slashes,y.href=y.format(),y},e.prototype.parseHost=function(){var O=this.host,U=r.exec(O);U&&(U=U[0],U!==":"&&(this.port=U.substr(1)),O=O.substr(0,O.length-U.length)),O&&(this.hostname=O)},Qa.parse=E,Qa.resolve=D,Qa.resolveObject=z,Qa.format=I,Qa.Url=e,Qa}var Tv=CE();/*!
 * @pixi/utils - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var yl={parse:Tv.parse,format:Tv.format,resolve:Tv.resolve};He.RETINA_PREFIX=/@([0-9\.]+)x/;He.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var ux=!1,cx="6.5.10";function AE(n){var e;if(!ux){if(He.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+cx+" -  "+n+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,t)}else globalThis.console&&globalThis.console.log("PixiJS "+cx+" - "+n+" - http://www.pixijs.com/");ux=!0}}var Sv;function PE(){return typeof Sv>"u"&&(Sv=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:He.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!He.ADAPTER.getWebGLRenderingContext())return!1;var t=He.ADAPTER.createCanvas(),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),i=!!(r&&r.getContextAttributes().stencil);if(r){var s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}}()),Sv}var IE="#f0f8ff",OE="#faebd7",RE="#00ffff",ME="#7fffd4",kE="#f0ffff",DE="#f5f5dc",NE="#ffe4c4",FE="#000000",LE="#ffebcd",BE="#0000ff",jE="#8a2be2",UE="#a52a2a",GE="#deb887",HE="#5f9ea0",zE="#7fff00",XE="#d2691e",VE="#ff7f50",qE="#6495ed",WE="#fff8dc",$E="#dc143c",YE="#00ffff",KE="#00008b",QE="#008b8b",ZE="#b8860b",JE="#a9a9a9",eC="#006400",tC="#a9a9a9",rC="#bdb76b",nC="#8b008b",iC="#556b2f",sC="#ff8c00",aC="#9932cc",oC="#8b0000",lC="#e9967a",uC="#8fbc8f",cC="#483d8b",hC="#2f4f4f",fC="#2f4f4f",dC="#00ced1",pC="#9400d3",vC="#ff1493",_C="#00bfff",mC="#696969",yC="#696969",gC="#1e90ff",xC="#b22222",bC="#fffaf0",wC="#228b22",TC="#ff00ff",SC="#dcdcdc",EC="#f8f8ff",CC="#daa520",AC="#ffd700",PC="#808080",IC="#008000",OC="#adff2f",RC="#808080",MC="#f0fff0",kC="#ff69b4",DC="#cd5c5c",NC="#4b0082",FC="#fffff0",LC="#f0e68c",BC="#fff0f5",jC="#e6e6fa",UC="#7cfc00",GC="#fffacd",HC="#add8e6",zC="#f08080",XC="#e0ffff",VC="#fafad2",qC="#d3d3d3",WC="#90ee90",$C="#d3d3d3",YC="#ffb6c1",KC="#ffa07a",QC="#20b2aa",ZC="#87cefa",JC="#778899",e2="#778899",t2="#b0c4de",r2="#ffffe0",n2="#00ff00",i2="#32cd32",s2="#faf0e6",a2="#ff00ff",o2="#800000",l2="#66cdaa",u2="#0000cd",c2="#ba55d3",h2="#9370db",f2="#3cb371",d2="#7b68ee",p2="#00fa9a",v2="#48d1cc",_2="#c71585",m2="#191970",y2="#f5fffa",g2="#ffe4e1",x2="#ffe4b5",b2="#ffdead",w2="#000080",T2="#fdf5e6",S2="#808000",E2="#6b8e23",C2="#ffa500",A2="#ff4500",P2="#da70d6",I2="#eee8aa",O2="#98fb98",R2="#afeeee",M2="#db7093",k2="#ffefd5",D2="#ffdab9",N2="#cd853f",F2="#ffc0cb",L2="#dda0dd",B2="#b0e0e6",j2="#800080",U2="#663399",G2="#ff0000",H2="#bc8f8f",z2="#4169e1",X2="#8b4513",V2="#fa8072",q2="#f4a460",W2="#2e8b57",$2="#fff5ee",Y2="#a0522d",K2="#c0c0c0",Q2="#87ceeb",Z2="#6a5acd",J2="#708090",eA="#708090",tA="#fffafa",rA="#00ff7f",nA="#4682b4",iA="#d2b48c",sA="#008080",aA="#d8bfd8",oA="#ff6347",lA="#40e0d0",uA="#ee82ee",cA="#f5deb3",hA="#ffffff",fA="#f5f5f5",dA="#ffff00",pA="#9acd32",vA={aliceblue:IE,antiquewhite:OE,aqua:RE,aquamarine:ME,azure:kE,beige:DE,bisque:NE,black:FE,blanchedalmond:LE,blue:BE,blueviolet:jE,brown:UE,burlywood:GE,cadetblue:HE,chartreuse:zE,chocolate:XE,coral:VE,cornflowerblue:qE,cornsilk:WE,crimson:$E,cyan:YE,darkblue:KE,darkcyan:QE,darkgoldenrod:ZE,darkgray:JE,darkgreen:eC,darkgrey:tC,darkkhaki:rC,darkmagenta:nC,darkolivegreen:iC,darkorange:sC,darkorchid:aC,darkred:oC,darksalmon:lC,darkseagreen:uC,darkslateblue:cC,darkslategray:hC,darkslategrey:fC,darkturquoise:dC,darkviolet:pC,deeppink:vC,deepskyblue:_C,dimgray:mC,dimgrey:yC,dodgerblue:gC,firebrick:xC,floralwhite:bC,forestgreen:wC,fuchsia:TC,gainsboro:SC,ghostwhite:EC,goldenrod:CC,gold:AC,gray:PC,green:IC,greenyellow:OC,grey:RC,honeydew:MC,hotpink:kC,indianred:DC,indigo:NC,ivory:FC,khaki:LC,lavenderblush:BC,lavender:jC,lawngreen:UC,lemonchiffon:GC,lightblue:HC,lightcoral:zC,lightcyan:XC,lightgoldenrodyellow:VC,lightgray:qC,lightgreen:WC,lightgrey:$C,lightpink:YC,lightsalmon:KC,lightseagreen:QC,lightskyblue:ZC,lightslategray:JC,lightslategrey:e2,lightsteelblue:t2,lightyellow:r2,lime:n2,limegreen:i2,linen:s2,magenta:a2,maroon:o2,mediumaquamarine:l2,mediumblue:u2,mediumorchid:c2,mediumpurple:h2,mediumseagreen:f2,mediumslateblue:d2,mediumspringgreen:p2,mediumturquoise:v2,mediumvioletred:_2,midnightblue:m2,mintcream:y2,mistyrose:g2,moccasin:x2,navajowhite:b2,navy:w2,oldlace:T2,olive:S2,olivedrab:E2,orange:C2,orangered:A2,orchid:P2,palegoldenrod:I2,palegreen:O2,paleturquoise:R2,palevioletred:M2,papayawhip:k2,peachpuff:D2,peru:N2,pink:F2,plum:L2,powderblue:B2,purple:j2,rebeccapurple:U2,red:G2,rosybrown:H2,royalblue:z2,saddlebrown:X2,salmon:V2,sandybrown:q2,seagreen:W2,seashell:$2,sienna:Y2,silver:K2,skyblue:Q2,slateblue:Z2,slategray:J2,slategrey:eA,snow:tA,springgreen:rA,steelblue:nA,tan:iA,teal:sA,thistle:aA,tomato:oA,turquoise:lA,violet:uA,wheat:cA,white:hA,whitesmoke:fA,yellow:dA,yellowgreen:pA};function Il(n,e){return e===void 0&&(e=[]),e[0]=(n>>16&255)/255,e[1]=(n>>8&255)/255,e[2]=(n&255)/255,e}function ob(n){var e=n.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function lb(n){return typeof n=="string"&&(n=vA[n.toLowerCase()]||n,n[0]==="#"&&(n=n.slice(1))),parseInt(n,16)}function _A(){for(var n=[],e=[],t=0;t<32;t++)n[t]=t,e[t]=t;n[lt.NORMAL_NPM]=lt.NORMAL,n[lt.ADD_NPM]=lt.ADD,n[lt.SCREEN_NPM]=lt.SCREEN,e[lt.NORMAL]=lt.NORMAL_NPM,e[lt.ADD]=lt.ADD_NPM,e[lt.SCREEN]=lt.SCREEN_NPM;var r=[];return r.push(e),r.push(n),r}var Tm=_A();function Sm(n,e){return Tm[e?1:0][n]}function mA(n,e,t,r){return t=t||new Float32Array(4),r||r===void 0?(t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e):(t[0]=n[0],t[1]=n[1],t[2]=n[2]),t[3]=e,t}function uc(n,e){if(e===1)return(e*255<<24)+n;if(e===0)return 0;var t=n>>16&255,r=n>>8&255,i=n&255;return t=t*e+.5|0,r=r*e+.5|0,i=i*e+.5|0,(e*255<<24)+(t<<16)+(r<<8)+i}function Em(n,e,t,r){return t=t||new Float32Array(4),t[0]=(n>>16&255)/255,t[1]=(n>>8&255)/255,t[2]=(n&255)/255,(r||r===void 0)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function yA(n,e){e===void 0&&(e=null);var t=n*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+t);for(var r=0,i=0;r<t;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function ub(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function Pf(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function hx(n){return!(n&n-1)&&!!n}function fx(n){var e=(n>65535?1:0)<<4;n>>>=e;var t=(n>255?1:0)<<3;return n>>>=t,e|=t,t=(n>15?1:0)<<2,n>>>=t,e|=t,t=(n>3?1:0)<<1,n>>>=t,e|=t,e|n>>1}function El(n,e,t){var r=n.length,i;if(!(e>=r||t===0)){t=e+t>r?r-e:t;var s=r-t;for(i=e;i<s;++i)n[i]=n[i+t];n.length=s}}function gl(n){return n===0?0:n<0?-1:1}var gA=0;function yo(){return++gA}var dx={};function bi(n,e,t){if(t===void 0&&(t=3),!dx[e]){var r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+n):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+n),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+n),console.warn(r))),dx[e]=!0}}var px={},ws=Object.create(null),Za=Object.create(null),vx=function(){function n(e,t,r){this.canvas=He.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||He.RESOLUTION,this.resize(e,t)}return n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)},n.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(n.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),n}();function xA(n){var e=n.width,t=n.height,r=n.getContext("2d",{willReadFrequently:!0}),i=r.getImageData(0,0,e,t),s=i.data,o=s.length,u={top:null,left:null,right:null,bottom:null},c=null,v,_,h;for(v=0;v<o;v+=4)s[v+3]!==0&&(_=v/4%e,h=~~(v/4/e),u.top===null&&(u.top=h),(u.left===null||_<u.left)&&(u.left=_),(u.right===null||u.right<_)&&(u.right=_+1),(u.bottom===null||u.bottom<h)&&(u.bottom=h));return u.top!==null&&(e=u.right-u.left,t=u.bottom-u.top+1,c=r.getImageData(u.left,u.top,e,t)),{height:t,width:e,data:c}}var Dh;function bA(n,e){if(e===void 0&&(e=globalThis.location),n.indexOf("data:")===0)return"";e=e||globalThis.location,Dh||(Dh=document.createElement("a")),Dh.href=n;var t=yl.parse(Dh.href),r=!t.port&&e.port===""||t.port===e.port;return t.hostname!==e.hostname||!r||t.protocol!==e.protocol?"anonymous":""}function If(n,e){var t=He.RETINA_PREFIX.exec(n);return t?parseFloat(t[1]):e!==void 0?e:1}/*!
 * @pixi/math - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Of=Math.PI*2,wA=180/Math.PI,TA=Math.PI/180,jr;(function(n){n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC"})(jr||(jr={}));var _t=function(){function n(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=e,this.y=t}return n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},n.prototype.copyTo=function(e){return e.set(this.x,this.y),e},n.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},n.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x=e,this.y=t,this},n.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},n}(),Nh=[new _t,new _t,new _t,new _t],pt=function(){function n(e,t,r,i){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(i),this.type=jr.RECT}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n,"EMPTY",{get:function(){return new n(0,0,0,0)},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},n.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},n.prototype.contains=function(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},n.prototype.intersects=function(e,t){if(!t){var r=this.x<e.x?e.x:this.x,i=this.right>e.right?e.right:this.right;if(i<=r)return!1;var s=this.y<e.y?e.y:this.y,o=this.bottom>e.bottom?e.bottom:this.bottom;return o>s}var u=this.left,c=this.right,v=this.top,_=this.bottom;if(c<=u||_<=v)return!1;var h=Nh[0].set(e.left,e.top),d=Nh[1].set(e.left,e.bottom),m=Nh[2].set(e.right,e.top),x=Nh[3].set(e.right,e.bottom);if(m.x<=h.x||d.y<=h.y)return!1;var w=Math.sign(t.a*t.d-t.b*t.c);if(w===0||(t.apply(h,h),t.apply(d,d),t.apply(m,m),t.apply(x,x),Math.max(h.x,d.x,m.x,x.x)<=u||Math.min(h.x,d.x,m.x,x.x)>=c||Math.max(h.y,d.y,m.y,x.y)<=v||Math.min(h.y,d.y,m.y,x.y)>=_))return!1;var T=w*(d.y-h.y),E=w*(h.x-d.x),I=T*u+E*v,D=T*c+E*v,z=T*u+E*_,O=T*c+E*_;if(Math.max(I,D,z,O)<=T*h.x+E*h.y||Math.min(I,D,z,O)>=T*x.x+E*x.y)return!1;var U=w*(h.y-m.y),y=w*(m.x-h.x),te=U*u+y*v,F=U*c+y*v,W=U*u+y*_,ne=U*c+y*_;return!(Math.max(te,F,W,ne)<=U*h.x+y*h.y||Math.min(te,F,W,ne)>=U*x.x+y*x.y)},n.prototype.pad=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this},n.prototype.fit=function(e){var t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=i,this.height=Math.max(s-i,0),this},n.prototype.ceil=function(e,t){e===void 0&&(e=1),t===void 0&&(t=.001);var r=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=i-this.y,this},n.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=i,this.height=s-i,this},n.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),SA=function(){function n(e,t,r){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),this.x=e,this.y=t,this.radius=r,this.type=jr.CIRC}return n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(e,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=r},n.prototype.getBounds=function(){return new pt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},n.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},n}(),EA=function(){function n(e,t,r,i){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=e,this.y=t,this.width=r,this.height=i,this.type=jr.ELIP}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,i=(t-this.y)/this.height;return r*=r,i*=i,r+i<=1},n.prototype.getBounds=function(){return new pt(this.x-this.width,this.y-this.height,this.width,this.height)},n.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},n}(),hf=function(){function n(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){for(var s=[],o=0,u=i.length;o<u;o++)s.push(i[o].x,i[o].y);i=s}this.points=i,this.type=jr.POLY,this.closeStroke=!0}return n.prototype.clone=function(){var e=this.points.slice(),t=new n(e);return t.closeStroke=this.closeStroke,t},n.prototype.contains=function(e,t){for(var r=!1,i=this.points.length/2,s=0,o=i-1;s<i;o=s++){var u=this.points[s*2],c=this.points[s*2+1],v=this.points[o*2],_=this.points[o*2+1],h=c>t!=_>t&&e<(v-u)*((t-c)/(_-c))+u;h&&(r=!r)}return r},n.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,t){return e+", "+t},"")+"]")},n}(),CA=function(){function n(e,t,r,i,s){e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),s===void 0&&(s=20),this.x=e,this.y=t,this.width=r,this.height=i,this.radius=s,this.type=jr.RREC}return n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;var i=e-(this.x+r),s=t-(this.y+r),o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=t-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1},n.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},n}(),ma=function(){function n(e,t,r,i){r===void 0&&(r=0),i===void 0&&(i=0),this._x=r,this._y=i,this.cb=e,this.scope=t}return n.prototype.clone=function(e,t){return e===void 0&&(e=this.cb),t===void 0&&(t=this.scope),new n(e,t,this._x,this._y)},n.prototype.set=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this},n.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},n.prototype.copyTo=function(e){return e.set(this._x,this._y),e},n.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},n.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),n}(),er=function(){function n(e,t,r,i,s,o){e===void 0&&(e=1),t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=1),s===void 0&&(s=0),o===void 0&&(o=0),this.array=null,this.a=e,this.b=t,this.c=r,this.d=i,this.tx=s,this.ty=o}return n.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.prototype.set=function(e,t,r,i,s,o){return this.a=e,this.b=t,this.c=r,this.d=i,this.tx=s,this.ty=o,this},n.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},n.prototype.apply=function(e,t){t=t||new _t;var r=e.x,i=e.y;return t.x=this.a*r+this.c*i+this.tx,t.y=this.b*r+this.d*i+this.ty,t},n.prototype.applyInverse=function(e,t){t=t||new _t;var r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,t},n.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.prototype.rotate=function(e){var t=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*t-this.b*r,this.b=i*r+this.b*t,this.c=s*t-this.d*r,this.d=s*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this},n.prototype.append=function(e){var t=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this},n.prototype.setTransform=function(e,t,r,i,s,o,u,c,v){return this.a=Math.cos(u+v)*s,this.b=Math.sin(u+v)*s,this.c=-Math.sin(u-c)*o,this.d=Math.cos(u-c)*o,this.tx=e-(r*this.a+i*this.c),this.ty=t-(r*this.b+i*this.d),this},n.prototype.prepend=function(e){var t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},n.prototype.decompose=function(e){var t=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,u=-Math.atan2(-i,s),c=Math.atan2(r,t),v=Math.abs(u+c);return v<1e-5||Math.abs(Of-v)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=u,e.skew.y=c),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*t+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e},n.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-t*r;return this.a=i/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-t*s)/o,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var e=new n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},n.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(n,"IDENTITY",{get:function(){return new n},enumerable:!1,configurable:!0}),Object.defineProperty(n,"TEMP_MATRIX",{get:function(){return new n},enumerable:!1,configurable:!0}),n}(),so=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ao=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],oo=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],lo=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],A_=[],cb=[],Fh=Math.sign;function AA(){for(var n=0;n<16;n++){var e=[];A_.push(e);for(var t=0;t<16;t++)for(var r=Fh(so[n]*so[t]+oo[n]*ao[t]),i=Fh(ao[n]*so[t]+lo[n]*ao[t]),s=Fh(so[n]*oo[t]+oo[n]*lo[t]),o=Fh(ao[n]*oo[t]+lo[n]*lo[t]),u=0;u<16;u++)if(so[u]===r&&ao[u]===i&&oo[u]===s&&lo[u]===o){e.push(u);break}}for(var n=0;n<16;n++){var c=new er;c.set(so[n],ao[n],oo[n],lo[n],0,0),cb.push(c)}}AA();var ir={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(n){return so[n]},uY:function(n){return ao[n]},vX:function(n){return oo[n]},vY:function(n){return lo[n]},inv:function(n){return n&8?n&15:-n&7},add:function(n,e){return A_[n][e]},sub:function(n,e){return A_[n][ir.inv(e)]},rotate180:function(n){return n^4},isVertical:function(n){return(n&3)===2},byDirection:function(n,e){return Math.abs(n)*2<=Math.abs(e)?e>=0?ir.S:ir.N:Math.abs(e)*2<=Math.abs(n)?n>0?ir.E:ir.W:e>0?n>0?ir.SE:ir.SW:n>0?ir.NE:ir.NW},matrixAppendRotationInv:function(n,e,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var i=cb[ir.inv(e)];i.tx=t,i.ty=r,n.append(i)}},Nl=function(){function n(){this.worldTransform=new er,this.localTransform=new er,this.position=new ma(this.onChange,this,0,0),this.scale=new ma(this.onChange,this,1,1),this.pivot=new ma(this.onChange,this,0,0),this.skew=new ma(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return n.prototype.onChange=function(){this._localID++},n.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},n.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},n.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},n.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,i=this.worldTransform;i.a=t.a*r.a+t.b*r.c,i.b=t.a*r.b+t.b*r.d,i.c=t.c*r.a+t.d*r.c,i.d=t.c*r.b+t.d*r.d,i.tx=t.tx*r.a+t.ty*r.c+r.tx,i.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},n.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(n.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),n.IDENTITY=new n,n}();/*!
 * @pixi/display - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */He.SORTABLE_CHILDREN=!1;var Rf=function(){function n(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},n.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?pt.EMPTY:(e=e||new pt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},n.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},n.prototype.addPointMatrix=function(e,t){var r=e.a,i=e.b,s=e.c,o=e.d,u=e.tx,c=e.ty,v=r*t.x+s*t.y+u,_=i*t.x+o*t.y+c;this.minX=Math.min(this.minX,v),this.maxX=Math.max(this.maxX,v),this.minY=Math.min(this.minY,_),this.maxY=Math.max(this.maxY,_)},n.prototype.addQuad=function(e){var t=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],u=e[1];t=o<t?o:t,r=u<r?u:r,i=o>i?o:i,s=u>s?u:s,o=e[2],u=e[3],t=o<t?o:t,r=u<r?u:r,i=o>i?o:i,s=u>s?u:s,o=e[4],u=e[5],t=o<t?o:t,r=u<r?u:r,i=o>i?o:i,s=u>s?u:s,o=e[6],u=e[7],t=o<t?o:t,r=u<r?u:r,i=o>i?o:i,s=u>s?u:s,this.minX=t,this.minY=r,this.maxX=i,this.maxY=s},n.prototype.addFrame=function(e,t,r,i,s){this.addFrameMatrix(e.worldTransform,t,r,i,s)},n.prototype.addFrameMatrix=function(e,t,r,i,s){var o=e.a,u=e.b,c=e.c,v=e.d,_=e.tx,h=e.ty,d=this.minX,m=this.minY,x=this.maxX,w=this.maxY,T=o*t+c*r+_,E=u*t+v*r+h;d=T<d?T:d,m=E<m?E:m,x=T>x?T:x,w=E>w?E:w,T=o*i+c*r+_,E=u*i+v*r+h,d=T<d?T:d,m=E<m?E:m,x=T>x?T:x,w=E>w?E:w,T=o*t+c*s+_,E=u*t+v*s+h,d=T<d?T:d,m=E<m?E:m,x=T>x?T:x,w=E>w?E:w,T=o*i+c*s+_,E=u*i+v*s+h,d=T<d?T:d,m=E<m?E:m,x=T>x?T:x,w=E>w?E:w,this.minX=d,this.minY=m,this.maxX=x,this.maxY=w},n.prototype.addVertexData=function(e,t,r){for(var i=this.minX,s=this.minY,o=this.maxX,u=this.maxY,c=t;c<r;c+=2){var v=e[c],_=e[c+1];i=v<i?v:i,s=_<s?_:s,o=v>o?v:o,u=_>u?_:u}this.minX=i,this.minY=s,this.maxX=o,this.maxY=u},n.prototype.addVertices=function(e,t,r,i){this.addVerticesMatrix(e.worldTransform,t,r,i)},n.prototype.addVerticesMatrix=function(e,t,r,i,s,o){s===void 0&&(s=0),o===void 0&&(o=s);for(var u=e.a,c=e.b,v=e.c,_=e.d,h=e.tx,d=e.ty,m=this.minX,x=this.minY,w=this.maxX,T=this.maxY,E=r;E<i;E+=2){var I=t[E],D=t[E+1],z=u*I+v*D+h,O=_*D+c*I+d;m=Math.min(m,z-s),w=Math.max(w,z+s),x=Math.min(x,O-o),T=Math.max(T,O+o)}this.minX=m,this.minY=x,this.maxX=w,this.maxY=T},n.prototype.addBounds=function(e){var t=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s},n.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=s&&i<=o){var u=this.minX,c=this.minY,v=this.maxX,_=this.maxY;this.minX=r<u?r:u,this.minY=i<c?i:c,this.maxX=s>v?s:v,this.maxY=o>_?o:_}},n.prototype.addBoundsMatrix=function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)},n.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=s&&i<=o){var u=this.minX,c=this.minY,v=this.maxX,_=this.maxY;this.minX=r<u?r:u,this.minY=i<c?i:c,this.maxX=s>v?s:v,this.maxY=o>_?o:_}},n.prototype.pad=function(e,t){e===void 0&&(e=0),t===void 0&&(t=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)},n.prototype.addFramePad=function(e,t,r,i,s,o){e-=s,t-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i},n}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P_=function(n,e){return P_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},P_(n,e)};function Cm(n,e){P_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var _r=function(n){Cm(e,n);function e(){var t=n.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new Nl,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new Rf,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return e.mixin=function(t){for(var r=Object.keys(t),i=0;i<r.length;++i){var s=r[i];Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(t,s))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new pt),r=this._boundsRect),this._bounds.getRectangle(r)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Rf);var r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var u=this.getBounds(!1,t);return this.parent=i,this.transform=r,this._bounds=s,this._bounds.updateID+=this._boundsID-o,u},e.prototype.toGlobal=function(t,r,i){return i===void 0&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)},e.prototype.toLocal=function(t,r,i,s){return r&&(t=r.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,r,i,s,o,u,c,v,_){return t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=1),s===void 0&&(s=1),o===void 0&&(o=0),u===void 0&&(u=0),c===void 0&&(c=0),v===void 0&&(v=0),_===void 0&&(_=0),this.position.x=t,this.position.y=r,this.scale.x=i||1,this.scale.y=s||1,this.rotation=o,this.skew.x=u,this.skew.y=c,this.pivot.x=v,this.pivot.y=_,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new hb),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*wA},set:function(t){this.transform.rotation=t*TA},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){if(this._mask){var r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=t,this._mask){var r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}},enumerable:!1,configurable:!0}),e}(lc),hb=function(n){Cm(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.sortDirty=null,t}return e}(_r);_r.prototype.displayObjectUpdateTransform=_r.prototype.updateTransform;function PA(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}var mr=function(n){Cm(e,n);function e(){var t=n.call(this)||this;return t.children=[],t.sortableChildren=He.SORTABLE_CHILDREN,t.sortDirty=!1,t}return e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(r.length>1)for(var s=0;s<r.length;s++)this.addChild(r[s]);else{var o=r[0];o.parent&&o.parent.removeChild(o),o.parent=this,this.sortDirty=!0,o.transform._parentID=-1,this.children.push(o),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",o,this,this.children.length-1),o.emit("added",this)}return r[0]},e.prototype.addChildAt=function(t,r){if(r<0||r>this.children.length)throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t},e.prototype.swapChildren=function(t,r){if(t!==r){var i=this.getChildIndex(t),s=this.getChildIndex(r);this.children[i]=r,this.children[s]=t,this.onChildrenChange(i<s?i:s)}},e.prototype.getChildIndex=function(t){var r=this.children.indexOf(t);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r},e.prototype.setChildIndex=function(t,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);El(this.children,i,1),this.children.splice(r,0,t),this.onChildrenChange(r)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(r.length>1)for(var s=0;s<r.length;s++)this.removeChild(r[s]);else{var o=r[0],u=this.children.indexOf(o);if(u===-1)return null;o.parent=null,o.transform._parentID=-1,El(this.children,u,1),this._boundsID++,this.onChildrenChange(u),o.emit("removed",this),this.emit("childRemoved",o,this,u)}return r[0]},e.prototype.removeChildAt=function(t){var r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,El(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r},e.prototype.removeChildren=function(t,r){t===void 0&&(t=0),r===void 0&&(r=this.children.length);var i=t,s=r,o=s-i,u;if(o>0&&o<=s){u=this.children.splice(i,o);for(var c=0;c<u.length;++c)u[c].parent=null,u[c].transform&&(u[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var c=0;c<u.length;++c)u[c].emit("removed",this),this.emit("childRemoved",u[c],this,c);return u}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,r=0,i=this.children.length;r<i;++r){var s=this.children[r];s._lastSortedIndex=r,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(PA),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){var i=r._mask.isMaskData?r._mask.maskObject:r._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(r._bounds,i._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,r){r===void 0&&(r=!1);var i=n.prototype.getLocalBounds.call(this,t);if(!r)for(var s=0,o=this.children.length;s<o;++s){var u=this.children[s];u.visible&&u.updateTransform()}return i},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var r=t.renderTexture.sourceFrame;if(r.width>0&&r.height>0){var i,s;if(this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==e.prototype._render&&(i=this.getBounds(!0)),i&&r.intersects(i,s))this._render(t);else if(this.cullArea)return;for(var o=0,u=this.children.length;o<u;++o){var c=this.children[o],v=c.cullable;c.cullable=v||!this.cullArea,c.render(t),c.cullable=v}}},e.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var r=0,i=this.children.length;r<i;++r)this.children[r].render(t)}},e.prototype.renderAdvanced=function(t){var r=this.filters,i=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<r.length;s++)r[s].enabled&&this._enabledFilters.push(r[s])}var o=r&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==br.NONE));if(o&&t.batch.flush(),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(var s=0,u=this.children.length;s<u;++s)this.children[s].render(t)}o&&t.batch.flush(),i&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(t){n.prototype.destroy.call(this),this.sortDirty=!1;var r=typeof t=="boolean"?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(r)for(var s=0;s<i.length;++s)i[s].destroy(t)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var r=this.getLocalBounds().width;r!==0?this.scale.x=t/r:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var r=this.getLocalBounds().height;r!==0?this.scale.y=t/r:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),e}(_r);mr.prototype.containerUpdateTransform=mr.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gu=function(){return Gu=Object.assign||function(e){for(var t=arguments,r,i=1,s=arguments.length;i<s;i++){r=t[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Gu.apply(this,arguments)},jt;(function(n){n.Application="application",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Loader="loader",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser"})(jt||(jt={}));var _x=function(n){if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");var e=typeof n.extension!="object"?{type:n.extension}:n.extension;n=Gu(Gu({},e),{ref:n})}if(typeof n=="object")n=Gu({},n);else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Ns={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var n=arguments,e=this,t=[],r=0;r<arguments.length;r++)t[r]=n[r];return t.map(_x).forEach(function(i){i.type.forEach(function(s){var o,u;return(u=(o=e._removeHandlers)[s])===null||u===void 0?void 0:u.call(o,i)})}),this},add:function(){for(var n=arguments,e=this,t=[],r=0;r<arguments.length;r++)t[r]=n[r];return t.map(_x).forEach(function(i){i.type.forEach(function(s){var o=e._addHandlers,u=e._queue;o[s]?o[s](i):(u[s]=u[s]||[],u[s].push(i))})}),this},handle:function(n,e,t){var r=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(r[n]||i[n])throw new Error("Extension type "+n+" already has a handler");r[n]=e,i[n]=t;var s=this._queue;return s[n]&&(s[n].forEach(function(o){return e(o)}),delete s[n]),this},handleByMap:function(n,e){return this.handle(n,function(t){e[t.name]=t.ref},function(t){delete e[t.name]})},handleByList:function(n,e){return this.handle(n,function(t){var r,i;e.includes(t.ref)||(e.push(t.ref),n===jt.Loader&&((i=(r=t.ref).add)===null||i===void 0||i.call(r)))},function(t){var r=e.indexOf(t.ref);r!==-1&&e.splice(r,1)})}};/*!
 * @pixi/runner - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qr=function(){function n(e){this.items=[],this._name=e,this._aliasCount=0}return n.prototype.emit=function(e,t,r,i,s,o,u,c){if(arguments.length>8)throw new Error("max arguments reached");var v=this,_=v.name,h=v.items;this._aliasCount++;for(var d=0,m=h.length;d<m;d++)h[d][_](e,t,r,i,s,o,u,c);return h===this.items&&this._aliasCount--,this},n.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},n.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},n.prototype.remove=function(e){var t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},n.prototype.contains=function(e){return this.items.indexOf(e)!==-1},n.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},n.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(n.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),n}();Object.defineProperties(qr.prototype,{dispatch:{value:qr.prototype.emit},run:{value:qr.prototype.emit}});/*!
 * @pixi/ticker - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */He.TARGET_FPMS=.06;var Ds;(function(n){n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY"})(Ds||(Ds={}));var Ev=function(){function n(e,t,r,i){t===void 0&&(t=null),r===void 0&&(r=0),i===void 0&&(i=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=i}return n.prototype.match=function(e,t){return t===void 0&&(t=null),this.fn===e&&this.context===t},n.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},n.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},n.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},n}(),Wr=function(){function n(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ev(null,null,1/0),this.deltaMS=1/He.TARGET_FPMS,this.elapsedMS=1/He.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return n.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(e,t,r){return r===void 0&&(r=Ds.NORMAL),this._addListener(new Ev(e,t,r))},n.prototype.addOnce=function(e,t,r){return r===void 0&&(r=Ds.NORMAL),this._addListener(new Ev(e,t,r,!0))},n.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this},n.prototype.remove=function(e,t){for(var r=this._head.next;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(n.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},n.prototype.update=function(e){e===void 0&&(e=performance.now());var t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*He.TARGET_FPMS;for(var i=this._head,s=i.next;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(n.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,He.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(n,"shared",{get:function(){if(!n._shared){var e=n._shared=new n;e.autoStart=!0,e._protected=!0}return n._shared},enumerable:!1,configurable:!0}),Object.defineProperty(n,"system",{get:function(){if(!n._system){var e=n._system=new n;e.autoStart=!0,e._protected=!0}return n._system},enumerable:!1,configurable:!0}),n}(),IA=function(){function n(){}return n.init=function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Ds.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Wr.shared:new Wr,e.autoStart&&this.start()},n.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},n.extension=jt.Application,n}();/*!
 * @pixi/core - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */He.PREFER_ENV=Vi.any?ks.WEBGL:ks.WEBGL2;He.STRICT_TEXTURE_CACHE=!1;var I_=[];function fb(n,e){if(!n)return null;var t="";if(typeof n=="string"){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);r&&(t=r[1].toLowerCase())}for(var i=I_.length-1;i>=0;--i){var s=I_[i];if(s.test&&s.test(n,t))return new s(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O_=function(n,e){return O_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},O_(n,e)};function zt(n,e){O_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var R_=function(){return R_=Object.assign||function(e){for(var t=arguments,r,i=1,s=arguments.length;i<s;i++){r=t[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},R_.apply(this,arguments)};function OA(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}var ec=function(){function n(e,t){e===void 0&&(e=0),t===void 0&&(t=0),this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new qr("setRealSize"),this.onUpdate=new qr("update"),this.onError=new qr("onError")}return n.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},n.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},n.prototype.resize=function(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))},Object.defineProperty(n.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),n.prototype.update=function(){this.destroyed||this.onUpdate.emit()},n.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),n.prototype.style=function(e,t,r){return!1},n.prototype.dispose=function(){},n.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},n.test=function(e,t){return!1},n}(),cc=function(n){zt(e,n);function e(t,r){var i=this,s=r||{},o=s.width,u=s.height;if(!o||!u)throw new Error("BufferResource width or height invalid");return i=n.call(this,o,u)||this,i.data=t,i}return e.prototype.upload=function(t,r,i){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Si.UNPACK);var o=r.realWidth,u=r.realHeight;return i.width===o&&i.height===u?s.texSubImage2D(r.target,0,0,0,o,u,r.format,i.type,this.data):(i.width=o,i.height=u,s.texImage2D(r.target,0,i.internalFormat,o,u,0,r.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(ec),RA={scaleMode:Xi.NEAREST,format:Ne.RGBA,alphaMode:Si.NPM},Ct=function(n){zt(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=null);var i=n.call(this)||this;r=r||{};var s=r.alphaMode,o=r.mipmap,u=r.anisotropicLevel,c=r.scaleMode,v=r.width,_=r.height,h=r.wrapMode,d=r.format,m=r.type,x=r.target,w=r.resolution,T=r.resourceOptions;return t&&!(t instanceof ec)&&(t=fb(t,T),t.internal=!0),i.resolution=w||He.RESOLUTION,i.width=Math.round((v||0)*i.resolution)/i.resolution,i.height=Math.round((_||0)*i.resolution)/i.resolution,i._mipmap=o!==void 0?o:He.MIPMAP_TEXTURES,i.anisotropicLevel=u!==void 0?u:He.ANISOTROPIC_LEVEL,i._wrapMode=h||He.WRAP_MODE,i._scaleMode=c!==void 0?c:He.SCALE_MODE,i.format=d||Ne.RGBA,i.type=m||Ke.UNSIGNED_BYTE,i.target=x||po.TEXTURE_2D,i.alphaMode=s!==void 0?s:Si.UNPACK,i.uid=yo(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=v>0&&_>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,r){var i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,r,i){return i=i||this.resolution,this.setRealSize(t*i,r*i,i)},e.prototype.setRealSize=function(t,r,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=hx(this.realWidth)&&hx(this.realHeight)},e.prototype.setResolution=function(t){var r=this.resolution;return r===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*r)/t,this.height=Math.round(this.height*r)/t,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Za[this.cacheId],delete ws[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,r,i){i===void 0&&(i=He.STRICT_TEXTURE_CACHE);var s=typeof t=="string",o=null;if(s)o=t;else{if(!t._pixiId){var u=r&&r.pixiIdPrefix||"pixiid";t._pixiId=u+"_"+yo()}o=t._pixiId}var c=Za[o];if(s&&i&&!c)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return c||(c=new e(t,r),c.cacheId=o,e.addToCache(c,o)),c},e.fromBuffer=function(t,r,i,s){t=t||new Float32Array(r*i*4);var o=new cc(t,{width:r,height:i}),u=t instanceof Float32Array?Ke.FLOAT:Ke.UNSIGNED_BYTE;return new e(o,Object.assign({},RA,s||{width:r,height:i,type:u}))},e.addToCache=function(t,r){r&&(t.textureCacheIds.indexOf(r)===-1&&t.textureCacheIds.push(r),Za[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),Za[r]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var r=Za[t];if(r){var i=r.textureCacheIds.indexOf(t);return i>-1&&r.textureCacheIds.splice(i,1),delete Za[t],r}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)delete Za[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(lc),db=function(n){zt(e,n);function e(t,r){var i=this,s=r||{},o=s.width,u=s.height;i=n.call(this,o,u)||this,i.items=[],i.itemDirtyIds=[];for(var c=0;c<t;c++){var v=new Ct;i.items.push(v),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}return e.prototype.initFromArray=function(t,r){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof ec?this.addResourceAt(t[i],i):this.addResourceAt(fb(t[i],r),i))},e.prototype.dispose=function(){for(var t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this},e.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");n.prototype.bind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)},e.prototype.unbind=function(t){n.prototype.unbind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.items.map(function(s){return s.resource}).filter(function(s){return s}),i=r.map(function(s){return s.load()});return this._load=Promise.all(i).then(function(){var s=t.items[0],o=s.realWidth,u=s.realHeight;return t.resize(o,u),Promise.resolve(t)}),this._load},e}(ec),MA=function(n){zt(e,n);function e(t,r){var i=this,s=r||{},o=s.width,u=s.height,c,v;return Array.isArray(t)?(c=t,v=t.length):v=t,i=n.call(this,v,{width:o,height:u})||this,c&&i.initFromArray(c,r),i}return e.prototype.addBaseTextureAt=function(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=po.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,r,i){var s=this,o=s.length,u=s.itemDirtyIds,c=s.items,v=t.gl;i.dirtyId<0&&v.texImage3D(v.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,o,0,r.format,i.type,null);for(var _=0;_<o;_++){var h=c[_];u[_]<h.dirtyId&&(u[_]=h.dirtyId,h.valid&&v.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,_,h.resource.width,h.resource.height,1,r.format,i.type,h.resource.source))}return!0},e}(db),Sa=function(n){zt(e,n);function e(t){var r=this,i=t,s=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return r=n.call(this,s,o)||this,r.source=t,r.noSubImage=!1,r}return e.crossOrigin=function(t,r,i){i===void 0&&r.indexOf("data:")!==0?t.crossOrigin=bA(r):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")},e.prototype.upload=function(t,r,i,s){var o=t.gl,u=r.realWidth,c=r.realHeight;if(s=s||this.source,s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Si.UNPACK),!this.noSubImage&&r.target===o.TEXTURE_2D&&i.width===u&&i.height===c?o.texSubImage2D(o.TEXTURE_2D,0,0,0,r.format,i.type,s):(i.width=u,i.height=c,o.texImage2D(r.target,0,i.internalFormat,r.format,i.type,s)),!0},e.prototype.update=function(){if(!this.destroyed){var t=this.source,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(r,i),n.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(ec),kA=function(n){zt(e,n);function e(t){return n.call(this,t)||this}return e.test=function(t){var r=globalThis.OffscreenCanvas;return r&&t instanceof r?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(Sa),DA=function(n){zt(e,n);function e(t,r){var i=this,s=r||{},o=s.width,u=s.height,c=s.autoLoad,v=s.linkBaseTexture;if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");i=n.call(this,6,{width:o,height:u})||this;for(var _=0;_<e.SIDES;_++)i.items[_].target=po.TEXTURE_CUBE_MAP_POSITIVE_X+_;return i.linkBaseTexture=v!==!1,t&&i.initFromArray(t,r),c!==!1&&i.load(),i}return e.prototype.bind=function(t){n.prototype.bind.call(this,t),t.target=po.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,r,i){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=po.TEXTURE_CUBE_MAP_POSITIVE_X+r,t.parentTextureArray=this.baseTexture,this.items[r]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[r]=t,this},e.prototype.upload=function(t,r,i){for(var s=this.itemDirtyIds,o=0;o<e.SIDES;o++){var u=this.items[o];(s[o]<u.dirtyId||i.dirtyId<r.dirtyId)&&(u.valid&&u.resource?(u.resource.upload(t,u,i),s[o]=u.dirtyId):s[o]<-1&&(t.gl.texImage2D(u.target,0,i.internalFormat,r.realWidth,r.realHeight,0,r.format,i.type,null),s[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(db),pb=function(n){zt(e,n);function e(t,r){var i=this;if(r=r||{},!(t instanceof HTMLImageElement)){var s=new Image;Sa.crossOrigin(s,t,r.crossorigin),s.src=t,t=s}return i=n.call(this,t)||this,!t.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=t.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(r.createBitmap!==void 0?r.createBitmap:He.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,i.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,i.bitmap=null,i._load=null,r.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(t){var r=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(i,s){var o=r.source;r.url=o.src;var u=function(){r.destroyed||(o.onload=null,o.onerror=null,r.resize(o.width,o.height),r._load=null,r.createBitmap?i(r.process()):i(r))};o.complete&&o.src?u():(o.onload=u,o.onerror=function(c){s(c),r.onError.emit(c)})}),this._load)},e.prototype.process=function(){var t=this,r=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,s=!r.crossOrigin||r.crossOrigin==="anonymous";return this._process=fetch(r.src,{mode:s?"cors":"no-cors"}).then(function(o){return o.blob()}).then(function(o){return i(o,0,0,r.width,r.height,{premultiplyAlpha:t.alphaMode===null||t.alphaMode===Si.UNPACK?"premultiply":"none"})}).then(function(o){return t.destroyed?Promise.reject():(t.bitmap=o,t.update(),t._process=null,Promise.resolve(t))}),this._process},e.prototype.upload=function(t,r,i){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return n.prototype.upload.call(this,t,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(n.prototype.upload.call(this,t,r,i,this.bitmap),!this.preserveBitmap){var s=!0,o=r._glTextures;for(var u in o){var c=o[u];if(c!==i&&c.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,n.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},e}(Sa),NA=function(n){zt(e,n);function e(t,r){var i=this;return r=r||{},i=n.call(this,He.ADAPTER.createCanvas())||this,i._width=0,i._height=0,i.svg=t,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,r.autoLoad!==!1&&i.load(),i}return e.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(r){if(t._resolve=function(){t.resize(t.source.width,t.source.height),r(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var t=this,r=new Image;Sa.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(i){t._resolve&&(r.onerror=null,t.onError.emit(i))},r.onload=function(){if(t._resolve){var i=r.width,s=r.height;if(!i||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var o=i*t.scale,u=s*t.scale;(t._overrideWidth||t._overrideHeight)&&(o=t._overrideWidth||t._overrideHeight/s*i,u=t._overrideHeight||t._overrideWidth/i*s),o=Math.round(o),u=Math.round(u);var c=t.source;c.width=o,c.height=u,c._pixiId="canvas_"+yo(),c.getContext("2d").drawImage(r,0,0,i,s,0,0,o,u),t._resolve(),t._resolve=null}}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),i={};return r&&(i[r[1]]=Math.round(parseFloat(r[3])),i[r[5]]=Math.round(parseFloat(r[7]))),i},e.prototype.dispose=function(){n.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,r){return r==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Sa),FA=function(n){zt(e,n);function e(t,r){var i=this;if(r=r||{},!(t instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var o=t[0].src||t[0];Sa.crossOrigin(s,o,r.crossorigin);for(var u=0;u<t.length;++u){var c=document.createElement("source"),v=t[u],_=v.src,h=v.mime;_=_||t[u];var d=_.split("?").shift().toLowerCase(),m=d.slice(d.lastIndexOf(".")+1);h=h||e.MIME_TYPES[m]||"video/"+m,c.src=_,c.type=h,s.appendChild(c)}t=s}return i=n.call(this,t)||this,i.noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=r.autoPlay!==!1,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),r.autoLoad!==!1&&i.load(),i}return e.prototype.update=function(t){if(!this.destroyed){var r=Wr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(n.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(i){t.valid?i(t):(t._resolve=i,r.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){var t=this.source;return t.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Wr.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Wr.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(t.videoWidth,t.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(Wr.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),n.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Wr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Wr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Sa),LA=function(n){zt(e,n);function e(t){return n.call(this,t)||this}return e.test=function(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&t instanceof ImageBitmap},e}(Sa);I_.push(pb,LA,kA,FA,NA,cc,DA,MA);var BA=function(n){zt(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.upload=function(t,r,i){var s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Si.UNPACK);var o=r.realWidth,u=r.realHeight;return i.width===o&&i.height===u?s.texSubImage2D(r.target,0,0,0,o,u,r.format,i.type,this.data):(i.width=o,i.height=u,s.texImage2D(r.target,0,i.internalFormat,o,u,0,r.format,i.type,this.data)),!0},e}(cc),M_=function(){function n(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new qr("disposeFramebuffer"),this.multisample=Jt.NONE}return Object.defineProperty(n.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),n.prototype.addColorTexture=function(e,t){return e===void 0&&(e=0),this.colorTextures[e]=t||new Ct(null,{scaleMode:Xi.NEAREST,resolution:1,mipmap:Ti.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.addDepthTexture=function(e){return this.depthTexture=e||new Ct(new BA(null,{width:this.width,height:this.height}),{scaleMode:Xi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ti.OFF,format:Ne.DEPTH_COMPONENT,type:Ke.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},n.prototype.resize=function(e,t){if(e=Math.round(e),t=Math.round(t),!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(e/s,t/s)}}},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},n}(),vb=function(n){zt(e,n);function e(t){t===void 0&&(t={});var r=this;if(typeof t=="number"){var i=arguments[0],s=arguments[1],o=arguments[2],u=arguments[3];t={width:i,height:s,scaleMode:o,resolution:u}}return t.width=t.width||100,t.height=t.height||100,t.multisample=t.multisample!==void 0?t.multisample:Jt.NONE,r=n.call(this,null,t)||this,r.mipmap=Ti.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new M_(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=t.multisample,r.maskStack=[],r.filterStack=[{}],r}return e.prototype.resize=function(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),n.prototype.dispose.call(this)},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Ct),_b=function(){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return n.prototype.set=function(e,t,r){var i=t.width,s=t.height;if(r){var o=e.width/2/i,u=e.height/2/s,c=e.x/i+o,v=e.y/s+u;r=ir.add(r,ir.NW),this.x0=c+o*ir.uX(r),this.y0=v+u*ir.uY(r),r=ir.add(r,2),this.x1=c+o*ir.uX(r),this.y1=v+u*ir.uY(r),r=ir.add(r,2),this.x2=c+o*ir.uX(r),this.y2=v+u*ir.uY(r),r=ir.add(r,2),this.x3=c+o*ir.uX(r),this.y3=v+u*ir.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},n.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},n}(),mx=new _b;function Lh(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}var rt=function(n){zt(e,n);function e(t,r,i,s,o,u){var c=n.call(this)||this;if(c.noFrame=!1,r||(c.noFrame=!0,r=new pt(0,0,1,1)),t instanceof e&&(t=t.baseTexture),c.baseTexture=t,c._frame=r,c.trim=s,c.valid=!1,c._uvs=mx,c.uvMatrix=null,c.orig=i||r,c._rotate=Number(o||0),o===!0)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=u?new _t(u.x,u.y):new _t(0,0),c._updateID=0,c.textureCacheIds=[],t.valid?c.noFrame?t.valid&&c.onBaseTextureUpdated(t):c.frame=r:t.once("loaded",c.onBaseTextureUpdated,c),c.noFrame&&t.on("update",c.onBaseTextureUpdated,c),c}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&r.url&&ws[r.url]&&e.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),i=new e(this.baseTexture,!this.noFrame&&t,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=t),i},e.prototype.updateUvs=function(){this._uvs===mx&&(this._uvs=new _b),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r,i){r===void 0&&(r={}),i===void 0&&(i=He.STRICT_TEXTURE_CACHE);var s=typeof t=="string",o=null;if(s)o=t;else if(t instanceof Ct){if(!t.cacheId){var u=r&&r.pixiIdPrefix||"pixiid";t.cacheId=u+"-"+yo(),Ct.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){var u=r&&r.pixiIdPrefix||"pixiid";t._pixiId=u+"_"+yo()}o=t._pixiId}var c=ws[o];if(s&&i&&!c)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return!c&&!(t instanceof Ct)?(r.resolution||(r.resolution=If(t)),c=new e(new Ct(t,r)),c.baseTexture.cacheId=o,Ct.addToCache(c.baseTexture,o),e.addToCache(c,o)):!c&&t instanceof Ct&&(c=new e(t),e.addToCache(c,o)),c},e.fromURL=function(t,r){var i=Object.assign({autoLoad:!1},r?.resourceOptions),s=e.from(t,Object.assign({resourceOptions:i},r),!1),o=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):o.load().then(function(){return Promise.resolve(s)})},e.fromBuffer=function(t,r,i,s){return new e(Ct.fromBuffer(t,r,i,s))},e.fromLoader=function(t,r,i,s){var o=new Ct(t,Object.assign({scaleMode:He.SCALE_MODE,resolution:If(r)},s)),u=o.resource;u instanceof pb&&(u.url=r);var c=new e(o);return i||(i=r),Ct.addToCache(c.baseTexture,i),e.addToCache(c,i),i!==r&&(Ct.addToCache(c.baseTexture,r),e.addToCache(c,r)),c.baseTexture.valid?Promise.resolve(c):new Promise(function(v){c.baseTexture.once("loaded",function(){return v(c)})})},e.addToCache=function(t,r){r&&(t.textureCacheIds.indexOf(r)===-1&&t.textureCacheIds.push(r),ws[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),ws[r]=t)},e.removeFromCache=function(t){if(typeof t=="string"){var r=ws[t];if(r){var i=r.textureCacheIds.indexOf(t);return i>-1&&r.textureCacheIds.splice(i,1),delete ws[t],r}}else if(t&&t.textureCacheIds){for(var s=0;s<t.textureCacheIds.length;++s)ws[t.textureCacheIds[s]]===t&&delete ws[t.textureCacheIds[s]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var r=t.x,i=t.y,s=t.width,o=t.height,u=r+s>this.baseTexture.width,c=i+o>this.baseTexture.height;if(u||c){var v=u&&c?"and":"or",_="X: "+r+" + "+s+" = "+(r+s)+" > "+this.baseTexture.width,h="Y: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(_+" "+v+" "+h))}this.valid=s&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new Ct),Lh(e._EMPTY),Lh(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=He.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),e._WHITE=new e(Ct.from(t)),Lh(e._WHITE),Lh(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(lc),go=function(n){zt(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r,i){i===void 0&&(i=!0);var s=this.baseTexture.resolution,o=Math.round(t*s)/s,u=Math.round(r*s)/s;this.valid=o>0&&u>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=u,i&&this.baseTexture.resize(o,u),this.updateUvs()},e.prototype.setResolution=function(t){var r=this.baseTexture;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))},e.create=function(t){for(var r=arguments,i=[],s=1;s<arguments.length;s++)i[s-1]=r[s];return typeof t=="number"&&(bi("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:i[0],scaleMode:i[1],resolution:i[2]}),new e(new vb(t))},e}(rt),jA=function(){function n(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return n.prototype.createTexture=function(e,t,r){r===void 0&&(r=Jt.NONE);var i=new vb(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new go(i)},n.prototype.getOptimalTexture=function(e,t,r,i){r===void 0&&(r=1),i===void 0&&(i=Jt.NONE);var s;e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=Pf(e),t=Pf(t),s=((e&65535)<<16|t&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);var o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,i)),o.filterPoolKey=s,o.setResolution(r),o},n.prototype.getFilterTexture=function(e,t,r){var i=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||Jt.NONE);return i.filterFrame=e.filterFrame,i},n.prototype.returnTexture=function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)},n.prototype.returnFilterTexture=function(e){this.returnTexture(e)},n.prototype.clear=function(e){if(e=e!==!1,e)for(var t in this.texturePool){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},n.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var t in this.texturePool)if(Number(t)<0){var r=this.texturePool[t];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},n.SCREEN_KEY=-1,n}(),yx=function(){function n(e,t,r,i,s,o,u){t===void 0&&(t=0),r===void 0&&(r=!1),i===void 0&&(i=Ke.FLOAT),this.buffer=e,this.size=t,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=u}return n.prototype.destroy=function(){this.buffer=null},n.from=function(e,t,r,i,s){return new n(e,t,r,i,s)},n}(),UA=0,sr=function(){function n(e,t,r){t===void 0&&(t=!0),r===void 0&&(r=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=UA++,this.disposeRunner=new qr("disposeBuffer")}return n.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(n.prototype,"index",{get:function(){return this.type===Wi.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Wi.ELEMENT_ARRAY_BUFFER:Wi.ARRAY_BUFFER},enumerable:!1,configurable:!0}),n.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new n(e)},n}(),GA={Float32Array,Uint32Array,Int32Array,Uint8Array};function HA(n,e){for(var t=0,r=0,i={},s=0;s<n.length;s++)r+=e[s],t+=n[s].length;for(var o=new ArrayBuffer(t*4),u=null,c=0,s=0;s<n.length;s++){var v=e[s],_=n[s],h=ub(_);i[h]||(i[h]=new GA[h](o)),u=i[h];for(var d=0;d<_.length;d++){var m=(d/v|0)*r+c,x=d%v;u[m+x]=_[d]}c+=v}return new Float32Array(o)}var gx={5126:4,5123:2,5121:1},zA=0,XA={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},To=function(){function n(e,t){e===void 0&&(e=[]),t===void 0&&(t={}),this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=zA++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new qr("disposeGeometry"),this.refCount=0}return n.prototype.addAttribute=function(e,t,r,i,s,o,u,c){if(r===void 0&&(r=0),i===void 0&&(i=!1),c===void 0&&(c=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof sr||(t instanceof Array&&(t=new Float32Array(t)),t=new sr(t));var v=e.split("|");if(v.length>1){for(var _=0;_<v.length;_++)this.addAttribute(v[_],t,r,i,s);return this}var h=this.buffers.indexOf(t);return h===-1&&(this.buffers.push(t),h=this.buffers.length-1),this.attributes[e]=new yx(h,r,i,s,o,u,c),this.instanced=this.instanced||c,this},n.prototype.getAttribute=function(e){return this.attributes[e]},n.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},n.prototype.addIndex=function(e){return e instanceof sr||(e instanceof Array&&(e=new Uint16Array(e)),e=new sr(e)),e.type=Wi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},n.prototype.getIndex=function(){return this.indexBuffer},n.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],t=[],r=new sr,i;for(i in this.attributes){var s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*gx[s.type]/4),s.buffer=0}for(r.data=HA(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},n.prototype.getSize=function(){for(var e in this.attributes){var t=this.attributes[e],r=this.buffers[t.buffer];return r.data.length/(t.stride/4||t.size)}return 0},n.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},n.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},n.prototype.clone=function(){for(var e=new n,t=0;t<this.buffers.length;t++)e.buffers[t]=new sr(this.buffers[t].data.slice(0));for(var t in this.attributes){var r=this.attributes[t];e.attributes[t]=new yx(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Wi.ELEMENT_ARRAY_BUFFER),e},n.merge=function(e){for(var t=new n,r=[],i=[],s=[],o,u=0;u<e.length;u++){o=e[u];for(var c=0;c<o.buffers.length;c++)i[c]=i[c]||0,i[c]+=o.buffers[c].data.length,s[c]=0}for(var u=0;u<o.buffers.length;u++)r[u]=new XA[ub(o.buffers[u].data)](i[u]),t.buffers[u]=new sr(r[u]);for(var u=0;u<e.length;u++){o=e[u];for(var c=0;c<o.buffers.length;c++)r[c].set(o.buffers[c].data,s[c]),s[c]+=o.buffers[c].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Wi.ELEMENT_ARRAY_BUFFER;for(var v=0,_=0,h=0,d=0,u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){d=u;break}for(var u in o.attributes){var m=o.attributes[u];(m.buffer|0)===d&&(_+=m.size*gx[m.type]/4)}for(var u=0;u<e.length;u++){for(var x=e[u].indexBuffer.data,c=0;c<x.length;c++)t.indexBuffer.data[c+h]+=v;v+=e[u].buffers[d].data.length/_,h+=x.length}}return t},n}(),VA=function(n){zt(e,n);function e(){var t=n.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return e}(To),Am=function(n){zt(e,n);function e(){var t=n.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new sr(t.vertices),t.uvBuffer=new sr(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return e.prototype.map=function(t,r){var i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+r.width/t.width,this.uvs[3]=s,this.uvs[4]=i+r.width/t.width,this.uvs[5]=s+r.height/t.height,this.uvs[6]=i,this.uvs[7]=s+r.height/t.height,i=r.x,s=r.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+r.width,this.vertices[3]=s,this.vertices[4]=i+r.width,this.vertices[5]=s+r.height,this.vertices[6]=i,this.vertices[7]=s+r.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(To),qA=0,vo=function(){function n(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=qA++,this.static=!!t,this.ubo=!!r,e instanceof sr?(this.buffer=e,this.buffer.type=Wi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new sr(new Float32Array(1)),this.buffer.type=Wi.UNIFORM_BUFFER,this.autoManage=!0))}return n.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},n.prototype.add=function(e,t,r){if(!this.ubo)this.uniforms[e]=new n(t,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},n.from=function(e,t,r){return new n(e,t,r)},n.uboFrom=function(e,t){return new n(e,t??!0,!0)},n}(),WA=function(){function n(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Jt.NONE,this.sourceFrame=new pt,this.destinationFrame=new pt,this.bindingSourceFrame=new pt,this.bindingDestinationFrame=new pt,this.filters=[],this.transform=null}return n.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},n}(),Bh=[new _t,new _t,new _t,new _t],Cv=new er,$A=function(){function n(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new jA,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new VA,this.quadUv=new Am,this.tempRect=new pt,this.activeState={},this.globalUniforms=new vo({outputFrame:new pt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return n.prototype.push=function(e,t){for(var r,i,s=this.renderer,o=this.defaultFilterStack,u=this.statePool.pop()||new WA,c=this.renderer.renderTexture,v=t[0].resolution,_=t[0].multisample,h=t[0].padding,d=t[0].autoFit,m=(r=t[0].legacy)!==null&&r!==void 0?r:!0,x=1;x<t.length;x++){var w=t[x];v=Math.min(v,w.resolution),_=Math.min(_,w.multisample),h=this.useMaxPadding?Math.max(h,w.padding):h+w.padding,d=d&&w.autoFit,m=m||((i=w.legacy)!==null&&i!==void 0?i:!0)}o.length===1&&(this.defaultFilterStack[0].renderTexture=c.current),o.push(u),u.resolution=v,u.multisample=_,u.legacy=m,u.target=e,u.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),u.sourceFrame.pad(h);var T=this.tempRect.copyFrom(c.sourceFrame);s.projection.transform&&this.transformAABB(Cv.copyFrom(s.projection.transform).invert(),T),d?(u.sourceFrame.fit(T),(u.sourceFrame.width<=0||u.sourceFrame.height<=0)&&(u.sourceFrame.width=0,u.sourceFrame.height=0)):u.sourceFrame.intersects(T)||(u.sourceFrame.width=0,u.sourceFrame.height=0),this.roundFrame(u.sourceFrame,c.current?c.current.resolution:s.resolution,c.sourceFrame,c.destinationFrame,s.projection.transform),u.renderTexture=this.getOptimalFilterTexture(u.sourceFrame.width,u.sourceFrame.height,v,_),u.filters=t,u.destinationFrame.width=u.renderTexture.width,u.destinationFrame.height=u.renderTexture.height;var E=this.tempRect;E.x=0,E.y=0,E.width=u.sourceFrame.width,E.height=u.sourceFrame.height,u.renderTexture.filterFrame=u.sourceFrame,u.bindingSourceFrame.copyFrom(c.sourceFrame),u.bindingDestinationFrame.copyFrom(c.destinationFrame),u.transform=s.projection.transform,s.projection.transform=null,c.bind(u.renderTexture,u.sourceFrame,E),s.framebuffer.clear(0,0,0,0)},n.prototype.pop=function(){var e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;var i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;var s=i.inputSize,o=i.inputPixel,u=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],u[0]=.5*o[2],u[1]=.5*o[3],u[2]=t.sourceFrame.width*s[2]-.5*o[2],u[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){var c=i.filterArea;c[0]=t.destinationFrame.width,c[1]=t.destinationFrame.height,c[2]=t.sourceFrame.x,c[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var v=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,v.renderTexture,yi.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var _=t.renderTexture,h=this.getOptimalFilterTexture(_.width,_.height,t.resolution);h.filterFrame=_.filterFrame;var d=0;for(d=0;d<r.length-1;++d){d===1&&t.multisample>1&&(h=this.getOptimalFilterTexture(_.width,_.height,t.resolution),h.filterFrame=_.filterFrame),r[d].apply(this,_,h,yi.CLEAR,t);var m=_;_=h,h=m}r[d].apply(this,_,v.renderTexture,yi.BLEND,t),d>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(_),this.returnFilterTexture(h)}t.clear(),this.statePool.push(t)},n.prototype.bindAndClear=function(e,t){t===void 0&&(t=yi.CLEAR);var r=this.renderer,i=r.renderTexture,s=r.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var u=s.stateId&1||this.forceClear;(t===yi.CLEAR||t===yi.BLIT&&u)&&this.renderer.framebuffer.clear(0,0,0,0)},n.prototype.applyFilter=function(e,t,r,i){var s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Jn.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Jn.TRIANGLE_STRIP))},n.prototype.calculateSpriteMatrix=function(e,t){var r=this.activeState,i=r.sourceFrame,s=r.destinationFrame,o=t._texture.orig,u=e.set(s.width,0,0,s.height,i.x,i.y),c=t.worldTransform.copyTo(er.TEMP_MATRIX);return c.invert(),u.prepend(c),u.scale(1/o.width,1/o.height),u.translate(t.anchor.x,t.anchor.y),u},n.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},n.prototype.getOptimalFilterTexture=function(e,t,r,i){return r===void 0&&(r=1),i===void 0&&(i=Jt.NONE),this.texturePool.getOptimalTexture(e,t,r,i)},n.prototype.getFilterTexture=function(e,t,r){if(typeof e=="number"){var i=e;e=t,t=i}e=e||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||Jt.NONE);return s.filterFrame=e.filterFrame,s},n.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},n.prototype.emptyPool=function(){this.texturePool.clear(!0)},n.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},n.prototype.transformAABB=function(e,t){var r=Bh[0],i=Bh[1],s=Bh[2],o=Bh[3];r.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);var u=Math.min(r.x,i.x,s.x,o.x),c=Math.min(r.y,i.y,s.y,o.y),v=Math.max(r.x,i.x,s.x,o.x),_=Math.max(r.y,i.y,s.y,o.y);t.x=u,t.y=c,t.width=v-u,t.height=_-c},n.prototype.roundFrame=function(e,t,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){var o=s.a,u=s.b,c=s.c,v=s.d;if((Math.abs(u)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(v)>1e-4))return}s=s?Cv.copyFrom(s):Cv.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}},n}(),hc=function(){function n(e){this.renderer=e}return n.prototype.flush=function(){},n.prototype.destroy=function(){this.renderer=null},n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.render=function(e){},n}(),YA=function(){function n(e){this.renderer=e,this.emptyRenderer=new hc(e),this.currentRenderer=this.emptyRenderer}return n.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},n.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.copyBoundTextures=function(e,t){for(var r=this.renderer.texture.boundTextures,i=t-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)},n.prototype.boundArray=function(e,t,r,i){for(var s=e.elements,o=e.ids,u=e.count,c=0,v=0;v<u;v++){var _=s[v],h=_._batchLocation;if(h>=0&&h<i&&t[h]===_){o[v]=h;continue}for(;c<i;){var d=t[c];if(d&&d._batchEnabled===r&&d._batchLocation===c){c++;continue}o[v]=c,_._batchLocation=c,t[c]=_;break}}},n.prototype.destroy=function(){this.renderer=null},n}(),xx=0,KA=function(){function n(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(n.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),n.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=xx++},n.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=xx++,this.renderer.runners.contextChange.emit(e)},n.prototype.initFromOptions=function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)},n.prototype.createContext=function(e,t){var r;if(He.PREFER_ENV>=ks.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},n.prototype.getExtensions=function(){var e=this.gl,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},n.prototype.handleContextLost=function(e){var t=this;e.preventDefault(),setTimeout(function(){t.gl.isContextLost()&&t.extensions.loseContext&&t.extensions.loseContext.restoreContext()},0)},n.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},n.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},n.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},n.prototype.validateContext=function(e){var t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},n}(),QA=function(){function n(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Jt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return n}(),ZA=new pt,JA=function(){function n(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new M_(10,10),this.msaaSamples=null}return n.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new pt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;He.PREFER_ENV===ks.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=function(i){return t.drawBuffersWEBGL(i)}:(this.hasMRT=!1,e.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},n.prototype.bind=function(e,t,r){r===void 0&&(r=0);var i=this.gl;if(e){var s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o=0;o<e.colorTextures.length;o++){var u=e.colorTextures[o];this.renderer.texture.unbind(u.parentTextureArray||u)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var c=t.width>>r,v=t.height>>r,_=c/t.width;this.setViewport(t.x*_,t.y*_,c,v)}else{var c=e.width>>r,v=e.height>>r;this.setViewport(0,0,c,v)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},n.prototype.setViewport=function(e,t,r,i){var s=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=r,s.height=i,this.gl.viewport(e,t,r,i))},Object.defineProperty(n.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),n.prototype.clear=function(e,t,r,i,s){s===void 0&&(s=Ef.COLOR|Ef.DEPTH);var o=this.gl;o.clearColor(e,t,r,i),o.clear(s)},n.prototype.initFramebuffer=function(e){var t=this.gl,r=new QA(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r},n.prototype.resizeFramebuffer=function(e){var t=this.gl,r=e.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,e.width,e.height)),r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var i=e.colorTextures,s=i.length;t.drawBuffers||(s=Math.min(s,1));for(var o=0;o<s;o++){var u=i[o],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},n.prototype.updateFramebuffer=function(e,t){var r=this.gl,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?(i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));for(var u=[],c=0;c<o;c++){var v=s[c],_=v.parentTextureArray||v;this.renderer.texture.bind(_,0),!(c===0&&i.msaaBuffer)&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+c,v.target,_._glTextures[this.CONTEXT_UID].texture,t),u.push(r.COLOR_ATTACHMENT0+c))}if(u.length>1&&r.drawBuffers(u),e.depthTexture){var h=this.writeDepthTexture;if(h){var d=e.depthTexture;this.renderer.texture.bind(d,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,d._glTextures[this.CONTEXT_UID].texture,t)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil)):i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)},n.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},n.prototype.detectSamples=function(e){var t=this.msaaSamples,r=Jt.NONE;if(e<=1||t===null)return r;for(var i=0;i<t.length;i++)if(t[i]<=e){r=t[i];break}return r===1&&(r=Jt.NONE),r},n.prototype.blit=function(e,t,r){var i=this,s=i.current,o=i.renderer,u=i.gl,c=i.CONTEXT_UID;if(o.context.webGLVersion===2&&s){var v=s.glFramebuffers[c];if(v){if(!e){if(!v.msaaBuffer)return;var _=s.colorTextures[0];if(!_)return;v.blitFramebuffer||(v.blitFramebuffer=new M_(s.width,s.height),v.blitFramebuffer.addColorTexture(0,_)),e=v.blitFramebuffer,e.colorTextures[0]!==_&&(e.colorTextures[0]=_,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}t||(t=ZA,t.width=s.width,t.height=s.height),r||(r=t);var h=t.width===r.width&&t.height===r.height;this.bind(e),u.bindFramebuffer(u.READ_FRAMEBUFFER,v.framebuffer),u.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,u.COLOR_BUFFER_BIT,h?u.NEAREST:u.LINEAR)}}},n.prototype.disposeFramebuffer=function(e,t){var r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(r){delete e.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},n.prototype.disposeAll=function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)},n.prototype.forceStencil=function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(!(!t||t.stencil)){e.stencil=!0;var r=e.width,i=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,s.DEPTH24_STENCIL8,r,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,i),t.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}}},n.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new pt},n.prototype.destroy=function(){this.renderer=null},n}(),Av={5126:4,5123:2,5121:1},eP=function(){function n(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return n.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){var r=this.renderer.context.extensions.vertexArrayObject;He.PREFER_ENV===ks.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=function(){return r.createVertexArrayOES()},e.bindVertexArray=function(s){return r.bindVertexArrayOES(s)},e.deleteVertexArray=function(s){return r.deleteVertexArrayOES(s)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(t.webGLVersion!==2){var i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=function(s,o){return i.vertexAttribDivisorANGLE(s,o)},e.drawElementsInstanced=function(s,o,u,c,v){return i.drawElementsInstancedANGLE(s,o,u,c,v)},e.drawArraysInstanced=function(s,o,u,c){return i.drawArraysInstancedANGLE(s,o,u,c)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex},n.prototype.bind=function(e,t){t=t||this.renderer.shader.shader;var r=this.gl,i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);var o=i[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()},n.prototype.reset=function(){this.unbind()},n.prototype.updateBuffers=function(){for(var e=this._activeGeometry,t=this.renderer.buffer,r=0;r<e.buffers.length;r++){var i=e.buffers[r];t.update(i)}},n.prototype.checkCompatibility=function(e,t){var r=e.attributes,i=t.attributeData;for(var s in i)if(!r[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},n.prototype.getSignature=function(e,t){var r=e.attributes,i=t.attributeData,s=["g",e.id];for(var o in r)i[o]&&s.push(o,i[o].location);return s.join("-")},n.prototype.initGeometryVao=function(e,t,r){r===void 0&&(r=!0);var i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,u=t.program;u.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,u);var c=this.getSignature(e,u),v=e.glVertexArrayObjects[this.CONTEXT_UID],_=v[c];if(_)return v[u.id]=_,_;var h=e.buffers,d=e.attributes,m={},x={};for(var w in h)m[w]=0,x[w]=0;for(var w in d)!d[w].size&&u.attributeData[w]?d[w].size=u.attributeData[w].size:d[w].size||console.warn("PIXI Geometry attribute '"+w+"' size cannot be determined (likely the bound shader does not have the attribute)"),m[d[w].buffer]+=d[w].size*Av[d[w].type];for(var w in d){var T=d[w],E=T.size;T.stride===void 0&&(m[T.buffer]===E*Av[T.type]?T.stride=0:T.stride=m[T.buffer]),T.start===void 0&&(T.start=x[T.buffer],x[T.buffer]+=E*Av[T.type])}_=i.createVertexArray(),i.bindVertexArray(_);for(var I=0;I<h.length;I++){var D=h[I];o.bind(D),r&&D._glBuffers[s].refCount++}return this.activateVao(e,u),this._activeVao=_,v[u.id]=_,v[c]=_,_},n.prototype.disposeGeometry=function(e,t){var r;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,o=e.buffers,u=(r=this.renderer)===null||r===void 0?void 0:r.buffer;if(e.disposeRunner.remove(this),!!i){if(u)for(var c=0;c<o.length;c++){var v=o[c]._glBuffers[this.CONTEXT_UID];v&&(v.refCount--,v.refCount===0&&!t&&u.dispose(o[c],t))}if(!t){for(var _ in i)if(_[0]==="g"){var h=i[_];this._activeVao===h&&this.unbind(),s.deleteVertexArray(h)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},n.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedGeometries),r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)},n.prototype.activateVao=function(e,t){var r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,u=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);var c=null;for(var v in u){var _=u[v],h=o[_.buffer],d=h._glBuffers[i];if(t.attributeData[v]){c!==d&&(s.bind(h),c=d);var m=t.attributeData[v].location;if(r.enableVertexAttribArray(m),r.vertexAttribPointer(m,_.size,_.type||r.FLOAT,_.normalized,_.stride,_.start),_.instance)if(this.hasInstance)r.vertexAttribDivisor(m,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},n.prototype.draw=function(e,t,r,i){var s=this.gl,o=this._activeGeometry;if(o.indexBuffer){var u=o.indexBuffer.data.BYTES_PER_ELEMENT,c=u===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;u===2||u===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,c,(r||0)*u,i||1):s.drawElements(e,t||o.indexBuffer.data.length,c,(r||0)*u):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,t||o.getSize(),i||1):s.drawArrays(e,r,t||o.getSize());return this},n.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},n.prototype.destroy=function(){this.renderer=null},n}(),tP=function(){function n(e){e===void 0&&(e=null),this.type=br.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=He.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(n.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=br.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},n.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},n}();function bx(n,e,t){var r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function wx(n,e){var t=n.getShaderSource(e).split(`
`).map(function(v,_){return _+": "+v}),r=n.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(function(v){return parseFloat(v.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(v){return v&&!s[v]?(s[v]=!0,!0):!1}),u=[""];o.forEach(function(v){t[v-1]="%c"+t[v-1]+"%c",u.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var c=t.join(`
`);u[0]=c,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,u),console.groupEnd()}function rP(n,e,t,r){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||wx(n,t),n.getShaderParameter(r,n.COMPILE_STATUS)||wx(n,r),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}function Pv(n){for(var e=new Array(n),t=0;t<e.length;t++)e[t]=!1;return e}function mb(n,e){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Pv(2*e);case"bvec3":return Pv(3*e);case"bvec4":return Pv(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var yb={},xu=yb;function nP(){if(xu===yb||xu&&xu.isContextLost()){var n=He.ADAPTER.createCanvas(),e=void 0;He.PREFER_ENV>=ks.WEBGL2&&(e=n.getContext("webgl2",{})),e||(e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),xu=e}return xu}var jh;function iP(){if(!jh){jh=Fn.MEDIUM;var n=nP();if(n&&n.getShaderPrecisionFormat){var e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);jh=e.precision?Fn.HIGH:Fn.MEDIUM}}return jh}function Tx(n,e,t){if(n.substring(0,9)!=="precision"){var r=e;return e===Fn.HIGH&&t!==Fn.HIGH&&(r=Fn.MEDIUM),"precision "+r+` float;
`+n}else if(t!==Fn.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}var sP={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function gb(n){return sP[n]}var Uh=null,Sx={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function xb(n,e){if(!Uh){var t=Object.keys(Sx);Uh={};for(var r=0;r<t.length;++r){var i=t[r];Uh[n[i]]=Sx[i]}}return Uh[e]}var Cl=[{test:function(n){return n.type==="float"&&n.size===1&&!n.isArray},code:function(n){return`
            if(uv["`+n+'"] !== ud["'+n+`"].value)
            {
                ud["`+n+'"].value = uv["'+n+`"]
                gl.uniform1f(ud["`+n+'"].location, uv["'+n+`"])
            }
            `}},{test:function(n,e){return(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(e==null||e.castToBaseTexture!==void 0)},code:function(n){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+n+`"], t);

            if(ud["`+n+`"].value !== t)
            {
                ud["`+n+`"].value = t;
                gl.uniform1i(ud["`+n+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(n,e){return n.type==="mat3"&&n.size===1&&!n.isArray&&e.a!==void 0},code:function(n){return`
            gl.uniformMatrix3fv(ud["`+n+'"].location, false, uv["'+n+`"].toArray(true));
            `},codeUbo:function(n){return`
                var `+n+"_matrix = uv."+n+`.toArray(true);

                data[offset] = `+n+`_matrix[0];
                data[offset+1] = `+n+`_matrix[1];
                data[offset+2] = `+n+`_matrix[2];
        
                data[offset + 4] = `+n+`_matrix[3];
                data[offset + 5] = `+n+`_matrix[4];
                data[offset + 6] = `+n+`_matrix[5];
        
                data[offset + 8] = `+n+`_matrix[6];
                data[offset + 9] = `+n+`_matrix[7];
                data[offset + 10] = `+n+`_matrix[8];
            `}},{test:function(n,e){return n.type==="vec2"&&n.size===1&&!n.isArray&&e.x!==void 0},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+n+`"].location, v.x, v.y);
                }`},codeUbo:function(n){return`
                v = uv.`+n+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(n){return n.type==="vec2"&&n.size===1&&!n.isArray},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+n+`"].location, v[0], v[1]);
                }
            `}},{test:function(n,e){return n.type==="vec4"&&n.size===1&&!n.isArray&&e.width!==void 0},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+n+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(n){return`
                    v = uv.`+n+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(n){return n.type==="vec4"&&n.size===1&&!n.isArray},code:function(n){return`
                cv = ud["`+n+`"].value;
                v = uv["`+n+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+n+`"].location, v[0], v[1], v[2], v[3])
                }`}}],aP={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},oP={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function lP(n,e){var t,r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var i in n.uniforms){var s=e[i];if(!s){!((t=n.uniforms[i])===null||t===void 0)&&t.group&&(n.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var o=n.uniforms[i],u=!1,c=0;c<Cl.length;c++)if(Cl[c].test(s,o)){r.push(Cl[c].code(i,o)),u=!0;break}if(!u){var v=s.size===1&&!s.isArray?aP:oP,_=v[s.type].replace("location",'ud["'+i+'"].location');r.push(`
            cu = ud["`+i+`"];
            cv = cu.value;
            v = uv["`+i+`"];
            `+_+";")}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}var uP=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function cP(n){for(var e="",t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+="if(test == "+t+".0){}");return e}function hP(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=e.createShader(e.FRAGMENT_SHADER);;){var r=uP.replace(/%forloop%/gi,cP(n));if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}return n}var bu;function fP(){if(typeof bu=="boolean")return bu;try{var n=new Function("param1","param2","param3","return param1[param2] === param3;");bu=n({a:"b"},"a","b")===!0}catch{bu=!1}return bu}var dP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,pP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,vP=0,Gh={},So=function(){function n(e,t,r){r===void 0&&(r="pixi-shader"),this.id=vP++,this.vertexSrc=e||n.defaultVertexSrc,this.fragmentSrc=t||n.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Gh[r]?(Gh[r]++,r+="-"+Gh[r]):Gh[r]=1,this.vertexSrc="#define SHADER_NAME "+r+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+`
`+this.fragmentSrc,this.vertexSrc=Tx(this.vertexSrc,He.PRECISION_VERTEX,Fn.HIGH),this.fragmentSrc=Tx(this.fragmentSrc,He.PRECISION_FRAGMENT,iP())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(n,"defaultVertexSrc",{get:function(){return pP},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentSrc",{get:function(){return dP},enumerable:!1,configurable:!0}),n.from=function(e,t,r){var i=e+t,s=px[i];return s||(px[i]=s=new n(e,t,r)),s},n}(),$i=function(){function n(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof vo?this.uniformGroup=t:this.uniformGroup=new vo(t):this.uniformGroup=new vo({}),this.disposeRunner=new qr("disposeShader")}return n.prototype.checkUniformExists=function(e,t){if(t.uniforms[e])return!0;for(var r in t.uniforms){var i=t.uniforms[r];if(i.group&&this.checkUniformExists(e,i))return!0}return!1},n.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(n.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),n.from=function(e,t,r){var i=So.from(e,t);return new n(i,r)},n}(),Iv=0,Ov=1,Rv=2,Mv=3,kv=4,Dv=5,Eo=function(){function n(){this.data=0,this.blendMode=lt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(n.prototype,"blend",{get:function(){return!!(this.data&1<<Iv)},set:function(e){!!(this.data&1<<Iv)!==e&&(this.data^=1<<Iv)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"offsets",{get:function(){return!!(this.data&1<<Ov)},set:function(e){!!(this.data&1<<Ov)!==e&&(this.data^=1<<Ov)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"culling",{get:function(){return!!(this.data&1<<Rv)},set:function(e){!!(this.data&1<<Rv)!==e&&(this.data^=1<<Rv)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthTest",{get:function(){return!!(this.data&1<<Mv)},set:function(e){!!(this.data&1<<Mv)!==e&&(this.data^=1<<Mv)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthMask",{get:function(){return!!(this.data&1<<Dv)},set:function(e){!!(this.data&1<<Dv)!==e&&(this.data^=1<<Dv)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<kv)},set:function(e){!!(this.data&1<<kv)!==e&&(this.data^=1<<kv)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==lt.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},n.for2d=function(){var e=new n;return e.depthTest=!1,e.blend=!0,e},n}(),_P=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,mP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Fs=function(n){zt(e,n);function e(t,r,i){var s=this,o=So.from(t||e.defaultVertexSrc,r||e.defaultFragmentSrc);return s=n.call(this,o,i)||this,s.padding=0,s.resolution=He.FILTER_RESOLUTION,s.multisample=He.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Eo,s}return e.prototype.apply=function(t,r,i,s,o){t.applyFilter(this,r,i,s)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return mP},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return _P},enumerable:!1,configurable:!0}),e}($i),yP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,gP=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Ex=new er,fc=function(){function n(e,t){this._texture=e,this.mapCoord=new er,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}return Object.defineProperty(n.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),n.prototype.multiplyUvs=function(e,t){t===void 0&&(t=e);for(var r=this.mapCoord,i=0;i<e.length;i+=2){var s=e[i],o=e[i+1];t[i]=s*r.a+o*r.c+r.tx,t[i+1]=s*r.b+o*r.d+r.ty}return t},n.prototype.update=function(e){var t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=t.orig,s=t.trim;s&&(Ex.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Ex));var o=t.baseTexture,u=this.uClampFrame,c=this.clampMargin/o.resolution,v=this.clampOffset;return u[0]=(t._frame.x+c+v)/o.width,u[1]=(t._frame.y+c+v)/o.height,u[2]=(t._frame.x+t._frame.width-c+v)/o.width,u[3]=(t._frame.y+t._frame.height-c+v)/o.height,this.uClampOffset[0]=v/o.realWidth,this.uClampOffset[1]=v/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0},n}(),xP=function(n){zt(e,n);function e(t,r,i){var s=this,o=null;return typeof t!="string"&&r===void 0&&i===void 0&&(o=t,t=void 0,r=void 0,i=void 0),s=n.call(this,t||yP,r||gP,i)||this,s.maskSprite=o,s.maskMatrix=new er,s}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,r,i,s){var o=this._maskSprite,u=o._texture;u.valid&&(u.uvMatrix||(u.uvMatrix=new fc(u,0)),u.uvMatrix.update(),this.uniforms.npmAlpha=u.baseTexture.alphaMode?0:1,this.uniforms.mask=u,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(u.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=u.uvMatrix.uClampFrame,t.applyFilter(this,r,i,s))},e}(Fs),bb=function(){function n(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return n.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},n.prototype.push=function(e,t){var r=t;if(!r.isMaskData){var i=this.maskDataPool.pop()||new tP;i.pooled=!0,i.maskObject=t,r=i}var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(s),r._colorMask=s?s._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==br.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case br.SCISSOR:this.renderer.scissor.push(r);break;case br.STENCIL:this.renderer.stencil.push(r);break;case br.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case br.COLOR:this.pushColorMask(r);break}r.type===br.SPRITE&&this.maskStack.push(r)},n.prototype.pop=function(e){var t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case br.SCISSOR:this.renderer.scissor.pop(t);break;case br.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case br.SPRITE:this.popSpriteMask(t);break;case br.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){var r=this.maskStack[this.maskStack.length-1];r.type===br.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},n.prototype.detect=function(e){var t=e.maskObject;t?t.isSprite?e.type=br.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=br.SCISSOR:e.type=br.STENCIL:e.type=br.COLOR},n.prototype.pushSpriteMask=function(e){var t,r,i=e.maskObject,s=e._target,o=e._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex],o||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new xP]));var u=this.renderer,c=u.renderTexture,v,_;if(c.current){var h=c.current;v=e.resolution||h.resolution,_=(t=e.multisample)!==null&&t!==void 0?t:h.multisample}else v=e.resolution||u.resolution,_=(r=e.multisample)!==null&&r!==void 0?r:u.multisample;o[0].resolution=v,o[0].multisample=_,o[0].maskSprite=i;var d=s.filterArea;s.filterArea=i.getBounds(!0),u.filter.push(s,o),s.filterArea=d,e._filters||this.alphaMaskIndex++},n.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},n.prototype.pushColorMask=function(e){var t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)},n.prototype.popColorMask=function(e){var t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)},n.prototype.destroy=function(){this.renderer=null},n}(),wb=function(){function n(e){this.renderer=e,this.maskStack=[],this.glConst=0}return n.prototype.getStackLength=function(){return this.maskStack.length},n.prototype.setMaskStack=function(e){var t=this.renderer.gl,r=this.getStackLength();this.maskStack=e;var i=this.getStackLength();i!==r&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},n.prototype._useCurrent=function(){},n.prototype.destroy=function(){this.renderer=null,this.maskStack=null},n}(),Cx=new er,Ax=[],bP=function(n){zt(e,n);function e(t){var r=n.call(this,t)||this;return r.glConst=He.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var r;if(!t._scissorRectLocal){var i=t._scissorRect,s=t.maskObject,o=this.renderer,u=o.renderTexture,c=s.getBounds(!0,(r=Ax.pop())!==null&&r!==void 0?r:new pt);this.roundFrameToPixels(c,u.current?u.current.resolution:o.resolution,u.sourceFrame,u.destinationFrame,o.projection.transform),i&&c.fit(i),t._scissorRectLocal=c}},e.isMatrixRotated=function(t){if(!t)return!1;var r=t.a,i=t.b,s=t.c,o=t.d;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(o)>1e-4)},e.prototype.testScissor=function(t){var r=t.maskObject;if(!r.isFastRect||!r.isFastRect()||e.isMatrixRotated(r.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var i=t._scissorRectLocal;return i.width>0&&i.height>0},e.prototype.roundFrameToPixels=function(t,r,i,s,o){e.isMatrixRotated(o)||(o=o?Cx.copyFrom(o):Cx.identity(),o.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(o,t),t.fit(s),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var r=this.renderer.gl;t._scissorRect||r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var r=this.renderer.gl;t&&Ax.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,r;this.renderer.renderTexture.current?r=t.y:r=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,r,t.width,t.height)},e}(wb),wP=function(n){zt(e,n);function e(t){var r=n.call(this,t)||this;return r.glConst=He.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var r=t.maskObject,i=this.renderer.gl,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;var o=t._colorMask;o!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,o!==0&&(t._colorMask=o,i.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()},e.prototype.pop=function(t){var r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{var i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(i._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(wb),TP=function(){function n(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new er,this.transform=null}return n.prototype.update=function(e,t,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},n.prototype.calculateProjection=function(e,t,r,i){var s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d},n.prototype.setTransform=function(e){},n.prototype.destroy=function(){this.renderer=null},n}(),Ja=new pt,wu=new pt,SP=function(){function n(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new pt,this.destinationFrame=new pt,this.viewportFrame=new pt}return n.prototype.bind=function(e,t,r){e===void 0&&(e=null);var i=this.renderer;this.current=e;var s,o,u;e?(s=e.baseTexture,u=s.resolution,t||(Ja.width=e.frame.width,Ja.height=e.frame.height,t=Ja),r||(wu.x=e.frame.x,wu.y=e.frame.y,wu.width=t.width,wu.height=t.height,r=wu),o=s.framebuffer):(u=i.resolution,t||(Ja.width=i.screen.width,Ja.height=i.screen.height,t=Ja),r||(r=Ja,r.width=t.width,r.height=t.height));var c=this.viewportFrame;c.x=r.x*u,c.y=r.y*u,c.width=r.width*u,c.height=r.height*u,e||(c.y=i.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(o,c),this.renderer.projection.update(r,t,u,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)},n.prototype.clear=function(e,t){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var r=this.destinationFrame,i=this.current?this.current.baseTexture:this.renderer.screen,s=r.width!==i.width||r.height!==i.height;if(s){var o=this.viewportFrame,u=o.x,c=o.y,v=o.width,_=o.height;u=Math.round(u),c=Math.round(c),v=Math.round(v),_=Math.round(_),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(u,c,v,_)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),s&&this.renderer.scissor.pop()},n.prototype.resize=function(){this.bind(null)},n.prototype.reset=function(){this.bind(null)},n.prototype.destroy=function(){this.renderer=null},n}();function EP(n,e,t,r,i){t.buffer.update(i)}var CP={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Tb={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function AP(n){for(var e=n.map(function(c){return{data:c,offset:0,dataLen:0,dirty:0}}),t=0,r=0,i=0,s=0;s<e.length;s++){var o=e[s];if(t=Tb[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,r%t!==0&&r<16){var u=r%t%16;r+=u,i+=u}r+t>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=t,r=t):(o.offset=i,r+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function PP(n,e){var t=[];for(var r in n)e[r]&&t.push(e[r]);return t.sort(function(i,s){return i.index-s.index}),t}function IP(n,e){if(!n.autoManage)return{size:0,syncFunc:EP};for(var t=PP(n.uniforms,e),r=AP(t),i=r.uboElements,s=r.size,o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],u=0;u<i.length;u++){for(var c=i[u],v=n.uniforms[c.data.name],_=c.data.name,h=!1,d=0;d<Cl.length;d++){var m=Cl[d];if(m.codeUbo&&m.test(c.data,v)){o.push("offset = "+c.offset/4+";",Cl[d].codeUbo(c.data.name,v)),h=!0;break}}if(!h)if(c.data.size>1){var x=gb(c.data.type),w=Math.max(Tb[c.data.type]/16,1),T=x/w,E=(4-T%4)%4;o.push(`
                cv = ud.`+_+`.value;
                v = uv.`+_+`;
                offset = `+c.offset/4+`;

                t = 0;

                for(var i=0; i < `+c.data.size*w+`; i++)
                {
                    for(var j = 0; j < `+T+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+E+`;
                }

                `)}else{var I=CP[c.data.type];o.push(`
                cv = ud.`+_+`.value;
                v = uv.`+_+`;
                offset = `+c.offset/4+`;
                `+I+`;
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var OP=function(){function n(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return n.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},n}();function RP(n,e){for(var t={},r=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var s=e.getActiveAttrib(n,i);if(s.name.indexOf("gl_")!==0){var o=xb(e,s.type),u={type:o,name:s.name,size:gb(o),location:e.getAttribLocation(n,s.name)};t[s.name]=u}}return t}function MP(n,e){for(var t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var s=e.getActiveUniform(n,i),o=s.name.replace(/\[.*?\]$/,""),u=!!s.name.match(/\[.*?\]$/),c=xb(e,s.type);t[o]={name:o,index:i,type:c,size:s.size,isArray:u,value:mb(c,s.size)}}return t}function kP(n,e){var t=bx(n,n.VERTEX_SHADER,e.vertexSrc),r=bx(n,n.FRAGMENT_SHADER,e.fragmentSrc),i=n.createProgram();if(n.attachShader(i,t),n.attachShader(i,r),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||rP(n,i,t,r),e.attributeData=RP(i,n),e.uniformData=MP(i,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var s=Object.keys(e.attributeData);s.sort(function(_,h){return _>h?1:-1});for(var o=0;o<s.length;o++)e.attributeData[s[o]].location=o,n.bindAttribLocation(i,o,s[o]);n.linkProgram(i)}n.deleteShader(t),n.deleteShader(r);var u={};for(var o in e.uniformData){var c=e.uniformData[o];u[o]={location:n.getUniformLocation(i,o),value:mb(c.type,c.size)}}var v=new OP(i,u);return v}var DP=0,Hh={textureCount:0,uboCount:0},NP=function(){function n(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=DP++}return n.prototype.systemCheck=function(){if(!fP())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},n.prototype.contextChange=function(e){this.gl=e,this.reset()},n.prototype.bind=function(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),t||(Hh.textureCount=0,Hh.uboCount=0,this.syncUniformGroup(e.uniformGroup,Hh)),i},n.prototype.setUniforms=function(e){var t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)},n.prototype.syncUniformGroup=function(e,t){var r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))},n.prototype.syncUniforms=function(e,t,r){var i=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);i(t.uniformData,e.uniforms,this.renderer,r)},n.prototype.createSyncGroups=function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=lP(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]},n.prototype.syncUniformBufferGroup=function(e,t){var r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;var i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,Hh,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])},n.prototype.createSyncBufferGroup=function(e,t,r){var i=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var s=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(e,this.shader.program.uniformData,"ubo"),u=this._uboCache[o];if(u||(u=this._uboCache[o]=IP(e,this.shader.program.uniformData)),e.autoManage){var c=new Float32Array(u.size/4);e.buffer.update(c)}return t.uniformGroups[e.id]=u.syncFunc,t.uniformGroups[e.id]},n.prototype.getSignature=function(e,t,r){var i=e.uniforms,s=[r+"-"];for(var o in i)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")},n.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},n.prototype.generateProgram=function(e){var t=this.gl,r=e.program,i=kP(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i},n.prototype.reset=function(){this.program=null,this.shader=null},n.prototype.disposeShader=function(e){this.shader===e&&(this.shader=null)},n.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},n}();function FP(n,e){return e===void 0&&(e=[]),e[lt.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.ADD]=[n.ONE,n.ONE],e[lt.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.NONE]=[0,0],e[lt.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[lt.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[lt.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[lt.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[lt.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[lt.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[lt.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[lt.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[lt.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[lt.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[lt.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}var LP=0,BP=1,jP=2,UP=3,GP=4,HP=5,zP=function(){function n(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=lt.NONE,this._blendEq=!1,this.map=[],this.map[LP]=this.setBlend,this.map[BP]=this.setOffset,this.map[jP]=this.setCullFace,this.map[UP]=this.setDepthTest,this.map[GP]=this.setFrontFace,this.map[HP]=this.setDepthMask,this.checks=[],this.defaultState=new Eo,this.defaultState.blend=!0}return n.prototype.contextChange=function(e){this.gl=e,this.blendModes=FP(e),this.set(this.defaultState),this.reset()},n.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,r=0;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,e)},n.prototype.forceState=function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(var t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data},n.prototype.setBlend=function(e){this.updateCheck(n.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},n.prototype.setOffset=function(e){this.updateCheck(n.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},n.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},n.prototype.setDepthMask=function(e){this.gl.depthMask(e)},n.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},n.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},n.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},n.prototype.setPolygonOffset=function(e,t){this.gl.polygonOffset(e,t)},n.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},n.prototype.updateCheck=function(e,t){var r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)},n.checkBlendMode=function(e,t){e.setBlendMode(t.blendMode)},n.checkPolygonOffset=function(e,t){e.setPolygonOffset(1,t.polygonOffset)},n.prototype.destroy=function(){this.gl=null},n}(),XP=function(){function n(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=He.GC_MAX_IDLE,this.checkCountMax=He.GC_MAX_CHECK_COUNT,this.mode=He.GC_MODE}return n.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Af.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},n.prototype.run=function(){for(var e=this.renderer.texture,t=e.managedTextures,r=!1,i=0;i<t.length;i++){var s=t[i];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,r=!0)}if(r){for(var o=0,i=0;i<t.length;i++)t[i]!==null&&(t[o++]=t[i]);t.length=o}},n.prototype.unload=function(e){var t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},n.prototype.destroy=function(){this.renderer=null},n}();function VP(n){var e,t,r,i,s,o,u,c,v,_,h,d,m,x,w,T,E,I,D,z,O,U,y;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?y=(e={},e[Ke.UNSIGNED_BYTE]=(t={},t[Ne.RGBA]=n.RGBA8,t[Ne.RGB]=n.RGB8,t[Ne.RG]=n.RG8,t[Ne.RED]=n.R8,t[Ne.RGBA_INTEGER]=n.RGBA8UI,t[Ne.RGB_INTEGER]=n.RGB8UI,t[Ne.RG_INTEGER]=n.RG8UI,t[Ne.RED_INTEGER]=n.R8UI,t[Ne.ALPHA]=n.ALPHA,t[Ne.LUMINANCE]=n.LUMINANCE,t[Ne.LUMINANCE_ALPHA]=n.LUMINANCE_ALPHA,t),e[Ke.BYTE]=(r={},r[Ne.RGBA]=n.RGBA8_SNORM,r[Ne.RGB]=n.RGB8_SNORM,r[Ne.RG]=n.RG8_SNORM,r[Ne.RED]=n.R8_SNORM,r[Ne.RGBA_INTEGER]=n.RGBA8I,r[Ne.RGB_INTEGER]=n.RGB8I,r[Ne.RG_INTEGER]=n.RG8I,r[Ne.RED_INTEGER]=n.R8I,r),e[Ke.UNSIGNED_SHORT]=(i={},i[Ne.RGBA_INTEGER]=n.RGBA16UI,i[Ne.RGB_INTEGER]=n.RGB16UI,i[Ne.RG_INTEGER]=n.RG16UI,i[Ne.RED_INTEGER]=n.R16UI,i[Ne.DEPTH_COMPONENT]=n.DEPTH_COMPONENT16,i),e[Ke.SHORT]=(s={},s[Ne.RGBA_INTEGER]=n.RGBA16I,s[Ne.RGB_INTEGER]=n.RGB16I,s[Ne.RG_INTEGER]=n.RG16I,s[Ne.RED_INTEGER]=n.R16I,s),e[Ke.UNSIGNED_INT]=(o={},o[Ne.RGBA_INTEGER]=n.RGBA32UI,o[Ne.RGB_INTEGER]=n.RGB32UI,o[Ne.RG_INTEGER]=n.RG32UI,o[Ne.RED_INTEGER]=n.R32UI,o[Ne.DEPTH_COMPONENT]=n.DEPTH_COMPONENT24,o),e[Ke.INT]=(u={},u[Ne.RGBA_INTEGER]=n.RGBA32I,u[Ne.RGB_INTEGER]=n.RGB32I,u[Ne.RG_INTEGER]=n.RG32I,u[Ne.RED_INTEGER]=n.R32I,u),e[Ke.FLOAT]=(c={},c[Ne.RGBA]=n.RGBA32F,c[Ne.RGB]=n.RGB32F,c[Ne.RG]=n.RG32F,c[Ne.RED]=n.R32F,c[Ne.DEPTH_COMPONENT]=n.DEPTH_COMPONENT32F,c),e[Ke.HALF_FLOAT]=(v={},v[Ne.RGBA]=n.RGBA16F,v[Ne.RGB]=n.RGB16F,v[Ne.RG]=n.RG16F,v[Ne.RED]=n.R16F,v),e[Ke.UNSIGNED_SHORT_5_6_5]=(_={},_[Ne.RGB]=n.RGB565,_),e[Ke.UNSIGNED_SHORT_4_4_4_4]=(h={},h[Ne.RGBA]=n.RGBA4,h),e[Ke.UNSIGNED_SHORT_5_5_5_1]=(d={},d[Ne.RGBA]=n.RGB5_A1,d),e[Ke.UNSIGNED_INT_2_10_10_10_REV]=(m={},m[Ne.RGBA]=n.RGB10_A2,m[Ne.RGBA_INTEGER]=n.RGB10_A2UI,m),e[Ke.UNSIGNED_INT_10F_11F_11F_REV]=(x={},x[Ne.RGB]=n.R11F_G11F_B10F,x),e[Ke.UNSIGNED_INT_5_9_9_9_REV]=(w={},w[Ne.RGB]=n.RGB9_E5,w),e[Ke.UNSIGNED_INT_24_8]=(T={},T[Ne.DEPTH_STENCIL]=n.DEPTH24_STENCIL8,T),e[Ke.FLOAT_32_UNSIGNED_INT_24_8_REV]=(E={},E[Ne.DEPTH_STENCIL]=n.DEPTH32F_STENCIL8,E),e):y=(I={},I[Ke.UNSIGNED_BYTE]=(D={},D[Ne.RGBA]=n.RGBA,D[Ne.RGB]=n.RGB,D[Ne.ALPHA]=n.ALPHA,D[Ne.LUMINANCE]=n.LUMINANCE,D[Ne.LUMINANCE_ALPHA]=n.LUMINANCE_ALPHA,D),I[Ke.UNSIGNED_SHORT_5_6_5]=(z={},z[Ne.RGB]=n.RGB,z),I[Ke.UNSIGNED_SHORT_4_4_4_4]=(O={},O[Ne.RGBA]=n.RGBA,O),I[Ke.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Ne.RGBA]=n.RGBA,U),I),y}var Nv=function(){function n(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ke.UNSIGNED_BYTE,this.internalFormat=Ne.RGBA,this.samplerType=0}return n}(),qP=function(){function n(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ct,this.hasIntegerTextures=!1}return n.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=VP(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new Nv(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Nv(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var r=0;r<this.boundTextures.length;r++)this.bind(null,r)},n.prototype.bind=function(e,t){t===void 0&&(t=0);var r=this.gl;if(e=e?.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null},n.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},n.prototype.unbind=function(e){var t=this,r=t.gl,i=t.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<i.length;s++)i[s]===e&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(e.target,this.emptyTextures[e.target].texture),i[s]=null)},n.prototype.ensureSamplerType=function(e){var t=this,r=t.boundTextures,i=t.hasIntegerTextures,s=t.CONTEXT_UID;if(i)for(var o=e-1;o>=0;--o){var u=r[o];if(u){var c=u._glTextures[s];c.samplerType!==Cf.FLOAT&&this.renderer.texture.unbind(u)}}},n.prototype.initTexture=function(e){var t=new Nv(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t},n.prototype.initTextureType=function(e,t){var r,i;t.internalFormat=(i=(r=this.internalFormats[e.type])===null||r===void 0?void 0:r[e.format])!==null&&i!==void 0?i:e.format,this.webGLVersion===2&&e.type===Ke.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type},n.prototype.updateTexture=function(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var r=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(r,e,t))t.samplerType!==Cf.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,s=e.realHeight,o=r.gl;(t.width!==i||t.height!==s||t.dirtyId<0)&&(t.width=i,t.height=s,o.texImage2D(e.target,0,t.internalFormat,i,s,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}},n.prototype.destroyTexture=function(e,t){var r=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var i=this.managedTextures.indexOf(e);i!==-1&&El(this.managedTextures,i,1)}},n.prototype.updateTextureStyle=function(e){var t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===Ti.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Bn.CLAMP:t.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)},n.prototype.setStyle=function(e,t){var r=this.gl;if(t.mipmap&&e.mipmap!==Ti.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Xi.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Xi.LINEAR){var s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Xi.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===Xi.LINEAR?r.LINEAR:r.NEAREST)},n.prototype.destroy=function(){this.renderer=null},n}(),Fv=new er,WP=function(n){zt(e,n);function e(t,r){t===void 0&&(t=Ju.UNKNOWN);var i=n.call(this)||this;return r=Object.assign({},He.RENDER_OPTIONS,r),i.options=r,i.type=t,i.screen=new pt(0,0,r.width,r.height),i.view=r.view||He.ADAPTER.createCanvas(),i.resolution=r.resolution||He.RESOLUTION,i.useContextAlpha=r.useContextAlpha,i.autoDensity=!!r.autoDensity,i.preserveDrawingBuffer=r.preserveDrawingBuffer,i.clearBeforeRender=r.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=r.backgroundColor||i._backgroundColor,i.backgroundAlpha=r.backgroundAlpha,r.transparent!==void 0&&(bi("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=r.transparent,i.backgroundAlpha=r.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}return e.prototype.initPlugins=function(t){for(var r in t)this.plugins[r]=new t[r](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,r){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(r*this.resolution);var i=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=s+"px"),this.emit("resize",i,s)},e.prototype.generateTexture=function(t,r,i,s){r===void 0&&(r={}),typeof r=="number"&&(bi("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),r={scaleMode:r,resolution:i,region:s});var o=r.region,u=OA(r,["region"]);s=o||t.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var c=go.create(R_({width:s.width,height:s.height},u));return Fv.tx=-s.x,Fv.ty=-s.y,this.render(t,{renderTexture:c,clear:!1,transform:Fv,skipUpdateTransform:!!t.parent}),c},e.prototype.destroy=function(t){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=Ju.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=ob(t),Il(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(lc),$P=function(){function n(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return n}(),YP=function(){function n(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return n.prototype.destroy=function(){this.renderer=null},n.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},n.prototype.bind=function(e){var t=this,r=t.gl,i=t.CONTEXT_UID,s=e._glBuffers[i]||this.createGLBuffer(e);r.bindBuffer(e.type,s.buffer)},n.prototype.bindBufferBase=function(e,t){var r=this,i=r.gl,s=r.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var o=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,o.buffer)}},n.prototype.bindBufferRange=function(e,t,r){var i=this,s=i.gl,o=i.CONTEXT_UID;r=r||0;var u=e._glBuffers[o]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,t||0,u.buffer,r*256,256)},n.prototype.update=function(e){var t=this,r=t.gl,i=t.CONTEXT_UID,s=e._glBuffers[i];if(e._updateID!==s.updateID)if(s.updateID=e._updateID,r.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{var o=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,o)}},n.prototype.dispose=function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(t||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}},n.prototype.disposeAll=function(e){for(var t=Object.keys(this.managedBuffers),r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)},n.prototype.createGLBuffer=function(e){var t=this,r=t.CONTEXT_UID,i=t.gl;return e._glBuffers[r]=new $P(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]},n}(),dc=function(n){zt(e,n);function e(t){var r=n.call(this,Ju.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new qr("destroy"),contextChange:new qr("contextChange"),reset:new qr("reset"),update:new qr("update"),postrender:new qr("postrender"),prerender:new qr("prerender"),resize:new qr("resize")},r.runners.contextChange.add(r),r.globalUniforms=new vo({projectionMatrix:new er},!0),r.addSystem(bb,"mask").addSystem(KA,"context").addSystem(zP,"state").addSystem(NP,"shader").addSystem(qP,"texture").addSystem(YP,"buffer").addSystem(eP,"geometry").addSystem(JA,"framebuffer").addSystem(bP,"scissor").addSystem(wP,"stencil").addSystem(TP,"projection").addSystem(XP,"textureGC").addSystem($A,"filter").addSystem(SP,"renderTexture").addSystem(YA,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&r.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,AE(r.context.webGLVersion===2?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return e.create=function(t){if(PE())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t=this.gl,r;if(this.context.webGLVersion===1){var i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{var i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}r>=Jt.HIGH?this.multisample=Jt.HIGH:r>=Jt.MEDIUM?this.multisample=Jt.MEDIUM:r>=Jt.LOW?this.multisample=Jt.LOW:this.multisample=Jt.NONE},e.prototype.addSystem=function(t,r){var i=new t(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');this[r]=i;for(var s in this.runners)this.runners[s].add(i);return this},e.prototype.render=function(t,r){var i,s,o,u;if(r&&(r instanceof go?(bi("6.0.0","Renderer#render arguments changed, use options instead."),i=r,s=arguments[2],o=arguments[3],u=arguments[4]):(i=r.renderTexture,s=r.clear,o=r.transform,u=r.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=o,!this.context.isLost){if(i||(this._lastObjectRendered=t),!u){var c=t.enableTempParent();t.updateTransform(),t.disableTempParent(c)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(t,r,i,s){r===void 0&&(r={});var o=n.prototype.generateTexture.call(this,t,r,i,s);return this.framebuffer.blit(),o},e.prototype.resize=function(t,r){n.prototype.resize.call(this,t,r),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(t){this.runners.destroy.emit();for(var r in this.runners)this.runners[r].destroy();n.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return bi("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,r){bi("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),Ns.add({name:t,type:jt.RendererPlugin,ref:r})},e.__plugins={},e}(WP);Ns.handleByMap(jt.RendererPlugin,dc.__plugins);function KP(n){return dc.create(n)}var QP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ZP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,JP=QP,Sb=ZP,k_=function(){function n(){this.texArray=null,this.blend=0,this.type=Jn.TRIANGLES,this.start=0,this.size=0,this.data=null}return n}(),D_=function(){function n(){this.elements=[],this.ids=[],this.count=0}return n.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},n}(),N_=function(){function n(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(n.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),n.prototype.view=function(e){return this[e+"View"]},n.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},n.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},n}(),Hu=function(n){zt(e,n);function e(t){var r=n.call(this,t)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Eo.for2d(),r.size=He.SPRITE_BATCH_SIZE*4,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),t.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return e.prototype.contextChange=function(){var t=this.renderer.gl;He.PREFER_ENV===ks.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),He.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=hP(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,r=e._textureArrayPool,i=this.size/4,s=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new k_);for(;r.length<s;)r.push(new D_);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this,r=t._bufferedTextures,i=t.MAX_TEXTURES,s=e._textureArrayPool,o=this.renderer.batch,u=this._tempBoundTextures,c=this.renderer.textureGC.count,v=++Ct._globalBatch,_=0,h=s[0],d=0;o.copyBoundTextures(u,i);for(var m=0;m<this._bufferSize;++m){var x=r[m];r[m]=null,x._batchEnabled!==v&&(h.count>=i&&(o.boundArray(h,u,v,i),this.buildDrawCalls(h,d,m),d=m,h=s[++_],++v),x._batchEnabled=v,x.touched=c,h.elements[h.count++]=x)}h.count>0&&(o.boundArray(h,u,v,i),this.buildDrawCalls(h,d,this._bufferSize),++_,++v);for(var m=0;m<u.length;m++)u[m]=null;Ct._globalBatch=v},e.prototype.buildDrawCalls=function(t,r,i){var s=this,o=s._bufferedElements,u=s._attributeBuffer,c=s._indexBuffer,v=s.vertexSize,_=e._drawCallPool,h=this._dcIndex,d=this._aIndex,m=this._iIndex,x=_[h];x.start=this._iIndex,x.texArray=t;for(var w=r;w<i;++w){var T=o[w],E=T._texture.baseTexture,I=Tm[E.alphaMode?1:0][T.blendMode];o[w]=null,r<w&&x.blend!==I&&(x.size=m-x.start,r=w,x=_[++h],x.texArray=t,x.start=m),this.packInterleavedGeometry(T,u,c,d,m),d+=T.vertexData.length/2*v,m+=T.indices.length,x.blend=I}r<i&&(x.size=m-x.start,++h),this._dcIndex=h,this._aIndex=d,this._iIndex=m},e.prototype.bindAndClearTexArray=function(t){for(var r=this.renderer.texture,i=0;i<t.count;i++)r.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,r=t._packedGeometries,i=t._attributeBuffer,s=t._indexBuffer;He.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(i.rawBinaryData),r[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,i=r.gl,s=r.state,o=e._drawCallPool,u=null,c=0;c<t;c++){var v=o[c],_=v.texArray,h=v.type,d=v.size,m=v.start,x=v.blend;u!==_&&(u=_,this.bindAndClearTexArray(_)),this.state.blendMode=x,s.set(this.state),i.drawElements(h,d,i.UNSIGNED_SHORT,m*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),He.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),n.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var r=Pf(Math.ceil(t/8)),i=fx(r),s=r*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._aBuffers[s];return o||(this._aBuffers[s]=o=new N_(s*this.vertexSize*4)),o},e.prototype.getIndexBuffer=function(t){var r=Pf(Math.ceil(t/12)),i=fx(r),s=r*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var o=this._iBuffers[i];return o||(this._iBuffers[i]=o=new Uint16Array(s)),o},e.prototype.packInterleavedGeometry=function(t,r,i,s,o){for(var u=r.uint32View,c=r.float32View,v=s/this.vertexSize,_=t.uvs,h=t.indices,d=t.vertexData,m=t._texture.baseTexture._batchLocation,x=Math.min(t.worldAlpha,1),w=x<1&&t._texture.baseTexture.alphaMode?uc(t._tintRGB,x):t._tintRGB+(x*255<<24),T=0;T<d.length;T+=2)c[s++]=d[T],c[s++]=d[T+1],c[s++]=_[T],c[s++]=_[T+1],u[s++]=w,c[s++]=m;for(var T=0;T<h.length;T++)i[o++]=v+h[T]},e._drawCallPool=[],e._textureArrayPool=[],e}(hc),Pm=function(){function n(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return n.prototype.generateShader=function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=vo.from({uSamplers:t},!0);var i=this.fragTemplate;i=i.replace(/%count%/gi,""+e),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new So(this.vertexSrc,i)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new er,default:this.defaultGroupCache[e]};return new $i(this.programCache[e],s)},n.prototype.generateSampleSrc=function(e){var t="";t+=`
`,t+=`
`;for(var r=0;r<e;r++)r>0&&(t+=`
else `),r<e-1&&(t+="if(vTextureId < "+r+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},n}(),Eb=function(n){zt(e,n);function e(t){t===void 0&&(t=!1);var r=n.call(this)||this;return r._buffer=new sr(null,t,!1),r._indexBuffer=new sr(null,t,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,Ke.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,Ke.FLOAT).addAttribute("aColor",r._buffer,4,!0,Ke.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,Ke.FLOAT).addIndex(r._indexBuffer),r}return e}(To),Px=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Ix=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,eI=function(){function n(){}return n.create=function(e){var t=Object.assign({vertex:Px,fragment:Ix,geometryClass:Eb,vertexSize:6},e),r=t.vertex,i=t.fragment,s=t.vertexSize,o=t.geometryClass;return function(u){zt(c,u);function c(v){var _=u.call(this,v)||this;return _.shaderGenerator=new Pm(r,i),_.geometryClass=o,_.vertexSize=s,_}return c}(Hu)},Object.defineProperty(n,"defaultVertexSrc",{get:function(){return Px},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentTemplate",{get:function(){return Ix},enumerable:!1,configurable:!0}),n}(),Cb=eI.create();Object.assign(Cb,{extension:{name:"batch",type:jt.RendererPlugin}});/*!
 * @pixi/accessibility - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var tI={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};_r.mixin(tI);var rI=9,zh=100,nI=0,iI=0,Ox=2,Rx=1,sI=-1e3,aI=-1e3,oI=2,lI=function(){function n(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Vi.tablet||Vi.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=zh+"px",t.style.height=zh+"px",t.style.position="absolute",t.style.top=nI+"px",t.style.left=iI+"px",t.style.zIndex=Ox.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(n.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),n.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width=Rx+"px",t.style.height=Rx+"px",t.style.position="absolute",t.style.top=sI+"px",t.style.left=aI+"px",t.style.zIndex=oI.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},n.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},n.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},n.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},n.prototype.update=function(){var e=performance.now();if(!(Vi.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),r=t.left,i=t.top,s=t.width,o=t.height,u=this.renderer,c=u.width,v=u.height,_=u.resolution,h=s/c*_,d=o/v*_,m=this.div;m.style.left=r+"px",m.style.top=i+"px",m.style.width=c+"px",m.style.height=v+"px";for(var x=0;x<this.children.length;x++){var w=this.children[x];if(w.renderId!==this.renderId)w._accessibleActive=!1,El(this.children,x,1),this.div.removeChild(w._accessibleDiv),this.pool.push(w._accessibleDiv),w._accessibleDiv=null,x--;else{m=w._accessibleDiv;var T=w.hitArea,E=w.worldTransform;w.hitArea?(m.style.left=(E.tx+T.x*E.a)*h+"px",m.style.top=(E.ty+T.y*E.d)*d+"px",m.style.width=T.width*E.a*h+"px",m.style.height=T.height*E.d*d+"px"):(T=w.getBounds(),this.capHitArea(T),m.style.left=T.x*h+"px",m.style.top=T.y*d+"px",m.style.width=T.width*h+"px",m.style.height=T.height*d+"px",m.title!==w.accessibleTitle&&w.accessibleTitle!==null&&(m.title=w.accessibleTitle),m.getAttribute("aria-label")!==w.accessibleHint&&w.accessibleHint!==null&&m.setAttribute("aria-label",w.accessibleHint)),(w.accessibleTitle!==m.title||w.tabIndex!==m.tabIndex)&&(m.title=w.accessibleTitle,m.tabIndex=w.tabIndex,this.debug&&this.updateDebugHTML(m))}}this.renderId++}},n.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},n.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,r=t.width,i=t.height;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>i&&(e.height=i-e.y)},n.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=zh+"px",t.style.height=zh+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=Ox.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},n.prototype._onClick=function(e){var t=this.renderer.plugins.interaction,r=e.target.displayObject,i=t.eventData;t.dispatchEvent(r,"click",i),t.dispatchEvent(r,"pointertap",i),t.dispatchEvent(r,"tap",i)},n.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,r=e.target.displayObject,i=t.eventData;t.dispatchEvent(r,"mouseover",i)},n.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,r=e.target.displayObject,i=t.eventData;t.dispatchEvent(r,"mouseout",i)},n.prototype._onKeyDown=function(e){e.keyCode===rI&&this.activate()},n.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},n.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},n.extension={name:"accessibility",type:[jt.RendererPlugin,jt.CanvasRendererPlugin]},n}();/*!
 * @pixi/interaction - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mx=function(){function n(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new _t,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(n.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),n.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},n.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},n.prototype.reset=function(){this.isPrimary=!1},n}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F_=function(n,e){return F_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},F_(n,e)};function uI(n,e){F_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var cI=function(){function n(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return n.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},n.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},n}(),Lv=function(){function n(e){this._pointerId=e,this._flags=n.FLAGS.NONE}return n.prototype._doSet=function(e,t){t?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(n.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"none",{get:function(){return this._flags===n.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"over",{get:function(){return(this._flags&n.FLAGS.OVER)!==0},set:function(e){this._doSet(n.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightDown",{get:function(){return(this._flags&n.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(n.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftDown",{get:function(){return(this._flags&n.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(n.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),n}(),hI=function(){function n(){this._tempPoint=new _t}return n.prototype.recursiveFindHit=function(e,t,r,i,s){var o;if(!t||!t.visible)return!1;var u=e.data.global;s=t.interactive||s;var c=!1,v=s,_=!0;if(t.hitArea)i&&(t.worldTransform.applyInverse(u,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?c=!0:(i=!1,_=!1)),v=!1;else if(t._mask&&i){var h=t._mask.isMaskData?t._mask.maskObject:t._mask;h&&!(!((o=h.containsPoint)===null||o===void 0)&&o.call(h,u))&&(i=!1)}if(_&&t.interactiveChildren&&t.children)for(var d=t.children,m=d.length-1;m>=0;m--){var x=d[m],w=this.recursiveFindHit(e,x,r,i,v);if(w){if(!x.parent)continue;v=!1,w&&(e.target&&(i=!1),c=!0)}}return s&&(i&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(u)&&(c=!0),t.interactive&&(c&&!e.target&&(e.target=t),r&&r(e,t,!!c))),c},n.prototype.findHit=function(e,t,r,i){this.recursiveFindHit(e,t,r,i,!1)},n}(),fI={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(n){n?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};_r.mixin(fI);var Xh=1,Vh={target:null,data:{global:null}},dI=function(n){uI(e,n);function e(t,r){var i=n.call(this)||this;return r=r||{},i.renderer=t,i.autoPreventDefault=r.autoPreventDefault!==void 0?r.autoPreventDefault:!0,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new Mx,i.mouse.identifier=Xh,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Xh]=i.mouse,i.interactionDataPool=[],i.eventData=new cI,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new hI,i._tempDisplayObject=new hb,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=r.useSystemTicker!==void 0?r.useSystemTicker:!0,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,r){return Vh.target=null,Vh.data.global=t,r||(r=this.lastObjectRendered),this.processInteractive(Vh,r,null,!0),Vh.target},e.prototype.setTargetElement=function(t,r){r===void 0&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=r,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Wr.system.add(this.tickerUpdate,this,Ds.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(Wr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&r.pointerType!=="touch"){var i=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var r=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(r=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":r&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":r&&Object.assign(this.interactionDOMElement.style,i);break}else r&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,r,i){(!i.stopPropagationHint||t===i.stopsPropagatingAt)&&(i.currentTarget=t,i.type=r,t.emit(r,i),t[r]&&t[r](i))},e.prototype.delayDispatchEvent=function(t,r,i){this.delayedEvents.push({displayObject:t,eventString:r,eventData:i})},e.prototype.mapPositionToPoint=function(t,r,i){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var o=1/this.resolution;t.x=(r-s.left)*(this.interactionDOMElement.width/s.width)*o,t.y=(i-s.top)*(this.interactionDOMElement.height/s.height)*o},e.prototype.processInteractive=function(t,r,i,s){var o=this.search.findHit(t,r,i,s),u=this.delayedEvents;if(!u.length)return o;t.stopPropagationHint=!1;var c=u.length;this.delayedEvents=[];for(var v=0;v<c;v++){var _=u[v],h=_.displayObject,d=_.eventString,m=_.eventData;m.stopsPropagatingAt===h&&(m.stopPropagationHint=!0),this.dispatchEvent(h,d,m)}return o},e.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t);if(this.autoPreventDefault&&r[0].isNormalized){var i=t.cancelable||!("cancelable"in t);i&&t.preventDefault()}for(var s=r.length,o=0;o<s;o++){var u=r[o],c=this.getInteractionDataForPointerId(u),v=this.configureInteractionEventForDOMEvent(this.eventData,u,c);if(v.data.originalEvent=t,this.processInteractive(v,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",v),u.pointerType==="touch")this.emit("touchstart",v);else if(u.pointerType==="mouse"||u.pointerType==="pen"){var _=u.button===2;this.emit(_?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,r,i){var s=t.data,o=t.data.identifier;if(i){if(r.trackedPointers[o]||(r.trackedPointers[o]=new Lv(o)),this.dispatchEvent(r,"pointerdown",t),s.pointerType==="touch")this.dispatchEvent(r,"touchstart",t);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var u=s.button===2;u?r.trackedPointers[o].rightDown=!0:r.trackedPointers[o].leftDown=!0,this.dispatchEvent(r,u?"rightdown":"mousedown",t)}}},e.prototype.onPointerComplete=function(t,r,i){var s=this.normalizeToPointerData(t),o=s.length,u=t.target;t.composedPath&&t.composedPath().length>0&&(u=t.composedPath()[0]);for(var c=u!==this.interactionDOMElement?"outside":"",v=0;v<o;v++){var _=s[v],h=this.getInteractionDataForPointerId(_),d=this.configureInteractionEventForDOMEvent(this.eventData,_,h);if(d.data.originalEvent=t,this.processInteractive(d,this.lastObjectRendered,i,r||!c),this.emit(r?"pointercancel":"pointerup"+c,d),_.pointerType==="mouse"||_.pointerType==="pen"){var m=_.button===2;this.emit(m?"rightup"+c:"mouseup"+c,d)}else _.pointerType==="touch"&&(this.emit(r?"touchcancel":"touchend"+c,d),this.releaseInteractionDataForPointerId(_.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,r){var i=t.data,s=t.data.identifier;r.trackedPointers[s]!==void 0&&(delete r.trackedPointers[s],this.dispatchEvent(r,"pointercancel",t),i.pointerType==="touch"&&this.dispatchEvent(r,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,r,i){var s=t.data,o=t.data.identifier,u=r.trackedPointers[o],c=s.pointerType==="touch",v=s.pointerType==="mouse"||s.pointerType==="pen",_=!1;if(v){var h=s.button===2,d=Lv.FLAGS,m=h?d.RIGHT_DOWN:d.LEFT_DOWN,x=u!==void 0&&u.flags&m;i?(this.dispatchEvent(r,h?"rightup":"mouseup",t),x&&(this.dispatchEvent(r,h?"rightclick":"click",t),_=!0)):x&&this.dispatchEvent(r,h?"rightupoutside":"mouseupoutside",t),u&&(h?u.rightDown=!1:u.leftDown=!1)}i?(this.dispatchEvent(r,"pointerup",t),c&&this.dispatchEvent(r,"touchend",t),u&&((!v||_)&&this.dispatchEvent(r,"pointertap",t),c&&(this.dispatchEvent(r,"tap",t),u.over=!1))):u&&(this.dispatchEvent(r,"pointerupoutside",t),c&&this.dispatchEvent(r,"touchendoutside",t)),u&&u.none&&delete r.trackedPointers[o]},e.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t);(r[0].pointerType==="mouse"||r[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var i=r.length,s=0;s<i;s++){var o=r[s],u=this.getInteractionDataForPointerId(o),c=this.configureInteractionEventForDOMEvent(this.eventData,o,u);c.data.originalEvent=t,this.processInteractive(c,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",c),o.pointerType==="touch"&&this.emit("touchmove",c),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mousemove",c)}r[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,r,i){var s=t.data,o=s.pointerType==="touch",u=s.pointerType==="mouse"||s.pointerType==="pen";u&&this.processPointerOverOut(t,r,i),(!this.moveWhenInside||i)&&(this.dispatchEvent(r,"pointermove",t),o&&this.dispatchEvent(r,"touchmove",t),u&&this.dispatchEvent(r,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t),i=r[0];i.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,s);o.data.originalEvent=i,this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),i.pointerType==="mouse"||i.pointerType==="pen"?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(s.identifier)}},e.prototype.processPointerOverOut=function(t,r,i){var s=t.data,o=t.data.identifier,u=s.pointerType==="mouse"||s.pointerType==="pen",c=r.trackedPointers[o];i&&!c&&(c=r.trackedPointers[o]=new Lv(o)),c!==void 0&&(i&&this.mouseOverRenderer?(c.over||(c.over=!0,this.delayDispatchEvent(r,"pointerover",t),u&&this.delayDispatchEvent(r,"mouseover",t)),u&&this.cursor===null&&(this.cursor=r.cursor)):c.over&&(c.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),u&&this.dispatchEvent(r,"mouseout",t),c.none&&delete r.trackedPointers[o]))},e.prototype.onPointerOver=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t),i=r[0],s=this.getInteractionDataForPointerId(i),o=this.configureInteractionEventForDOMEvent(this.eventData,i,s);o.data.originalEvent=i,i.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),(i.pointerType==="mouse"||i.pointerType==="pen")&&this.emit("mouseover",o)}},e.prototype.getInteractionDataForPointerId=function(t){var r=t.pointerId,i;return r===Xh||t.pointerType==="mouse"?i=this.mouse:this.activeInteractionData[r]?i=this.activeInteractionData[r]:(i=this.interactionDataPool.pop()||new Mx,i.identifier=r,this.activeInteractionData[r]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var r=this.activeInteractionData[t];r&&(delete this.activeInteractionData[t],r.reset(),this.interactionDataPool.push(r))},e.prototype.configureInteractionEventForDOMEvent=function(t,r,i){return t.data=i,this.mapPositionToPoint(i.global,r.clientX,r.clientY),r.pointerType==="touch"&&(r.globalX=i.global.x,r.globalY=i.global.y),i.originalEvent=r,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,s=t.changedTouches.length;i<s;i++){var o=t.changedTouches[i];typeof o.button>"u"&&(o.button=t.touches.length?1:0),typeof o.buttons>"u"&&(o.buttons=t.touches.length?1:0),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,r.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){var u=t;typeof u.isPrimary>"u"&&(u.isPrimary=!0),typeof u.width>"u"&&(u.width=1),typeof u.height>"u"&&(u.height=1),typeof u.tiltX>"u"&&(u.tiltX=0),typeof u.tiltY>"u"&&(u.tiltY=0),typeof u.pointerType>"u"&&(u.pointerType="mouse"),typeof u.pointerId>"u"&&(u.pointerId=Xh),typeof u.pressure>"u"&&(u.pressure=.5),typeof u.twist>"u"&&(u.twist=0),typeof u.tangentialPressure>"u"&&(u.tangentialPressure=0),u.isNormalized=!0,r.push(u)}else r.push(t);return r},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[jt.RendererPlugin,jt.CanvasRendererPlugin]},e}(lc);/*!
 * @pixi/extract - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var pI=new pt,vI=4,_I=function(){function n(e){this.renderer=e}return n.prototype.image=function(e,t,r){var i=new Image;return i.src=this.base64(e,t,r),i},n.prototype.base64=function(e,t,r){return this.canvas(e).toDataURL(t,r)},n.prototype.canvas=function(e,t){var r=this._rawPixels(e,t),i=r.pixels,s=r.width,o=r.height,u=r.flipY,c=new vx(s,o,1),v=c.context.getImageData(0,0,s,o);if(n.arrayPostDivide(i,v.data),c.context.putImageData(v,0,0),u){var _=new vx(c.width,c.height,1);_.context.scale(1,-1),_.context.drawImage(c.canvas,0,-o),c.destroy(),c=_}return c.canvas},n.prototype.pixels=function(e,t){var r=this._rawPixels(e,t).pixels;return n.arrayPostDivide(r,r),r},n.prototype._rawPixels=function(e,t){var r=this.renderer,i,s=!1,o,u=!1;if(e)if(e instanceof go)o=e;else{var c=r.context.webGLVersion>=2?r.multisample:Jt.NONE;if(o=this.renderer.generateTexture(e,{multisample:c}),c!==Jt.NONE){var v=go.create({width:o.width,height:o.height});r.framebuffer.bind(o.framebuffer),r.framebuffer.blit(v.framebuffer),r.framebuffer.bind(null),o.destroy(!0),o=v}u=!0}o?(i=o.baseTexture.resolution,t=t??o.frame,s=!1,r.renderTexture.bind(o)):(i=r.resolution,t||(t=pI,t.width=r.width,t.height=r.height),s=!0,r.renderTexture.bind(null));var _=Math.round(t.width*i),h=Math.round(t.height*i),d=new Uint8Array(vI*_*h),m=r.gl;return m.readPixels(Math.round(t.x*i),Math.round(t.y*i),_,h,m.RGBA,m.UNSIGNED_BYTE,d),u&&o.destroy(!0),{pixels:d,width:_,height:h,flipY:s}},n.prototype.destroy=function(){this.renderer=null},n.arrayPostDivide=function(e,t){for(var r=0;r<e.length;r+=4){var i=t[r+3]=e[r+3];i!==0?(t[r]=Math.round(Math.min(e[r]*255/i,255)),t[r+1]=Math.round(Math.min(e[r+1]*255/i,255)),t[r+2]=Math.round(Math.min(e[r+2]*255/i,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}},n.extension={name:"extract",type:jt.RendererPlugin},n}();/*!
 * @pixi/loaders - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qh=function(){function n(e,t,r){t===void 0&&(t=!1),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return n.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},n}();function kx(n,e){return n._head?(n._tail._next=e,e._prev=n._tail,n._tail=e):(n._head=e,n._tail=e),e._owner=n,e}var Cs=function(){function n(){this._head=this._tail=void 0}return n.prototype.handlers=function(e){e===void 0&&(e=!1);var t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r},n.prototype.has=function(e){if(!(e instanceof qh))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},n.prototype.dispatch=function(){for(var e=arguments,t=[],r=0;r<arguments.length;r++)t[r]=e[r];var i=this._head;if(!i)return!1;for(;i;)i._once&&this.detach(i),i._fn.apply(i._thisArg,t),i=i._next;return!0},n.prototype.add=function(e,t){if(t===void 0&&(t=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return kx(this,new qh(e,!1,t))},n.prototype.once=function(e,t){if(t===void 0&&(t=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return kx(this,new qh(e,!0,t))},n.prototype.detach=function(e){if(!(e instanceof qh))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},n.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},n}();function Ab(n,e){e=e||{};for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[e.strictMode?"strict":"loose"].exec(n),i={},s=14;s--;)i[t.key[s]]=r[s]||"";return i[t.q.name]={},i[t.key[12]].replace(t.q.parser,function(o,u,c){u&&(i[t.q.name][u]=c)}),i}var Bv,Wh=null,mI=0,Dx=200,yI=204,gI=1223,xI=2;function Nx(){}function Fx(n,e,t){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(n[e]=t)}function jv(n){return n.toString().replace("object ","")}var lr=function(){function n(e,t,r){if(this._dequeue=Nx,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof t!="string")throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(n.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=r.crossOrigin===!0?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=n.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Nx,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Cs,this.onProgress=new Cs,this.onComplete=new Cs,this.onAfterMiddleware=new Cs}return n.setExtensionLoadType=function(e,t){Fx(n._loadTypeMap,e,t)},n.setExtensionXhrType=function(e,t){Fx(n._xhrTypeMap,e,t)},Object.defineProperty(n.prototype,"isDataUrl",{get:function(){return this._hasFlag(n.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isComplete",{get:function(){return this._hasFlag(n.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isLoading",{get:function(){return this._hasFlag(n.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),n.prototype.complete=function(){this._clearEvents(),this._finish()},n.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=n.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},n.prototype.load=function(e){var t=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(t)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(n.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this.type=n.TYPE.IMAGE,this._loadElement("image");break;case n.LOAD_TYPE.AUDIO:this.type=n.TYPE.AUDIO,this._loadSourceElement("audio");break;case n.LOAD_TYPE.VIDEO:this.type=n.TYPE.VIDEO,this._loadSourceElement("video");break;case n.LOAD_TYPE.XHR:default:typeof Bv>"u"&&(Bv=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),Bv&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},n.prototype._hasFlag=function(e){return(this._flags&e)!==0},n.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},n.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},n.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(n.STATUS_FLAGS.COMPLETE,!0),this._setFlag(n.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},n.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},n.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else{var t=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(t)?t[0]:t))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},n.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=n.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},n.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},n.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var i=document.createElement("source");return i.src=t,i.type=r,i},n.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},n.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},n.prototype._onTimeout=function(){this.abort("Load timed out.")},n.prototype._xhrOnError=function(){var e=this.xhr;this.abort(jv(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},n.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(jv(e)+" Request timed out.")},n.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(jv(e)+" Request was aborted by the user.")},n.prototype._xhrOnLoad=function(){var e=this.xhr,t="",r=typeof e.status>"u"?Dx:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType>"u")&&(t=e.responseText),r===mI&&(t.length>0||e.responseType===n.XHR_RESPONSE_TYPE.BUFFER)?r=Dx:r===gI&&(r=yI);var i=r/100|0;if(i===xI)if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=n.TYPE.TEXT;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=n.TYPE.JSON}catch(u){this.abort("Error trying to parse loaded json: "+u);return}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var s=new DOMParser;this.data=s.parseFromString(t,"text/xml")}else{var o=document.createElement("div");o.innerHTML=t,this.data=o}this.type=n.TYPE.XML}catch(u){this.abort("Error trying to parse loaded xml: "+u);return}else this.data=e.response||t;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},n.prototype._determineCrossOrigin=function(e,t){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";t=t||globalThis.location,Wh||(Wh=document.createElement("a")),Wh.href=e;var r=Ab(Wh.href,{strictMode:!0}),i=!r.port&&t.port===""||r.port===t.port,s=r.protocol?r.protocol+":":"";return r.host!==t.hostname||!i||s!==t.protocol?"anonymous":""},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this.extension]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this.extension]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(e){e===void 0&&(e=this.url);var t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var i=e.indexOf("?"),s=e.indexOf("#"),o=Math.min(i>-1?i:e.length,s>-1?s:e.length);e=e.substring(0,o),t=e.substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},n.prototype._getMimeFromXhrType=function(e){switch(e){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n}();(function(n){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(n.STATUS_FLAGS||(n.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(n.TYPE||(n.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(n.LOAD_TYPE||(n.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(n.XHR_RESPONSE_TYPE||(n.XHR_RESPONSE_TYPE={})),n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE,avif:n.LOAD_TYPE.IMAGE,svg:n.LOAD_TYPE.IMAGE,"svg+xml":n.LOAD_TYPE.IMAGE,mp3:n.LOAD_TYPE.AUDIO,ogg:n.LOAD_TYPE.AUDIO,wav:n.LOAD_TYPE.AUDIO,mp4:n.LOAD_TYPE.VIDEO,webm:n.LOAD_TYPE.VIDEO},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,avif:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT,ttf:n.XHR_RESPONSE_TYPE.BUFFER,otf:n.XHR_RESPONSE_TYPE.BUFFER},n.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(lr||(lr={}));function eo(){}function bI(n){return function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];if(n===null)throw new Error("Callback was already called.");var s=n;n=null,s.apply(this,r)}}var wI=function(){function n(e,t){this.data=e,this.callback=t}return n}(),Uv=function(){function n(e,t){var r=this;if(t===void 0&&(t=1),this.workers=0,this.saturated=eo,this.unsaturated=eo,this.empty=eo,this.drain=eo,this.error=eo,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(i,s,o){if(o&&typeof o!="function")throw new Error("task callback must be a function");if(r.started=!0,i==null&&r.idle()){setTimeout(function(){return r.drain()},1);return}var u=new wI(i,typeof o=="function"?o:eo);s?r._tasks.unshift(u):r._tasks.push(u),setTimeout(r.process,1)},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var i=r._tasks.shift();r._tasks.length===0&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(i.data,bI(r._next(i)))}},this._worker=e,t===0)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return n.prototype._next=function(e){var t=this;return function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++)i[s]=r[s];t.workers-=1,e.callback.apply(e,i),i[0]!=null&&t.error(i[0],e.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},n.prototype.push=function(e,t){this._insert(e,!1,t)},n.prototype.kill=function(){this.workers=0,this.drain=eo,this.started=!1,this._tasks=[]},n.prototype.unshift=function(e,t){this._insert(e,!0,t)},n.prototype.length=function(){return this._tasks.length},n.prototype.running=function(){return this.workers},n.prototype.idle=function(){return this._tasks.length+this.workers===0},n.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},n.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},n.eachSeries=function(e,t,r,i){var s=0,o=e.length;function u(c){if(c||s===o){r&&r(c);return}i?setTimeout(function(){t(e[s++],u)},1):t(e[s++],u)}u()},n.queue=function(e,t){return new n(e,t)},n}(),Gv=100,TI=/(#[\w-]+)?$/,Mf=function(){function n(e,t){var r=this;e===void 0&&(e=""),t===void 0&&(t=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,v){return r._loadResource(c,v)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(c,v){return r._loadResource(c,v)},this._queue=Uv.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new Cs,this.onError=new Cs,this.onLoad=new Cs,this.onStart=new Cs,this.onComplete=new Cs;for(var i=0;i<n._plugins.length;++i){var s=n._plugins[i],o=s.pre,u=s.use;o&&this.pre(o),u&&this.use(u)}this._protected=!1}return n.prototype._add=function(e,t,r,i){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new lr(e,t,r),typeof i=="function"&&this.resources[e].onAfterMiddleware.once(i),this.loading){for(var s=r.parentResource,o=[],u=0;u<s.children.length;++u)s.children[u].isComplete||o.push(s.children[u]);var c=s.progressChunk*(o.length+1),v=c/(o.length+2);s.children.push(this.resources[e]),s.progressChunk=v;for(var u=0;u<o.length;++u)o[u].progressChunk=v;this.resources[e].progressChunk=v}return this._queue.push(this.resources[e]),this},n.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},n.prototype.use=function(e){return this._afterMiddleware.push(e),this},n.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},n.prototype.load=function(e){if(bi("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=this._queue._tasks.length,r=Gv/t,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},Object.defineProperty(n.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),n.prototype._prepareUrl=function(e){var t=Ab(e,{strictMode:!0}),r;if(t.protocol||!t.path||e.indexOf("//")===0?r=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?r=this.baseUrl+"/"+e:r=this.baseUrl+e,this.defaultQueryString){var i=TI.exec(r)[0];r=r.slice(0,r.length-i.length),r.indexOf("?")!==-1?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=i}return r},n.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,Uv.eachSeries(this._beforeMiddleware,function(i,s){i.call(r,e,function(){s(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())},!0)},n.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},n.prototype._onComplete=function(){this.progress=Gv,this.loading=!1,this.onComplete.dispatch(this,this.resources)},n.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),Uv.eachSeries(this._afterMiddleware,function(r,i){r.call(t,e,i)},function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(Gv,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&t._resourcesParsing.length===0&&t._onComplete()},!0)},n.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(n,"shared",{get:function(){var e=n._shared;return e||(e=new n,e._protected=!0,n._shared=e),e},enumerable:!1,configurable:!0}),n.registerPlugin=function(e){return bi("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),Ns.add({type:jt.Loader,ref:e}),n},n._plugins=[],n}();Ns.handleByList(jt.Loader,Mf._plugins);Mf.prototype.add=function(e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;++s)this.add(e[s]);return this}if(typeof e=="object"&&(r=e,i=t||r.callback||r.onComplete,t=r.url,e=r.name||r.key||r.url),typeof t!="string"&&(i=r,r=t,t=e),typeof t!="string")throw new Error("No url passed to add resource to loader.");return typeof r=="function"&&(i=r,r=null),this._add(e,t,r,i)};var SI=function(){function n(){}return n.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Mf.shared:new Mf},n.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},n.extension=jt.Application,n}(),EI=function(){function n(){}return n.add=function(){lr.setExtensionLoadType("svg",lr.LOAD_TYPE.XHR),lr.setExtensionXhrType("svg",lr.XHR_RESPONSE_TYPE.TEXT)},n.use=function(e,t){if(e.data&&(e.type===lr.TYPE.IMAGE||e.extension==="svg")){var r=e.data,i=e.url,s=e.name,o=e.metadata;rt.fromLoader(r,i,s,o).then(function(u){e.texture=u,t()}).catch(t)}else t()},n.extension=jt.Loader,n}(),CI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function AI(n){for(var e="",t=0;t<n.length;){for(var r=[0,0,0],i=[0,0,0,0],s=0;s<r.length;++s)t<n.length?r[s]=n.charCodeAt(t++)&255:r[s]=0;i[0]=r[0]>>2,i[1]=(r[0]&3)<<4|r[1]>>4,i[2]=(r[1]&15)<<2|r[2]>>6,i[3]=r[2]&63;var o=t-(n.length-1);switch(o){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;break}for(var s=0;s<i.length;++s)e+=CI.charAt(i[s])}return e}function PI(n,e){if(!n.data){e();return}if(n.xhr&&n.xhrType===lr.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof n.data=="string"){var t=n.xhr.getResponseHeader("content-type");if(t&&t.indexOf("image")===0){n.data=new Image,n.data.src="data:"+t+";base64,"+AI(n.xhr.responseText),n.type=lr.TYPE.IMAGE,n.data.onload=function(){n.data.onload=null,e()};return}}else if(n.data.type.indexOf("image")===0){var r=globalThis.URL||globalThis.webkitURL,i=r.createObjectURL(n.data);n.blob=n.data,n.data=new Image,n.data.src=i,n.type=lr.TYPE.IMAGE,n.data.onload=function(){r.revokeObjectURL(i),n.data.onload=null,e()};return}}e()}var II=function(){function n(){}return n.extension=jt.Loader,n.use=PI,n}();Ns.add(EI,II);/*!
 * @pixi/compressed-textures - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ft,gt;(function(n){n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"})(gt||(gt={}));var kf=(Ft={},Ft[gt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Ft[gt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Ft[gt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Ft[gt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Ft[gt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Ft[gt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Ft[gt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Ft[gt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Ft[gt.COMPRESSED_R11_EAC]=.5,Ft[gt.COMPRESSED_SIGNED_R11_EAC]=.5,Ft[gt.COMPRESSED_RG11_EAC]=1,Ft[gt.COMPRESSED_SIGNED_RG11_EAC]=1,Ft[gt.COMPRESSED_RGB8_ETC2]=.5,Ft[gt.COMPRESSED_RGBA8_ETC2_EAC]=1,Ft[gt.COMPRESSED_SRGB8_ETC2]=.5,Ft[gt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Ft[gt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Ft[gt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Ft[gt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Ft[gt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Ft[gt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Ft[gt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Ft[gt.COMPRESSED_RGB_ETC1_WEBGL]=.5,Ft[gt.COMPRESSED_RGB_ATC_WEBGL]=.5,Ft[gt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Ft[gt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Ft[gt.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,Ft);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var L_=function(n,e){return L_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},L_(n,e)};function Pb(n,e){L_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function OI(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function u(_){try{v(r.next(_))}catch(h){o(h)}}function c(_){try{v(r.throw(_))}catch(h){o(h)}}function v(_){_.done?s(_.value):i(_.value).then(u,c)}v((r=r.apply(n,[])).next())})}function RI(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(v){return function(_){return c([v,_])}}function c(v){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=v[0]&2?i.return:v[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,v[1])).done)return s;switch(i=0,s&&(v=[v[0]&2,s.value]),v[0]){case 0:case 1:s=v;break;case 4:return t.label++,{value:v[1],done:!1};case 5:t.label++,i=v[1],v=[0];continue;case 7:v=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(v[0]===6||v[0]===2)){t=0;continue}if(v[0]===3&&(!s||v[1]>s[0]&&v[1]<s[3])){t.label=v[1];break}if(v[0]===6&&t.label<s[1]){t.label=s[1],s=v;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(v);break}s[2]&&t.ops.pop(),t.trys.pop();continue}v=e.call(n,t)}catch(_){v=[6,_],i=0}finally{r=s=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}var MI=function(n){Pb(e,n);function e(t,r){r===void 0&&(r={width:1,height:1,autoLoad:!0});var i=this,s,o;return typeof t=="string"?(s=t,o=new Uint8Array):(s=null,o=t),i=n.call(this,o,r)||this,i.origin=s,i.buffer=o?new N_(o):null,i.origin&&r.autoLoad!==!1&&i.load(),o&&o.length&&(i.loaded=!0,i.onBlobLoaded(i.buffer.rawBinaryData)),i}return e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return OI(this,void 0,Promise,function(){var t,r,i;return RI(this,function(s){switch(s.label){case 0:return[4,fetch(this.origin)];case 1:return t=s.sent(),[4,t.blob()];case 2:return r=s.sent(),[4,r.arrayBuffer()];case 3:return i=s.sent(),this.data=new Uint32Array(i),this.buffer=new N_(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),[2,this]}})})},e}(cc),B_=function(n){Pb(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=e._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||e._createLevelBuffers(t instanceof Uint8Array?t:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return e.prototype.upload=function(t,r,i){var s=t.gl,o=t.context.extensions[this._extension];if(!o)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var u=0,c=this.levels;u<c;u++){var v=this._levelBuffers[u],_=v.levelID,h=v.levelWidth,d=v.levelHeight,m=v.levelBuffer;s.compressedTexImage2D(s.TEXTURE_2D,_,this.format,h,d,0,m)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,r,i,s,o,u,c){for(var v=new Array(i),_=t.byteOffset,h=u,d=c,m=h+s-1&~(s-1),x=d+o-1&~(o-1),w=m*x*kf[r],T=0;T<i;T++)v[T]={levelID:T,levelWidth:i>1?h:m,levelHeight:i>1?d:x,levelBuffer:new Uint8Array(t.buffer,_,w)},_+=w,h=h>>1||1,d=d>>1||1,m=h+s-1&~(s-1),x=d+o-1&~(o-1),w=m*x*kf[r];return v},e}(MI),kI=function(){function n(){}return n.use=function(e,t){var r=e.data,i=this;if(e.type===lr.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var s=r.textures,o=void 0,u=void 0,c=0,v=s.length;c<v;c++){var _=s[c],h=_.src,d=_.format;if(d||(u=h),n.textureFormats[d]){o=h;break}}if(o=o||u,!o){t(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(o===e.url){t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var m={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},x=yl.resolve(e.url.replace(i.baseUrl,""),o),w=r.cacheID;i.add(w,x,m,function(T){if(T.error){t(T.error);return}var E=T.texture,I=E===void 0?null:E,D=T.textures,z=D===void 0?{}:D;Object.assign(e,{texture:I,textures:z}),t()})}else t()},Object.defineProperty(n,"textureExtensions",{get:function(){if(!n._textureExtensions){var e=He.ADAPTER.createCanvas(),t=e.getContext("webgl");if(!t)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var r={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};n._textureExtensions=r}return n._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(n,"textureFormats",{get:function(){if(!n._textureFormats){var e=n.textureExtensions;n._textureFormats={};for(var t in e){var r=e[t];r&&Object.assign(n._textureFormats,Object.getPrototypeOf(r))}}return n._textureFormats},enumerable:!1,configurable:!0}),n.extension=jt.Loader,n}();function Ib(n,e,t){var r={textures:{},texture:null};if(!e)return r;var i=e.map(function(s){return new rt(new Ct(s,Object.assign({mipmap:Ti.OFF,alphaMode:Si.NO_PREMULTIPLIED_ALPHA},t)))});return i.forEach(function(s,o){var u=s.baseTexture,c=n+"-"+(o+1);Ct.addToCache(u,c),rt.addToCache(s,c),o===0&&(Ct.addToCache(u,n),rt.addToCache(s,n),r.texture=s),r.textures[c]=s}),r}var Tu,vi,Hv=4,$h=124,DI=32,Lx=20,NI=542327876,Yh={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},FI={FOURCC:2},Kh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},mi;(function(n){n[n.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",n[n.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",n[n.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",n[n.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",n[n.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",n[n.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",n[n.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",n[n.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",n[n.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",n[n.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",n[n.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",n[n.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",n[n.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",n[n.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",n[n.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",n[n.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",n[n.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",n[n.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",n[n.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",n[n.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",n[n.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",n[n.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",n[n.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",n[n.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",n[n.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",n[n.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",n[n.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",n[n.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",n[n.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",n[n.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",n[n.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",n[n.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",n[n.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",n[n.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",n[n.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",n[n.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",n[n.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",n[n.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",n[n.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",n[n.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",n[n.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",n[n.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",n[n.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",n[n.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",n[n.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",n[n.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",n[n.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",n[n.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",n[n.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",n[n.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",n[n.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",n[n.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",n[n.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",n[n.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",n[n.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",n[n.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",n[n.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",n[n.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",n[n.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",n[n.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",n[n.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",n[n.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",n[n.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",n[n.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",n[n.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",n[n.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",n[n.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",n[n.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",n[n.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",n[n.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",n[n.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",n[n.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",n[n.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",n[n.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",n[n.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",n[n.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",n[n.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",n[n.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",n[n.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",n[n.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",n[n.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",n[n.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",n[n.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",n[n.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",n[n.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",n[n.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",n[n.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",n[n.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",n[n.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",n[n.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",n[n.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",n[n.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",n[n.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",n[n.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",n[n.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",n[n.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",n[n.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",n[n.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",n[n.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",n[n.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",n[n.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",n[n.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",n[n.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",n[n.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",n[n.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",n[n.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",n[n.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",n[n.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",n[n.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",n[n.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",n[n.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",n[n.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",n[n.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",n[n.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",n[n.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",n[n.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",n[n.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(mi||(mi={}));var j_;(function(n){n[n.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",n[n.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",n[n.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(j_||(j_={}));var LI=1,BI=2,jI=4,UI=64,GI=512,HI=131072,zI=827611204,XI=861165636,VI=894720068,qI=808540228,WI=4,$I=(Tu={},Tu[zI]=gt.COMPRESSED_RGBA_S3TC_DXT1_EXT,Tu[XI]=gt.COMPRESSED_RGBA_S3TC_DXT3_EXT,Tu[VI]=gt.COMPRESSED_RGBA_S3TC_DXT5_EXT,Tu),YI=(vi={},vi[mi.DXGI_FORMAT_BC1_TYPELESS]=gt.COMPRESSED_RGBA_S3TC_DXT1_EXT,vi[mi.DXGI_FORMAT_BC1_UNORM]=gt.COMPRESSED_RGBA_S3TC_DXT1_EXT,vi[mi.DXGI_FORMAT_BC2_TYPELESS]=gt.COMPRESSED_RGBA_S3TC_DXT3_EXT,vi[mi.DXGI_FORMAT_BC2_UNORM]=gt.COMPRESSED_RGBA_S3TC_DXT3_EXT,vi[mi.DXGI_FORMAT_BC3_TYPELESS]=gt.COMPRESSED_RGBA_S3TC_DXT5_EXT,vi[mi.DXGI_FORMAT_BC3_UNORM]=gt.COMPRESSED_RGBA_S3TC_DXT5_EXT,vi[mi.DXGI_FORMAT_BC1_UNORM_SRGB]=gt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,vi[mi.DXGI_FORMAT_BC2_UNORM_SRGB]=gt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,vi[mi.DXGI_FORMAT_BC3_UNORM_SRGB]=gt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,vi);function KI(n){var e=new Uint32Array(n),t=e[0];if(t!==NI)throw new Error("Invalid DDS file magic word");var r=new Uint32Array(n,0,$h/Uint32Array.BYTES_PER_ELEMENT),i=r[Yh.HEIGHT],s=r[Yh.WIDTH],o=r[Yh.MIPMAP_COUNT],u=new Uint32Array(n,Yh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DI/Uint32Array.BYTES_PER_ELEMENT),c=u[LI];if(c&jI){var v=u[FI.FOURCC];if(v!==qI){var _=$I[v],h=Hv+$h,d=new Uint8Array(n,h),m=new B_(d,{format:_,width:s,height:i,levels:o});return[m]}var x=Hv+$h,w=new Uint32Array(e.buffer,x,Lx/Uint32Array.BYTES_PER_ELEMENT),T=w[Kh.DXGI_FORMAT],E=w[Kh.RESOURCE_DIMENSION],I=w[Kh.MISC_FLAG],D=w[Kh.ARRAY_SIZE],z=YI[T];if(z===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+T);if(I===WI)throw new Error("DDSParser does not support cubemap textures");if(E===j_.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var O=new Array,U=Hv+$h+Lx;if(D===1)O.push(new Uint8Array(n,U));else{for(var y=kf[z],te=0,F=s,W=i,ne=0;ne<o;ne++){var ee=Math.max(1,F+3&-4),ue=Math.max(1,W+3&-4),ye=ee*ue*y;te+=ye,F=F>>>1,W=W>>>1}for(var K=U,ne=0;ne<D;ne++)O.push(new Uint8Array(n,K,te)),K+=te}return O.map(function(B){return new B_(B,{format:z,width:s,height:i,levels:o})})}throw c&UI?new Error("DDSParser does not support uncompressed texture data."):c&GI?new Error("DDSParser does not supported YUV uncompressed texture data."):c&HI?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&BI?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var fa,bs,Su,Bx=[171,75,84,88,32,49,49,187,13,10,26,10],QI=67305985,_i={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},U_=64,jx=(fa={},fa[Ke.UNSIGNED_BYTE]=1,fa[Ke.UNSIGNED_SHORT]=2,fa[Ke.INT]=4,fa[Ke.UNSIGNED_INT]=4,fa[Ke.FLOAT]=4,fa[Ke.HALF_FLOAT]=8,fa),ZI=(bs={},bs[Ne.RGBA]=4,bs[Ne.RGB]=3,bs[Ne.RG]=2,bs[Ne.RED]=1,bs[Ne.LUMINANCE]=1,bs[Ne.LUMINANCE_ALPHA]=2,bs[Ne.ALPHA]=1,bs),JI=(Su={},Su[Ke.UNSIGNED_SHORT_4_4_4_4]=2,Su[Ke.UNSIGNED_SHORT_5_5_5_1]=2,Su[Ke.UNSIGNED_SHORT_5_6_5]=2,Su);function eO(n,e,t){t===void 0&&(t=!1);var r=new DataView(e);if(!tO(n,r))return null;var i=r.getUint32(_i.ENDIANNESS,!0)===QI,s=r.getUint32(_i.GL_TYPE,i),o=r.getUint32(_i.GL_FORMAT,i),u=r.getUint32(_i.GL_INTERNAL_FORMAT,i),c=r.getUint32(_i.PIXEL_WIDTH,i),v=r.getUint32(_i.PIXEL_HEIGHT,i)||1,_=r.getUint32(_i.PIXEL_DEPTH,i)||1,h=r.getUint32(_i.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=r.getUint32(_i.NUMBER_OF_FACES,i),m=r.getUint32(_i.NUMBER_OF_MIPMAP_LEVELS,i),x=r.getUint32(_i.BYTES_OF_KEY_VALUE_DATA,i);if(v===0||_!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");var w=4,T=4,E=c+3&-4,I=v+3&-4,D=new Array(h),z=c*v;s===0&&(z=E*I);var O;if(s!==0?jx[s]?O=jx[s]*ZI[o]:O=JI[s]:O=kf[u],O===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var U=t?nO(r,x,i):null,y=z*O,te=y,F=c,W=v,ne=E,ee=I,ue=U_+x,ye=0;ye<m;ye++){for(var K=r.getUint32(ue,i),B=ue+4,V=0;V<h;V++){var G=D[V];G||(G=D[V]=new Array(m)),G[ye]={levelID:ye,levelWidth:m>1||s!==0?F:ne,levelHeight:m>1||s!==0?W:ee,levelBuffer:new Uint8Array(e,B,te)},B+=te}ue+=K+4,ue=ue%4!==0?ue+4-ue%4:ue,F=F>>1||1,W=W>>1||1,ne=F+w-1&-4,ee=W+T-1&-4,te=ne*ee*O}return s!==0?{uncompressed:D.map(function(Y){var q=Y[0].levelBuffer,L=!1;return s===Ke.FLOAT?q=new Float32Array(Y[0].levelBuffer.buffer,Y[0].levelBuffer.byteOffset,Y[0].levelBuffer.byteLength/4):s===Ke.UNSIGNED_INT?(L=!0,q=new Uint32Array(Y[0].levelBuffer.buffer,Y[0].levelBuffer.byteOffset,Y[0].levelBuffer.byteLength/4)):s===Ke.INT&&(L=!0,q=new Int32Array(Y[0].levelBuffer.buffer,Y[0].levelBuffer.byteOffset,Y[0].levelBuffer.byteLength/4)),{resource:new cc(q,{width:Y[0].levelWidth,height:Y[0].levelHeight}),type:s,format:L?rO(o):o}}),kvData:U}:{compressed:D.map(function(Y){return new B_(null,{format:u,width:c,height:v,levels:m,levelBuffers:Y})}),kvData:U}}function tO(n,e){for(var t=0;t<Bx.length;t++)if(e.getUint8(t)!==Bx[t])return console.error(n+" is not a valid *.ktx file!"),!1;return!0}function rO(n){switch(n){case Ne.RGBA:return Ne.RGBA_INTEGER;case Ne.RGB:return Ne.RGB_INTEGER;case Ne.RG:return Ne.RG_INTEGER;case Ne.RED:return Ne.RED_INTEGER;default:return n}}function nO(n,e,t){for(var r=new Map,i=0;i<e;){var s=n.getUint32(U_+i,t),o=U_+i+4,u=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var c=0;c<s&&n.getUint8(o+c)!==0;c++);if(c===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var v=new TextDecoder().decode(new Uint8Array(n.buffer,o,c)),_=new DataView(n.buffer,o+c+1,s-c-1);r.set(v,_),i+=4+s+u}return r}lr.setExtensionXhrType("dds",lr.XHR_RESPONSE_TYPE.BUFFER);var iO=function(){function n(){}return n.use=function(e,t){if(e.extension==="dds"&&e.data)try{Object.assign(e,Ib(e.name||e.url,KI(e.data),e.metadata))}catch(r){t(r);return}t()},n.extension=jt.Loader,n}();lr.setExtensionXhrType("ktx",lr.XHR_RESPONSE_TYPE.BUFFER);var sO=function(){function n(){}return n.use=function(e,t){if(e.extension==="ktx"&&e.data)try{var r=e.name||e.url,i=eO(r,e.data,this.loadKeyValueData),s=i.compressed,o=i.uncompressed,u=i.kvData;if(s){var c=Ib(r,s,e.metadata);if(u&&c.textures)for(var v in c.textures)c.textures[v].baseTexture.ktxKeyValueData=u;Object.assign(e,c)}else if(o){var _={};o.forEach(function(h,d){var m=new rt(new Ct(h.resource,{mipmap:Ti.OFF,alphaMode:Si.NO_PREMULTIPLIED_ALPHA,type:h.type,format:h.format})),x=r+"-"+(d+1);u&&(m.baseTexture.ktxKeyValueData=u),Ct.addToCache(m.baseTexture,x),rt.addToCache(m,x),d===0&&(_[r]=m,Ct.addToCache(m.baseTexture,r),rt.addToCache(m,r)),_[x]=m}),Object.assign(e,{textures:_})}}catch(h){t(h);return}t()},n.extension=jt.Loader,n.loadKeyValueData=!1,n}();/*!
 * @pixi/particle-container - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var G_=function(n,e){return G_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},G_(n,e)};function Ob(n,e){G_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}(function(n){Ob(e,n);function e(t,r,i,s){t===void 0&&(t=1500),i===void 0&&(i=16384),s===void 0&&(s=!1);var o=n.call(this)||this,u=16384;return i>u&&(i=u),o._properties=[!1,!0,!1,!1,!1],o._maxSize=t,o._batchSize=i,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=lt.NORMAL,o.autoResize=s,o.roundPixels=!0,o.baseTexture=null,o.setProperties(r),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Il(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var r=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e})(mr);var Ux=function(){function n(e,t,r){this.geometry=new To,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<e.length;++i){var s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Ke.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return n.prototype.initBuffers=function(){var e=this.geometry,t=0;this.indexBuffer=new sr(yA(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];i.offset=t,t+=i.size,this.dynamicStride+=i.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new sr(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var r=0;r<this.staticProperties.length;++r){var i=this.staticProperties[r];i.offset=o,o+=i.size,this.staticStride+=i.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new sr(this.staticData,!0,!1);for(var r=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];e.addAttribute(i.attributeName,this.dynamicBuffer,0,i.type===Ke.UNSIGNED_BYTE,i.type,this.dynamicStride*4,i.offset*4)}for(var r=0;r<this.staticProperties.length;++r){var i=this.staticProperties[r];e.addAttribute(i.attributeName,this.staticBuffer,0,i.type===Ke.UNSIGNED_BYTE,i.type,this.staticStride*4,i.offset*4)}},n.prototype.uploadDynamic=function(e,t,r){for(var i=0;i<this.dynamicProperties.length;i++){var s=this.dynamicProperties[i];s.uploadFunction(e,t,r,s.type===Ke.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},n.prototype.uploadStatic=function(e,t,r){for(var i=0;i<this.staticProperties.length;i++){var s=this.staticProperties[i];s.uploadFunction(e,t,r,s.type===Ke.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},n.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},n}(),aO=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,oO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,lO=function(n){Ob(e,n);function e(t){var r=n.call(this,t)||this;return r.shader=null,r.properties=null,r.tempMatrix=new er,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Ke.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=$i.from(oO,aO,{}),r.state=Eo.for2d(),r}return e.prototype.render=function(t){var r=t.children,i=t._maxSize,s=t._batchSize,o=this.renderer,u=r.length;if(u!==0){u>i&&!t.autoResize&&(u=i);var c=t._buffers;c||(c=t._buffers=this.generateBuffers(t));var v=r[0]._texture.baseTexture,_=v.alphaMode>0;this.state.blendMode=Sm(t.blendMode,_),o.state.set(this.state);var h=o.gl,d=t.worldTransform.copyTo(this.tempMatrix);d.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=mA(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,_),this.shader.uniforms.uSampler=v,this.renderer.shader.bind(this.shader);for(var m=!1,x=0,w=0;x<u;x+=s,w+=1){var T=u-x;T>s&&(T=s),w>=c.length&&c.push(this._generateOneMoreBuffer(t));var E=c[w];E.uploadDynamic(r,x,T);var I=t._bufferUpdateIDs[w]||0;m=m||E._updateID<I,m&&(E._updateID=t._updateID,E.uploadStatic(r,x,T)),o.geometry.bind(E.geometry),h.drawElements(h.TRIANGLES,T*6,h.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var r=[],i=t._maxSize,s=t._batchSize,o=t._properties,u=0;u<i;u+=s)r.push(new Ux(this.properties,o,s));return r},e.prototype._generateOneMoreBuffer=function(t){var r=t._batchSize,i=t._properties;return new Ux(this.properties,i,r)},e.prototype.uploadVertices=function(t,r,i,s,o,u){for(var c=0,v=0,_=0,h=0,d=0;d<i;++d){var m=t[r+d],x=m._texture,w=m.scale.x,T=m.scale.y,E=x.trim,I=x.orig;E?(v=E.x-m.anchor.x*I.width,c=v+E.width,h=E.y-m.anchor.y*I.height,_=h+E.height):(c=I.width*(1-m.anchor.x),v=I.width*-m.anchor.x,_=I.height*(1-m.anchor.y),h=I.height*-m.anchor.y),s[u]=v*w,s[u+1]=h*T,s[u+o]=c*w,s[u+o+1]=h*T,s[u+o*2]=c*w,s[u+o*2+1]=_*T,s[u+o*3]=v*w,s[u+o*3+1]=_*T,u+=o*4}},e.prototype.uploadPosition=function(t,r,i,s,o,u){for(var c=0;c<i;c++){var v=t[r+c].position;s[u]=v.x,s[u+1]=v.y,s[u+o]=v.x,s[u+o+1]=v.y,s[u+o*2]=v.x,s[u+o*2+1]=v.y,s[u+o*3]=v.x,s[u+o*3+1]=v.y,u+=o*4}},e.prototype.uploadRotation=function(t,r,i,s,o,u){for(var c=0;c<i;c++){var v=t[r+c].rotation;s[u]=v,s[u+o]=v,s[u+o*2]=v,s[u+o*3]=v,u+=o*4}},e.prototype.uploadUvs=function(t,r,i,s,o,u){for(var c=0;c<i;++c){var v=t[r+c]._texture._uvs;v?(s[u]=v.x0,s[u+1]=v.y0,s[u+o]=v.x1,s[u+o+1]=v.y1,s[u+o*2]=v.x2,s[u+o*2+1]=v.y2,s[u+o*3]=v.x3,s[u+o*3+1]=v.y3,u+=o*4):(s[u]=0,s[u+1]=0,s[u+o]=0,s[u+o+1]=0,s[u+o*2]=0,s[u+o*2+1]=0,s[u+o*3]=0,s[u+o*3+1]=0,u+=o*4)}},e.prototype.uploadTint=function(t,r,i,s,o,u){for(var c=0;c<i;++c){var v=t[r+c],_=v._texture.baseTexture.alphaMode>0,h=v.alpha,d=h<1&&_?uc(v._tintRGB,h):v._tintRGB+(h*255<<24);s[u]=d,s[u+o]=d,s[u+o*2]=d,s[u+o*3]=d,u+=o*4}},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:jt.RendererPlugin},e}(hc);/*!
 * @pixi/graphics - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var As;(function(n){n.MITER="miter",n.BEVEL="bevel",n.ROUND="round"})(As||(As={}));var ya;(function(n){n.BUTT="butt",n.ROUND="round",n.SQUARE="square"})(ya||(ya={}));var tc={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(n,e){if(e===void 0&&(e=20),!this.adaptive||!n||isNaN(n))return e;var t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},Rb=function(){function n(){this.color=16777215,this.alpha=1,this.texture=rt.WHITE,this.matrix=null,this.visible=!1,this.reset()}return n.prototype.clone=function(){var e=new n;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},n.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=rt.WHITE,this.matrix=null,this.visible=!1},n.prototype.destroy=function(){this.texture=null,this.matrix=null},n}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H_=function(n,e){return H_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},H_(n,e)};function Im(n,e){H_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Gx(n,e){var t,r;e===void 0&&(e=!1);var i=n.length;if(!(i<6)){for(var s=0,o=0,u=n[i-2],c=n[i-1];o<i;o+=2){var v=n[o],_=n[o+1];s+=(v-u)*(_+c),u=v,c=_}if(!e&&s>0||e&&s<=0)for(var h=i/2,o=h+h%2;o<i;o+=2){var d=i-o-2,m=i-o-1,x=o,w=o+1;t=[n[x],n[d]],n[d]=t[0],n[x]=t[1],r=[n[w],n[m]],n[m]=r[0],n[w]=r[1]}}}var Mb={build:function(n){n.points=n.shape.points.slice()},triangulate:function(n,e){var t=n.points,r=n.holes,i=e.points,s=e.indices;if(t.length>=6){Gx(t,!1);for(var o=[],u=0;u<r.length;u++){var c=r[u];Gx(c.points,!0),o.push(t.length/2),t=t.concat(c.points)}var v=K1(t,o,2);if(!v)return;for(var _=i.length/2,u=0;u<v.length;u+=3)s.push(v[u]+_),s.push(v[u+1]+_),s.push(v[u+2]+_);for(var u=0;u<t.length;u++)i.push(t[u])}}},Df={build:function(n){var e=n.points,t,r,i,s,o,u;if(n.type===jr.CIRC){var c=n.shape;t=c.x,r=c.y,o=u=c.radius,i=s=0}else if(n.type===jr.ELIP){var v=n.shape;t=v.x,r=v.y,o=v.width,u=v.height,i=s=0}else{var _=n.shape,h=_.width/2,d=_.height/2;t=_.x+h,r=_.y+d,o=u=Math.max(0,Math.min(_.radius,Math.min(h,d))),i=h-o,s=d-u}if(!(o>=0&&u>=0&&i>=0&&s>=0)){e.length=0;return}var m=Math.ceil(2.3*Math.sqrt(o+u)),x=m*8+(i?4:0)+(s?4:0);if(e.length=x,x!==0){if(m===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=r+s,e[2]=e[4]=t-i,e[5]=e[7]=r-s;return}var w=0,T=m*4+(i?2:0)+2,E=T,I=x;{var D=i+o,z=s,O=t+D,U=t-D,y=r+z;if(e[w++]=O,e[w++]=y,e[--T]=y,e[--T]=U,s){var te=r-z;e[E++]=U,e[E++]=te,e[--I]=te,e[--I]=O}}for(var F=1;F<m;F++){var W=Math.PI/2*(F/m),D=i+Math.cos(W)*o,z=s+Math.sin(W)*u,O=t+D,U=t-D,y=r+z,te=r-z;e[w++]=O,e[w++]=y,e[--T]=y,e[--T]=U,e[E++]=U,e[E++]=te,e[--I]=te,e[--I]=O}{var D=i,z=s+u,O=t+D,U=t-D,y=r+z,te=r-z;e[w++]=O,e[w++]=y,e[--I]=te,e[--I]=O,i&&(e[w++]=U,e[w++]=y,e[--I]=te,e[--I]=U)}}},triangulate:function(n,e){var t=n.points,r=e.points,i=e.indices;if(t.length!==0){var s=r.length/2,o=s,u,c;if(n.type!==jr.RREC){var v=n.shape;u=v.x,c=v.y}else{var _=n.shape;u=_.x+_.width/2,c=_.y+_.height/2}var h=n.matrix;r.push(n.matrix?h.a*u+h.c*c+h.tx:u,n.matrix?h.b*u+h.d*c+h.ty:c),s++,r.push(t[0],t[1]);for(var d=2;d<t.length;d+=2)r.push(t[d],t[d+1]),i.push(s++,o,s);i.push(o+1,o,s)}}},uO={build:function(n){var e=n.shape,t=e.x,r=e.y,i=e.width,s=e.height,o=n.points;o.length=0,o.push(t,r,t+i,r,t+i,r+s,t,r+s)},triangulate:function(n,e){var t=n.points,r=e.points,i=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function fl(n,e,t){var r=e-n;return n+r*t}function Qh(n,e,t,r,i,s,o){o===void 0&&(o=[]);for(var u=20,c=o,v=0,_=0,h=0,d=0,m=0,x=0,w=0,T=0;w<=u;++w)T=w/u,v=fl(n,t,T),_=fl(e,r,T),h=fl(t,i,T),d=fl(r,s,T),m=fl(v,h,T),x=fl(_,d,T),!(w===0&&c[c.length-2]===m&&c[c.length-1]===x)&&c.push(m,x);return c}var cO={build:function(n){if(ga.nextRoundedRectBehavior){Df.build(n);return}var e=n.shape,t=n.points,r=e.x,i=e.y,s=e.width,o=e.height,u=Math.max(0,Math.min(e.radius,Math.min(s,o)/2));t.length=0,u?(Qh(r,i+u,r,i,r+u,i,t),Qh(r+s-u,i,r+s,i,r+s,i+u,t),Qh(r+s,i+o-u,r+s,i+o,r+s-u,i+o,t),Qh(r+u,i+o,r,i+o,r,i+o-u,t)):t.push(r,i,r+s,i,r+s,i+o,r,i+o)},triangulate:function(n,e){if(ga.nextRoundedRectBehavior){Df.triangulate(n,e);return}for(var t=n.points,r=e.points,i=e.indices,s=r.length/2,o=K1(t,null,2),u=0,c=o.length;u<c;u+=3)i.push(o[u]+s),i.push(o[u+1]+s),i.push(o[u+2]+s);for(var u=0,c=t.length;u<c;u++)r.push(t[u],t[++u])}};function Hx(n,e,t,r,i,s,o,u){var c=n-t*i,v=e-r*i,_=n+t*s,h=e+r*s,d,m;o?(d=r,m=-t):(d=-r,m=t);var x=c+d,w=v+m,T=_+d,E=h+m;return u.push(x,w),u.push(T,E),2}function to(n,e,t,r,i,s,o,u){var c=t-n,v=r-e,_=Math.atan2(c,v),h=Math.atan2(i-n,s-e);u&&_<h?_+=Math.PI*2:!u&&_>h&&(h+=Math.PI*2);var d=_,m=h-_,x=Math.abs(m),w=Math.sqrt(c*c+v*v),T=(15*x*Math.sqrt(w)/Math.PI>>0)+1,E=m/T;if(d+=E,u){o.push(n,e),o.push(t,r);for(var I=1,D=d;I<T;I++,D+=E)o.push(n,e),o.push(n+Math.sin(D)*w,e+Math.cos(D)*w);o.push(n,e),o.push(i,s)}else{o.push(t,r),o.push(n,e);for(var I=1,D=d;I<T;I++,D+=E)o.push(n+Math.sin(D)*w,e+Math.cos(D)*w),o.push(n,e);o.push(i,s),o.push(n,e)}return T*2}function hO(n,e){var t=n.shape,r=n.points||t.points.slice(),i=e.closePointEps;if(r.length!==0){var s=n.lineStyle,o=new _t(r[0],r[1]),u=new _t(r[r.length-2],r[r.length-1]),c=t.type!==jr.POLY||t.closeStroke,v=Math.abs(o.x-u.x)<i&&Math.abs(o.y-u.y)<i;if(c){r=r.slice(),v&&(r.pop(),r.pop(),u.set(r[r.length-2],r[r.length-1]));var _=(o.x+u.x)*.5,h=(u.y+o.y)*.5;r.unshift(_,h),r.push(_,h)}var d=e.points,m=r.length/2,x=r.length,w=d.length/2,T=s.width/2,E=T*T,I=s.miterLimit*s.miterLimit,D=r[0],z=r[1],O=r[2],U=r[3],y=0,te=0,F=-(z-U),W=D-O,ne=0,ee=0,ue=Math.sqrt(F*F+W*W);F/=ue,W/=ue,F*=T,W*=T;var ye=s.alignment,K=(1-ye)*2,B=ye*2;c||(s.cap===ya.ROUND?x+=to(D-F*(K-B)*.5,z-W*(K-B)*.5,D-F*K,z-W*K,D+F*B,z+W*B,d,!0)+2:s.cap===ya.SQUARE&&(x+=Hx(D,z,F,W,K,B,!0,d))),d.push(D-F*K,z-W*K),d.push(D+F*B,z+W*B);for(var V=1;V<m-1;++V){D=r[(V-1)*2],z=r[(V-1)*2+1],O=r[V*2],U=r[V*2+1],y=r[(V+1)*2],te=r[(V+1)*2+1],F=-(z-U),W=D-O,ue=Math.sqrt(F*F+W*W),F/=ue,W/=ue,F*=T,W*=T,ne=-(U-te),ee=O-y,ue=Math.sqrt(ne*ne+ee*ee),ne/=ue,ee/=ue,ne*=T,ee*=T;var G=O-D,Y=z-U,q=O-y,L=te-U,k=G*q+Y*L,X=Y*q-L*G,se=X<0;if(Math.abs(X)<.001*Math.abs(k)){d.push(O-F*K,U-W*K),d.push(O+F*B,U+W*B),k>=0&&(s.join===As.ROUND?x+=to(O,U,O-F*K,U-W*K,O-ne*K,U-ee*K,d,!1)+4:x+=2,d.push(O-ne*B,U-ee*B),d.push(O+ne*K,U+ee*K));continue}var fe=(-F+D)*(-W+U)-(-F+O)*(-W+z),be=(-ne+y)*(-ee+U)-(-ne+O)*(-ee+te),Ee=(G*be-q*fe)/X,Ae=(L*fe-Y*be)/X,Re=(Ee-O)*(Ee-O)+(Ae-U)*(Ae-U),Se=O+(Ee-O)*K,Ue=U+(Ae-U)*K,je=O-(Ee-O)*B,et=U-(Ae-U)*B,Xe=Math.min(G*G+Y*Y,q*q+L*L),ze=se?K:B,Be=Xe+ze*ze*E,tt=Re<=Be;tt?s.join===As.BEVEL||Re/E>I?(se?(d.push(Se,Ue),d.push(O+F*B,U+W*B),d.push(Se,Ue),d.push(O+ne*B,U+ee*B)):(d.push(O-F*K,U-W*K),d.push(je,et),d.push(O-ne*K,U-ee*K),d.push(je,et)),x+=2):s.join===As.ROUND?se?(d.push(Se,Ue),d.push(O+F*B,U+W*B),x+=to(O,U,O+F*B,U+W*B,O+ne*B,U+ee*B,d,!0)+4,d.push(Se,Ue),d.push(O+ne*B,U+ee*B)):(d.push(O-F*K,U-W*K),d.push(je,et),x+=to(O,U,O-F*K,U-W*K,O-ne*K,U-ee*K,d,!1)+4,d.push(O-ne*K,U-ee*K),d.push(je,et)):(d.push(Se,Ue),d.push(je,et)):(d.push(O-F*K,U-W*K),d.push(O+F*B,U+W*B),s.join===As.ROUND?se?x+=to(O,U,O+F*B,U+W*B,O+ne*B,U+ee*B,d,!0)+2:x+=to(O,U,O-F*K,U-W*K,O-ne*K,U-ee*K,d,!1)+2:s.join===As.MITER&&Re/E<=I&&(se?(d.push(je,et),d.push(je,et)):(d.push(Se,Ue),d.push(Se,Ue)),x+=2),d.push(O-ne*K,U-ee*K),d.push(O+ne*B,U+ee*B),x+=2)}D=r[(m-2)*2],z=r[(m-2)*2+1],O=r[(m-1)*2],U=r[(m-1)*2+1],F=-(z-U),W=D-O,ue=Math.sqrt(F*F+W*W),F/=ue,W/=ue,F*=T,W*=T,d.push(O-F*K,U-W*K),d.push(O+F*B,U+W*B),c||(s.cap===ya.ROUND?x+=to(O-F*(K-B)*.5,U-W*(K-B)*.5,O-F*K,U-W*K,O+F*B,U+W*B,d,!1)+2:s.cap===ya.SQUARE&&(x+=Hx(O,U,F,W,K,B,!1,d)));for(var bt=e.indices,Tr=tc.epsilon*tc.epsilon,V=w;V<x+w-2;++V)D=d[V*2],z=d[V*2+1],O=d[(V+1)*2],U=d[(V+1)*2+1],y=d[(V+2)*2],te=d[(V+2)*2+1],!(Math.abs(D*(U-te)+O*(te-z)+y*(z-U))<Tr)&&bt.push(V,V+1,V+2)}}function fO(n,e){var t=0,r=n.shape,i=n.points||r.points,s=r.type!==jr.POLY||r.closeStroke;if(i.length!==0){var o=e.points,u=e.indices,c=i.length/2,v=o.length/2,_=v;for(o.push(i[0],i[1]),t=1;t<c;t++)o.push(i[t*2],i[t*2+1]),u.push(_,_+1),_++;s&&u.push(_,v)}}function zx(n,e){n.lineStyle.native?fO(n,e):hO(n,e)}var Xx=function(){function n(){}return n.curveTo=function(e,t,r,i,s,o){var u=o[o.length-2],c=o[o.length-1],v=c-t,_=u-e,h=i-t,d=r-e,m=Math.abs(v*d-_*h);if(m<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;var x=v*v+_*_,w=h*h+d*d,T=v*h+_*d,E=s*Math.sqrt(x)/m,I=s*Math.sqrt(w)/m,D=E*T/x,z=I*T/w,O=E*d+I*_,U=E*h+I*v,y=_*(I+D),te=v*(I+D),F=d*(E+z),W=h*(E+z),ne=Math.atan2(te-U,y-O),ee=Math.atan2(W-U,F-O);return{cx:O+e,cy:U+t,radius:s,startAngle:ne,endAngle:ee,anticlockwise:_*h>d*v}},n.arc=function(e,t,r,i,s,o,u,c,v){for(var _=u-o,h=tc._segmentsCount(Math.abs(_)*s,Math.ceil(Math.abs(_)/Of)*40),d=_/(h*2),m=d*2,x=Math.cos(d),w=Math.sin(d),T=h-1,E=T%1/T,I=0;I<=T;++I){var D=I+E*I,z=d+o+m*D,O=Math.cos(z),U=-Math.sin(z);v.push((x*O+w*U)*s+r,(x*-U+w*O)*s+i)}},n}(),dO=function(){function n(){}return n.curveLength=function(e,t,r,i,s,o,u,c){for(var v=10,_=0,h=0,d=0,m=0,x=0,w=0,T=0,E=0,I=0,D=0,z=0,O=e,U=t,y=1;y<=v;++y)h=y/v,d=h*h,m=d*h,x=1-h,w=x*x,T=w*x,E=T*e+3*w*h*r+3*x*d*s+m*u,I=T*t+3*w*h*i+3*x*d*o+m*c,D=O-E,z=U-I,O=E,U=I,_+=Math.sqrt(D*D+z*z);return _},n.curveTo=function(e,t,r,i,s,o,u){var c=u[u.length-2],v=u[u.length-1];u.length-=2;var _=tc._segmentsCount(n.curveLength(c,v,e,t,r,i,s,o)),h=0,d=0,m=0,x=0,w=0;u.push(c,v);for(var T=1,E=0;T<=_;++T)E=T/_,h=1-E,d=h*h,m=d*h,x=E*E,w=x*E,u.push(m*c+3*d*E*e+3*h*x*r+w*s,m*v+3*d*E*t+3*h*x*i+w*o)},n}(),pO=function(){function n(){}return n.curveLength=function(e,t,r,i,s,o){var u=e-2*r+s,c=t-2*i+o,v=2*r-2*e,_=2*i-2*t,h=4*(u*u+c*c),d=4*(u*v+c*_),m=v*v+_*_,x=2*Math.sqrt(h+d+m),w=Math.sqrt(h),T=2*h*w,E=2*Math.sqrt(m),I=d/w;return(T*x+w*d*(x-E)+(4*m*h-d*d)*Math.log((2*w+I+x)/(I+E)))/(4*T)},n.curveTo=function(e,t,r,i,s){for(var o=s[s.length-2],u=s[s.length-1],c=tc._segmentsCount(n.curveLength(o,u,e,t,r,i)),v=0,_=0,h=1;h<=c;++h){var d=h/c;v=o+(e-o)*d,_=u+(t-u)*d,s.push(v+(e+(r-e)*d-v)*d,_+(t+(i-t)*d-_)*d)}},n}(),vO=function(){function n(){this.reset()}return n.prototype.begin=function(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r},n.prototype.end=function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start},n.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},n}(),ro,zv=(ro={},ro[jr.POLY]=Mb,ro[jr.CIRC]=Df,ro[jr.ELIP]=Df,ro[jr.RECT]=uO,ro[jr.RREC]=cO,ro),Vx=[],Zh=[],qx=function(){function n(e,t,r,i){t===void 0&&(t=null),r===void 0&&(r=null),i===void 0&&(i=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=i,this.type=e.type}return n.prototype.clone=function(){return new n(this.shape,this.fillStyle,this.lineStyle,this.matrix)},n.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},n}(),dl=new _t,_O=function(n){Im(e,n);function e(){var t=n.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new Rf,t.boundsDirty=-1,t}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Zh.push(this.drawCalls[t]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var r=this.batches[t];r.reset(),Vx.push(r)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,r,i,s){r===void 0&&(r=null),i===void 0&&(i=null),s===void 0&&(s=null);var o=new qx(t,r,i,s);return this.graphicsData.push(o),this.dirty++,this},e.prototype.drawHole=function(t,r){if(r===void 0&&(r=null),!this.graphicsData.length)return null;var i=new qx(t,null,null,r),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){n.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var r=this.graphicsData,i=0;i<r.length;++i){var s=r[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,dl):dl.copyFrom(t),s.shape.contains(dl.x,dl.y))){var o=!1;if(s.holes)for(var u=0;u<s.holes.length;u++){var c=s.holes[u];if(c.shape.contains(dl.x,dl.y)){o=!0;break}}if(!o)return!0}}return!1},e.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,r=this.graphicsData,i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(var o=this.shapeIndex;o<r.length;o++){this.shapeIndex++;var u=r[o],c=u.fillStyle,v=u.lineStyle,_=zv[u.type];_.build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(c.visible||v.visible)&&this.processHoles(u.holes);for(var h=0;h<2;h++){var d=h===0?c:v;if(d.visible){var m=d.texture.baseTexture,x=this.indices.length,w=this.points.length/2;m.wrapMode=Bn.REPEAT,h===0?this.processFill(u):this.processLine(u);var T=this.points.length/2-w;T!==0&&(i&&!this._compareStyles(s,d)&&(i.end(x,w),i=null),i||(i=Vx.pop()||new vO,i.begin(d,x,w),this.batches.push(i),s=d),this.addUvs(this.points,t,d.texture,w,T,d.matrix))}}}var E=this.indices.length,I=this.points.length/2;if(i&&i.end(E,I),this.batches.length===0){this.batchable=!0;return}var D=I>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&D===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=D?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(t,r){return!(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||!!t.native!=!!r.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,r=this.graphicsData.length;t<r;t++){var i=this.graphicsData[t],s=i.fillStyle,o=i.lineStyle;if(s&&!s.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,r=0,i=t.length;r<i;r++)for(var s=t[r],o=0;o<s.size;o++){var u=s.start+o;this.indicesUint16[u]=this.indicesUint16[u]-s.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var t=++Ct._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Zh.push(this.drawCalls[r]);this.drawCalls.length=0;var i=this.colors,s=this.textureIds,o=Zh.pop();o||(o=new k_,o.texArray=new D_),o.texArray.count=0,o.start=0,o.size=0,o.type=Jn.TRIANGLES;var u=0,c=null,v=0,_=!1,h=Jn.TRIANGLES,d=0;this.drawCalls.push(o);for(var r=0;r<this.batches.length;r++){var m=this.batches[r],x=8,w=m.style,T=w.texture.baseTexture;_!==!!w.native&&(_=!!w.native,h=_?Jn.LINES:Jn.TRIANGLES,c=null,u=x,t++),c!==T&&(c=T,T._batchEnabled!==t&&(u===x&&(t++,u=0,o.size>0&&(o=Zh.pop(),o||(o=new k_,o.texArray=new D_),this.drawCalls.push(o)),o.start=d,o.size=0,o.texArray.count=0,o.type=h),T.touched=1,T._batchEnabled=t,T._batchLocation=u,T.wrapMode=Bn.REPEAT,o.texArray.elements[o.texArray.count++]=T,u++)),o.size+=m.size,d+=m.size,v=T._batchLocation,this.addColors(i,w.color,w.alpha,m.attribSize,m.attribStart),this.addTextureIds(s,v,m.attribSize,m.attribStart)}Ct._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,r=this.uvs,i=this.colors,s=this.textureIds,o=new ArrayBuffer(t.length*3*4),u=new Float32Array(o),c=new Uint32Array(o),v=0,_=0;_<t.length/2;_++)u[v++]=t[_*2],u[v++]=t[_*2+1],u[v++]=r[_*2],u[v++]=r[_*2+1],c[v++]=i[_],u[v++]=s[_];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){if(t.holes.length)Mb.triangulate(t,this);else{var r=zv[t.type];r.triangulate(t,this)}},e.prototype.processLine=function(t){zx(t,this);for(var r=0;r<t.holes.length;r++)zx(t.holes[r],this)},e.prototype.processHoles=function(t){for(var r=0;r<t.length;r++){var i=t[r],s=zv[i.type];s.build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,r){for(var i=0;i<t.length/2;i++){var s=t[i*2],o=t[i*2+1];t[i*2]=r.a*s+r.c*o+r.tx,t[i*2+1]=r.b*s+r.d*o+r.ty}},e.prototype.addColors=function(t,r,i,s,o){o===void 0&&(o=0);var u=(r>>16)+(r&65280)+((r&255)<<16),c=uc(u,i);t.length=Math.max(t.length,o+s);for(var v=0;v<s;v++)t[o+v]=c},e.prototype.addTextureIds=function(t,r,i,s){s===void 0&&(s=0),t.length=Math.max(t.length,s+i);for(var o=0;o<i;o++)t[s+o]=r},e.prototype.addUvs=function(t,r,i,s,o,u){u===void 0&&(u=null);for(var c=0,v=r.length,_=i.frame;c<o;){var h=t[(s+c)*2],d=t[(s+c)*2+1];if(u){var m=u.a*h+u.c*d+u.tx;d=u.b*h+u.d*d+u.ty,h=m}c++,r.push(h/_.width,d/_.height)}var x=i.baseTexture;(_.width<x.width||_.height<x.height)&&this.adjustUvs(r,i,v,o)},e.prototype.adjustUvs=function(t,r,i,s){for(var o=r.baseTexture,u=1e-6,c=i+s*2,v=r.frame,_=v.width/o.width,h=v.height/o.height,d=v.x/v.width,m=v.y/v.height,x=Math.floor(t[i]+u),w=Math.floor(t[i+1]+u),T=i+2;T<c;T+=2)x=Math.min(x,Math.floor(t[T]+u)),w=Math.min(w,Math.floor(t[T+1]+u));d-=x,m-=w;for(var T=i;T<c;T+=2)t[T]=(t[T]+d)*_,t[T+1]=(t[T+1]+m)*h},e.BATCHABLE_SIZE=100,e}(Eb),mO=function(n){Im(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=ya.BUTT,t.join=As.MITER,t.miterLimit=10,t}return e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){n.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(Rb),yO=new Float32Array(3),Xv={},ga=function(n){Im(e,n);function e(t){t===void 0&&(t=null);var r=n.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new Rb,r._lineStyle=new mO,r._matrix=null,r._holeMode=!1,r.state=Eo.for2d(),r._geometry=t||new _O,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=lt.NORMAL,r}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,r,i,s,o){return t===void 0&&(t=null),r===void 0&&(r=0),i===void 0&&(i=1),s===void 0&&(s=.5),o===void 0&&(o=!1),typeof t=="number"&&(t={width:t,color:r,alpha:i,alignment:s,native:o}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:rt.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ya.BUTT,join:As.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new hf,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new hf,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this},e.prototype.lineTo=function(t,r){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,s=i[i.length-2],o=i[i.length-1];return(s!==t||o!==r)&&i.push(t,r),this},e.prototype._initCurve=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,r]):this.moveTo(t,r)},e.prototype.quadraticCurveTo=function(t,r,i,s){this._initCurve();var o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),pO.curveTo(t,r,i,s,o),this},e.prototype.bezierCurveTo=function(t,r,i,s,o,u){return this._initCurve(),dO.curveTo(t,r,i,s,o,u,this.currentPath.points),this},e.prototype.arcTo=function(t,r,i,s,o){this._initCurve(t,r);var u=this.currentPath.points,c=Xx.curveTo(t,r,i,s,o,u);if(c){var v=c.cx,_=c.cy,h=c.radius,d=c.startAngle,m=c.endAngle,x=c.anticlockwise;this.arc(v,_,h,d,m,x)}return this},e.prototype.arc=function(t,r,i,s,o,u){if(u===void 0&&(u=!1),s===o)return this;!u&&o<=s?o+=Of:u&&s<=o&&(s+=Of);var c=o-s;if(c===0)return this;var v=t+Math.cos(s)*i,_=r+Math.sin(s)*i,h=this._geometry.closePointEps,d=this.currentPath?this.currentPath.points:null;if(d){var m=Math.abs(d[d.length-2]-v),x=Math.abs(d[d.length-1]-_);m<h&&x<h||d.push(v,_)}else this.moveTo(v,_),d=this.currentPath.points;return Xx.arc(v,_,t,r,i,s,o,u,d),this},e.prototype.beginFill=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=1),this.beginTextureFill({texture:rt.WHITE,color:t,alpha:r})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:rt.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,r,i,s){return this.drawShape(new pt(t,r,i,s))},e.prototype.drawRoundedRect=function(t,r,i,s,o){return this.drawShape(new CA(t,r,i,s,o))},e.prototype.drawCircle=function(t,r,i){return this.drawShape(new SA(t,r,i))},e.prototype.drawEllipse=function(t,r,i,s){return this.drawShape(new EA(t,r,i,s))},e.prototype.drawPolygon=function(){for(var t=arguments,r=[],i=0;i<arguments.length;i++)r[i]=t[i];var s,o=!0,u=r[0];u.points?(o=u.closeStroke,s=u.points):Array.isArray(r[0])?s=r[0]:s=r;var c=new hf(s);return c.closeStroke=o,this.drawShape(c),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===jr.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,r=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var s=0;s<i;s++){var o=t.batches[s],u=o.style.color,c=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),v=new Float32Array(t.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),_=new Uint16Array(t.indicesUint16.buffer,o.start*2,o.size),h={vertexData:c,blendMode:r,indices:_,uvs:v,_batchRGB:Il(u),_tintRGB:u,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[s]=h}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,i=this.batches.length;r<i;r++){var s=this.batches[r];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}},e.prototype._renderDirect=function(t){var r=this._resolveDirectShader(t),i=this._geometry,s=this.tint,o=this.worldAlpha,u=r.uniforms,c=i.drawCalls;u.translationMatrix=this.transform.worldTransform,u.tint[0]=(s>>16&255)/255*o,u.tint[1]=(s>>8&255)/255*o,u.tint[2]=(s&255)/255*o,u.tint[3]=o,t.shader.bind(r),t.geometry.bind(i,r),t.state.set(this.state);for(var v=0,_=c.length;v<_;v++)this._renderDrawCallDirect(t,i.drawCalls[v])},e.prototype._renderDrawCallDirect=function(t,r){for(var i=r.texArray,s=r.type,o=r.size,u=r.start,c=i.count,v=0;v<c;v++)t.texture.bind(i.elements[v],v);t.geometry.draw(s,o,u)},e.prototype._resolveDirectShader=function(t){var r=this.shader,i=this.pluginName;if(!r){if(!Xv[i]){for(var s=t.plugins[i].MAX_TEXTURES,o=new Int32Array(s),u=0;u<s;u++)o[u]=u;var c={tint:new Float32Array([1,1,1,1]),translationMatrix:new er,default:vo.from({uSamplers:o},!0)},v=t.plugins[i]._shader.program;Xv[i]=new $i(v,c)}r=Xv[i]}return r},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var r=t.bounds,i=r.minX,s=r.minY,o=r.maxX,u=r.maxY;this._bounds.addFrame(this.transform,i,s,o,u)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Il(this.tint,yO),r=0;r<this.batches.length;r++){var i=this.batches[r],s=i._batchRGB,o=t[0]*s[0]*255,u=t[1]*s[1]*255,c=t[2]*s[2]*255,v=(o<<16)+(u<<8)+(c|0);i._tintRGB=(v>>16)+(v&65280)+((v&255)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var r=this.transform.worldTransform,i=r.a,s=r.b,o=r.c,u=r.d,c=r.tx,v=r.ty,_=this._geometry.points,h=this.vertexData,d=0,m=0;m<_.length;m+=2){var x=_[m],w=_[m+1];h[d++]=i*x+o*w+c,h[d++]=u*w+s*x+v}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,n.prototype.destroy.call(this,t)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new _t,e}(mr);/*!
 * @pixi/sprite - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var z_=function(n,e){return z_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},z_(n,e)};function gO(n,e){z_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Eu=new _t,xO=new Uint16Array([0,1,2,0,2,3]),Or=function(n){gO(e,n);function e(t){var r=n.call(this)||this;return r._anchor=new ma(r._onAnchorUpdate,r,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=lt.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=t||rt.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=xO,r.pluginName="batch",r.isSprite=!0,r._roundPixels=He.ROUND_PIXELS,r}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=gl(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=gl(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===t._updateID)){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var r=this.transform.worldTransform,i=r.a,s=r.b,o=r.c,u=r.d,c=r.tx,v=r.ty,_=this.vertexData,h=t.trim,d=t.orig,m=this._anchor,x=0,w=0,T=0,E=0;if(h?(w=h.x-m._x*d.width,x=w+h.width,E=h.y-m._y*d.height,T=E+h.height):(w=-m._x*d.width,x=w+d.width,E=-m._y*d.height,T=E+d.height),_[0]=i*w+o*E+c,_[1]=u*E+s*w+v,_[2]=i*x+o*E+c,_[3]=u*E+s*x+v,_[4]=i*x+o*T+c,_[5]=u*T+s*x+v,_[6]=i*w+o*T+c,_[7]=u*T+s*w+v,this._roundPixels)for(var I=He.RESOLUTION,D=0;D<_.length;++D)_[D]=Math.round((_[D]*I|0)/I)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,r=this.vertexTrimmedData,i=t.orig,s=this._anchor,o=this.transform.worldTransform,u=o.a,c=o.b,v=o.c,_=o.d,h=o.tx,d=o.ty,m=-s._x*i.width,x=m+i.width,w=-s._y*i.height,T=w+i.height;r[0]=u*m+v*w+h,r[1]=_*w+c*m+d,r[2]=u*x+v*w+h,r[3]=_*w+c*x+d,r[4]=u*x+v*T+h,r[5]=_*T+c*x+d,r[6]=u*m+v*T+h,r[7]=_*T+c*m+d},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Rf),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Eu);var r=this._texture.orig.width,i=this._texture.orig.height,s=-r*this.anchor.x,o=0;return Eu.x>=s&&Eu.x<s+r&&(o=-i*this.anchor.y,Eu.y>=o&&Eu.y<o+i)},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r=typeof t=="boolean"?t:t&&t.texture;if(r){var i=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,r){var i=t instanceof rt?t:rt.from(t,r);return new e(i)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var r=gl(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var r=gl(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||rt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(mr);/*!
 * @pixi/text - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var X_=function(n,e){return X_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},X_(n,e)};function bO(n,e){X_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var rc;(function(n){n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(rc||(rc={}));var Vv={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:rc.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},wO=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ol=function(){function n(e){this.styleID=0,this.reset(),Wv(this,e,e)}return n.prototype.clone=function(){var e={};return Wv(e,this,Vv),new n(e)},n.prototype.reset=function(){Wv(this,Vv,Vv)},Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var t=qv(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fill},set:function(e){var t=qv(e);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){TO(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var t=qv(e);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),n.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var i=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&wO.indexOf(i)<0&&(i='"'+i+'"'),t[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},n}();function Wx(n){return typeof n=="number"?ob(n):(typeof n=="string"&&n.indexOf("0x")===0&&(n=n.replace("0x","#")),n)}function qv(n){if(Array.isArray(n)){for(var e=0;e<n.length;++e)n[e]=Wx(n[e]);return n}else return Wx(n)}function TO(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(var t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}function Wv(n,e,t){for(var r in t)Array.isArray(e[r])?n[r]=e[r].slice():n[r]=e[r]}var Jh={willReadFrequently:!0},Qi=function(){function n(e,t,r,i,s,o,u,c,v){this.text=e,this.style=t,this.width=r,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=u,this.maxLineWidth=c,this.fontProperties=v}return n.measureText=function(e,t,r,i){i===void 0&&(i=n._canvas),r=r??t.wordWrap;var s=t.toFontString(),o=n.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);var u=i.getContext("2d",Jh);u.font=s;for(var c=r?n.wordWrap(e,t,i):e,v=c.split(/(?:\r\n|\r|\n)/),_=new Array(v.length),h=0,d=0;d<v.length;d++){var m=u.measureText(v[d]).width+(v[d].length-1)*t.letterSpacing;_[d]=m,h=Math.max(h,m)}var x=h+t.strokeThickness;t.dropShadow&&(x+=t.dropShadowDistance);var w=t.lineHeight||o.fontSize+t.strokeThickness,T=Math.max(w,o.fontSize+t.strokeThickness)+(v.length-1)*(w+t.leading);return t.dropShadow&&(T+=t.dropShadowDistance),new n(e,t,x,T,v,_,w+t.leading,h,o)},n.wordWrap=function(e,t,r){r===void 0&&(r=n._canvas);for(var i=r.getContext("2d",Jh),s=0,o="",u="",c=Object.create(null),v=t.letterSpacing,_=t.whiteSpace,h=n.collapseSpaces(_),d=n.collapseNewlines(_),m=!h,x=t.wordWrapWidth+v,w=n.tokenize(e),T=0;T<w.length;T++){var E=w[T];if(n.isNewline(E)){if(!d){u+=n.addLine(o),m=!h,o="",s=0;continue}E=" "}if(h){var I=n.isBreakingSpace(E),D=n.isBreakingSpace(o[o.length-1]);if(I&&D)continue}var z=n.getFromCache(E,v,c,i);if(z>x)if(o!==""&&(u+=n.addLine(o),o="",s=0),n.canBreakWords(E,t.breakWords))for(var O=n.wordWrapSplit(E),U=0;U<O.length;U++){for(var y=O[U],te=1;O[U+te];){var F=O[U+te],W=y[y.length-1];if(!n.canBreakChars(W,F,E,U,t.breakWords))y+=F;else break;te++}U+=y.length-1;var ne=n.getFromCache(y,v,c,i);ne+s>x&&(u+=n.addLine(o),m=!1,o="",s=0),o+=y,s+=ne}else{o.length>0&&(u+=n.addLine(o),o="",s=0);var ee=T===w.length-1;u+=n.addLine(E,!ee),m=!1,o="",s=0}else z+s>x&&(m=!1,u+=n.addLine(o),o="",s=0),(o.length>0||!n.isBreakingSpace(E)||m)&&(o+=E,s+=z)}return u+=n.addLine(o,!1),u},n.addLine=function(e,t){return t===void 0&&(t=!0),e=n.trimRight(e),e=t?e+`
`:e,e},n.getFromCache=function(e,t,r,i){var s=r[e];if(typeof s!="number"){var o=e.length*t;s=i.measureText(e).width+o,r[e]=s}return s},n.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},n.collapseNewlines=function(e){return e==="normal"},n.trimRight=function(e){if(typeof e!="string")return"";for(var t=e.length-1;t>=0;t--){var r=e[t];if(!n.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},n.isNewline=function(e){return typeof e!="string"?!1:n._newlines.indexOf(e.charCodeAt(0))>=0},n.isBreakingSpace=function(e,t){return typeof e!="string"?!1:n._breakingSpaces.indexOf(e.charCodeAt(0))>=0},n.tokenize=function(e){var t=[],r="";if(typeof e!="string")return t;for(var i=0;i<e.length;i++){var s=e[i],o=e[i+1];if(n.isBreakingSpace(s,o)||n.isNewline(s)){r!==""&&(t.push(r),r=""),t.push(s);continue}r+=s}return r!==""&&t.push(r),t},n.canBreakWords=function(e,t){return t},n.canBreakChars=function(e,t,r,i,s){return!0},n.wordWrapSplit=function(e){return e.split("")},n.measureFont=function(e){if(n._fonts[e])return n._fonts[e];var t={ascent:0,descent:0,fontSize:0},r=n._canvas,i=n._context;i.font=e;var s=n.METRICS_STRING+n.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width),u=Math.ceil(i.measureText(n.BASELINE_SYMBOL).width),c=Math.ceil(n.HEIGHT_MULTIPLIER*u);u=u*n.BASELINE_MULTIPLIER|0,r.width=o,r.height=c,i.fillStyle="#f00",i.fillRect(0,0,o,c),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,u);var v=i.getImageData(0,0,o,c).data,_=v.length,h=o*4,d=0,m=0,x=!1;for(d=0;d<u;++d){for(var w=0;w<h;w+=4)if(v[m+w]!==255){x=!0;break}if(!x)m+=h;else break}for(t.ascent=u-d,m=_-h,x=!1,d=c;d>u;--d){for(var w=0;w<h;w+=4)if(v[m+w]!==255){x=!0;break}if(!x)m-=h;else break}return t.descent=d-u,t.fontSize=t.ascent+t.descent,n._fonts[e]=t,t},n.clearMetrics=function(e){e===void 0&&(e=""),e?delete n._fonts[e]:n._fonts={}},Object.defineProperty(n,"_canvas",{get:function(){if(!n.__canvas){var e=void 0;try{var t=new OffscreenCanvas(0,0),r=t.getContext("2d",Jh);if(r&&r.measureText)return n.__canvas=t,t;e=He.ADAPTER.createCanvas()}catch{e=He.ADAPTER.createCanvas()}e.width=e.height=10,n.__canvas=e}return n.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(n,"_context",{get:function(){return n.__context||(n.__context=n._canvas.getContext("2d",Jh)),n.__context},enumerable:!1,configurable:!0}),n}();Qi._fonts={};Qi.METRICS_STRING="|q";Qi.BASELINE_SYMBOL="M";Qi.BASELINE_MULTIPLIER=1.4;Qi.HEIGHT_MULTIPLIER=2;Qi._newlines=[10,13];Qi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var SO={texture:!0,children:!1,baseTexture:!0},Fl=function(n){bO(e,n);function e(t,r,i){var s=this,o=!1;i||(i=He.ADAPTER.createCanvas(),o=!0),i.width=3,i.height=3;var u=rt.from(i);return u.orig=new pt,u.trim=new pt,s=n.call(this,u)||this,s._ownCanvas=o,s.canvas=i,s.context=i.getContext("2d",{willReadFrequently:!0}),s._resolution=He.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=t,s.style=r,s.localStyleID=-1,s}return e.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!(!this.dirty&&t)){this._font=this._style.toFontString();var i=this.context,s=Qi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=s.width,u=s.height,c=s.lines,v=s.lineHeight,_=s.lineWidths,h=s.maxLineWidth,d=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,u)+r.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=r.strokeThickness,i.textBaseline=r.textBaseline,i.lineJoin=r.lineJoin,i.miterLimit=r.miterLimit;for(var m,x,w=r.dropShadow?2:1,T=0;T<w;++T){var E=r.dropShadow&&T===0,I=E?Math.ceil(Math.max(1,u)+r.padding*2):0,D=I*this._resolution;if(E){i.fillStyle="black",i.strokeStyle="black";var z=r.dropShadowColor,O=Il(typeof z=="number"?z:lb(z)),U=r.dropShadowBlur*this._resolution,y=r.dropShadowDistance*this._resolution;i.shadowColor="rgba("+O[0]*255+","+O[1]*255+","+O[2]*255+","+r.dropShadowAlpha+")",i.shadowBlur=U,i.shadowOffsetX=Math.cos(r.dropShadowAngle)*y,i.shadowOffsetY=Math.sin(r.dropShadowAngle)*y+D}else i.fillStyle=this._generateFillStyle(r,c,s),i.strokeStyle=r.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var te=(v-d.fontSize)/2;(!e.nextLineHeightBehavior||v-d.fontSize<0)&&(te=0);for(var F=0;F<c.length;F++)m=r.strokeThickness/2,x=r.strokeThickness/2+F*v+d.ascent+te,r.align==="right"?m+=h-_[F]:r.align==="center"&&(m+=(h-_[F])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(c[F],m+r.padding,x+r.padding-I,!0),r.fill&&this.drawLetterSpacing(c[F],m+r.padding,x+r.padding-I)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,r,i,s){s===void 0&&(s=!1);var o=this._style,u=o.letterSpacing,c=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(u===0||c){c&&(this.context.letterSpacing=u,this.context.textLetterSpacing=u),s?this.context.strokeText(t,r,i):this.context.fillText(t,r,i);return}for(var v=r,_=Array.from?Array.from(t):t.split(""),h=this.context.measureText(t).width,d=0,m=0;m<_.length;++m){var x=_[m];s?this.context.strokeText(x,v,i):this.context.fillText(x,v,i);for(var w="",T=m+1;T<_.length;++T)w+=_[T];d=this.context.measureText(w).width,v+=h-d+u,h=d}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var r=xA(t);r.data&&(t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0))}var i=this._texture,s=this._style,o=s.trim?0:s.padding,u=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-o*2,i.orig.height=i._frame.height-o*2,this._onTextureUpdate(),u.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this.dirty=!1},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),n.prototype._render.call(this,t)},e.prototype.updateTransform=function(){this.updateText(!0),n.prototype.updateTransform.call(this)},e.prototype.getBounds=function(t,r){return this.updateText(!0),this._textureID===-1&&(t=!1),n.prototype.getBounds.call(this,t,r)},e.prototype.getLocalBounds=function(t){return this.updateText(!0),n.prototype.getLocalBounds.call(this,t)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,r,i){var s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var o,u=t.dropShadow?t.dropShadowDistance:0,c=t.padding||0,v=this.canvas.width/this._resolution-u-c*2,_=this.canvas.height/this._resolution-u-c*2,h=s.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var m=h.length+1,x=1;x<m;++x)d.push(x/m);if(h.unshift(s[0]),d.unshift(0),h.push(s[s.length-1]),d.push(1),t.fillGradientType===rc.LINEAR_VERTICAL){o=this.context.createLinearGradient(v/2,c,v/2,_+c);for(var w=i.fontProperties.fontSize+t.strokeThickness,x=0;x<r.length;x++){var T=i.lineHeight*(x-1)+w,E=i.lineHeight*x,I=E;x>0&&T>E&&(I=(E+T)/2);var D=E+w,z=i.lineHeight*(x+1),O=D;x+1<r.length&&z<D&&(O=(D+z)/2);for(var U=(O-I)/_,y=0;y<h.length;y++){var te=0;typeof d[y]=="number"?te=d[y]:te=y/h.length;var F=Math.min(1,Math.max(0,I/_+te*U));F=Number(F.toFixed(5)),o.addColorStop(F,h[y])}}}else{o=this.context.createLinearGradient(c,_/2,v+c,_/2);for(var W=h.length+1,ne=1,x=0;x<h.length;x++){var ee=void 0;typeof d[x]=="number"?ee=d[x]:ee=ne/W,o.addColorStop(ee,h[x]),ne++}}return o},e.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},SO,t),n.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var r=gl(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var r=gl(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},t instanceof Ol?this._style=t:this._style=new Ol(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Or);/*!
 * @pixi/prepare - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */He.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V_=function(n,e){return V_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},V_(n,e)};function EO(n,e){V_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var CO=function(){function n(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},n}();function AO(n,e){var t=!1;if(n&&n._textures&&n._textures.length){for(var r=0;r<n._textures.length;r++)if(n._textures[r]instanceof rt){var i=n._textures[r].baseTexture;e.indexOf(i)===-1&&(e.push(i),t=!0)}}return t}function PO(n,e){if(n.baseTexture instanceof Ct){var t=n.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function IO(n,e){if(n._texture&&n._texture instanceof rt){var t=n._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function OO(n,e){return e instanceof Fl?(e.updateText(!0),!0):!1}function RO(n,e){if(e instanceof Ol){var t=e.toFontString();return Qi.measureFont(t),!0}return!1}function MO(n,e){if(n instanceof Fl){e.indexOf(n.style)===-1&&e.push(n.style),e.indexOf(n)===-1&&e.push(n);var t=n._texture.baseTexture;return e.indexOf(t)===-1&&e.push(t),!0}return!1}function kO(n,e){return n instanceof Ol?(e.indexOf(n)===-1&&e.push(n),!0):!1}var DO=function(){function n(e){var t=this;this.limiter=new CO(He.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(MO),this.registerFindHook(kO),this.registerFindHook(AO),this.registerFindHook(PO),this.registerFindHook(IO),this.registerUploadHook(OO),this.registerUploadHook(RO)}return n.prototype.upload=function(e,t){var r=this;return typeof e=="function"&&(t=e,e=null),t&&bi("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(i){e&&r.add(e);var s=function(){t?.(),i()};r.queue.length?(r.completes.push(s),r.ticking||(r.ticking=!0,Wr.system.addOnce(r.tick,r,Ds.UTILITY))):s()})},n.prototype.tick=function(){setTimeout(this.delayedTick,0)},n.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed){for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Wr.system.addOnce(this.tick,this,Ds.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var r=0,i=s.length;r<i;r++)s[r]()}},n.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},n.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},n.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof mr)for(var t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this},n.prototype.destroy=function(){this.ticking&&Wr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},n}();function kb(n,e){return e instanceof Ct?(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0):!1}function NO(n,e){if(!(e instanceof ga))return!1;var t=e.geometry;e.finishPoly(),t.updateBatches();for(var r=t.batches,i=0;i<r.length;i++){var s=r[i].style.texture;s&&kb(n,s.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function FO(n,e){return n instanceof ga?(e.push(n),!0):!1}var LO=function(n){EO(e,n);function e(t){var r=n.call(this,t)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(FO),r.registerUploadHook(kb),r.registerUploadHook(NO),r}return e.extension={name:"prepare",type:jt.RendererPlugin},e}(DO);/*!
 * @pixi/spritesheet - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var BO=function(){function n(e,t,r){r===void 0&&(r=null),this.linkedSheets=[],this._texture=e instanceof rt?e:null,this.baseTexture=e instanceof Ct?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n.prototype._updateResolution=function(e){e===void 0&&(e=null);var t=this.data.meta.scale,r=If(e,null);return r===null&&(r=t!==void 0?parseFloat(t):1),r!==1&&this.baseTexture.setResolution(r),r},n.prototype.parse=function(e){var t=this;return e&&bi("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(r){t._callback=function(i){e?.(i),r(i)},t._batchIndex=0,t._frameKeys.length<=n.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()})},n.prototype._processFrames=function(e){for(var t=e,r=n.BATCH_SIZE;t-e<r&&t<this._frameKeys.length;){var i=this._frameKeys[t],s=this._frames[i],o=s.frame;if(o){var u=null,c=null,v=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,_=new pt(0,0,Math.floor(v.w)/this.resolution,Math.floor(v.h)/this.resolution);s.rotated?u=new pt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):u=new pt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(c=new pt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new rt(this.baseTexture,u,_,c,s.rotated?2:0,s.anchor),rt.addToCache(this.textures[i],i)}t++}},n.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var r=0;r<e[t].length;r++){var i=e[t][r];this.animations[t].push(this.textures[i])}}},n.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},n.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*n.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*n.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},n.prototype.destroy=function(e){var t;e===void 0&&(e=!1);for(var r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},n.BATCH_SIZE=1e3,n}(),jO=function(){function n(){}return n.use=function(e,t){var r,i,s=this,o=e.name+"_image";if(!e.data||e.type!==lr.TYPE.JSON||!e.data.frames||s.resources[o]){t();return}var u=(i=(r=e.data)===null||r===void 0?void 0:r.meta)===null||i===void 0?void 0:i.related_multi_packs;if(Array.isArray(u))for(var c=function(x){if(typeof x!="string")return"continue";var w=x.replace(".json",""),T=yl.resolve(e.url.replace(s.baseUrl,""),x);if(s.resources[w]||Object.values(s.resources).some(function(I){return yl.format(yl.parse(I.url))===T}))return"continue";var E={crossOrigin:e.crossOrigin,loadType:lr.LOAD_TYPE.XHR,xhrType:lr.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};s.add(w,T,E)},v=0,_=u;v<_.length;v++){var h=_[v];c(h)}var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},m=n.getResourcePath(e,s.baseUrl);s.add(o,m,d,function(w){if(w.error){t(w.error);return}var T=new BO(w.texture,e.data,e.url);T.parse().then(function(){e.spritesheet=T,e.textures=T.textures,t()})})},n.getResourcePath=function(e,t){return e.isDataUrl?e.data.meta.image:yl.resolve(e.url.replace(t,""),e.data.meta.image)},n.extension=jt.Loader,n}();/*!
 * @pixi/sprite-tiling - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var q_=function(n,e){return q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},q_(n,e)};function Db(n,e){q_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Cu=new _t,Nb=function(n){Db(e,n);function e(t,r,i){r===void 0&&(r=100),i===void 0&&(i=100);var s=n.call(this,t)||this;return s.tileTransform=new Nl,s._width=r,s._height=i,s.uvMatrix=s.texture.uvMatrix||new fc(t),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,r=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,r,i,s)},e.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new pt),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Cu);var r=this._width,i=this._height,s=-r*this.anchor._x;if(Cu.x>=s&&Cu.x<s+r){var o=-i*this.anchor._y;if(Cu.y>=o&&Cu.y<o+i)return!0}return!1},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,r){var i=t instanceof rt?t:rt.from(t,r);return new e(i,r.width,r.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(Or),UO=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,$x=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,GO=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,HO=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,zO=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,ef=new er,XO=function(n){Db(e,n);function e(t){var r=n.call(this,t)||this;return t.runners.contextChange.add(r),r.quad=new Am,r.state=Eo.for2d(),r}return e.prototype.contextChange=function(){var t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=$i.from($x,UO,r),this.shader=t.context.webGLVersion>1?$i.from(HO,zO,r):$i.from($x,GO,r)},e.prototype.render=function(t){var r=this.renderer,i=this.quad,s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);var o=t.uvRespectAnchor?t.anchor.x:0,u=t.uvRespectAnchor?t.anchor.y:0;s=i.uvs,s[0]=s[6]=-o,s[1]=s[3]=-u,s[2]=s[4]=1-o,s[5]=s[7]=1-u,i.invalidate();var c=t._texture,v=c.baseTexture,_=v.alphaMode>0,h=t.tileTransform.localTransform,d=t.uvMatrix,m=v.isPowerOfTwo&&c.frame.width===v.width&&c.frame.height===v.height;m&&(v._glTextures[r.CONTEXT_UID]?m=v.wrapMode!==Bn.CLAMP:v.wrapMode===Bn.CLAMP&&(v.wrapMode=Bn.REPEAT));var x=m?this.simpleShader:this.shader,w=c.width,T=c.height,E=t._width,I=t._height;ef.set(h.a*w/E,h.b*w/I,h.c*T/E,h.d*T/I,h.tx/E,h.ty/I),ef.invert(),m?ef.prepend(d.mapCoord):(x.uniforms.uMapCoord=d.mapCoord.toArray(!0),x.uniforms.uClampFrame=d.uClampFrame,x.uniforms.uClampOffset=d.uClampOffset),x.uniforms.uTransform=ef.toArray(!0),x.uniforms.uColor=Em(t.tint,t.worldAlpha,x.uniforms.uColor,_),x.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),x.uniforms.uSampler=c,r.shader.bind(x),r.geometry.bind(i),this.state.blendMode=Sm(t.blendMode,_),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:jt.RendererPlugin},e}(hc);/*!
 * @pixi/mesh - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var W_=function(n,e){return W_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},W_(n,e)};function Om(n,e){W_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var VO=function(){function n(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return n.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},n}(),$v=new _t,Yx=new hf,xo=function(n){Om(e,n);function e(t,r,i,s){s===void 0&&(s=Jn.TRIANGLES);var o=n.call(this)||this;return o.geometry=t,o.shader=r,o.state=i||Eo.for2d(),o.drawMode=s,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=He.ROUND_PIXELS,o.batchUvs=null,o}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var r=this.geometry.buffers[0].data,i=this.shader;i.batchable&&this.drawMode===Jn.TRIANGLES&&r.length<e.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),t.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(r),t.state.set(this.state),t.geometry.bind(this.geometry,r),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var r=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,r=t.buffers[0],i=r.data,s=r._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));for(var o=this.transform.worldTransform,u=o.a,c=o.b,v=o.c,_=o.d,h=o.tx,d=o.ty,m=this.vertexData,x=0;x<m.length/2;x++){var w=i[x*2],T=i[x*2+1];m[x*2]=u*w+v*T+h,m[x*2+1]=c*w+_*T+d}if(this._roundPixels)for(var E=He.RESOLUTION,x=0;x<m.length;++x)m[x]=Math.round((m[x]*E|0)/E);this.vertexDirty=s}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new VO(t,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,$v);for(var r=this.geometry.getBuffer("aVertexPosition").data,i=Yx.points,s=this.geometry.getIndex().data,o=s.length,u=this.drawMode===4?3:1,c=0;c+2<o;c+=u){var v=s[c]*2,_=s[c+1]*2,h=s[c+2]*2;if(i[0]=r[v],i[1]=r[v+1],i[2]=r[_],i[3]=r[_+1],i[4]=r[h],i[5]=r[h+1],Yx.contains($v.x,$v.y))return!0}return!1},e.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(mr),qO=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,WO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,bo=function(n){Om(e,n);function e(t,r){var i=this,s={uSampler:t,alpha:1,uTextureMatrix:er.IDENTITY,uColor:new Float32Array([1,1,1,1])};return r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(s,r.uniforms),i=n.call(this,r.program||So.from(WO,qO),s)||this,i._colorDirty=!1,i.uvMatrix=new fc(t),i.batchable=r.program===void 0,i.pluginName=r.pluginName,i.tint=r.tint,i.alpha=r.alpha,i}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Em(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}($i),Xf=function(n){Om(e,n);function e(t,r,i){var s=n.call(this)||this,o=new sr(t),u=new sr(r,!0),c=new sr(i,!0,!0);return s.addAttribute("aVertexPosition",o,2,!1,Ke.FLOAT).addAttribute("aTextureCoord",u,2,!1,Ke.FLOAT).addIndex(c),s._updateId=-1,s}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(To);/*!
 * @pixi/text-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $_=function(n,e){return $_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},$_(n,e)};function $O(n,e){$_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Nf=function(){function n(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return n}(),YO=function(){function n(){}return n.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},n.parse=function(e){var t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var i in t){var s=t[i].match(/^[a-z]+/gm)[0],o=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),u={};for(var c in o){var v=o[c].split("="),_=v[0],h=v[1].replace(/"/gm,""),d=parseFloat(h),m=isNaN(d)?h:d;u[_]=m}r[s].push(u)}var x=new Nf;return r.info.forEach(function(w){return x.info.push({face:w.face,size:parseInt(w.size,10)})}),r.common.forEach(function(w){return x.common.push({lineHeight:parseInt(w.lineHeight,10)})}),r.page.forEach(function(w){return x.page.push({id:parseInt(w.id,10),file:w.file})}),r.char.forEach(function(w){return x.char.push({id:parseInt(w.id,10),page:parseInt(w.page,10),x:parseInt(w.x,10),y:parseInt(w.y,10),width:parseInt(w.width,10),height:parseInt(w.height,10),xoffset:parseInt(w.xoffset,10),yoffset:parseInt(w.yoffset,10),xadvance:parseInt(w.xadvance,10)})}),r.kerning.forEach(function(w){return x.kerning.push({first:parseInt(w.first,10),second:parseInt(w.second,10),amount:parseInt(w.amount,10)})}),r.distanceField.forEach(function(w){return x.distanceField.push({distanceRange:parseInt(w.distanceRange,10),fieldType:w.fieldType})}),x},n}(),Y_=function(){function n(){}return n.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},n.parse=function(e){for(var t=new Nf,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),u=e.getElementsByTagName("kerning"),c=e.getElementsByTagName("distanceField"),v=0;v<r.length;v++)t.info.push({face:r[v].getAttribute("face"),size:parseInt(r[v].getAttribute("size"),10)});for(var v=0;v<i.length;v++)t.common.push({lineHeight:parseInt(i[v].getAttribute("lineHeight"),10)});for(var v=0;v<s.length;v++)t.page.push({id:parseInt(s[v].getAttribute("id"),10)||0,file:s[v].getAttribute("file")});for(var v=0;v<o.length;v++){var _=o[v];t.char.push({id:parseInt(_.getAttribute("id"),10),page:parseInt(_.getAttribute("page"),10)||0,x:parseInt(_.getAttribute("x"),10),y:parseInt(_.getAttribute("y"),10),width:parseInt(_.getAttribute("width"),10),height:parseInt(_.getAttribute("height"),10),xoffset:parseInt(_.getAttribute("xoffset"),10),yoffset:parseInt(_.getAttribute("yoffset"),10),xadvance:parseInt(_.getAttribute("xadvance"),10)})}for(var v=0;v<u.length;v++)t.kerning.push({first:parseInt(u[v].getAttribute("first"),10),second:parseInt(u[v].getAttribute("second"),10),amount:parseInt(u[v].getAttribute("amount"),10)});for(var v=0;v<c.length;v++)t.distanceField.push({fieldType:c[v].getAttribute("fieldType"),distanceRange:parseInt(c[v].getAttribute("distanceRange"),10)});return t},n}(),KO=function(){function n(){}return n.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var t=new globalThis.DOMParser().parseFromString(e,"text/xml");return Y_.test(t)}return!1},n.parse=function(e){var t=new globalThis.DOMParser().parseFromString(e,"text/xml");return Y_.parse(t)},n}(),Yv=[YO,Y_,KO];function Fb(n){for(var e=0;e<Yv.length;e++)if(Yv[e].test(n))return Yv[e];return null}function QO(n,e,t,r,i,s){var o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;var u,c=t.dropShadow?t.dropShadowDistance:0,v=t.padding||0,_=n.width/r-c-v*2,h=n.height/r-c-v*2,d=o.slice(),m=t.fillGradientStops.slice();if(!m.length)for(var x=d.length+1,w=1;w<x;++w)m.push(w/x);if(d.unshift(o[0]),m.unshift(0),d.push(o[o.length-1]),m.push(1),t.fillGradientType===rc.LINEAR_VERTICAL){u=e.createLinearGradient(_/2,v,_/2,h+v);for(var T=0,E=s.fontProperties.fontSize+t.strokeThickness,I=E/h,w=0;w<i.length;w++)for(var D=s.lineHeight*w,z=0;z<d.length;z++){var O=0;typeof m[z]=="number"?O=m[z]:O=z/d.length;var U=D/h+O*I,y=Math.max(T,U);y=Math.min(y,1),u.addColorStop(y,d[z]),T=y}}else{u=e.createLinearGradient(v,h/2,_+v,h/2);for(var te=d.length+1,F=1,w=0;w<d.length;w++){var W=void 0;typeof m[w]=="number"?W=m[w]:W=F/te,u.addColorStop(W,d[w]),F++}}return u}function ZO(n,e,t,r,i,s,o){var u=t.text,c=t.fontProperties;e.translate(r,i),e.scale(s,s);var v=o.strokeThickness/2,_=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=QO(n,e,o,s,[u],t),e.strokeStyle=o.stroke,o.dropShadow){var h=o.dropShadowColor,d=Il(typeof h=="number"?h:lb(h)),m=o.dropShadowBlur*s,x=o.dropShadowDistance*s;e.shadowColor="rgba("+d[0]*255+","+d[1]*255+","+d[2]*255+","+o.dropShadowAlpha+")",e.shadowBlur=m,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*x,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*x}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(u,v,_+t.lineHeight-c.descent),o.fill&&e.fillText(u,v,_+t.lineHeight-c.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Lb(n){return Array.from?Array.from(n):n.split("")}function JO(n){typeof n=="string"&&(n=[n]);for(var e=[],t=0,r=n.length;t<r;t++){var i=n[t];if(Array.isArray(i)){if(i.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var u=s,c=o;u<=c;u++)e.push(String.fromCharCode(u))}else e.push.apply(e,Lb(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function ff(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}var Hi=function(){function n(e,t,r){var i,s,o=e.info[0],u=e.common[0],c=e.page[0],v=e.distanceField[0],_=If(c.file),h={};this._ownsTextures=r,this.font=o.face,this.size=o.size,this.lineHeight=u.lineHeight/_,this.chars={},this.pageTextures=h;for(var d=0;d<e.page.length;d++){var m=e.page[d],x=m.id,w=m.file;h[x]=t instanceof Array?t[d]:t[w],v?.fieldType&&v.fieldType!=="none"&&(h[x].baseTexture.alphaMode=Si.NO_PREMULTIPLIED_ALPHA,h[x].baseTexture.mipmap=Ti.OFF)}for(var d=0;d<e.char.length;d++){var T=e.char[d],x=T.id,E=T.page,I=e.char[d],D=I.x,z=I.y,O=I.width,U=I.height,y=I.xoffset,te=I.yoffset,F=I.xadvance;D/=_,z/=_,O/=_,U/=_,y/=_,te/=_,F/=_;var W=new pt(D+h[E].frame.x/_,z+h[E].frame.y/_,O,U);this.chars[x]={xOffset:y,yOffset:te,xAdvance:F,kerning:{},texture:new rt(h[E].baseTexture,W),page:E}}for(var d=0;d<e.kerning.length;d++){var ne=e.kerning[d],ee=ne.first,ue=ne.second,ye=ne.amount;ee/=_,ue/=_,ye/=_,this.chars[ue]&&(this.chars[ue].kerning[ee]=ye)}this.distanceFieldRange=v?.distanceRange,this.distanceFieldType=(s=(i=v?.fieldType)===null||i===void 0?void 0:i.toLowerCase())!==null&&s!==void 0?s:"none"}return n.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},n.install=function(e,t,r){var i;if(e instanceof Nf)i=e;else{var s=Fb(e);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(e)}t instanceof rt&&(t=[t]);var o=new n(i,t,r);return n.available[o.font]=o,o},n.uninstall=function(e){var t=n.available[e];if(!t)throw new Error("No font found named '"+e+"'");t.destroy(),delete n.available[e]},n.from=function(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},n.defaultOptions,r),s=i.chars,o=i.padding,u=i.resolution,c=i.textureWidth,v=i.textureHeight,_=JO(s),h=t instanceof Ol?t:new Ol(t),d=c,m=new Nf;m.info[0]={face:h.fontFamily,size:h.fontSize},m.common[0]={lineHeight:h.fontSize};for(var x=0,w=0,T,E,I,D=0,z=[],O=0;O<_.length;O++){T||(T=He.ADAPTER.createCanvas(),T.width=c,T.height=v,E=T.getContext("2d"),I=new Ct(T,{resolution:u}),z.push(new rt(I)),m.page.push({id:z.length-1,file:""}));var U=_[O],y=Qi.measureText(U,h,!1,T),te=y.width,F=Math.ceil(y.height),W=Math.ceil((h.fontStyle==="italic"?2:1)*te);if(w>=v-F*u){if(w===0)throw new Error("[BitmapFont] textureHeight "+v+"px is too small "+("(fontFamily: '"+h.fontFamily+"', fontSize: "+h.fontSize+"px, char: '"+U+"')"));--O,T=null,E=null,I=null,w=0,x=0,D=0;continue}if(D=Math.max(F+y.fontProperties.descent,D),W*u+x>=d){if(x===0)throw new Error("[BitmapFont] textureWidth "+c+"px is too small "+("(fontFamily: '"+h.fontFamily+"', fontSize: "+h.fontSize+"px, char: '"+U+"')"));--O,w+=D*u,w=Math.ceil(w),x=0,D=0;continue}ZO(T,E,y,x,w,u,h);var ne=ff(y.text);m.char.push({id:ne,page:z.length-1,x:x/u,y:w/u,width:W,height:F,xoffset:0,yoffset:0,xadvance:Math.ceil(te-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))}),x+=(W+2*o)*u,x=Math.ceil(x)}if(!r?.skipKerning)for(var O=0,ee=_.length;O<ee;O++)for(var ue=_[O],ye=0;ye<ee;ye++){var K=_[ye],B=E.measureText(ue).width,V=E.measureText(K).width,G=E.measureText(ue+K).width,Y=G-(B+V);Y&&m.kerning.push({first:ff(ue),second:ff(K),amount:Y})}var q=new n(m,z,!0);return n.available[e]!==void 0&&n.uninstall(e),n.available[e]=q,q},n.ALPHA=[["a","z"],["A","Z"]," "],n.NUMERIC=[["0","9"]],n.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],n.ASCII=[[" ","~"]],n.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:n.ALPHANUMERIC},n.available={},n}(),eR=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,tR=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,Kx=[],Qx=[],Zx=[],tf=function(n){$O(e,n);function e(t,r){r===void 0&&(r={});var i=n.call(this)||this;i._tint=16777215;var s=Object.assign({},e.styleDefaults,r),o=s.align,u=s.tint,c=s.maxWidth,v=s.letterSpacing,_=s.fontName,h=s.fontSize;if(!Hi.available[_])throw new Error('Missing BitmapFont "'+_+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=o,i._tint=u,i._font=void 0,i._fontName=_,i._fontSize=h,i.text=t,i._maxWidth=c,i._maxLineHeight=0,i._letterSpacing=v,i._anchor=new ma(function(){i.dirty=!0},i,0,0),i._roundPixels=He.ROUND_PIXELS,i.dirty=!0,i._resolution=He.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return e.prototype.updateText=function(){for(var t,r=Hi.available[this._fontName],i=this.fontSize,s=i/r.size,o=new _t,u=[],c=[],v=[],_=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=Lb(_),d=this._maxWidth*r.size/i,m=r.distanceFieldType==="none"?Kx:Qx,x=null,w=0,T=0,E=0,I=-1,D=0,z=0,O=0,U=0,y=0;y<h.length;y++){var te=h[y],F=ff(te);if(/(?:\s)/.test(te)&&(I=y,D=w,U++),te==="\r"||te===`
`){c.push(w),v.push(-1),T=Math.max(T,w),++E,++z,o.x=0,o.y+=r.lineHeight,x=null,U=0;continue}var W=r.chars[F];if(W){x&&W.kerning[x]&&(o.x+=W.kerning[x]);var ne=Zx.pop()||{texture:rt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new _t};ne.texture=W.texture,ne.line=E,ne.charCode=F,ne.position.x=o.x+W.xOffset+this._letterSpacing/2,ne.position.y=o.y+W.yOffset,ne.prevSpaces=U,u.push(ne),w=ne.position.x+Math.max(W.xAdvance-W.xOffset,W.texture.orig.width),o.x+=W.xAdvance+this._letterSpacing,O=Math.max(O,W.yOffset+W.texture.height),x=F,I!==-1&&d>0&&o.x>d&&(++z,El(u,1+I-z,1+y-I),y=I,I=-1,c.push(D),v.push(u.length>0?u[u.length-1].prevSpaces:0),T=Math.max(T,D),E++,o.x=0,o.y+=r.lineHeight,x=null,U=0)}}var ee=h[h.length-1];ee!=="\r"&&ee!==`
`&&(/(?:\s)/.test(ee)&&(w=D),c.push(w),T=Math.max(T,w),v.push(-1));for(var ue=[],y=0;y<=E;y++){var ye=0;this._align==="right"?ye=T-c[y]:this._align==="center"?ye=(T-c[y])/2:this._align==="justify"&&(ye=v[y]<0?0:(T-c[y])/v[y]),ue.push(ye)}var K=u.length,B={},V=[],G=this._activePagesMeshData;m.push.apply(m,G);for(var y=0;y<K;y++){var Y=u[y].texture,q=Y.baseTexture.uid;if(!B[q]){var L=m.pop();if(!L){var k=new Xf,X=void 0,se=void 0;r.distanceFieldType==="none"?(X=new bo(rt.EMPTY),se=lt.NORMAL):(X=new bo(rt.EMPTY,{program:So.from(tR,eR),uniforms:{uFWidth:0}}),se=lt.NORMAL_NPM);var fe=new xo(k,X);fe.blendMode=se,L={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:fe,vertices:null,uvs:null,indices:null}}L.index=0,L.indexCount=0,L.vertexCount=0,L.uvsCount=0,L.total=0;var be=this._textureCache;be[q]=be[q]||new rt(Y.baseTexture),L.mesh.texture=be[q],L.mesh.tint=this._tint,V.push(L),B[q]=L}B[q].total++}for(var y=0;y<G.length;y++)V.indexOf(G[y])===-1&&this.removeChild(G[y].mesh);for(var y=0;y<V.length;y++)V[y].mesh.parent!==this&&this.addChild(V[y].mesh);this._activePagesMeshData=V;for(var y in B){var L=B[y],Ee=L.total;if(!(((t=L.indices)===null||t===void 0?void 0:t.length)>6*Ee)||L.vertices.length<xo.BATCHABLE_SIZE*2)L.vertices=new Float32Array(4*2*Ee),L.uvs=new Float32Array(4*2*Ee),L.indices=new Uint16Array(6*Ee);else for(var Ae=L.total,Re=L.vertices,Se=Ae*4*2;Se<Re.length;Se++)Re[Se]=0;L.mesh.size=6*Ee}for(var y=0;y<K;y++){var te=u[y],Ue=te.position.x+ue[te.line]*(this._align==="justify"?te.prevSpaces:1);this._roundPixels&&(Ue=Math.round(Ue));var je=Ue*s,et=te.position.y*s,Y=te.texture,Xe=B[Y.baseTexture.uid],ze=Y.frame,Be=Y._uvs,tt=Xe.index++;Xe.indices[tt*6+0]=0+tt*4,Xe.indices[tt*6+1]=1+tt*4,Xe.indices[tt*6+2]=2+tt*4,Xe.indices[tt*6+3]=0+tt*4,Xe.indices[tt*6+4]=2+tt*4,Xe.indices[tt*6+5]=3+tt*4,Xe.vertices[tt*8+0]=je,Xe.vertices[tt*8+1]=et,Xe.vertices[tt*8+2]=je+ze.width*s,Xe.vertices[tt*8+3]=et,Xe.vertices[tt*8+4]=je+ze.width*s,Xe.vertices[tt*8+5]=et+ze.height*s,Xe.vertices[tt*8+6]=je,Xe.vertices[tt*8+7]=et+ze.height*s,Xe.uvs[tt*8+0]=Be.x0,Xe.uvs[tt*8+1]=Be.y0,Xe.uvs[tt*8+2]=Be.x1,Xe.uvs[tt*8+3]=Be.y1,Xe.uvs[tt*8+4]=Be.x2,Xe.uvs[tt*8+5]=Be.y2,Xe.uvs[tt*8+6]=Be.x3,Xe.uvs[tt*8+7]=Be.y3}this._textWidth=T*s,this._textHeight=(o.y+r.lineHeight)*s;for(var y in B){var L=B[y];if(this.anchor.x!==0||this.anchor.y!==0)for(var bt=0,Tr=this._textWidth*this.anchor.x,ur=this._textHeight*this.anchor.y,tr=0;tr<L.total;tr++)L.vertices[bt++]-=Tr,L.vertices[bt++]-=ur,L.vertices[bt++]-=Tr,L.vertices[bt++]-=ur,L.vertices[bt++]-=Tr,L.vertices[bt++]-=ur,L.vertices[bt++]-=Tr,L.vertices[bt++]-=ur;this._maxLineHeight=O*s;var Wt=L.mesh.geometry.getBuffer("aVertexPosition"),Mr=L.mesh.geometry.getBuffer("aTextureCoord"),kr=L.mesh.geometry.getIndex();Wt.data=L.vertices,Mr.data=L.uvs,kr.data=L.indices,Wt.update(),Mr.update(),kr.update()}for(var y=0;y<u.length;y++)Zx.push(u[y]);this._font=r,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var r=Hi.available[this._fontName],i=r.distanceFieldRange,s=r.distanceFieldType,o=r.size;if(s!=="none")for(var u=this.worldTransform,c=u.a,v=u.b,_=u.c,h=u.d,d=Math.sqrt(c*c+v*v),m=Math.sqrt(_*_+h*h),x=(Math.abs(d)+Math.abs(m))/2,w=this.fontSize/o,T=0,E=this._activePagesMeshData;T<E.length;T++){var I=E[T];I.mesh.shader.uniforms.uFWidth=x*i*w*this._resolution}n.prototype._render.call(this,t)},e.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var t=Hi.available[this._fontName];if(!t)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Hi.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var t;return(t=this._fontSize)!==null&&t!==void 0?t:Hi.available[this._fontName].size},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t){var r=this._textureCache,i=Hi.available[this._fontName],s=i.distanceFieldType==="none"?Kx:Qx;s.push.apply(s,this._activePagesMeshData);for(var o=0,u=this._activePagesMeshData;o<u.length;o++){var c=u[o];this.removeChild(c.mesh)}this._activePagesMeshData=[],s.filter(function(h){return r[h.mesh.texture.baseTexture.uid]}).forEach(function(h){h.mesh.texture=rt.EMPTY});for(var v in r){var _=r[v];_.destroy(),delete r[v]}this._font=null,this._textureCache=null,n.prototype.destroy.call(this,t)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(mr),rR=function(){function n(){}return n.add=function(){lr.setExtensionXhrType("fnt",lr.XHR_RESPONSE_TYPE.TEXT)},n.use=function(e,t){var r=Fb(e.data);if(!r){t();return}for(var i=n.getBaseUrl(this,e),s=r.parse(e.data),o={},u=function(w){o[w.metadata.pageFile]=w.texture,Object.keys(o).length===s.page.length&&(e.bitmapFont=Hi.install(s,o,!0),t())},c=0;c<s.page.length;++c){var v=s.page[c].file,_=i+v,h=!1;for(var d in this.resources){var m=this.resources[d];if(m.url===_){m.metadata.pageFile=v,m.texture?u(m):m.onAfterMiddleware.add(u),h=!0;break}}if(!h){var x={crossOrigin:e.crossOrigin,loadType:lr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:v},e.metadata.imageMetadata),parentResource:e};this.add(_,x,u)}}},n.getBaseUrl=function(e,t){var r=t.isDataUrl?"":n.dirname(t.url);return t.isDataUrl&&(r==="."&&(r=""),e.baseUrl&&r&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(r+="/")),r=r.replace(e.baseUrl,""),r&&r.charAt(r.length-1)!=="/"&&(r+="/"),r},n.dirname=function(e){var t=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===e?".":t===""?"/":t},n.extension=jt.Loader,n}();/*!
 * @pixi/filter-alpha - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K_=function(n,e){return K_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},K_(n,e)};function nR(n,e){K_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var iR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(n){nR(e,n);function e(t){t===void 0&&(t=1);var r=n.call(this,JP,iR,{uAlpha:1})||this;return r.alpha=t,r}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e})(Fs);/*!
 * @pixi/filter-blur - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Q_=function(n,e){return Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Q_(n,e)};function Bb(n,e){Q_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var sR=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function aR(n,e){var t=Math.ceil(n/2),r=sR,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<n;o++){var u=s.replace("%index%",o.toString());u=u.replace("%sampleIndex%",o-(t-1)+".0"),i+=u,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r}var oR={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},lR=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function uR(n){for(var e=oR[n],t=e.length,r=lR,i="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o,u=0;u<n;u++){var c=s.replace("%index%",u.toString());o=u,u>=t&&(o=n-u-1),c=c.replace("%value%",e[o].toString()),i+=c,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r}var Jx=function(n){Bb(e,n);function e(t,r,i,s,o){r===void 0&&(r=8),i===void 0&&(i=4),s===void 0&&(s=He.FILTER_RESOLUTION),o===void 0&&(o=5);var u=this,c=aR(o,t),v=uR(o);return u=n.call(this,c,v)||this,u.horizontal=t,u.resolution=s,u._quality=0,u.quality=i,u.blur=r,u}return e.prototype.apply=function(t,r,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/r.width):this.uniforms.strength=1/i.height*(i.height/r.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/r.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,r,i,s);else{var o=t.getFilterTexture(),u=t.renderer,c=r,v=o;this.state.blend=!1,t.applyFilter(this,c,v,yi.CLEAR);for(var _=1;_<this.passes-1;_++){t.bindAndClear(c,yi.BLIT),this.uniforms.uSampler=v;var h=v;v=c,c=h,u.shader.bind(this),u.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,v,i,s),t.returnFilterTexture(o)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Fs),cR=function(n){Bb(e,n);function e(t,r,i,s){t===void 0&&(t=8),r===void 0&&(r=4),i===void 0&&(i=He.FILTER_RESOLUTION),s===void 0&&(s=5);var o=n.call(this)||this;return o.blurXFilter=new Jx(!0,t,r,i,s),o.blurYFilter=new Jx(!1,t,r,i,s),o.resolution=i,o.quality=r,o.blur=t,o.repeatEdgePixels=!1,o}return e.prototype.apply=function(t,r,i,s){var o=Math.abs(this.blurXFilter.strength),u=Math.abs(this.blurYFilter.strength);if(o&&u){var c=t.getFilterTexture();this.blurXFilter.apply(t,r,c,yi.CLEAR),this.blurYFilter.apply(t,c,i,s),t.returnFilterTexture(c)}else u?this.blurYFilter.apply(t,r,i,s):this.blurXFilter.apply(t,r,i,s)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(Fs);/*!
 * @pixi/filter-color-matrix - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Z_=function(n,e){return Z_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},Z_(n,e)};function hR(n,e){Z_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var fR=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,e1=function(n){hR(e,n);function e(){var t=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return t=n.call(this,Sb,fR,r)||this,t.alpha=1,t}return e.prototype._loadMatrix=function(t,r){r===void 0&&(r=!1);var i=t;r&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,r,i){return t[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],t[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],t[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],t[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],t[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],t[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],t[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],t[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],t[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],t[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],t[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],t[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],t[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],t[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],t[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],t[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],t[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],t[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],t[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],t[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],t},e.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},e.prototype.brightness=function(t,r){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.tint=function(t,r){var i=t>>16&255,s=t>>8&255,o=t&255,u=[i/255,0,0,0,0,0,s/255,0,0,0,0,0,o/255,0,0,0,0,0,1,0];this._loadMatrix(u,r)},e.prototype.greyscale=function(t,r){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.blackAndWhite=function(t){var r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var i=Math.cos(t),s=Math.sin(t),o=Math.sqrt,u=1/3,c=o(u),v=i+(1-i)*u,_=u*(1-i)-c*s,h=u*(1-i)+c*s,d=u*(1-i)+c*s,m=i+u*(1-i),x=u*(1-i)-c*s,w=u*(1-i)-c*s,T=u*(1-i)+c*s,E=i+u*(1-i),I=[v,_,h,0,0,d,m,x,0,0,w,T,E,0,0,0,0,0,1,0];this._loadMatrix(I,r)},e.prototype.contrast=function(t,r){var i=(t||0)+1,s=-.5*(i-1),o=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(o,r)},e.prototype.saturate=function(t,r){t===void 0&&(t=0);var i=t*2/3+1,s=(i-1)*-.5,o=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(o,r)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.sepia=function(t){var r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.technicolor=function(t){var r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.polaroid=function(t){var r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.toBGR=function(t){var r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.kodachrome=function(t){var r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.browni=function(t){var r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.vintage=function(t){var r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.colorTone=function(t,r,i,s,o){t=t||.2,r=r||.15,i=i||16770432,s=s||3375104;var u=(i>>16&255)/255,c=(i>>8&255)/255,v=(i&255)/255,_=(s>>16&255)/255,h=(s>>8&255)/255,d=(s&255)/255,m=[.3,.59,.11,0,0,u,c,v,t,0,_,h,d,r,0,u-_,c-h,v-d,0,0];this._loadMatrix(m,o)},e.prototype.night=function(t,r){t=t||.1;var i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.predator=function(t,r){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.lsd=function(t){var r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Fs);e1.prototype.grayscale=e1.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var J_=function(n,e){return J_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},J_(n,e)};function dR(n,e){J_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pR=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vR=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(n){dR(e,n);function e(t,r){var i=this,s=new er;return t.renderable=!1,i=n.call(this,vR,pR,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,i.maskSprite=t,i.maskMatrix=s,r==null&&(r=20),i.scale=new _t(r,r),i}return e.prototype.apply=function(t,r,i,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var o=this.maskSprite.worldTransform,u=Math.sqrt(o.a*o.a+o.b*o.b),c=Math.sqrt(o.c*o.c+o.d*o.d);u!==0&&c!==0&&(this.uniforms.rotation[0]=o.a/u,this.uniforms.rotation[1]=o.b/u,this.uniforms.rotation[2]=o.c/c,this.uniforms.rotation[3]=o.d/c),t.applyFilter(this,r,i,s)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e})(Fs);/*!
 * @pixi/filter-fxaa - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var em=function(n,e){return em=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},em(n,e)};function _R(n,e){em(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var mR=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,yR=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(n){_R(e,n);function e(){return n.call(this,mR,yR)||this}return e})(Fs);/*!
 * @pixi/filter-noise - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tm=function(n,e){return tm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},tm(n,e)};function gR(n,e){tm(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var xR=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(n){gR(e,n);function e(t,r){t===void 0&&(t=.5),r===void 0&&(r=Math.random());var i=n.call(this,Sb,xR,{uNoise:0,uSeed:0})||this;return i.noise=t,i.seed=r,i}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e})(Fs);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var jb=new er;_r.prototype._cacheAsBitmap=!1;_r.prototype._cacheData=null;_r.prototype._cacheAsBitmapResolution=null;_r.prototype._cacheAsBitmapMultisample=Jt.NONE;var bR=function(){function n(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return n}();Object.defineProperties(_r.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(n){if(this._cacheAsBitmap!==n){this._cacheAsBitmap=n;var e;n?(this._cacheData||(this._cacheData=new bR),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}});_r.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};_r.prototype._initCachedDisplayObject=function(e){var t;if(!(this._cacheData&&this._cacheData.sprite)){var r=this.alpha;this.alpha=1,e.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var s=this.filters[0].padding;i.pad(s)}i.ceil(He.RESOLUTION);var o=e.renderTexture.current,u=e.renderTexture.sourceFrame.clone(),c=e.renderTexture.destinationFrame.clone(),v=e.projection.transform,_=go.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:(t=this.cacheAsBitmapMultisample)!==null&&t!==void 0?t:e.multisample}),h="cacheAsBitmap_"+yo();this._cacheData.textureCacheId=h,Ct.addToCache(_.baseTexture,h),rt.addToCache(_,h);var d=this.transform.localTransform.copyTo(jb).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:_,clear:!0,transform:d,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=v,e.renderTexture.bind(o,u,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var m=new Or(_);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(i.x/i.width),m.anchor.y=-(i.y/i.height),m.alpha=r,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=m.containsPoint.bind(m)}};_r.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};_r.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var i=e.context,s=e._projTransform;t.ceil(He.RESOLUTION);var o=go.create({width:t.width,height:t.height}),u="cacheAsBitmap_"+yo();this._cacheData.textureCacheId=u,Ct.addToCache(o.baseTexture,u),rt.addToCache(o,u);var c=jb;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=t.x,c.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:c,skipUpdateTransform:!1}),e.context=i,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var v=new Or(o);v.transform.worldTransform=this.transform.worldTransform,v.anchor.x=-(t.x/t.width),v.anchor.y=-(t.y/t.height),v.alpha=r,v._bounds=this._bounds,this._cacheData.sprite=v,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=v.containsPoint.bind(v)}};_r.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};_r.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};_r.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Ct.removeFromCache(this._cacheData.textureCacheId),rt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};_r.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */_r.prototype.name=null;mr.prototype.getChildByName=function(e,t){for(var r=0,i=this.children.length;r<i;r++)if(this.children[r].name===e)return this.children[r];if(t)for(var r=0,i=this.children.length;r<i;r++){var s=this.children[r];if(s.getChildByName){var o=s.getChildByName(e,!0);if(o)return o}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */_r.prototype.getGlobalPosition=function(e,t){return e===void 0&&(e=new _t),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};/*!
 * @pixi/app - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var wR=function(){function n(){}return n.init=function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){t.cancelResize();var r,i;if(t._resizeTo===globalThis.window)r=globalThis.innerWidth,i=globalThis.innerHeight;else{var s=t._resizeTo,o=s.clientWidth,u=s.clientHeight;r=o,i=u}t.renderer.resize(r,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},n.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},n.extension=jt.Application,n}(),Ub=function(){function n(e){var t=this;this.stage=new mr,e=Object.assign({forceCanvas:!1},e),this.renderer=KP(e),n._plugins.forEach(function(r){r.init.call(t,e)})}return n.registerPlugin=function(e){bi("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),Ns.add({type:jt.Application,ref:e})},n.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(n.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),n.prototype.destroy=function(e,t){var r=this,i=n._plugins.slice(0);i.reverse(),i.forEach(function(s){s.destroy.call(r)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null},n._plugins=[],n}();Ns.handleByList(jt.Application,Ub._plugins);Ns.add(wR);/*!
 * @pixi/mesh-extras - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rm=function(n,e){return rm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},rm(n,e)};function Ll(n,e){rm(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var TR=function(n){Ll(e,n);function e(t,r,i,s){t===void 0&&(t=100),r===void 0&&(r=100),i===void 0&&(i=10),s===void 0&&(s=10);var o=n.call(this)||this;return o.segWidth=i,o.segHeight=s,o.width=t,o.height=r,o.build(),o}return e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,r=[],i=[],s=[],o=this.segWidth-1,u=this.segHeight-1,c=this.width/o,v=this.height/u,_=0;_<t;_++){var h=_%this.segWidth,d=_/this.segWidth|0;r.push(h*c,d*v),i.push(h/o,d/u)}for(var m=o*u,_=0;_<m;_++){var x=_%o,w=_/o|0,T=w*this.segWidth+x,E=w*this.segWidth+x+1,I=(w+1)*this.segWidth+x,D=(w+1)*this.segWidth+x+1;s.push(T,E,I,E,D,I)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Xf),SR=function(n){Ll(e,n);function e(t,r,i){t===void 0&&(t=200),i===void 0&&(i=0);var s=n.call(this,new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6))||this;return s.points=r,s._width=t,s.textureScale=i,s.build(),s}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var r=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(t.length<1)){r.data.length/4!==t.length&&(r.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),s.data=new Uint16Array((t.length-1)*6));var o=i.data,u=s.data;o[0]=0,o[1]=0,o[2]=0,o[3]=1;for(var c=0,v=t[0],_=this._width*this.textureScale,h=t.length,d=0;d<h;d++){var m=d*4;if(this.textureScale>0){var x=v.x-t[d].x,w=v.y-t[d].y,T=Math.sqrt(x*x+w*w);v=t[d],c+=T/_}else c=d/(h-1);o[m]=c,o[m+1]=0,o[m+2]=c,o[m+3]=1}for(var E=0,d=0;d<h-1;d++){var m=d*2;u[E++]=m,u[E++]=m+1,u[E++]=m+2,u[E++]=m+2,u[E++]=m+1,u[E++]=m+3}i.update(),s.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var r=t[0],i,s=0,o=0,u=this.buffers[0].data,c=t.length,v=0;v<c;v++){var _=t[v],h=v*4;v<t.length-1?i=t[v+1]:i=_,o=-(i.x-r.x),s=i.y-r.y;var d=Math.sqrt(s*s+o*o),m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=d,o/=d,s*=m,o*=m,u[h]=_.x+s,u[h+1]=_.y+o,u[h+2]=_.x-s,u[h+3]=_.y-o,r=_}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Xf),Gb=function(n){Ll(e,n);function e(t,r,i){i===void 0&&(i=0);var s=this,o=new SR(t.height,r,i),u=new bo(t);return i>0&&(t.baseTexture.wrapMode=Bn.REPEAT),s=n.call(this,o,u)||this,s.autoUpdate=!0,s}return e.prototype._render=function(t){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),n.prototype._render.call(this,t)},e}(xo),Du=function(n){Ll(e,n);function e(t,r,i){var s=this,o=new TR(t.width,t.height,r,i),u=new bo(rt.WHITE);return s=n.call(this,o,u)||this,s.texture=t,s.autoResize=!0,s}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,r=this.shader.texture,i=r.width,s=r.height;this.autoResize&&(t.width!==i||t.height!==s)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),n.prototype._render.call(this,t)},e.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),n.prototype.destroy.call(this,t)},e}(xo),Hb=function(n){Ll(e,n);function e(t,r,i,s,o){t===void 0&&(t=rt.EMPTY);var u=this,c=new Xf(r,i,s);c.getBuffer("aVertexPosition").static=!1;var v=new bo(t);return u=n.call(this,c,v,null,o)||this,u.autoUpdate=!0,u}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),n.prototype._render.call(this,t)},e}(xo),rf=10;(function(n){Ll(e,n);function e(t,r,i,s,o){r===void 0&&(r=rf),i===void 0&&(i=rf),s===void 0&&(s=rf),o===void 0&&(o=rf);var u=n.call(this,rt.WHITE,4,4)||this;return u._origWidth=t.orig.width,u._origHeight=t.orig.height,u._width=u._origWidth,u._height=u._origHeight,u._leftWidth=r,u._rightWidth=s,u._topHeight=i,u._bottomHeight=o,u.texture=t,u}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,s=this._height>i?1:this._height/i,o=Math.min(r,s);return o},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,s=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=i*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-i*this._rightWidth,r[9]=r[11]=r[13]=r[15]=s*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e})(Du);/*!
 * @pixi/sprite-animated - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nm=function(n,e){return nm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},nm(n,e)};function ER(n,e){nm(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}(function(n){ER(e,n);function e(t,r){r===void 0&&(r=!0);var i=n.call(this,t[0]instanceof rt?t[0]:t[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=r,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=t,i}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Wr.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Wr.shared.add(this.update,this,Ds.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var r=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=r/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(t){this.stop(),n.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var r=[],i=0;i<t.length;++i)r.push(rt.from(t[i]));return new e(r)},e.fromImages=function(t){for(var r=[],i=0;i<t.length;++i)r.push(rt.from(t[i]));return new e(r)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof rt)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Wr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Wr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e})(Or);/*!
 * pixi.js - v6.5.10
 * Compiled Thu, 06 Jul 2023 15:25:11 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ns.add(lI,_I,dI,lO,LO,Cb,XO,rR,kI,iO,sO,jO,IA,SI);var CR={BlurFilter:cR},df={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var AR=df.exports,t1;function PR(){return t1||(t1=1,function(n){(function(e,t){n.exports=e.document?t(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return t(r)}})(typeof window<"u"?window:AR,function(e,t){var r=[],i=Object.getPrototypeOf,s=r.slice,o=r.flat?function(p){return r.flat.call(p)}:function(p){return r.concat.apply([],p)},u=r.push,c=r.indexOf,v={},_=v.toString,h=v.hasOwnProperty,d=h.toString,m=d.call(Object),x={},w=function(b){return typeof b=="function"&&typeof b.nodeType!="number"&&typeof b.item!="function"},T=function(b){return b!=null&&b===b.window},E=e.document,I={type:!0,src:!0,nonce:!0,noModule:!0};function D(p,b,C){C=C||E;var P,R,M=C.createElement("script");if(M.text=p,b)for(P in I)R=b[P]||b.getAttribute&&b.getAttribute(P),R&&M.setAttribute(P,R);C.head.appendChild(M).parentNode.removeChild(M)}function z(p){return p==null?p+"":typeof p=="object"||typeof p=="function"?v[_.call(p)]||"object":typeof p}var O="3.7.1",U=/HTML$/i,y=function(p,b){return new y.fn.init(p,b)};y.fn=y.prototype={jquery:O,constructor:y,length:0,toArray:function(){return s.call(this)},get:function(p){return p==null?s.call(this):p<0?this[p+this.length]:this[p]},pushStack:function(p){var b=y.merge(this.constructor(),p);return b.prevObject=this,b},each:function(p){return y.each(this,p)},map:function(p){return this.pushStack(y.map(this,function(b,C){return p.call(b,C,b)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,function(p,b){return(b+1)%2}))},odd:function(){return this.pushStack(y.grep(this,function(p,b){return b%2}))},eq:function(p){var b=this.length,C=+p+(p<0?b:0);return this.pushStack(C>=0&&C<b?[this[C]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},y.extend=y.fn.extend=function(){var p,b,C,P,R,M,H=arguments[0]||{},J=1,Q=arguments.length,oe=!1;for(typeof H=="boolean"&&(oe=H,H=arguments[J]||{},J++),typeof H!="object"&&!w(H)&&(H={}),J===Q&&(H=this,J--);J<Q;J++)if((p=arguments[J])!=null)for(b in p)P=p[b],!(b==="__proto__"||H===P)&&(oe&&P&&(y.isPlainObject(P)||(R=Array.isArray(P)))?(C=H[b],R&&!Array.isArray(C)?M=[]:!R&&!y.isPlainObject(C)?M={}:M=C,R=!1,H[b]=y.extend(oe,M,P)):P!==void 0&&(H[b]=P));return H},y.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(p){throw new Error(p)},noop:function(){},isPlainObject:function(p){var b,C;return!p||_.call(p)!=="[object Object]"?!1:(b=i(p),b?(C=h.call(b,"constructor")&&b.constructor,typeof C=="function"&&d.call(C)===m):!0)},isEmptyObject:function(p){var b;for(b in p)return!1;return!0},globalEval:function(p,b,C){D(p,{nonce:b&&b.nonce},C)},each:function(p,b){var C,P=0;if(te(p))for(C=p.length;P<C&&b.call(p[P],P,p[P])!==!1;P++);else for(P in p)if(b.call(p[P],P,p[P])===!1)break;return p},text:function(p){var b,C="",P=0,R=p.nodeType;if(!R)for(;b=p[P++];)C+=y.text(b);return R===1||R===11?p.textContent:R===9?p.documentElement.textContent:R===3||R===4?p.nodeValue:C},makeArray:function(p,b){var C=b||[];return p!=null&&(te(Object(p))?y.merge(C,typeof p=="string"?[p]:p):u.call(C,p)),C},inArray:function(p,b,C){return b==null?-1:c.call(b,p,C)},isXMLDoc:function(p){var b=p&&p.namespaceURI,C=p&&(p.ownerDocument||p).documentElement;return!U.test(b||C&&C.nodeName||"HTML")},merge:function(p,b){for(var C=+b.length,P=0,R=p.length;P<C;P++)p[R++]=b[P];return p.length=R,p},grep:function(p,b,C){for(var P,R=[],M=0,H=p.length,J=!C;M<H;M++)P=!b(p[M],M),P!==J&&R.push(p[M]);return R},map:function(p,b,C){var P,R,M=0,H=[];if(te(p))for(P=p.length;M<P;M++)R=b(p[M],M,C),R!=null&&H.push(R);else for(M in p)R=b(p[M],M,C),R!=null&&H.push(R);return o(H)},guid:1,support:x}),typeof Symbol=="function"&&(y.fn[Symbol.iterator]=r[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(p,b){v["[object "+b+"]"]=b.toLowerCase()});function te(p){var b=!!p&&"length"in p&&p.length,C=z(p);return w(p)||T(p)?!1:C==="array"||b===0||typeof b=="number"&&b>0&&b-1 in p}function F(p,b){return p.nodeName&&p.nodeName.toLowerCase()===b.toLowerCase()}var W=r.pop,ne=r.sort,ee=r.splice,ue="[\\x20\\t\\r\\n\\f]",ye=new RegExp("^"+ue+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ue+"+$","g");y.contains=function(p,b){var C=b&&b.parentNode;return p===C||!!(C&&C.nodeType===1&&(p.contains?p.contains(C):p.compareDocumentPosition&&p.compareDocumentPosition(C)&16))};var K=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function B(p,b){return b?p==="\0"?"":p.slice(0,-1)+"\\"+p.charCodeAt(p.length-1).toString(16)+" ":"\\"+p}y.escapeSelector=function(p){return(p+"").replace(K,B)};var V=E,G=u;(function(){var p,b,C,P,R,M=G,H,J,Q,oe,xe,Te=y.expando,ve=0,Ie=0,ct=Fa(),Et=Fa(),mt=Fa(),Cr=Fa(),fr=function($,ie){return $===ie&&(R=!0),0},Gn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",On="(?:\\\\[\\da-fA-F]{1,6}"+ue+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Tt="\\["+ue+"*("+On+")(?:"+ue+"*([*^$|!~]?=)"+ue+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+On+"))|)"+ue+"*\\]",ss=":("+On+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Tt+")*)|.*)\\)|)",At=new RegExp(ue+"+","g"),Kt=new RegExp("^"+ue+"*,"+ue+"*"),as=new RegExp("^"+ue+"*([>+~]|"+ue+")"+ue+"*"),Vl=new RegExp(ue+"|>"),Hn=new RegExp(ss),Da=new RegExp("^"+On+"$"),Rn={ID:new RegExp("^#("+On+")"),CLASS:new RegExp("^\\.("+On+")"),TAG:new RegExp("^("+On+"|[*])"),ATTR:new RegExp("^"+Tt),PSEUDO:new RegExp("^"+ss),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ue+"*(even|odd|(([+-]|)(\\d*)n|)"+ue+"*(?:([+-]|)"+ue+"*(\\d+)|))"+ue+"*\\)|)","i"),bool:new RegExp("^(?:"+Gn+")$","i"),needsContext:new RegExp("^"+ue+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ue+"*((?:-\\d)?\\d*)"+ue+"*\\)|)(?=[^-]|$)","i")},Ri=/^(?:input|select|textarea|button)$/i,Mi=/^h\d$/i,vn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ql=/[+~]/,li=new RegExp("\\\\[\\da-fA-F]{1,6}"+ue+"?|\\\\([^\\r\\n\\f])","g"),ui=function($,ie){var he="0x"+$.slice(1)-65536;return ie||(he<0?String.fromCharCode(he+65536):String.fromCharCode(he>>10|55296,he&1023|56320))},Zf=function(){ki()},Wl=Ni(function($){return $.disabled===!0&&F($,"fieldset")},{dir:"parentNode",next:"legend"});function Na(){try{return H.activeElement}catch{}}try{M.apply(r=s.call(V.childNodes),V.childNodes),r[V.childNodes.length].nodeType}catch{M={apply:function(ie,he){G.apply(ie,s.call(he))},call:function(ie){G.apply(ie,s.call(arguments,1))}}}function Nt($,ie,he,ge){var we,De,Fe,qe,Le,xt,ut,ht=ie&&ie.ownerDocument,yt=ie?ie.nodeType:9;if(he=he||[],typeof $!="string"||!$||yt!==1&&yt!==9&&yt!==11)return he;if(!ge&&(ki(ie),ie=ie||H,Q)){if(yt!==11&&(Le=vn.exec($)))if(we=Le[1]){if(yt===9)if(Fe=ie.getElementById(we)){if(Fe.id===we)return M.call(he,Fe),he}else return he;else if(ht&&(Fe=ht.getElementById(we))&&Nt.contains(ie,Fe)&&Fe.id===we)return M.call(he,Fe),he}else{if(Le[2])return M.apply(he,ie.getElementsByTagName($)),he;if((we=Le[3])&&ie.getElementsByClassName)return M.apply(he,ie.getElementsByClassName(we)),he}if(!Cr[$+" "]&&(!oe||!oe.test($))){if(ut=$,ht=ie,yt===1&&(Vl.test($)||as.test($))){for(ht=ql.test($)&&$l(ie.parentNode)||ie,(ht!=ie||!x.scope)&&((qe=ie.getAttribute("id"))?qe=y.escapeSelector(qe):ie.setAttribute("id",qe=Te)),xt=Qs($),De=xt.length;De--;)xt[De]=(qe?"#"+qe:":scope")+" "+Di(xt[De]);ut=xt.join(",")}try{return M.apply(he,ht.querySelectorAll(ut)),he}catch{Cr($,!0)}finally{qe===Te&&ie.removeAttribute("id")}}}return Zl($.replace(ye,"$1"),ie,he,ge)}function Fa(){var $=[];function ie(he,ge){return $.push(he+" ")>b.cacheLength&&delete ie[$.shift()],ie[he+" "]=ge}return ie}function _n($){return $[Te]=!0,$}function os($){var ie=H.createElement("fieldset");try{return!!$(ie)}catch{return!1}finally{ie.parentNode&&ie.parentNode.removeChild(ie),ie=null}}function Mc($){return function(ie){return F(ie,"input")&&ie.type===$}}function kc($){return function(ie){return(F(ie,"input")||F(ie,"button"))&&ie.type===$}}function ls($){return function(ie){return"form"in ie?ie.parentNode&&ie.disabled===!1?"label"in ie?"label"in ie.parentNode?ie.parentNode.disabled===$:ie.disabled===$:ie.isDisabled===$||ie.isDisabled!==!$&&Wl(ie)===$:ie.disabled===$:"label"in ie?ie.disabled===$:!1}}function us($){return _n(function(ie){return ie=+ie,_n(function(he,ge){for(var we,De=$([],he.length,ie),Fe=De.length;Fe--;)he[we=De[Fe]]&&(he[we]=!(ge[we]=he[we]))})})}function $l($){return $&&typeof $.getElementsByTagName<"u"&&$}function ki($){var ie,he=$?$.ownerDocument||$:V;return he==H||he.nodeType!==9||!he.documentElement||(H=he,J=H.documentElement,Q=!y.isXMLDoc(H),xe=J.matches||J.webkitMatchesSelector||J.msMatchesSelector,J.msMatchesSelector&&V!=H&&(ie=H.defaultView)&&ie.top!==ie&&ie.addEventListener("unload",Zf),x.getById=os(function(ge){return J.appendChild(ge).id=y.expando,!H.getElementsByName||!H.getElementsByName(y.expando).length}),x.disconnectedMatch=os(function(ge){return xe.call(ge,"*")}),x.scope=os(function(){return H.querySelectorAll(":scope")}),x.cssHas=os(function(){try{return H.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),x.getById?(b.filter.ID=function(ge){var we=ge.replace(li,ui);return function(De){return De.getAttribute("id")===we}},b.find.ID=function(ge,we){if(typeof we.getElementById<"u"&&Q){var De=we.getElementById(ge);return De?[De]:[]}}):(b.filter.ID=function(ge){var we=ge.replace(li,ui);return function(De){var Fe=typeof De.getAttributeNode<"u"&&De.getAttributeNode("id");return Fe&&Fe.value===we}},b.find.ID=function(ge,we){if(typeof we.getElementById<"u"&&Q){var De,Fe,qe,Le=we.getElementById(ge);if(Le){if(De=Le.getAttributeNode("id"),De&&De.value===ge)return[Le];for(qe=we.getElementsByName(ge),Fe=0;Le=qe[Fe++];)if(De=Le.getAttributeNode("id"),De&&De.value===ge)return[Le]}return[]}}),b.find.TAG=function(ge,we){return typeof we.getElementsByTagName<"u"?we.getElementsByTagName(ge):we.querySelectorAll(ge)},b.find.CLASS=function(ge,we){if(typeof we.getElementsByClassName<"u"&&Q)return we.getElementsByClassName(ge)},oe=[],os(function(ge){var we;J.appendChild(ge).innerHTML="<a id='"+Te+"' href='' disabled='disabled'></a><select id='"+Te+"-\r\\' disabled='disabled'><option selected=''></option></select>",ge.querySelectorAll("[selected]").length||oe.push("\\["+ue+"*(?:value|"+Gn+")"),ge.querySelectorAll("[id~="+Te+"-]").length||oe.push("~="),ge.querySelectorAll("a#"+Te+"+*").length||oe.push(".#.+[+~]"),ge.querySelectorAll(":checked").length||oe.push(":checked"),we=H.createElement("input"),we.setAttribute("type","hidden"),ge.appendChild(we).setAttribute("name","D"),J.appendChild(ge).disabled=!0,ge.querySelectorAll(":disabled").length!==2&&oe.push(":enabled",":disabled"),we=H.createElement("input"),we.setAttribute("name",""),ge.appendChild(we),ge.querySelectorAll("[name='']").length||oe.push("\\["+ue+"*name"+ue+"*="+ue+`*(?:''|"")`)}),x.cssHas||oe.push(":has"),oe=oe.length&&new RegExp(oe.join("|")),fr=function(ge,we){if(ge===we)return R=!0,0;var De=!ge.compareDocumentPosition-!we.compareDocumentPosition;return De||(De=(ge.ownerDocument||ge)==(we.ownerDocument||we)?ge.compareDocumentPosition(we):1,De&1||!x.sortDetached&&we.compareDocumentPosition(ge)===De?ge===H||ge.ownerDocument==V&&Nt.contains(V,ge)?-1:we===H||we.ownerDocument==V&&Nt.contains(V,we)?1:P?c.call(P,ge)-c.call(P,we):0:De&4?-1:1)}),H}Nt.matches=function($,ie){return Nt($,null,null,ie)},Nt.matchesSelector=function($,ie){if(ki($),Q&&!Cr[ie+" "]&&(!oe||!oe.test(ie)))try{var he=xe.call($,ie);if(he||x.disconnectedMatch||$.document&&$.document.nodeType!==11)return he}catch{Cr(ie,!0)}return Nt(ie,H,null,[$]).length>0},Nt.contains=function($,ie){return($.ownerDocument||$)!=H&&ki($),y.contains($,ie)},Nt.attr=function($,ie){($.ownerDocument||$)!=H&&ki($);var he=b.attrHandle[ie.toLowerCase()],ge=he&&h.call(b.attrHandle,ie.toLowerCase())?he($,ie,!Q):void 0;return ge!==void 0?ge:$.getAttribute(ie)},Nt.error=function($){throw new Error("Syntax error, unrecognized expression: "+$)},y.uniqueSort=function($){var ie,he=[],ge=0,we=0;if(R=!x.sortStable,P=!x.sortStable&&s.call($,0),ne.call($,fr),R){for(;ie=$[we++];)ie===$[we]&&(ge=he.push(we));for(;ge--;)ee.call($,he[ge],1)}return P=null,$},y.fn.uniqueSort=function(){return this.pushStack(y.uniqueSort(s.apply(this)))},b=y.expr={cacheLength:50,createPseudo:_n,match:Rn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function($){return $[1]=$[1].replace(li,ui),$[3]=($[3]||$[4]||$[5]||"").replace(li,ui),$[2]==="~="&&($[3]=" "+$[3]+" "),$.slice(0,4)},CHILD:function($){return $[1]=$[1].toLowerCase(),$[1].slice(0,3)==="nth"?($[3]||Nt.error($[0]),$[4]=+($[4]?$[5]+($[6]||1):2*($[3]==="even"||$[3]==="odd")),$[5]=+($[7]+$[8]||$[3]==="odd")):$[3]&&Nt.error($[0]),$},PSEUDO:function($){var ie,he=!$[6]&&$[2];return Rn.CHILD.test($[0])?null:($[3]?$[2]=$[4]||$[5]||"":he&&Hn.test(he)&&(ie=Qs(he,!0))&&(ie=he.indexOf(")",he.length-ie)-he.length)&&($[0]=$[0].slice(0,ie),$[2]=he.slice(0,ie)),$.slice(0,3))}},filter:{TAG:function($){var ie=$.replace(li,ui).toLowerCase();return $==="*"?function(){return!0}:function(he){return F(he,ie)}},CLASS:function($){var ie=ct[$+" "];return ie||(ie=new RegExp("(^|"+ue+")"+$+"("+ue+"|$)"))&&ct($,function(he){return ie.test(typeof he.className=="string"&&he.className||typeof he.getAttribute<"u"&&he.getAttribute("class")||"")})},ATTR:function($,ie,he){return function(ge){var we=Nt.attr(ge,$);return we==null?ie==="!=":ie?(we+="",ie==="="?we===he:ie==="!="?we!==he:ie==="^="?he&&we.indexOf(he)===0:ie==="*="?he&&we.indexOf(he)>-1:ie==="$="?he&&we.slice(-he.length)===he:ie==="~="?(" "+we.replace(At," ")+" ").indexOf(he)>-1:ie==="|="?we===he||we.slice(0,he.length+1)===he+"-":!1):!0}},CHILD:function($,ie,he,ge,we){var De=$.slice(0,3)!=="nth",Fe=$.slice(-4)!=="last",qe=ie==="of-type";return ge===1&&we===0?function(Le){return!!Le.parentNode}:function(Le,xt,ut){var ht,yt,nt,Bt,dr,yr=De!==Fe?"nextSibling":"previousSibling",Nr=Le.parentNode,mn=qe&&Le.nodeName.toLowerCase(),cs=!ut&&!qe,gr=!1;if(Nr){if(De){for(;yr;){for(nt=Le;nt=nt[yr];)if(qe?F(nt,mn):nt.nodeType===1)return!1;dr=yr=$==="only"&&!dr&&"nextSibling"}return!0}if(dr=[Fe?Nr.firstChild:Nr.lastChild],Fe&&cs){for(yt=Nr[Te]||(Nr[Te]={}),ht=yt[$]||[],Bt=ht[0]===ve&&ht[1],gr=Bt&&ht[2],nt=Bt&&Nr.childNodes[Bt];nt=++Bt&&nt&&nt[yr]||(gr=Bt=0)||dr.pop();)if(nt.nodeType===1&&++gr&&nt===Le){yt[$]=[ve,Bt,gr];break}}else if(cs&&(yt=Le[Te]||(Le[Te]={}),ht=yt[$]||[],Bt=ht[0]===ve&&ht[1],gr=Bt),gr===!1)for(;(nt=++Bt&&nt&&nt[yr]||(gr=Bt=0)||dr.pop())&&!((qe?F(nt,mn):nt.nodeType===1)&&++gr&&(cs&&(yt=nt[Te]||(nt[Te]={}),yt[$]=[ve,gr]),nt===Le)););return gr-=we,gr===ge||gr%ge===0&&gr/ge>=0}}},PSEUDO:function($,ie){var he,ge=b.pseudos[$]||b.setFilters[$.toLowerCase()]||Nt.error("unsupported pseudo: "+$);return ge[Te]?ge(ie):ge.length>1?(he=[$,$,"",ie],b.setFilters.hasOwnProperty($.toLowerCase())?_n(function(we,De){for(var Fe,qe=ge(we,ie),Le=qe.length;Le--;)Fe=c.call(we,qe[Le]),we[Fe]=!(De[Fe]=qe[Le])}):function(we){return ge(we,0,he)}):ge}},pseudos:{not:_n(function($){var ie=[],he=[],ge=Xo($.replace(ye,"$1"));return ge[Te]?_n(function(we,De,Fe,qe){for(var Le,xt=ge(we,null,qe,[]),ut=we.length;ut--;)(Le=xt[ut])&&(we[ut]=!(De[ut]=Le))}):function(we,De,Fe){return ie[0]=we,ge(ie,null,Fe,he),ie[0]=null,!he.pop()}}),has:_n(function($){return function(ie){return Nt($,ie).length>0}}),contains:_n(function($){return $=$.replace(li,ui),function(ie){return(ie.textContent||y.text(ie)).indexOf($)>-1}}),lang:_n(function($){return Da.test($||"")||Nt.error("unsupported lang: "+$),$=$.replace(li,ui).toLowerCase(),function(ie){var he;do if(he=Q?ie.lang:ie.getAttribute("xml:lang")||ie.getAttribute("lang"))return he=he.toLowerCase(),he===$||he.indexOf($+"-")===0;while((ie=ie.parentNode)&&ie.nodeType===1);return!1}}),target:function($){var ie=e.location&&e.location.hash;return ie&&ie.slice(1)===$.id},root:function($){return $===J},focus:function($){return $===Na()&&H.hasFocus()&&!!($.type||$.href||~$.tabIndex)},enabled:ls(!1),disabled:ls(!0),checked:function($){return F($,"input")&&!!$.checked||F($,"option")&&!!$.selected},selected:function($){return $.parentNode&&$.parentNode.selectedIndex,$.selected===!0},empty:function($){for($=$.firstChild;$;$=$.nextSibling)if($.nodeType<6)return!1;return!0},parent:function($){return!b.pseudos.empty($)},header:function($){return Mi.test($.nodeName)},input:function($){return Ri.test($.nodeName)},button:function($){return F($,"input")&&$.type==="button"||F($,"button")},text:function($){var ie;return F($,"input")&&$.type==="text"&&((ie=$.getAttribute("type"))==null||ie.toLowerCase()==="text")},first:us(function(){return[0]}),last:us(function($,ie){return[ie-1]}),eq:us(function($,ie,he){return[he<0?he+ie:he]}),even:us(function($,ie){for(var he=0;he<ie;he+=2)$.push(he);return $}),odd:us(function($,ie){for(var he=1;he<ie;he+=2)$.push(he);return $}),lt:us(function($,ie,he){var ge;for(he<0?ge=he+ie:he>ie?ge=ie:ge=he;--ge>=0;)$.push(ge);return $}),gt:us(function($,ie,he){for(var ge=he<0?he+ie:he;++ge<ie;)$.push(ge);return $})}},b.pseudos.nth=b.pseudos.eq;for(p in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[p]=Mc(p);for(p in{submit:!0,reset:!0})b.pseudos[p]=kc(p);function Yl(){}Yl.prototype=b.filters=b.pseudos,b.setFilters=new Yl;function Qs($,ie){var he,ge,we,De,Fe,qe,Le,xt=Et[$+" "];if(xt)return ie?0:xt.slice(0);for(Fe=$,qe=[],Le=b.preFilter;Fe;){(!he||(ge=Kt.exec(Fe)))&&(ge&&(Fe=Fe.slice(ge[0].length)||Fe),qe.push(we=[])),he=!1,(ge=as.exec(Fe))&&(he=ge.shift(),we.push({value:he,type:ge[0].replace(ye," ")}),Fe=Fe.slice(he.length));for(De in b.filter)(ge=Rn[De].exec(Fe))&&(!Le[De]||(ge=Le[De](ge)))&&(he=ge.shift(),we.push({value:he,type:De,matches:ge}),Fe=Fe.slice(he.length));if(!he)break}return ie?Fe.length:Fe?Nt.error($):Et($,qe).slice(0)}function Di($){for(var ie=0,he=$.length,ge="";ie<he;ie++)ge+=$[ie].value;return ge}function Ni($,ie,he){var ge=ie.dir,we=ie.next,De=we||ge,Fe=he&&De==="parentNode",qe=Ie++;return ie.first?function(Le,xt,ut){for(;Le=Le[ge];)if(Le.nodeType===1||Fe)return $(Le,xt,ut);return!1}:function(Le,xt,ut){var ht,yt,nt=[ve,qe];if(ut){for(;Le=Le[ge];)if((Le.nodeType===1||Fe)&&$(Le,xt,ut))return!0}else for(;Le=Le[ge];)if(Le.nodeType===1||Fe)if(yt=Le[Te]||(Le[Te]={}),we&&F(Le,we))Le=Le[ge]||Le;else{if((ht=yt[De])&&ht[0]===ve&&ht[1]===qe)return nt[2]=ht[2];if(yt[De]=nt,nt[2]=$(Le,xt,ut))return!0}return!1}}function Kl($){return $.length>1?function(ie,he,ge){for(var we=$.length;we--;)if(!$[we](ie,he,ge))return!1;return!0}:$[0]}function Go($,ie,he){for(var ge=0,we=ie.length;ge<we;ge++)Nt($,ie[ge],he);return he}function Ho($,ie,he,ge,we){for(var De,Fe=[],qe=0,Le=$.length,xt=ie!=null;qe<Le;qe++)(De=$[qe])&&(!he||he(De,ge,we))&&(Fe.push(De),xt&&ie.push(qe));return Fe}function zo($,ie,he,ge,we,De){return ge&&!ge[Te]&&(ge=zo(ge)),we&&!we[Te]&&(we=zo(we,De)),_n(function(Fe,qe,Le,xt){var ut,ht,yt,nt,Bt=[],dr=[],yr=qe.length,Nr=Fe||Go(ie||"*",Le.nodeType?[Le]:Le,[]),mn=$&&(Fe||!ie)?Ho(Nr,Bt,$,Le,xt):Nr;if(he?(nt=we||(Fe?$:yr||ge)?[]:qe,he(mn,nt,Le,xt)):nt=mn,ge)for(ut=Ho(nt,dr),ge(ut,[],Le,xt),ht=ut.length;ht--;)(yt=ut[ht])&&(nt[dr[ht]]=!(mn[dr[ht]]=yt));if(Fe){if(we||$){if(we){for(ut=[],ht=nt.length;ht--;)(yt=nt[ht])&&ut.push(mn[ht]=yt);we(null,nt=[],ut,xt)}for(ht=nt.length;ht--;)(yt=nt[ht])&&(ut=we?c.call(Fe,yt):Bt[ht])>-1&&(Fe[ut]=!(qe[ut]=yt))}}else nt=Ho(nt===qe?nt.splice(yr,nt.length):nt),we?we(null,qe,nt,xt):M.apply(qe,nt)})}function La($){for(var ie,he,ge,we=$.length,De=b.relative[$[0].type],Fe=De||b.relative[" "],qe=De?1:0,Le=Ni(function(ht){return ht===ie},Fe,!0),xt=Ni(function(ht){return c.call(ie,ht)>-1},Fe,!0),ut=[function(ht,yt,nt){var Bt=!De&&(nt||yt!=C)||((ie=yt).nodeType?Le(ht,yt,nt):xt(ht,yt,nt));return ie=null,Bt}];qe<we;qe++)if(he=b.relative[$[qe].type])ut=[Ni(Kl(ut),he)];else{if(he=b.filter[$[qe].type].apply(null,$[qe].matches),he[Te]){for(ge=++qe;ge<we&&!b.relative[$[ge].type];ge++);return zo(qe>1&&Kl(ut),qe>1&&Di($.slice(0,qe-1).concat({value:$[qe-2].type===" "?"*":""})).replace(ye,"$1"),he,qe<ge&&La($.slice(qe,ge)),ge<we&&La($=$.slice(ge)),ge<we&&Di($))}ut.push(he)}return Kl(ut)}function Ql($,ie){var he=ie.length>0,ge=$.length>0,we=function(De,Fe,qe,Le,xt){var ut,ht,yt,nt=0,Bt="0",dr=De&&[],yr=[],Nr=C,mn=De||ge&&b.find.TAG("*",xt),cs=ve+=Nr==null?1:Math.random()||.1,gr=mn.length;for(xt&&(C=Fe==H||Fe||xt);Bt!==gr&&(ut=mn[Bt])!=null;Bt++){if(ge&&ut){for(ht=0,!Fe&&ut.ownerDocument!=H&&(ki(ut),qe=!Q);yt=$[ht++];)if(yt(ut,Fe||H,qe)){M.call(Le,ut);break}xt&&(ve=cs)}he&&((ut=!yt&&ut)&&nt--,De&&dr.push(ut))}if(nt+=Bt,he&&Bt!==nt){for(ht=0;yt=ie[ht++];)yt(dr,yr,Fe,qe);if(De){if(nt>0)for(;Bt--;)dr[Bt]||yr[Bt]||(yr[Bt]=W.call(Le));yr=Ho(yr)}M.apply(Le,yr),xt&&!De&&yr.length>0&&nt+ie.length>1&&y.uniqueSort(Le)}return xt&&(ve=cs,C=Nr),dr};return he?_n(we):we}function Xo($,ie){var he,ge=[],we=[],De=mt[$+" "];if(!De){for(ie||(ie=Qs($)),he=ie.length;he--;)De=La(ie[he]),De[Te]?ge.push(De):we.push(De);De=mt($,Ql(we,ge)),De.selector=$}return De}function Zl($,ie,he,ge){var we,De,Fe,qe,Le,xt=typeof $=="function"&&$,ut=!ge&&Qs($=xt.selector||$);if(he=he||[],ut.length===1){if(De=ut[0]=ut[0].slice(0),De.length>2&&(Fe=De[0]).type==="ID"&&ie.nodeType===9&&Q&&b.relative[De[1].type]){if(ie=(b.find.ID(Fe.matches[0].replace(li,ui),ie)||[])[0],ie)xt&&(ie=ie.parentNode);else return he;$=$.slice(De.shift().value.length)}for(we=Rn.needsContext.test($)?0:De.length;we--&&(Fe=De[we],!b.relative[qe=Fe.type]);)if((Le=b.find[qe])&&(ge=Le(Fe.matches[0].replace(li,ui),ql.test(De[0].type)&&$l(ie.parentNode)||ie))){if(De.splice(we,1),$=ge.length&&Di(De),!$)return M.apply(he,ge),he;break}}return(xt||Xo($,ut))(ge,ie,!Q,he,!ie||ql.test($)&&$l(ie.parentNode)||ie),he}x.sortStable=Te.split("").sort(fr).join("")===Te,ki(),x.sortDetached=os(function($){return $.compareDocumentPosition(H.createElement("fieldset"))&1}),y.find=Nt,y.expr[":"]=y.expr.pseudos,y.unique=y.uniqueSort,Nt.compile=Xo,Nt.select=Zl,Nt.setDocument=ki,Nt.tokenize=Qs,Nt.escape=y.escapeSelector,Nt.getText=y.text,Nt.isXML=y.isXMLDoc,Nt.selectors=y.expr,Nt.support=y.support,Nt.uniqueSort=y.uniqueSort})();var Y=function(p,b,C){for(var P=[],R=C!==void 0;(p=p[b])&&p.nodeType!==9;)if(p.nodeType===1){if(R&&y(p).is(C))break;P.push(p)}return P},q=function(p,b){for(var C=[];p;p=p.nextSibling)p.nodeType===1&&p!==b&&C.push(p);return C},L=y.expr.match.needsContext,k=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function X(p,b,C){return w(b)?y.grep(p,function(P,R){return!!b.call(P,R,P)!==C}):b.nodeType?y.grep(p,function(P){return P===b!==C}):typeof b!="string"?y.grep(p,function(P){return c.call(b,P)>-1!==C}):y.filter(b,p,C)}y.filter=function(p,b,C){var P=b[0];return C&&(p=":not("+p+")"),b.length===1&&P.nodeType===1?y.find.matchesSelector(P,p)?[P]:[]:y.find.matches(p,y.grep(b,function(R){return R.nodeType===1}))},y.fn.extend({find:function(p){var b,C,P=this.length,R=this;if(typeof p!="string")return this.pushStack(y(p).filter(function(){for(b=0;b<P;b++)if(y.contains(R[b],this))return!0}));for(C=this.pushStack([]),b=0;b<P;b++)y.find(p,R[b],C);return P>1?y.uniqueSort(C):C},filter:function(p){return this.pushStack(X(this,p||[],!1))},not:function(p){return this.pushStack(X(this,p||[],!0))},is:function(p){return!!X(this,typeof p=="string"&&L.test(p)?y(p):p||[],!1).length}});var se,fe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,be=y.fn.init=function(p,b,C){var P,R;if(!p)return this;if(C=C||se,typeof p=="string")if(p[0]==="<"&&p[p.length-1]===">"&&p.length>=3?P=[null,p,null]:P=fe.exec(p),P&&(P[1]||!b))if(P[1]){if(b=b instanceof y?b[0]:b,y.merge(this,y.parseHTML(P[1],b&&b.nodeType?b.ownerDocument||b:E,!0)),k.test(P[1])&&y.isPlainObject(b))for(P in b)w(this[P])?this[P](b[P]):this.attr(P,b[P]);return this}else return R=E.getElementById(P[2]),R&&(this[0]=R,this.length=1),this;else return!b||b.jquery?(b||C).find(p):this.constructor(b).find(p);else{if(p.nodeType)return this[0]=p,this.length=1,this;if(w(p))return C.ready!==void 0?C.ready(p):p(y)}return y.makeArray(p,this)};be.prototype=y.fn,se=y(E);var Ee=/^(?:parents|prev(?:Until|All))/,Ae={children:!0,contents:!0,next:!0,prev:!0};y.fn.extend({has:function(p){var b=y(p,this),C=b.length;return this.filter(function(){for(var P=0;P<C;P++)if(y.contains(this,b[P]))return!0})},closest:function(p,b){var C,P=0,R=this.length,M=[],H=typeof p!="string"&&y(p);if(!L.test(p)){for(;P<R;P++)for(C=this[P];C&&C!==b;C=C.parentNode)if(C.nodeType<11&&(H?H.index(C)>-1:C.nodeType===1&&y.find.matchesSelector(C,p))){M.push(C);break}}return this.pushStack(M.length>1?y.uniqueSort(M):M)},index:function(p){return p?typeof p=="string"?c.call(y(p),this[0]):c.call(this,p.jquery?p[0]:p):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(p,b){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(p,b))))},addBack:function(p){return this.add(p==null?this.prevObject:this.prevObject.filter(p))}});function Re(p,b){for(;(p=p[b])&&p.nodeType!==1;);return p}y.each({parent:function(p){var b=p.parentNode;return b&&b.nodeType!==11?b:null},parents:function(p){return Y(p,"parentNode")},parentsUntil:function(p,b,C){return Y(p,"parentNode",C)},next:function(p){return Re(p,"nextSibling")},prev:function(p){return Re(p,"previousSibling")},nextAll:function(p){return Y(p,"nextSibling")},prevAll:function(p){return Y(p,"previousSibling")},nextUntil:function(p,b,C){return Y(p,"nextSibling",C)},prevUntil:function(p,b,C){return Y(p,"previousSibling",C)},siblings:function(p){return q((p.parentNode||{}).firstChild,p)},children:function(p){return q(p.firstChild)},contents:function(p){return p.contentDocument!=null&&i(p.contentDocument)?p.contentDocument:(F(p,"template")&&(p=p.content||p),y.merge([],p.childNodes))}},function(p,b){y.fn[p]=function(C,P){var R=y.map(this,b,C);return p.slice(-5)!=="Until"&&(P=C),P&&typeof P=="string"&&(R=y.filter(P,R)),this.length>1&&(Ae[p]||y.uniqueSort(R),Ee.test(p)&&R.reverse()),this.pushStack(R)}});var Se=/[^\x20\t\r\n\f]+/g;function Ue(p){var b={};return y.each(p.match(Se)||[],function(C,P){b[P]=!0}),b}y.Callbacks=function(p){p=typeof p=="string"?Ue(p):y.extend({},p);var b,C,P,R,M=[],H=[],J=-1,Q=function(){for(R=R||p.once,P=b=!0;H.length;J=-1)for(C=H.shift();++J<M.length;)M[J].apply(C[0],C[1])===!1&&p.stopOnFalse&&(J=M.length,C=!1);p.memory||(C=!1),b=!1,R&&(C?M=[]:M="")},oe={add:function(){return M&&(C&&!b&&(J=M.length-1,H.push(C)),function xe(Te){y.each(Te,function(ve,Ie){w(Ie)?(!p.unique||!oe.has(Ie))&&M.push(Ie):Ie&&Ie.length&&z(Ie)!=="string"&&xe(Ie)})}(arguments),C&&!b&&Q()),this},remove:function(){return y.each(arguments,function(xe,Te){for(var ve;(ve=y.inArray(Te,M,ve))>-1;)M.splice(ve,1),ve<=J&&J--}),this},has:function(xe){return xe?y.inArray(xe,M)>-1:M.length>0},empty:function(){return M&&(M=[]),this},disable:function(){return R=H=[],M=C="",this},disabled:function(){return!M},lock:function(){return R=H=[],!C&&!b&&(M=C=""),this},locked:function(){return!!R},fireWith:function(xe,Te){return R||(Te=Te||[],Te=[xe,Te.slice?Te.slice():Te],H.push(Te),b||Q()),this},fire:function(){return oe.fireWith(this,arguments),this},fired:function(){return!!P}};return oe};function je(p){return p}function et(p){throw p}function Xe(p,b,C,P){var R;try{p&&w(R=p.promise)?R.call(p).done(b).fail(C):p&&w(R=p.then)?R.call(p,b,C):b.apply(void 0,[p].slice(P))}catch(M){C.apply(void 0,[M])}}y.extend({Deferred:function(p){var b=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],C="pending",P={state:function(){return C},always:function(){return R.done(arguments).fail(arguments),this},catch:function(M){return P.then(null,M)},pipe:function(){var M=arguments;return y.Deferred(function(H){y.each(b,function(J,Q){var oe=w(M[Q[4]])&&M[Q[4]];R[Q[1]](function(){var xe=oe&&oe.apply(this,arguments);xe&&w(xe.promise)?xe.promise().progress(H.notify).done(H.resolve).fail(H.reject):H[Q[0]+"With"](this,oe?[xe]:arguments)})}),M=null}).promise()},then:function(M,H,J){var Q=0;function oe(xe,Te,ve,Ie){return function(){var ct=this,Et=arguments,mt=function(){var fr,Gn;if(!(xe<Q)){if(fr=ve.apply(ct,Et),fr===Te.promise())throw new TypeError("Thenable self-resolution");Gn=fr&&(typeof fr=="object"||typeof fr=="function")&&fr.then,w(Gn)?Ie?Gn.call(fr,oe(Q,Te,je,Ie),oe(Q,Te,et,Ie)):(Q++,Gn.call(fr,oe(Q,Te,je,Ie),oe(Q,Te,et,Ie),oe(Q,Te,je,Te.notifyWith))):(ve!==je&&(ct=void 0,Et=[fr]),(Ie||Te.resolveWith)(ct,Et))}},Cr=Ie?mt:function(){try{mt()}catch(fr){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(fr,Cr.error),xe+1>=Q&&(ve!==et&&(ct=void 0,Et=[fr]),Te.rejectWith(ct,Et))}};xe?Cr():(y.Deferred.getErrorHook?Cr.error=y.Deferred.getErrorHook():y.Deferred.getStackHook&&(Cr.error=y.Deferred.getStackHook()),e.setTimeout(Cr))}}return y.Deferred(function(xe){b[0][3].add(oe(0,xe,w(J)?J:je,xe.notifyWith)),b[1][3].add(oe(0,xe,w(M)?M:je)),b[2][3].add(oe(0,xe,w(H)?H:et))}).promise()},promise:function(M){return M!=null?y.extend(M,P):P}},R={};return y.each(b,function(M,H){var J=H[2],Q=H[5];P[H[1]]=J.add,Q&&J.add(function(){C=Q},b[3-M][2].disable,b[3-M][3].disable,b[0][2].lock,b[0][3].lock),J.add(H[3].fire),R[H[0]]=function(){return R[H[0]+"With"](this===R?void 0:this,arguments),this},R[H[0]+"With"]=J.fireWith}),P.promise(R),p&&p.call(R,R),R},when:function(p){var b=arguments.length,C=b,P=Array(C),R=s.call(arguments),M=y.Deferred(),H=function(J){return function(Q){P[J]=this,R[J]=arguments.length>1?s.call(arguments):Q,--b||M.resolveWith(P,R)}};if(b<=1&&(Xe(p,M.done(H(C)).resolve,M.reject,!b),M.state()==="pending"||w(R[C]&&R[C].then)))return M.then();for(;C--;)Xe(R[C],H(C),M.reject);return M.promise()}});var ze=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(p,b){e.console&&e.console.warn&&p&&ze.test(p.name)&&e.console.warn("jQuery.Deferred exception: "+p.message,p.stack,b)},y.readyException=function(p){e.setTimeout(function(){throw p})};var Be=y.Deferred();y.fn.ready=function(p){return Be.then(p).catch(function(b){y.readyException(b)}),this},y.extend({isReady:!1,readyWait:1,ready:function(p){(p===!0?--y.readyWait:y.isReady)||(y.isReady=!0,!(p!==!0&&--y.readyWait>0)&&Be.resolveWith(E,[y]))}}),y.ready.then=Be.then;function tt(){E.removeEventListener("DOMContentLoaded",tt),e.removeEventListener("load",tt),y.ready()}E.readyState==="complete"||E.readyState!=="loading"&&!E.documentElement.doScroll?e.setTimeout(y.ready):(E.addEventListener("DOMContentLoaded",tt),e.addEventListener("load",tt));var bt=function(p,b,C,P,R,M,H){var J=0,Q=p.length,oe=C==null;if(z(C)==="object"){R=!0;for(J in C)bt(p,b,J,C[J],!0,M,H)}else if(P!==void 0&&(R=!0,w(P)||(H=!0),oe&&(H?(b.call(p,P),b=null):(oe=b,b=function(xe,Te,ve){return oe.call(y(xe),ve)})),b))for(;J<Q;J++)b(p[J],C,H?P:P.call(p[J],J,b(p[J],C)));return R?p:oe?b.call(p):Q?b(p[0],C):M},Tr=/^-ms-/,ur=/-([a-z])/g;function tr(p,b){return b.toUpperCase()}function Wt(p){return p.replace(Tr,"ms-").replace(ur,tr)}var Mr=function(p){return p.nodeType===1||p.nodeType===9||!+p.nodeType};function kr(){this.expando=y.expando+kr.uid++}kr.uid=1,kr.prototype={cache:function(p){var b=p[this.expando];return b||(b={},Mr(p)&&(p.nodeType?p[this.expando]=b:Object.defineProperty(p,this.expando,{value:b,configurable:!0}))),b},set:function(p,b,C){var P,R=this.cache(p);if(typeof b=="string")R[Wt(b)]=C;else for(P in b)R[Wt(P)]=b[P];return R},get:function(p,b){return b===void 0?this.cache(p):p[this.expando]&&p[this.expando][Wt(b)]},access:function(p,b,C){return b===void 0||b&&typeof b=="string"&&C===void 0?this.get(p,b):(this.set(p,b,C),C!==void 0?C:b)},remove:function(p,b){var C,P=p[this.expando];if(P!==void 0){if(b!==void 0)for(Array.isArray(b)?b=b.map(Wt):(b=Wt(b),b=b in P?[b]:b.match(Se)||[]),C=b.length;C--;)delete P[b[C]];(b===void 0||y.isEmptyObject(P))&&(p.nodeType?p[this.expando]=void 0:delete p[this.expando])}},hasData:function(p){var b=p[this.expando];return b!==void 0&&!y.isEmptyObject(b)}};var Qe=new kr,Sr=new kr,Ls=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Bs=/[A-Z]/g;function Ei(p){return p==="true"?!0:p==="false"?!1:p==="null"?null:p===+p+""?+p:Ls.test(p)?JSON.parse(p):p}function Un(p,b,C){var P;if(C===void 0&&p.nodeType===1)if(P="data-"+b.replace(Bs,"-$&").toLowerCase(),C=p.getAttribute(P),typeof C=="string"){try{C=Ei(C)}catch{}Sr.set(p,b,C)}else C=void 0;return C}y.extend({hasData:function(p){return Sr.hasData(p)||Qe.hasData(p)},data:function(p,b,C){return Sr.access(p,b,C)},removeData:function(p,b){Sr.remove(p,b)},_data:function(p,b,C){return Qe.access(p,b,C)},_removeData:function(p,b){Qe.remove(p,b)}}),y.fn.extend({data:function(p,b){var C,P,R,M=this[0],H=M&&M.attributes;if(p===void 0){if(this.length&&(R=Sr.get(M),M.nodeType===1&&!Qe.get(M,"hasDataAttrs"))){for(C=H.length;C--;)H[C]&&(P=H[C].name,P.indexOf("data-")===0&&(P=Wt(P.slice(5)),Un(M,P,R[P])));Qe.set(M,"hasDataAttrs",!0)}return R}return typeof p=="object"?this.each(function(){Sr.set(this,p)}):bt(this,function(J){var Q;if(M&&J===void 0)return Q=Sr.get(M,p),Q!==void 0||(Q=Un(M,p),Q!==void 0)?Q:void 0;this.each(function(){Sr.set(this,p,J)})},null,b,arguments.length>1,null,!0)},removeData:function(p){return this.each(function(){Sr.remove(this,p)})}}),y.extend({queue:function(p,b,C){var P;if(p)return b=(b||"fx")+"queue",P=Qe.get(p,b),C&&(!P||Array.isArray(C)?P=Qe.access(p,b,y.makeArray(C)):P.push(C)),P||[]},dequeue:function(p,b){b=b||"fx";var C=y.queue(p,b),P=C.length,R=C.shift(),M=y._queueHooks(p,b),H=function(){y.dequeue(p,b)};R==="inprogress"&&(R=C.shift(),P--),R&&(b==="fx"&&C.unshift("inprogress"),delete M.stop,R.call(p,H,M)),!P&&M&&M.empty.fire()},_queueHooks:function(p,b){var C=b+"queueHooks";return Qe.get(p,C)||Qe.access(p,C,{empty:y.Callbacks("once memory").add(function(){Qe.remove(p,[b+"queue",C])})})}}),y.fn.extend({queue:function(p,b){var C=2;return typeof p!="string"&&(b=p,p="fx",C--),arguments.length<C?y.queue(this[0],p):b===void 0?this:this.each(function(){var P=y.queue(this,p,b);y._queueHooks(this,p),p==="fx"&&P[0]!=="inprogress"&&y.dequeue(this,p)})},dequeue:function(p){return this.each(function(){y.dequeue(this,p)})},clearQueue:function(p){return this.queue(p||"fx",[])},promise:function(p,b){var C,P=1,R=y.Deferred(),M=this,H=this.length,J=function(){--P||R.resolveWith(M,[M])};for(typeof p!="string"&&(b=p,p=void 0),p=p||"fx";H--;)C=Qe.get(M[H],p+"queueHooks"),C&&C.empty&&(P++,C.empty.add(J));return J(),R.promise(b)}});var ti=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Zi=new RegExp("^(?:([+-])=|)("+ti+")([a-z%]*)$","i"),hn=["Top","Right","Bottom","Left"],fn=E.documentElement,Sn=function(p){return y.contains(p.ownerDocument,p)},de={composed:!0};fn.getRootNode&&(Sn=function(p){return y.contains(p.ownerDocument,p)||p.getRootNode(de)===p.ownerDocument});var _e=function(p,b){return p=b||p,p.style.display==="none"||p.style.display===""&&Sn(p)&&y.css(p,"display")==="none"};function wt(p,b,C,P){var R,M,H=20,J=P?function(){return P.cur()}:function(){return y.css(p,b,"")},Q=J(),oe=C&&C[3]||(y.cssNumber[b]?"":"px"),xe=p.nodeType&&(y.cssNumber[b]||oe!=="px"&&+Q)&&Zi.exec(y.css(p,b));if(xe&&xe[3]!==oe){for(Q=Q/2,oe=oe||xe[3],xe=+Q||1;H--;)y.style(p,b,xe+oe),(1-M)*(1-(M=J()/Q||.5))<=0&&(H=0),xe=xe/M;xe=xe*2,y.style(p,b,xe+oe),C=C||[]}return C&&(xe=+xe||+Q||0,R=C[1]?xe+(C[1]+1)*C[2]:+C[2],P&&(P.unit=oe,P.start=xe,P.end=R)),R}var Ot={};function kt(p){var b,C=p.ownerDocument,P=p.nodeName,R=Ot[P];return R||(b=C.body.appendChild(C.createElement(P)),R=y.css(b,"display"),b.parentNode.removeChild(b),R==="none"&&(R="block"),Ot[P]=R,R)}function it(p,b){for(var C,P,R=[],M=0,H=p.length;M<H;M++)P=p[M],P.style&&(C=P.style.display,b?(C==="none"&&(R[M]=Qe.get(P,"display")||null,R[M]||(P.style.display="")),P.style.display===""&&_e(P)&&(R[M]=kt(P))):C!=="none"&&(R[M]="none",Qe.set(P,"display",C)));for(M=0;M<H;M++)R[M]!=null&&(p[M].style.display=R[M]);return p}y.fn.extend({show:function(){return it(this,!0)},hide:function(){return it(this)},toggle:function(p){return typeof p=="boolean"?p?this.show():this.hide():this.each(function(){_e(this)?y(this).show():y(this).hide()})}});var cr=/^(?:checkbox|radio)$/i,En=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Er=/^$|^module$|\/(?:java|ecma)script/i;(function(){var p=E.createDocumentFragment(),b=p.appendChild(E.createElement("div")),C=E.createElement("input");C.setAttribute("type","radio"),C.setAttribute("checked","checked"),C.setAttribute("name","t"),b.appendChild(C),x.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",x.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,b.innerHTML="<option></option>",x.option=!!b.lastChild})();var $t={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$t.tbody=$t.tfoot=$t.colgroup=$t.caption=$t.thead,$t.th=$t.td,x.option||($t.optgroup=$t.option=[1,"<select multiple='multiple'>","</select>"]);function hr(p,b){var C;return typeof p.getElementsByTagName<"u"?C=p.getElementsByTagName(b||"*"):typeof p.querySelectorAll<"u"?C=p.querySelectorAll(b||"*"):C=[],b===void 0||b&&F(p,b)?y.merge([p],C):C}function Cn(p,b){for(var C=0,P=p.length;C<P;C++)Qe.set(p[C],"globalEval",!b||Qe.get(b[C],"globalEval"))}var Ur=/<|&#?\w+;/;function js(p,b,C,P,R){for(var M,H,J,Q,oe,xe,Te=b.createDocumentFragment(),ve=[],Ie=0,ct=p.length;Ie<ct;Ie++)if(M=p[Ie],M||M===0)if(z(M)==="object")y.merge(ve,M.nodeType?[M]:M);else if(!Ur.test(M))ve.push(b.createTextNode(M));else{for(H=H||Te.appendChild(b.createElement("div")),J=(En.exec(M)||["",""])[1].toLowerCase(),Q=$t[J]||$t._default,H.innerHTML=Q[1]+y.htmlPrefilter(M)+Q[2],xe=Q[0];xe--;)H=H.lastChild;y.merge(ve,H.childNodes),H=Te.firstChild,H.textContent=""}for(Te.textContent="",Ie=0;M=ve[Ie++];){if(P&&y.inArray(M,P)>-1){R&&R.push(M);continue}if(oe=Sn(M),H=hr(Te.appendChild(M),"script"),oe&&Cn(H),C)for(xe=0;M=H[xe++];)Er.test(M.type||"")&&C.push(M)}return Te}var ri=/^([^.]*)(?:\.(.+)|)/;function An(){return!0}function Dr(){return!1}function Ji(p,b,C,P,R,M){var H,J;if(typeof b=="object"){typeof C!="string"&&(P=P||C,C=void 0);for(J in b)Ji(p,J,C,P,b[J],M);return p}if(P==null&&R==null?(R=C,P=C=void 0):R==null&&(typeof C=="string"?(R=P,P=void 0):(R=P,P=C,C=void 0)),R===!1)R=Dr;else if(!R)return p;return M===1&&(H=R,R=function(Q){return y().off(Q),H.apply(this,arguments)},R.guid=H.guid||(H.guid=y.guid++)),p.each(function(){y.event.add(this,b,R,P,C)})}y.event={global:{},add:function(p,b,C,P,R){var M,H,J,Q,oe,xe,Te,ve,Ie,ct,Et,mt=Qe.get(p);if(Mr(p))for(C.handler&&(M=C,C=M.handler,R=M.selector),R&&y.find.matchesSelector(fn,R),C.guid||(C.guid=y.guid++),(Q=mt.events)||(Q=mt.events=Object.create(null)),(H=mt.handle)||(H=mt.handle=function(Cr){return typeof y<"u"&&y.event.triggered!==Cr.type?y.event.dispatch.apply(p,arguments):void 0}),b=(b||"").match(Se)||[""],oe=b.length;oe--;)J=ri.exec(b[oe])||[],Ie=Et=J[1],ct=(J[2]||"").split(".").sort(),Ie&&(Te=y.event.special[Ie]||{},Ie=(R?Te.delegateType:Te.bindType)||Ie,Te=y.event.special[Ie]||{},xe=y.extend({type:Ie,origType:Et,data:P,handler:C,guid:C.guid,selector:R,needsContext:R&&y.expr.match.needsContext.test(R),namespace:ct.join(".")},M),(ve=Q[Ie])||(ve=Q[Ie]=[],ve.delegateCount=0,(!Te.setup||Te.setup.call(p,P,ct,H)===!1)&&p.addEventListener&&p.addEventListener(Ie,H)),Te.add&&(Te.add.call(p,xe),xe.handler.guid||(xe.handler.guid=C.guid)),R?ve.splice(ve.delegateCount++,0,xe):ve.push(xe),y.event.global[Ie]=!0)},remove:function(p,b,C,P,R){var M,H,J,Q,oe,xe,Te,ve,Ie,ct,Et,mt=Qe.hasData(p)&&Qe.get(p);if(!(!mt||!(Q=mt.events))){for(b=(b||"").match(Se)||[""],oe=b.length;oe--;){if(J=ri.exec(b[oe])||[],Ie=Et=J[1],ct=(J[2]||"").split(".").sort(),!Ie){for(Ie in Q)y.event.remove(p,Ie+b[oe],C,P,!0);continue}for(Te=y.event.special[Ie]||{},Ie=(P?Te.delegateType:Te.bindType)||Ie,ve=Q[Ie]||[],J=J[2]&&new RegExp("(^|\\.)"+ct.join("\\.(?:.*\\.|)")+"(\\.|$)"),H=M=ve.length;M--;)xe=ve[M],(R||Et===xe.origType)&&(!C||C.guid===xe.guid)&&(!J||J.test(xe.namespace))&&(!P||P===xe.selector||P==="**"&&xe.selector)&&(ve.splice(M,1),xe.selector&&ve.delegateCount--,Te.remove&&Te.remove.call(p,xe));H&&!ve.length&&((!Te.teardown||Te.teardown.call(p,ct,mt.handle)===!1)&&y.removeEvent(p,Ie,mt.handle),delete Q[Ie])}y.isEmptyObject(Q)&&Qe.remove(p,"handle events")}},dispatch:function(p){var b,C,P,R,M,H,J=new Array(arguments.length),Q=y.event.fix(p),oe=(Qe.get(this,"events")||Object.create(null))[Q.type]||[],xe=y.event.special[Q.type]||{};for(J[0]=Q,b=1;b<arguments.length;b++)J[b]=arguments[b];if(Q.delegateTarget=this,!(xe.preDispatch&&xe.preDispatch.call(this,Q)===!1)){for(H=y.event.handlers.call(this,Q,oe),b=0;(R=H[b++])&&!Q.isPropagationStopped();)for(Q.currentTarget=R.elem,C=0;(M=R.handlers[C++])&&!Q.isImmediatePropagationStopped();)(!Q.rnamespace||M.namespace===!1||Q.rnamespace.test(M.namespace))&&(Q.handleObj=M,Q.data=M.data,P=((y.event.special[M.origType]||{}).handle||M.handler).apply(R.elem,J),P!==void 0&&(Q.result=P)===!1&&(Q.preventDefault(),Q.stopPropagation()));return xe.postDispatch&&xe.postDispatch.call(this,Q),Q.result}},handlers:function(p,b){var C,P,R,M,H,J=[],Q=b.delegateCount,oe=p.target;if(Q&&oe.nodeType&&!(p.type==="click"&&p.button>=1)){for(;oe!==this;oe=oe.parentNode||this)if(oe.nodeType===1&&!(p.type==="click"&&oe.disabled===!0)){for(M=[],H={},C=0;C<Q;C++)P=b[C],R=P.selector+" ",H[R]===void 0&&(H[R]=P.needsContext?y(R,this).index(oe)>-1:y.find(R,this,null,[oe]).length),H[R]&&M.push(P);M.length&&J.push({elem:oe,handlers:M})}}return oe=this,Q<b.length&&J.push({elem:oe,handlers:b.slice(Q)}),J},addProp:function(p,b){Object.defineProperty(y.Event.prototype,p,{enumerable:!0,configurable:!0,get:w(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[p]},set:function(C){Object.defineProperty(this,p,{enumerable:!0,configurable:!0,writable:!0,value:C})}})},fix:function(p){return p[y.expando]?p:new y.Event(p)},special:{load:{noBubble:!0},click:{setup:function(p){var b=this||p;return cr.test(b.type)&&b.click&&F(b,"input")&&rn(b,"click",!0),!1},trigger:function(p){var b=this||p;return cr.test(b.type)&&b.click&&F(b,"input")&&rn(b,"click"),!0},_default:function(p){var b=p.target;return cr.test(b.type)&&b.click&&F(b,"input")&&Qe.get(b,"click")||F(b,"a")}},beforeunload:{postDispatch:function(p){p.result!==void 0&&p.originalEvent&&(p.originalEvent.returnValue=p.result)}}}};function rn(p,b,C){if(!C){Qe.get(p,b)===void 0&&y.event.add(p,b,An);return}Qe.set(p,b,!1),y.event.add(p,b,{namespace:!1,handler:function(P){var R,M=Qe.get(this,b);if(P.isTrigger&1&&this[b]){if(M)(y.event.special[b]||{}).delegateType&&P.stopPropagation();else if(M=s.call(arguments),Qe.set(this,b,M),this[b](),R=Qe.get(this,b),Qe.set(this,b,!1),M!==R)return P.stopImmediatePropagation(),P.preventDefault(),R}else M&&(Qe.set(this,b,y.event.trigger(M[0],M.slice(1),this)),P.stopPropagation(),P.isImmediatePropagationStopped=An)}})}y.removeEvent=function(p,b,C){p.removeEventListener&&p.removeEventListener(b,C)},y.Event=function(p,b){if(!(this instanceof y.Event))return new y.Event(p,b);p&&p.type?(this.originalEvent=p,this.type=p.type,this.isDefaultPrevented=p.defaultPrevented||p.defaultPrevented===void 0&&p.returnValue===!1?An:Dr,this.target=p.target&&p.target.nodeType===3?p.target.parentNode:p.target,this.currentTarget=p.currentTarget,this.relatedTarget=p.relatedTarget):this.type=p,b&&y.extend(this,b),this.timeStamp=p&&p.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:Dr,isPropagationStopped:Dr,isImmediatePropagationStopped:Dr,isSimulated:!1,preventDefault:function(){var p=this.originalEvent;this.isDefaultPrevented=An,p&&!this.isSimulated&&p.preventDefault()},stopPropagation:function(){var p=this.originalEvent;this.isPropagationStopped=An,p&&!this.isSimulated&&p.stopPropagation()},stopImmediatePropagation:function(){var p=this.originalEvent;this.isImmediatePropagationStopped=An,p&&!this.isSimulated&&p.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},function(p,b){function C(P){if(E.documentMode){var R=Qe.get(this,"handle"),M=y.event.fix(P);M.type=P.type==="focusin"?"focus":"blur",M.isSimulated=!0,R(P),M.target===M.currentTarget&&R(M)}else y.event.simulate(b,P.target,y.event.fix(P))}y.event.special[p]={setup:function(){var P;if(rn(this,p,!0),E.documentMode)P=Qe.get(this,b),P||this.addEventListener(b,C),Qe.set(this,b,(P||0)+1);else return!1},trigger:function(){return rn(this,p),!0},teardown:function(){var P;if(E.documentMode)P=Qe.get(this,b)-1,P?Qe.set(this,b,P):(this.removeEventListener(b,C),Qe.remove(this,b));else return!1},_default:function(P){return Qe.get(P.target,p)},delegateType:b},y.event.special[b]={setup:function(){var P=this.ownerDocument||this.document||this,R=E.documentMode?this:P,M=Qe.get(R,b);M||(E.documentMode?this.addEventListener(b,C):P.addEventListener(p,C,!0)),Qe.set(R,b,(M||0)+1)},teardown:function(){var P=this.ownerDocument||this.document||this,R=E.documentMode?this:P,M=Qe.get(R,b)-1;M?Qe.set(R,b,M):(E.documentMode?this.removeEventListener(b,C):P.removeEventListener(p,C,!0),Qe.remove(R,b))}}}),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(p,b){y.event.special[p]={delegateType:b,bindType:b,handle:function(C){var P,R=this,M=C.relatedTarget,H=C.handleObj;return(!M||M!==R&&!y.contains(R,M))&&(C.type=H.origType,P=H.handler.apply(this,arguments),C.type=b),P}}}),y.fn.extend({on:function(p,b,C,P){return Ji(this,p,b,C,P)},one:function(p,b,C,P){return Ji(this,p,b,C,P,1)},off:function(p,b,C){var P,R;if(p&&p.preventDefault&&p.handleObj)return P=p.handleObj,y(p.delegateTarget).off(P.namespace?P.origType+"."+P.namespace:P.origType,P.selector,P.handler),this;if(typeof p=="object"){for(R in p)this.off(R,b,p[R]);return this}return(b===!1||typeof b=="function")&&(C=b,b=void 0),C===!1&&(C=Dr),this.each(function(){y.event.remove(this,p,C,b)})}});var Ci=/<script|<style|<link/i,Ai=/checked\s*(?:[^=]|=\s*.checked.)/i,Us=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ca(p,b){return F(p,"table")&&F(b.nodeType!==11?b:b.firstChild,"tr")&&y(p).children("tbody")[0]||p}function Aa(p){return p.type=(p.getAttribute("type")!==null)+"/"+p.type,p}function Ao(p){return(p.type||"").slice(0,5)==="true/"?p.type=p.type.slice(5):p.removeAttribute("type"),p}function dn(p,b){var C,P,R,M,H,J,Q;if(b.nodeType===1){if(Qe.hasData(p)&&(M=Qe.get(p),Q=M.events,Q)){Qe.remove(b,"handle events");for(R in Q)for(C=0,P=Q[R].length;C<P;C++)y.event.add(b,R,Q[R][C])}Sr.hasData(p)&&(H=Sr.access(p),J=y.extend({},H),Sr.set(b,J))}}function Pa(p,b){var C=b.nodeName.toLowerCase();C==="input"&&cr.test(p.type)?b.checked=p.checked:(C==="input"||C==="textarea")&&(b.defaultValue=p.defaultValue)}function ni(p,b,C,P){b=o(b);var R,M,H,J,Q,oe,xe=0,Te=p.length,ve=Te-1,Ie=b[0],ct=w(Ie);if(ct||Te>1&&typeof Ie=="string"&&!x.checkClone&&Ai.test(Ie))return p.each(function(Et){var mt=p.eq(Et);ct&&(b[0]=Ie.call(this,Et,mt.html())),ni(mt,b,C,P)});if(Te&&(R=js(b,p[0].ownerDocument,!1,p,P),M=R.firstChild,R.childNodes.length===1&&(R=M),M||P)){for(H=y.map(hr(R,"script"),Aa),J=H.length;xe<Te;xe++)Q=R,xe!==ve&&(Q=y.clone(Q,!0,!0),J&&y.merge(H,hr(Q,"script"))),C.call(p[xe],Q,xe);if(J)for(oe=H[H.length-1].ownerDocument,y.map(H,Ao),xe=0;xe<J;xe++)Q=H[xe],Er.test(Q.type||"")&&!Qe.access(Q,"globalEval")&&y.contains(oe,Q)&&(Q.src&&(Q.type||"").toLowerCase()!=="module"?y._evalUrl&&!Q.noModule&&y._evalUrl(Q.src,{nonce:Q.nonce||Q.getAttribute("nonce")},oe):D(Q.textContent.replace(Us,""),Q,oe))}return p}function Gs(p,b,C){for(var P,R=b?y.filter(b,p):p,M=0;(P=R[M])!=null;M++)!C&&P.nodeType===1&&y.cleanData(hr(P)),P.parentNode&&(C&&Sn(P)&&Cn(hr(P,"script")),P.parentNode.removeChild(P));return p}y.extend({htmlPrefilter:function(p){return p},clone:function(p,b,C){var P,R,M,H,J=p.cloneNode(!0),Q=Sn(p);if(!x.noCloneChecked&&(p.nodeType===1||p.nodeType===11)&&!y.isXMLDoc(p))for(H=hr(J),M=hr(p),P=0,R=M.length;P<R;P++)Pa(M[P],H[P]);if(b)if(C)for(M=M||hr(p),H=H||hr(J),P=0,R=M.length;P<R;P++)dn(M[P],H[P]);else dn(p,J);return H=hr(J,"script"),H.length>0&&Cn(H,!Q&&hr(p,"script")),J},cleanData:function(p){for(var b,C,P,R=y.event.special,M=0;(C=p[M])!==void 0;M++)if(Mr(C)){if(b=C[Qe.expando]){if(b.events)for(P in b.events)R[P]?y.event.remove(C,P):y.removeEvent(C,P,b.handle);C[Qe.expando]=void 0}C[Sr.expando]&&(C[Sr.expando]=void 0)}}}),y.fn.extend({detach:function(p){return Gs(this,p,!0)},remove:function(p){return Gs(this,p)},text:function(p){return bt(this,function(b){return b===void 0?y.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=b)})},null,p,arguments.length)},append:function(){return ni(this,arguments,function(p){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=Ca(this,p);b.appendChild(p)}})},prepend:function(){return ni(this,arguments,function(p){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=Ca(this,p);b.insertBefore(p,b.firstChild)}})},before:function(){return ni(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this)})},after:function(){return ni(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this.nextSibling)})},empty:function(){for(var p,b=0;(p=this[b])!=null;b++)p.nodeType===1&&(y.cleanData(hr(p,!1)),p.textContent="");return this},clone:function(p,b){return p=p??!1,b=b??p,this.map(function(){return y.clone(this,p,b)})},html:function(p){return bt(this,function(b){var C=this[0]||{},P=0,R=this.length;if(b===void 0&&C.nodeType===1)return C.innerHTML;if(typeof b=="string"&&!Ci.test(b)&&!$t[(En.exec(b)||["",""])[1].toLowerCase()]){b=y.htmlPrefilter(b);try{for(;P<R;P++)C=this[P]||{},C.nodeType===1&&(y.cleanData(hr(C,!1)),C.innerHTML=b);C=0}catch{}}C&&this.empty().append(b)},null,p,arguments.length)},replaceWith:function(){var p=[];return ni(this,arguments,function(b){var C=this.parentNode;y.inArray(this,p)<0&&(y.cleanData(hr(this)),C&&C.replaceChild(b,this))},p)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(p,b){y.fn[p]=function(C){for(var P,R=[],M=y(C),H=M.length-1,J=0;J<=H;J++)P=J===H?this:this.clone(!0),y(M[J])[b](P),u.apply(R,P.get());return this.pushStack(R)}});var Pn=new RegExp("^("+ti+")(?!px)[a-z%]+$","i"),ii=/^--/,es=function(p){var b=p.ownerDocument.defaultView;return(!b||!b.opener)&&(b=e),b.getComputedStyle(p)},Hs=function(p,b,C){var P,R,M={};for(R in b)M[R]=p.style[R],p.style[R]=b[R];P=C.call(p);for(R in b)p.style[R]=M[R];return P},Yf=new RegExp(hn.join("|"),"i");(function(){function p(){if(oe){Q.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",oe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",fn.appendChild(Q).appendChild(oe);var xe=e.getComputedStyle(oe);C=xe.top!=="1%",J=b(xe.marginLeft)===12,oe.style.right="60%",M=b(xe.right)===36,P=b(xe.width)===36,oe.style.position="absolute",R=b(oe.offsetWidth/3)===12,fn.removeChild(Q),oe=null}}function b(xe){return Math.round(parseFloat(xe))}var C,P,R,M,H,J,Q=E.createElement("div"),oe=E.createElement("div");oe.style&&(oe.style.backgroundClip="content-box",oe.cloneNode(!0).style.backgroundClip="",x.clearCloneStyle=oe.style.backgroundClip==="content-box",y.extend(x,{boxSizingReliable:function(){return p(),P},pixelBoxStyles:function(){return p(),M},pixelPosition:function(){return p(),C},reliableMarginLeft:function(){return p(),J},scrollboxSize:function(){return p(),R},reliableTrDimensions:function(){var xe,Te,ve,Ie;return H==null&&(xe=E.createElement("table"),Te=E.createElement("tr"),ve=E.createElement("div"),xe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Te.style.cssText="box-sizing:content-box;border:1px solid",Te.style.height="1px",ve.style.height="9px",ve.style.display="block",fn.appendChild(xe).appendChild(Te).appendChild(ve),Ie=e.getComputedStyle(Te),H=parseInt(Ie.height,10)+parseInt(Ie.borderTopWidth,10)+parseInt(Ie.borderBottomWidth,10)===Te.offsetHeight,fn.removeChild(xe)),H}}))})();function Ia(p,b,C){var P,R,M,H,J=ii.test(b),Q=p.style;return C=C||es(p),C&&(H=C.getPropertyValue(b)||C[b],J&&H&&(H=H.replace(ye,"$1")||void 0),H===""&&!Sn(p)&&(H=y.style(p,b)),!x.pixelBoxStyles()&&Pn.test(H)&&Yf.test(b)&&(P=Q.width,R=Q.minWidth,M=Q.maxWidth,Q.minWidth=Q.maxWidth=Q.width=H,H=C.width,Q.width=P,Q.minWidth=R,Q.maxWidth=M)),H!==void 0?H+"":H}function Yt(p,b){return{get:function(){if(p()){delete this.get;return}return(this.get=b).apply(this,arguments)}}}var _c=["Webkit","Moz","ms"],Po=E.createElement("div").style,Ul={};function Io(p){for(var b=p[0].toUpperCase()+p.slice(1),C=_c.length;C--;)if(p=_c[C]+b,p in Po)return p}function Gl(p){var b=y.cssProps[p]||Ul[p];return b||(p in Po?p:Ul[p]=Io(p)||p)}var mc=/^(none|table(?!-c[ea]).+)/,Oo={position:"absolute",visibility:"hidden",display:"block"},In={letterSpacing:"0",fontWeight:"400"};function yc(p,b,C){var P=Zi.exec(b);return P?Math.max(0,P[2]-(C||0))+(P[3]||"px"):b}function nn(p,b,C,P,R,M){var H=b==="width"?1:0,J=0,Q=0,oe=0;if(C===(P?"border":"content"))return 0;for(;H<4;H+=2)C==="margin"&&(oe+=y.css(p,C+hn[H],!0,R)),P?(C==="content"&&(Q-=y.css(p,"padding"+hn[H],!0,R)),C!=="margin"&&(Q-=y.css(p,"border"+hn[H]+"Width",!0,R))):(Q+=y.css(p,"padding"+hn[H],!0,R),C!=="padding"?Q+=y.css(p,"border"+hn[H]+"Width",!0,R):J+=y.css(p,"border"+hn[H]+"Width",!0,R));return!P&&M>=0&&(Q+=Math.max(0,Math.ceil(p["offset"+b[0].toUpperCase()+b.slice(1)]-M-Q-J-.5))||0),Q+oe}function gc(p,b,C){var P=es(p),R=!x.boxSizingReliable()||C,M=R&&y.css(p,"boxSizing",!1,P)==="border-box",H=M,J=Ia(p,b,P),Q="offset"+b[0].toUpperCase()+b.slice(1);if(Pn.test(J)){if(!C)return J;J="auto"}return(!x.boxSizingReliable()&&M||!x.reliableTrDimensions()&&F(p,"tr")||J==="auto"||!parseFloat(J)&&y.css(p,"display",!1,P)==="inline")&&p.getClientRects().length&&(M=y.css(p,"boxSizing",!1,P)==="border-box",H=Q in p,H&&(J=p[Q])),J=parseFloat(J)||0,J+nn(p,b,C||(M?"border":"content"),H,P,J)+"px"}y.extend({cssHooks:{opacity:{get:function(p,b){if(b){var C=Ia(p,"opacity");return C===""?"1":C}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(p,b,C,P){if(!(!p||p.nodeType===3||p.nodeType===8||!p.style)){var R,M,H,J=Wt(b),Q=ii.test(b),oe=p.style;if(Q||(b=Gl(J)),H=y.cssHooks[b]||y.cssHooks[J],C!==void 0){if(M=typeof C,M==="string"&&(R=Zi.exec(C))&&R[1]&&(C=wt(p,b,R),M="number"),C==null||C!==C)return;M==="number"&&!Q&&(C+=R&&R[3]||(y.cssNumber[J]?"":"px")),!x.clearCloneStyle&&C===""&&b.indexOf("background")===0&&(oe[b]="inherit"),(!H||!("set"in H)||(C=H.set(p,C,P))!==void 0)&&(Q?oe.setProperty(b,C):oe[b]=C)}else return H&&"get"in H&&(R=H.get(p,!1,P))!==void 0?R:oe[b]}},css:function(p,b,C,P){var R,M,H,J=Wt(b),Q=ii.test(b);return Q||(b=Gl(J)),H=y.cssHooks[b]||y.cssHooks[J],H&&"get"in H&&(R=H.get(p,!0,C)),R===void 0&&(R=Ia(p,b,P)),R==="normal"&&b in In&&(R=In[b]),C===""||C?(M=parseFloat(R),C===!0||isFinite(M)?M||0:R):R}}),y.each(["height","width"],function(p,b){y.cssHooks[b]={get:function(C,P,R){if(P)return mc.test(y.css(C,"display"))&&(!C.getClientRects().length||!C.getBoundingClientRect().width)?Hs(C,Oo,function(){return gc(C,b,R)}):gc(C,b,R)},set:function(C,P,R){var M,H=es(C),J=!x.scrollboxSize()&&H.position==="absolute",Q=J||R,oe=Q&&y.css(C,"boxSizing",!1,H)==="border-box",xe=R?nn(C,b,R,oe,H):0;return oe&&J&&(xe-=Math.ceil(C["offset"+b[0].toUpperCase()+b.slice(1)]-parseFloat(H[b])-nn(C,b,"border",!1,H)-.5)),xe&&(M=Zi.exec(P))&&(M[3]||"px")!=="px"&&(C.style[b]=P,P=y.css(C,b)),yc(C,P,xe)}}}),y.cssHooks.marginLeft=Yt(x.reliableMarginLeft,function(p,b){if(b)return(parseFloat(Ia(p,"marginLeft"))||p.getBoundingClientRect().left-Hs(p,{marginLeft:0},function(){return p.getBoundingClientRect().left}))+"px"}),y.each({margin:"",padding:"",border:"Width"},function(p,b){y.cssHooks[p+b]={expand:function(C){for(var P=0,R={},M=typeof C=="string"?C.split(" "):[C];P<4;P++)R[p+hn[P]+b]=M[P]||M[P-2]||M[0];return R}},p!=="margin"&&(y.cssHooks[p+b].set=yc)}),y.fn.extend({css:function(p,b){return bt(this,function(C,P,R){var M,H,J={},Q=0;if(Array.isArray(P)){for(M=es(C),H=P.length;Q<H;Q++)J[P[Q]]=y.css(C,P[Q],!1,M);return J}return R!==void 0?y.style(C,P,R):y.css(C,P)},p,b,arguments.length>1)}});function $r(p,b,C,P,R){return new $r.prototype.init(p,b,C,P,R)}y.Tween=$r,$r.prototype={constructor:$r,init:function(p,b,C,P,R,M){this.elem=p,this.prop=C,this.easing=R||y.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=P,this.unit=M||(y.cssNumber[C]?"":"px")},cur:function(){var p=$r.propHooks[this.prop];return p&&p.get?p.get(this):$r.propHooks._default.get(this)},run:function(p){var b,C=$r.propHooks[this.prop];return this.options.duration?this.pos=b=y.easing[this.easing](p,this.options.duration*p,0,1,this.options.duration):this.pos=b=p,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),C&&C.set?C.set(this):$r.propHooks._default.set(this),this}},$r.prototype.init.prototype=$r.prototype,$r.propHooks={_default:{get:function(p){var b;return p.elem.nodeType!==1||p.elem[p.prop]!=null&&p.elem.style[p.prop]==null?p.elem[p.prop]:(b=y.css(p.elem,p.prop,""),!b||b==="auto"?0:b)},set:function(p){y.fx.step[p.prop]?y.fx.step[p.prop](p):p.elem.nodeType===1&&(y.cssHooks[p.prop]||p.elem.style[Gl(p.prop)]!=null)?y.style(p.elem,p.prop,p.now+p.unit):p.elem[p.prop]=p.now}}},$r.propHooks.scrollTop=$r.propHooks.scrollLeft={set:function(p){p.elem.nodeType&&p.elem.parentNode&&(p.elem[p.prop]=p.now)}},y.easing={linear:function(p){return p},swing:function(p){return .5-Math.cos(p*Math.PI)/2},_default:"swing"},y.fx=$r.prototype.init,y.fx.step={};var zs,ts,Ro=/^(?:toggle|show|hide)$/,Oa=/queueHooks$/;function Xs(){ts&&(E.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Xs):e.setTimeout(Xs,y.fx.interval),y.fx.tick())}function xc(){return e.setTimeout(function(){zs=void 0}),zs=Date.now()}function Mo(p,b){var C,P=0,R={height:p};for(b=b?1:0;P<4;P+=2-b)C=hn[P],R["margin"+C]=R["padding"+C]=p;return b&&(R.opacity=R.width=p),R}function ko(p,b,C){for(var P,R=(Gr.tweeners[b]||[]).concat(Gr.tweeners["*"]),M=0,H=R.length;M<H;M++)if(P=R[M].call(C,b,p))return P}function bc(p,b,C){var P,R,M,H,J,Q,oe,xe,Te="width"in b||"height"in b,ve=this,Ie={},ct=p.style,Et=p.nodeType&&_e(p),mt=Qe.get(p,"fxshow");C.queue||(H=y._queueHooks(p,"fx"),H.unqueued==null&&(H.unqueued=0,J=H.empty.fire,H.empty.fire=function(){H.unqueued||J()}),H.unqueued++,ve.always(function(){ve.always(function(){H.unqueued--,y.queue(p,"fx").length||H.empty.fire()})}));for(P in b)if(R=b[P],Ro.test(R)){if(delete b[P],M=M||R==="toggle",R===(Et?"hide":"show"))if(R==="show"&&mt&&mt[P]!==void 0)Et=!0;else continue;Ie[P]=mt&&mt[P]||y.style(p,P)}if(Q=!y.isEmptyObject(b),!(!Q&&y.isEmptyObject(Ie))){Te&&p.nodeType===1&&(C.overflow=[ct.overflow,ct.overflowX,ct.overflowY],oe=mt&&mt.display,oe==null&&(oe=Qe.get(p,"display")),xe=y.css(p,"display"),xe==="none"&&(oe?xe=oe:(it([p],!0),oe=p.style.display||oe,xe=y.css(p,"display"),it([p]))),(xe==="inline"||xe==="inline-block"&&oe!=null)&&y.css(p,"float")==="none"&&(Q||(ve.done(function(){ct.display=oe}),oe==null&&(xe=ct.display,oe=xe==="none"?"":xe)),ct.display="inline-block")),C.overflow&&(ct.overflow="hidden",ve.always(function(){ct.overflow=C.overflow[0],ct.overflowX=C.overflow[1],ct.overflowY=C.overflow[2]})),Q=!1;for(P in Ie)Q||(mt?"hidden"in mt&&(Et=mt.hidden):mt=Qe.access(p,"fxshow",{display:oe}),M&&(mt.hidden=!Et),Et&&it([p],!0),ve.done(function(){Et||it([p]),Qe.remove(p,"fxshow");for(P in Ie)y.style(p,P,Ie[P])})),Q=ko(Et?mt[P]:0,P,ve),P in mt||(mt[P]=Q.start,Et&&(Q.end=Q.start,Q.start=0))}}function Hl(p,b){var C,P,R,M,H;for(C in p)if(P=Wt(C),R=b[P],M=p[C],Array.isArray(M)&&(R=M[1],M=p[C]=M[0]),C!==P&&(p[P]=M,delete p[C]),H=y.cssHooks[P],H&&"expand"in H){M=H.expand(M),delete p[P];for(C in M)C in p||(p[C]=M[C],b[C]=R)}else b[P]=R}function Gr(p,b,C){var P,R,M=0,H=Gr.prefilters.length,J=y.Deferred().always(function(){delete Q.elem}),Q=function(){if(R)return!1;for(var Te=zs||xc(),ve=Math.max(0,oe.startTime+oe.duration-Te),Ie=ve/oe.duration||0,ct=1-Ie,Et=0,mt=oe.tweens.length;Et<mt;Et++)oe.tweens[Et].run(ct);return J.notifyWith(p,[oe,ct,ve]),ct<1&&mt?ve:(mt||J.notifyWith(p,[oe,1,0]),J.resolveWith(p,[oe]),!1)},oe=J.promise({elem:p,props:y.extend({},b),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},C),originalProperties:b,originalOptions:C,startTime:zs||xc(),duration:C.duration,tweens:[],createTween:function(Te,ve){var Ie=y.Tween(p,oe.opts,Te,ve,oe.opts.specialEasing[Te]||oe.opts.easing);return oe.tweens.push(Ie),Ie},stop:function(Te){var ve=0,Ie=Te?oe.tweens.length:0;if(R)return this;for(R=!0;ve<Ie;ve++)oe.tweens[ve].run(1);return Te?(J.notifyWith(p,[oe,1,0]),J.resolveWith(p,[oe,Te])):J.rejectWith(p,[oe,Te]),this}}),xe=oe.props;for(Hl(xe,oe.opts.specialEasing);M<H;M++)if(P=Gr.prefilters[M].call(oe,p,xe,oe.opts),P)return w(P.stop)&&(y._queueHooks(oe.elem,oe.opts.queue).stop=P.stop.bind(P)),P;return y.map(xe,ko,oe),w(oe.opts.start)&&oe.opts.start.call(p,oe),oe.progress(oe.opts.progress).done(oe.opts.done,oe.opts.complete).fail(oe.opts.fail).always(oe.opts.always),y.fx.timer(y.extend(Q,{elem:p,anim:oe,queue:oe.opts.queue})),oe}y.Animation=y.extend(Gr,{tweeners:{"*":[function(p,b){var C=this.createTween(p,b);return wt(C.elem,p,Zi.exec(b),C),C}]},tweener:function(p,b){w(p)?(b=p,p=["*"]):p=p.match(Se);for(var C,P=0,R=p.length;P<R;P++)C=p[P],Gr.tweeners[C]=Gr.tweeners[C]||[],Gr.tweeners[C].unshift(b)},prefilters:[bc],prefilter:function(p,b){b?Gr.prefilters.unshift(p):Gr.prefilters.push(p)}}),y.speed=function(p,b,C){var P=p&&typeof p=="object"?y.extend({},p):{complete:C||!C&&b||w(p)&&p,duration:p,easing:C&&b||b&&!w(b)&&b};return y.fx.off?P.duration=0:typeof P.duration!="number"&&(P.duration in y.fx.speeds?P.duration=y.fx.speeds[P.duration]:P.duration=y.fx.speeds._default),(P.queue==null||P.queue===!0)&&(P.queue="fx"),P.old=P.complete,P.complete=function(){w(P.old)&&P.old.call(this),P.queue&&y.dequeue(this,P.queue)},P},y.fn.extend({fadeTo:function(p,b,C,P){return this.filter(_e).css("opacity",0).show().end().animate({opacity:b},p,C,P)},animate:function(p,b,C,P){var R=y.isEmptyObject(p),M=y.speed(b,C,P),H=function(){var J=Gr(this,y.extend({},p),M);(R||Qe.get(this,"finish"))&&J.stop(!0)};return H.finish=H,R||M.queue===!1?this.each(H):this.queue(M.queue,H)},stop:function(p,b,C){var P=function(R){var M=R.stop;delete R.stop,M(C)};return typeof p!="string"&&(C=b,b=p,p=void 0),b&&this.queue(p||"fx",[]),this.each(function(){var R=!0,M=p!=null&&p+"queueHooks",H=y.timers,J=Qe.get(this);if(M)J[M]&&J[M].stop&&P(J[M]);else for(M in J)J[M]&&J[M].stop&&Oa.test(M)&&P(J[M]);for(M=H.length;M--;)H[M].elem===this&&(p==null||H[M].queue===p)&&(H[M].anim.stop(C),R=!1,H.splice(M,1));(R||!C)&&y.dequeue(this,p)})},finish:function(p){return p!==!1&&(p=p||"fx"),this.each(function(){var b,C=Qe.get(this),P=C[p+"queue"],R=C[p+"queueHooks"],M=y.timers,H=P?P.length:0;for(C.finish=!0,y.queue(this,p,[]),R&&R.stop&&R.stop.call(this,!0),b=M.length;b--;)M[b].elem===this&&M[b].queue===p&&(M[b].anim.stop(!0),M.splice(b,1));for(b=0;b<H;b++)P[b]&&P[b].finish&&P[b].finish.call(this);delete C.finish})}}),y.each(["toggle","show","hide"],function(p,b){var C=y.fn[b];y.fn[b]=function(P,R,M){return P==null||typeof P=="boolean"?C.apply(this,arguments):this.animate(Mo(b,!0),P,R,M)}}),y.each({slideDown:Mo("show"),slideUp:Mo("hide"),slideToggle:Mo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(p,b){y.fn[p]=function(C,P,R){return this.animate(b,C,P,R)}}),y.timers=[],y.fx.tick=function(){var p,b=0,C=y.timers;for(zs=Date.now();b<C.length;b++)p=C[b],!p()&&C[b]===p&&C.splice(b--,1);C.length||y.fx.stop(),zs=void 0},y.fx.timer=function(p){y.timers.push(p),y.fx.start()},y.fx.interval=13,y.fx.start=function(){ts||(ts=!0,Xs())},y.fx.stop=function(){ts=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(p,b){return p=y.fx&&y.fx.speeds[p]||p,b=b||"fx",this.queue(b,function(C,P){var R=e.setTimeout(C,p);P.stop=function(){e.clearTimeout(R)}})},function(){var p=E.createElement("input"),b=E.createElement("select"),C=b.appendChild(E.createElement("option"));p.type="checkbox",x.checkOn=p.value!=="",x.optSelected=C.selected,p=E.createElement("input"),p.value="t",p.type="radio",x.radioValue=p.value==="t"}();var wc,rs=y.expr.attrHandle;y.fn.extend({attr:function(p,b){return bt(this,y.attr,p,b,arguments.length>1)},removeAttr:function(p){return this.each(function(){y.removeAttr(this,p)})}}),y.extend({attr:function(p,b,C){var P,R,M=p.nodeType;if(!(M===3||M===8||M===2)){if(typeof p.getAttribute>"u")return y.prop(p,b,C);if((M!==1||!y.isXMLDoc(p))&&(R=y.attrHooks[b.toLowerCase()]||(y.expr.match.bool.test(b)?wc:void 0)),C!==void 0){if(C===null){y.removeAttr(p,b);return}return R&&"set"in R&&(P=R.set(p,C,b))!==void 0?P:(p.setAttribute(b,C+""),C)}return R&&"get"in R&&(P=R.get(p,b))!==null?P:(P=y.find.attr(p,b),P??void 0)}},attrHooks:{type:{set:function(p,b){if(!x.radioValue&&b==="radio"&&F(p,"input")){var C=p.value;return p.setAttribute("type",b),C&&(p.value=C),b}}}},removeAttr:function(p,b){var C,P=0,R=b&&b.match(Se);if(R&&p.nodeType===1)for(;C=R[P++];)p.removeAttribute(C)}}),wc={set:function(p,b,C){return b===!1?y.removeAttr(p,C):p.setAttribute(C,C),C}},y.each(y.expr.match.bool.source.match(/\w+/g),function(p,b){var C=rs[b]||y.find.attr;rs[b]=function(P,R,M){var H,J,Q=R.toLowerCase();return M||(J=rs[Q],rs[Q]=H,H=C(P,R,M)!=null?Q:null,rs[Q]=J),H}});var Dt=/^(?:input|select|textarea|button)$/i,Tc=/^(?:a|area)$/i;y.fn.extend({prop:function(p,b){return bt(this,y.prop,p,b,arguments.length>1)},removeProp:function(p){return this.each(function(){delete this[y.propFix[p]||p]})}}),y.extend({prop:function(p,b,C){var P,R,M=p.nodeType;if(!(M===3||M===8||M===2))return(M!==1||!y.isXMLDoc(p))&&(b=y.propFix[b]||b,R=y.propHooks[b]),C!==void 0?R&&"set"in R&&(P=R.set(p,C,b))!==void 0?P:p[b]=C:R&&"get"in R&&(P=R.get(p,b))!==null?P:p[b]},propHooks:{tabIndex:{get:function(p){var b=y.find.attr(p,"tabindex");return b?parseInt(b,10):Dt.test(p.nodeName)||Tc.test(p.nodeName)&&p.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),x.optSelected||(y.propHooks.selected={get:function(p){var b=p.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(p){var b=p.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this});function Pi(p){var b=p.match(Se)||[];return b.join(" ")}function si(p){return p.getAttribute&&p.getAttribute("class")||""}function Do(p){return Array.isArray(p)?p:typeof p=="string"?p.match(Se)||[]:[]}y.fn.extend({addClass:function(p){var b,C,P,R,M,H;return w(p)?this.each(function(J){y(this).addClass(p.call(this,J,si(this)))}):(b=Do(p),b.length?this.each(function(){if(P=si(this),C=this.nodeType===1&&" "+Pi(P)+" ",C){for(M=0;M<b.length;M++)R=b[M],C.indexOf(" "+R+" ")<0&&(C+=R+" ");H=Pi(C),P!==H&&this.setAttribute("class",H)}}):this)},removeClass:function(p){var b,C,P,R,M,H;return w(p)?this.each(function(J){y(this).removeClass(p.call(this,J,si(this)))}):arguments.length?(b=Do(p),b.length?this.each(function(){if(P=si(this),C=this.nodeType===1&&" "+Pi(P)+" ",C){for(M=0;M<b.length;M++)for(R=b[M];C.indexOf(" "+R+" ")>-1;)C=C.replace(" "+R+" "," ");H=Pi(C),P!==H&&this.setAttribute("class",H)}}):this):this.attr("class","")},toggleClass:function(p,b){var C,P,R,M,H=typeof p,J=H==="string"||Array.isArray(p);return w(p)?this.each(function(Q){y(this).toggleClass(p.call(this,Q,si(this),b),b)}):typeof b=="boolean"&&J?b?this.addClass(p):this.removeClass(p):(C=Do(p),this.each(function(){if(J)for(M=y(this),R=0;R<C.length;R++)P=C[R],M.hasClass(P)?M.removeClass(P):M.addClass(P);else(p===void 0||H==="boolean")&&(P=si(this),P&&Qe.set(this,"__className__",P),this.setAttribute&&this.setAttribute("class",P||p===!1?"":Qe.get(this,"__className__")||""))}))},hasClass:function(p){var b,C,P=0;for(b=" "+p+" ";C=this[P++];)if(C.nodeType===1&&(" "+Pi(si(C))+" ").indexOf(b)>-1)return!0;return!1}});var Sc=/\r/g;y.fn.extend({val:function(p){var b,C,P,R=this[0];return arguments.length?(P=w(p),this.each(function(M){var H;this.nodeType===1&&(P?H=p.call(this,M,y(this).val()):H=p,H==null?H="":typeof H=="number"?H+="":Array.isArray(H)&&(H=y.map(H,function(J){return J==null?"":J+""})),b=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()],(!b||!("set"in b)||b.set(this,H,"value")===void 0)&&(this.value=H))})):R?(b=y.valHooks[R.type]||y.valHooks[R.nodeName.toLowerCase()],b&&"get"in b&&(C=b.get(R,"value"))!==void 0?C:(C=R.value,typeof C=="string"?C.replace(Sc,""):C??"")):void 0}}),y.extend({valHooks:{option:{get:function(p){var b=y.find.attr(p,"value");return b??Pi(y.text(p))}},select:{get:function(p){var b,C,P,R=p.options,M=p.selectedIndex,H=p.type==="select-one",J=H?null:[],Q=H?M+1:R.length;for(M<0?P=Q:P=H?M:0;P<Q;P++)if(C=R[P],(C.selected||P===M)&&!C.disabled&&(!C.parentNode.disabled||!F(C.parentNode,"optgroup"))){if(b=y(C).val(),H)return b;J.push(b)}return J},set:function(p,b){for(var C,P,R=p.options,M=y.makeArray(b),H=R.length;H--;)P=R[H],(P.selected=y.inArray(y.valHooks.option.get(P),M)>-1)&&(C=!0);return C||(p.selectedIndex=-1),M}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(p,b){if(Array.isArray(b))return p.checked=y.inArray(y(p).val(),b)>-1}},x.checkOn||(y.valHooks[this].get=function(p){return p.getAttribute("value")===null?"on":p.value})});var Vs=e.location,No={guid:Date.now()},qs=/\?/;y.parseXML=function(p){var b,C;if(!p||typeof p!="string")return null;try{b=new e.DOMParser().parseFromString(p,"text/xml")}catch{}return C=b&&b.getElementsByTagName("parsererror")[0],(!b||C)&&y.error("Invalid XML: "+(C?y.map(C.childNodes,function(P){return P.textContent}).join(`
`):p)),b};var ai=/^(?:focusinfocus|focusoutblur)$/,oi=function(p){p.stopPropagation()};y.extend(y.event,{trigger:function(p,b,C,P){var R,M,H,J,Q,oe,xe,Te,ve=[C||E],Ie=h.call(p,"type")?p.type:p,ct=h.call(p,"namespace")?p.namespace.split("."):[];if(M=Te=H=C=C||E,!(C.nodeType===3||C.nodeType===8)&&!ai.test(Ie+y.event.triggered)&&(Ie.indexOf(".")>-1&&(ct=Ie.split("."),Ie=ct.shift(),ct.sort()),Q=Ie.indexOf(":")<0&&"on"+Ie,p=p[y.expando]?p:new y.Event(Ie,typeof p=="object"&&p),p.isTrigger=P?2:3,p.namespace=ct.join("."),p.rnamespace=p.namespace?new RegExp("(^|\\.)"+ct.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,p.result=void 0,p.target||(p.target=C),b=b==null?[p]:y.makeArray(b,[p]),xe=y.event.special[Ie]||{},!(!P&&xe.trigger&&xe.trigger.apply(C,b)===!1))){if(!P&&!xe.noBubble&&!T(C)){for(J=xe.delegateType||Ie,ai.test(J+Ie)||(M=M.parentNode);M;M=M.parentNode)ve.push(M),H=M;H===(C.ownerDocument||E)&&ve.push(H.defaultView||H.parentWindow||e)}for(R=0;(M=ve[R++])&&!p.isPropagationStopped();)Te=M,p.type=R>1?J:xe.bindType||Ie,oe=(Qe.get(M,"events")||Object.create(null))[p.type]&&Qe.get(M,"handle"),oe&&oe.apply(M,b),oe=Q&&M[Q],oe&&oe.apply&&Mr(M)&&(p.result=oe.apply(M,b),p.result===!1&&p.preventDefault());return p.type=Ie,!P&&!p.isDefaultPrevented()&&(!xe._default||xe._default.apply(ve.pop(),b)===!1)&&Mr(C)&&Q&&w(C[Ie])&&!T(C)&&(H=C[Q],H&&(C[Q]=null),y.event.triggered=Ie,p.isPropagationStopped()&&Te.addEventListener(Ie,oi),C[Ie](),p.isPropagationStopped()&&Te.removeEventListener(Ie,oi),y.event.triggered=void 0,H&&(C[Q]=H)),p.result}},simulate:function(p,b,C){var P=y.extend(new y.Event,C,{type:p,isSimulated:!0});y.event.trigger(P,null,b)}}),y.fn.extend({trigger:function(p,b){return this.each(function(){y.event.trigger(p,b,this)})},triggerHandler:function(p,b){var C=this[0];if(C)return y.event.trigger(p,b,C,!0)}});var Ii=/\[\]$/,Ws=/\r?\n/g,Ra=/^(?:submit|button|image|reset|file)$/i,Oi=/^(?:input|select|textarea|keygen)/i;function zl(p,b,C,P){var R;if(Array.isArray(b))y.each(b,function(M,H){C||Ii.test(p)?P(p,H):zl(p+"["+(typeof H=="object"&&H!=null?M:"")+"]",H,C,P)});else if(!C&&z(b)==="object")for(R in b)zl(p+"["+R+"]",b[R],C,P);else P(p,b)}y.param=function(p,b){var C,P=[],R=function(M,H){var J=w(H)?H():H;P[P.length]=encodeURIComponent(M)+"="+encodeURIComponent(J??"")};if(p==null)return"";if(Array.isArray(p)||p.jquery&&!y.isPlainObject(p))y.each(p,function(){R(this.name,this.value)});else for(C in p)zl(C,p[C],b,R);return P.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var p=y.prop(this,"elements");return p?y.makeArray(p):this}).filter(function(){var p=this.type;return this.name&&!y(this).is(":disabled")&&Oi.test(this.nodeName)&&!Ra.test(p)&&(this.checked||!cr.test(p))}).map(function(p,b){var C=y(this).val();return C==null?null:Array.isArray(C)?y.map(C,function(P){return{name:b.name,value:P.replace(Ws,`\r
`)}}):{name:b.name,value:C.replace(Ws,`\r
`)}}).get()}});var Ec=/%20/g,Ma=/#.*$/,Kf=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)$/mg,Fo=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ac=/^(?:GET|HEAD)$/,Qf=/^\/\//,$s={},ns={},is="*/".concat("*"),Ys=E.createElement("a");Ys.href=Vs.href;function Pc(p){return function(b,C){typeof b!="string"&&(C=b,b="*");var P,R=0,M=b.toLowerCase().match(Se)||[];if(w(C))for(;P=M[R++];)P[0]==="+"?(P=P.slice(1)||"*",(p[P]=p[P]||[]).unshift(C)):(p[P]=p[P]||[]).push(C)}}function Ic(p,b,C,P){var R={},M=p===ns;function H(J){var Q;return R[J]=!0,y.each(p[J]||[],function(oe,xe){var Te=xe(b,C,P);if(typeof Te=="string"&&!M&&!R[Te])return b.dataTypes.unshift(Te),H(Te),!1;if(M)return!(Q=Te)}),Q}return H(b.dataTypes[0])||!R["*"]&&H("*")}function ka(p,b){var C,P,R=y.ajaxSettings.flatOptions||{};for(C in b)b[C]!==void 0&&((R[C]?p:P||(P={}))[C]=b[C]);return P&&y.extend(!0,p,P),p}function Lo(p,b,C){for(var P,R,M,H,J=p.contents,Q=p.dataTypes;Q[0]==="*";)Q.shift(),P===void 0&&(P=p.mimeType||b.getResponseHeader("Content-Type"));if(P){for(R in J)if(J[R]&&J[R].test(P)){Q.unshift(R);break}}if(Q[0]in C)M=Q[0];else{for(R in C){if(!Q[0]||p.converters[R+" "+Q[0]]){M=R;break}H||(H=R)}M=M||H}if(M)return M!==Q[0]&&Q.unshift(M),C[M]}function Xl(p,b,C,P){var R,M,H,J,Q,oe={},xe=p.dataTypes.slice();if(xe[1])for(H in p.converters)oe[H.toLowerCase()]=p.converters[H];for(M=xe.shift();M;)if(p.responseFields[M]&&(C[p.responseFields[M]]=b),!Q&&P&&p.dataFilter&&(b=p.dataFilter(b,p.dataType)),Q=M,M=xe.shift(),M){if(M==="*")M=Q;else if(Q!=="*"&&Q!==M){if(H=oe[Q+" "+M]||oe["* "+M],!H){for(R in oe)if(J=R.split(" "),J[1]===M&&(H=oe[Q+" "+J[0]]||oe["* "+J[0]],H)){H===!0?H=oe[R]:oe[R]!==!0&&(M=J[0],xe.unshift(J[1]));break}}if(H!==!0)if(H&&p.throws)b=H(b);else try{b=H(b)}catch(Te){return{state:"parsererror",error:H?Te:"No conversion from "+Q+" to "+M}}}}return{state:"success",data:b}}y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Vs.href,type:"GET",isLocal:Fo.test(Vs.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":is,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(p,b){return b?ka(ka(p,y.ajaxSettings),b):ka(y.ajaxSettings,p)},ajaxPrefilter:Pc($s),ajaxTransport:Pc(ns),ajax:function(p,b){typeof p=="object"&&(b=p,p=void 0),b=b||{};var C,P,R,M,H,J,Q,oe,xe,Te,ve=y.ajaxSetup({},b),Ie=ve.context||ve,ct=ve.context&&(Ie.nodeType||Ie.jquery)?y(Ie):y.event,Et=y.Deferred(),mt=y.Callbacks("once memory"),Cr=ve.statusCode||{},fr={},Gn={},On="canceled",Tt={readyState:0,getResponseHeader:function(At){var Kt;if(Q){if(!M)for(M={};Kt=Cc.exec(R);)M[Kt[1].toLowerCase()+" "]=(M[Kt[1].toLowerCase()+" "]||[]).concat(Kt[2]);Kt=M[At.toLowerCase()+" "]}return Kt==null?null:Kt.join(", ")},getAllResponseHeaders:function(){return Q?R:null},setRequestHeader:function(At,Kt){return Q==null&&(At=Gn[At.toLowerCase()]=Gn[At.toLowerCase()]||At,fr[At]=Kt),this},overrideMimeType:function(At){return Q==null&&(ve.mimeType=At),this},statusCode:function(At){var Kt;if(At)if(Q)Tt.always(At[Tt.status]);else for(Kt in At)Cr[Kt]=[Cr[Kt],At[Kt]];return this},abort:function(At){var Kt=At||On;return C&&C.abort(Kt),ss(0,Kt),this}};if(Et.promise(Tt),ve.url=((p||ve.url||Vs.href)+"").replace(Qf,Vs.protocol+"//"),ve.type=b.method||b.type||ve.method||ve.type,ve.dataTypes=(ve.dataType||"*").toLowerCase().match(Se)||[""],ve.crossDomain==null){J=E.createElement("a");try{J.href=ve.url,J.href=J.href,ve.crossDomain=Ys.protocol+"//"+Ys.host!=J.protocol+"//"+J.host}catch{ve.crossDomain=!0}}if(ve.data&&ve.processData&&typeof ve.data!="string"&&(ve.data=y.param(ve.data,ve.traditional)),Ic($s,ve,b,Tt),Q)return Tt;oe=y.event&&ve.global,oe&&y.active++===0&&y.event.trigger("ajaxStart"),ve.type=ve.type.toUpperCase(),ve.hasContent=!Ac.test(ve.type),P=ve.url.replace(Ma,""),ve.hasContent?ve.data&&ve.processData&&(ve.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ve.data=ve.data.replace(Ec,"+")):(Te=ve.url.slice(P.length),ve.data&&(ve.processData||typeof ve.data=="string")&&(P+=(qs.test(P)?"&":"?")+ve.data,delete ve.data),ve.cache===!1&&(P=P.replace(Kf,"$1"),Te=(qs.test(P)?"&":"?")+"_="+No.guid+++Te),ve.url=P+Te),ve.ifModified&&(y.lastModified[P]&&Tt.setRequestHeader("If-Modified-Since",y.lastModified[P]),y.etag[P]&&Tt.setRequestHeader("If-None-Match",y.etag[P])),(ve.data&&ve.hasContent&&ve.contentType!==!1||b.contentType)&&Tt.setRequestHeader("Content-Type",ve.contentType),Tt.setRequestHeader("Accept",ve.dataTypes[0]&&ve.accepts[ve.dataTypes[0]]?ve.accepts[ve.dataTypes[0]]+(ve.dataTypes[0]!=="*"?", "+is+"; q=0.01":""):ve.accepts["*"]);for(xe in ve.headers)Tt.setRequestHeader(xe,ve.headers[xe]);if(ve.beforeSend&&(ve.beforeSend.call(Ie,Tt,ve)===!1||Q))return Tt.abort();if(On="abort",mt.add(ve.complete),Tt.done(ve.success),Tt.fail(ve.error),C=Ic(ns,ve,b,Tt),!C)ss(-1,"No Transport");else{if(Tt.readyState=1,oe&&ct.trigger("ajaxSend",[Tt,ve]),Q)return Tt;ve.async&&ve.timeout>0&&(H=e.setTimeout(function(){Tt.abort("timeout")},ve.timeout));try{Q=!1,C.send(fr,ss)}catch(At){if(Q)throw At;ss(-1,At)}}function ss(At,Kt,as,Vl){var Hn,Da,Rn,Ri,Mi,vn=Kt;Q||(Q=!0,H&&e.clearTimeout(H),C=void 0,R=Vl||"",Tt.readyState=At>0?4:0,Hn=At>=200&&At<300||At===304,as&&(Ri=Lo(ve,Tt,as)),!Hn&&y.inArray("script",ve.dataTypes)>-1&&y.inArray("json",ve.dataTypes)<0&&(ve.converters["text script"]=function(){}),Ri=Xl(ve,Ri,Tt,Hn),Hn?(ve.ifModified&&(Mi=Tt.getResponseHeader("Last-Modified"),Mi&&(y.lastModified[P]=Mi),Mi=Tt.getResponseHeader("etag"),Mi&&(y.etag[P]=Mi)),At===204||ve.type==="HEAD"?vn="nocontent":At===304?vn="notmodified":(vn=Ri.state,Da=Ri.data,Rn=Ri.error,Hn=!Rn)):(Rn=vn,(At||!vn)&&(vn="error",At<0&&(At=0))),Tt.status=At,Tt.statusText=(Kt||vn)+"",Hn?Et.resolveWith(Ie,[Da,vn,Tt]):Et.rejectWith(Ie,[Tt,vn,Rn]),Tt.statusCode(Cr),Cr=void 0,oe&&ct.trigger(Hn?"ajaxSuccess":"ajaxError",[Tt,ve,Hn?Da:Rn]),mt.fireWith(Ie,[Tt,vn]),oe&&(ct.trigger("ajaxComplete",[Tt,ve]),--y.active||y.event.trigger("ajaxStop")))}return Tt},getJSON:function(p,b,C){return y.get(p,b,C,"json")},getScript:function(p,b){return y.get(p,void 0,b,"script")}}),y.each(["get","post"],function(p,b){y[b]=function(C,P,R,M){return w(P)&&(M=M||R,R=P,P=void 0),y.ajax(y.extend({url:C,type:b,dataType:M,data:P,success:R},y.isPlainObject(C)&&C))}}),y.ajaxPrefilter(function(p){var b;for(b in p.headers)b.toLowerCase()==="content-type"&&(p.contentType=p.headers[b]||"")}),y._evalUrl=function(p,b,C){return y.ajax({url:p,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(P){y.globalEval(P,b,C)}})},y.fn.extend({wrapAll:function(p){var b;return this[0]&&(w(p)&&(p=p.call(this[0])),b=y(p,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var C=this;C.firstElementChild;)C=C.firstElementChild;return C}).append(this)),this},wrapInner:function(p){return w(p)?this.each(function(b){y(this).wrapInner(p.call(this,b))}):this.each(function(){var b=y(this),C=b.contents();C.length?C.wrapAll(p):b.append(p)})},wrap:function(p){var b=w(p);return this.each(function(C){y(this).wrapAll(b?p.call(this,C):p)})},unwrap:function(p){return this.parent(p).not("body").each(function(){y(this).replaceWith(this.childNodes)}),this}}),y.expr.pseudos.hidden=function(p){return!y.expr.pseudos.visible(p)},y.expr.pseudos.visible=function(p){return!!(p.offsetWidth||p.offsetHeight||p.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Oc={0:200,1223:204},pn=y.ajaxSettings.xhr();x.cors=!!pn&&"withCredentials"in pn,x.ajax=pn=!!pn,y.ajaxTransport(function(p){var b,C;if(x.cors||pn&&!p.crossDomain)return{send:function(P,R){var M,H=p.xhr();if(H.open(p.type,p.url,p.async,p.username,p.password),p.xhrFields)for(M in p.xhrFields)H[M]=p.xhrFields[M];p.mimeType&&H.overrideMimeType&&H.overrideMimeType(p.mimeType),!p.crossDomain&&!P["X-Requested-With"]&&(P["X-Requested-With"]="XMLHttpRequest");for(M in P)H.setRequestHeader(M,P[M]);b=function(J){return function(){b&&(b=C=H.onload=H.onerror=H.onabort=H.ontimeout=H.onreadystatechange=null,J==="abort"?H.abort():J==="error"?typeof H.status!="number"?R(0,"error"):R(H.status,H.statusText):R(Oc[H.status]||H.status,H.statusText,(H.responseType||"text")!=="text"||typeof H.responseText!="string"?{binary:H.response}:{text:H.responseText},H.getAllResponseHeaders()))}},H.onload=b(),C=H.onerror=H.ontimeout=b("error"),H.onabort!==void 0?H.onabort=C:H.onreadystatechange=function(){H.readyState===4&&e.setTimeout(function(){b&&C()})},b=b("abort");try{H.send(p.hasContent&&p.data||null)}catch(J){if(b)throw J}},abort:function(){b&&b()}}}),y.ajaxPrefilter(function(p){p.crossDomain&&(p.contents.script=!1)}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(p){return y.globalEval(p),p}}}),y.ajaxPrefilter("script",function(p){p.cache===void 0&&(p.cache=!1),p.crossDomain&&(p.type="GET")}),y.ajaxTransport("script",function(p){if(p.crossDomain||p.scriptAttrs){var b,C;return{send:function(P,R){b=y("<script>").attr(p.scriptAttrs||{}).prop({charset:p.scriptCharset,src:p.url}).on("load error",C=function(M){b.remove(),C=null,M&&R(M.type==="error"?404:200,M.type)}),E.head.appendChild(b[0])},abort:function(){C&&C()}}}});var Bo=[],Ks=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var p=Bo.pop()||y.expando+"_"+No.guid++;return this[p]=!0,p}}),y.ajaxPrefilter("json jsonp",function(p,b,C){var P,R,M,H=p.jsonp!==!1&&(Ks.test(p.url)?"url":typeof p.data=="string"&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ks.test(p.data)&&"data");if(H||p.dataTypes[0]==="jsonp")return P=p.jsonpCallback=w(p.jsonpCallback)?p.jsonpCallback():p.jsonpCallback,H?p[H]=p[H].replace(Ks,"$1"+P):p.jsonp!==!1&&(p.url+=(qs.test(p.url)?"&":"?")+p.jsonp+"="+P),p.converters["script json"]=function(){return M||y.error(P+" was not called"),M[0]},p.dataTypes[0]="json",R=e[P],e[P]=function(){M=arguments},C.always(function(){R===void 0?y(e).removeProp(P):e[P]=R,p[P]&&(p.jsonpCallback=b.jsonpCallback,Bo.push(P)),M&&w(R)&&R(M[0]),M=R=void 0}),"script"}),x.createHTMLDocument=function(){var p=E.implementation.createHTMLDocument("").body;return p.innerHTML="<form></form><form></form>",p.childNodes.length===2}(),y.parseHTML=function(p,b,C){if(typeof p!="string")return[];typeof b=="boolean"&&(C=b,b=!1);var P,R,M;return b||(x.createHTMLDocument?(b=E.implementation.createHTMLDocument(""),P=b.createElement("base"),P.href=E.location.href,b.head.appendChild(P)):b=E),R=k.exec(p),M=!C&&[],R?[b.createElement(R[1])]:(R=js([p],b,M),M&&M.length&&y(M).remove(),y.merge([],R.childNodes))},y.fn.load=function(p,b,C){var P,R,M,H=this,J=p.indexOf(" ");return J>-1&&(P=Pi(p.slice(J)),p=p.slice(0,J)),w(b)?(C=b,b=void 0):b&&typeof b=="object"&&(R="POST"),H.length>0&&y.ajax({url:p,type:R||"GET",dataType:"html",data:b}).done(function(Q){M=arguments,H.html(P?y("<div>").append(y.parseHTML(Q)).find(P):Q)}).always(C&&function(Q,oe){H.each(function(){C.apply(this,M||[Q.responseText,oe,Q])})}),this},y.expr.pseudos.animated=function(p){return y.grep(y.timers,function(b){return p===b.elem}).length},y.offset={setOffset:function(p,b,C){var P,R,M,H,J,Q,oe,xe=y.css(p,"position"),Te=y(p),ve={};xe==="static"&&(p.style.position="relative"),J=Te.offset(),M=y.css(p,"top"),Q=y.css(p,"left"),oe=(xe==="absolute"||xe==="fixed")&&(M+Q).indexOf("auto")>-1,oe?(P=Te.position(),H=P.top,R=P.left):(H=parseFloat(M)||0,R=parseFloat(Q)||0),w(b)&&(b=b.call(p,C,y.extend({},J))),b.top!=null&&(ve.top=b.top-J.top+H),b.left!=null&&(ve.left=b.left-J.left+R),"using"in b?b.using.call(p,ve):Te.css(ve)}},y.fn.extend({offset:function(p){if(arguments.length)return p===void 0?this:this.each(function(R){y.offset.setOffset(this,p,R)});var b,C,P=this[0];if(P)return P.getClientRects().length?(b=P.getBoundingClientRect(),C=P.ownerDocument.defaultView,{top:b.top+C.pageYOffset,left:b.left+C.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var p,b,C,P=this[0],R={top:0,left:0};if(y.css(P,"position")==="fixed")b=P.getBoundingClientRect();else{for(b=this.offset(),C=P.ownerDocument,p=P.offsetParent||C.documentElement;p&&(p===C.body||p===C.documentElement)&&y.css(p,"position")==="static";)p=p.parentNode;p&&p!==P&&p.nodeType===1&&(R=y(p).offset(),R.top+=y.css(p,"borderTopWidth",!0),R.left+=y.css(p,"borderLeftWidth",!0))}return{top:b.top-R.top-y.css(P,"marginTop",!0),left:b.left-R.left-y.css(P,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var p=this.offsetParent;p&&y.css(p,"position")==="static";)p=p.offsetParent;return p||fn})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(p,b){var C=b==="pageYOffset";y.fn[p]=function(P){return bt(this,function(R,M,H){var J;if(T(R)?J=R:R.nodeType===9&&(J=R.defaultView),H===void 0)return J?J[b]:R[M];J?J.scrollTo(C?J.pageXOffset:H,C?H:J.pageYOffset):R[M]=H},p,P,arguments.length)}}),y.each(["top","left"],function(p,b){y.cssHooks[b]=Yt(x.pixelPosition,function(C,P){if(P)return P=Ia(C,b),Pn.test(P)?y(C).position()[b]+"px":P})}),y.each({Height:"height",Width:"width"},function(p,b){y.each({padding:"inner"+p,content:b,"":"outer"+p},function(C,P){y.fn[P]=function(R,M){var H=arguments.length&&(C||typeof R!="boolean"),J=C||(R===!0||M===!0?"margin":"border");return bt(this,function(Q,oe,xe){var Te;return T(Q)?P.indexOf("outer")===0?Q["inner"+p]:Q.document.documentElement["client"+p]:Q.nodeType===9?(Te=Q.documentElement,Math.max(Q.body["scroll"+p],Te["scroll"+p],Q.body["offset"+p],Te["offset"+p],Te["client"+p])):xe===void 0?y.css(Q,oe,J):y.style(Q,oe,xe,J)},b,H?R:void 0,H)}})}),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(p,b){y.fn[b]=function(C){return this.on(b,C)}}),y.fn.extend({bind:function(p,b,C){return this.on(p,null,b,C)},unbind:function(p,b){return this.off(p,null,b)},delegate:function(p,b,C,P){return this.on(b,p,C,P)},undelegate:function(p,b,C){return arguments.length===1?this.off(p,"**"):this.off(b,p||"**",C)},hover:function(p,b){return this.on("mouseenter",p).on("mouseleave",b||p)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(p,b){y.fn[b]=function(C,P){return arguments.length>0?this.on(b,null,C,P):this.trigger(b)}});var Rc=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;y.proxy=function(p,b){var C,P,R;if(typeof b=="string"&&(C=p[b],b=p,p=C),!!w(p))return P=s.call(arguments,2),R=function(){return p.apply(b||this,P.concat(s.call(arguments)))},R.guid=p.guid=p.guid||y.guid++,R},y.holdReady=function(p){p?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=F,y.isFunction=w,y.isWindow=T,y.camelCase=Wt,y.type=z,y.now=Date.now,y.isNumeric=function(p){var b=y.type(p);return(b==="number"||b==="string")&&!isNaN(p-parseFloat(p))},y.trim=function(p){return p==null?"":(p+"").replace(Rc,"$1")};var jo=e.jQuery,Uo=e.$;return y.noConflict=function(p){return e.$===y&&(e.$=Uo),p&&e.jQuery===y&&(e.jQuery=jo),y},typeof t>"u"&&(e.jQuery=e.$=y),y})}(df)),df.exports}var IR=PR();const ke=Rl(IR);var Kv={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var r1;function OR(){return r1||(r1=1,function(n){(function(){var e=function(){this.init()};e.prototype={init:function(){var h=this||t;return h._counter=1e3,h._html5AudioPool=[],h.html5PoolSize=10,h._codecs={},h._howls=[],h._muted=!1,h._volume=1,h._canPlayEvent="canplaythrough",h._navigator=typeof window<"u"&&window.navigator?window.navigator:null,h.masterGain=null,h.noAudio=!1,h.usingWebAudio=!0,h.autoSuspend=!0,h.ctx=null,h.autoUnlock=!0,h._setup(),h},volume:function(h){var d=this||t;if(h=parseFloat(h),d.ctx||_(),typeof h<"u"&&h>=0&&h<=1){if(d._volume=h,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(h,t.ctx.currentTime);for(var m=0;m<d._howls.length;m++)if(!d._howls[m]._webAudio)for(var x=d._howls[m]._getSoundIds(),w=0;w<x.length;w++){var T=d._howls[m]._soundById(x[w]);T&&T._node&&(T._node.volume=T._volume*h)}return d}return d._volume},mute:function(h){var d=this||t;d.ctx||_(),d._muted=h,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(h?0:d._volume,t.ctx.currentTime);for(var m=0;m<d._howls.length;m++)if(!d._howls[m]._webAudio)for(var x=d._howls[m]._getSoundIds(),w=0;w<x.length;w++){var T=d._howls[m]._soundById(x[w]);T&&T._node&&(T._node.muted=h?!0:T._muted)}return d},stop:function(){for(var h=this||t,d=0;d<h._howls.length;d++)h._howls[d].stop();return h},unload:function(){for(var h=this||t,d=h._howls.length-1;d>=0;d--)h._howls[d].unload();return h.usingWebAudio&&h.ctx&&typeof h.ctx.close<"u"&&(h.ctx.close(),h.ctx=null,_()),h},codecs:function(h){return(this||t)._codecs[h.replace(/^x-/,"")]},_setup:function(){var h=this||t;if(h.state=h.ctx&&h.ctx.state||"suspended",h._autoSuspend(),!h.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(h._canPlayEvent="canplay")}catch{h.noAudio=!0}else h.noAudio=!0;try{var d=new Audio;d.muted&&(h.noAudio=!0)}catch{}return h.noAudio||h._setupCodecs(),h},_setupCodecs:function(){var h=this||t,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return h}if(!d||typeof d.canPlayType!="function")return h;var m=d.canPlayType("audio/mpeg;").replace(/^no$/,""),x=h._navigator?h._navigator.userAgent:"",w=x.match(/OPR\/(\d+)/g),T=w&&parseInt(w[0].split("/")[1],10)<33,E=x.indexOf("Safari")!==-1&&x.indexOf("Chrome")===-1,I=x.match(/Version\/(.*?) /),D=E&&I&&parseInt(I[1],10)<15;return h._codecs={mp3:!!(!T&&(m||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!m,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!D&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!D&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},h},_unlockAudio:function(){var h=this||t;if(!(h._audioUnlocked||!h.ctx)){h._audioUnlocked=!1,h.autoUnlock=!1,!h._mobileUnloaded&&h.ctx.sampleRate!==44100&&(h._mobileUnloaded=!0,h.unload()),h._scratchBuffer=h.ctx.createBuffer(1,1,22050);var d=function(m){for(;h._html5AudioPool.length<h.html5PoolSize;)try{var x=new Audio;x._unlocked=!0,h._releaseHtml5Audio(x)}catch{h.noAudio=!0;break}for(var w=0;w<h._howls.length;w++)if(!h._howls[w]._webAudio)for(var T=h._howls[w]._getSoundIds(),E=0;E<T.length;E++){var I=h._howls[w]._soundById(T[E]);I&&I._node&&!I._node._unlocked&&(I._node._unlocked=!0,I._node.load())}h._autoResume();var D=h.ctx.createBufferSource();D.buffer=h._scratchBuffer,D.connect(h.ctx.destination),typeof D.start>"u"?D.noteOn(0):D.start(0),typeof h.ctx.resume=="function"&&h.ctx.resume(),D.onended=function(){D.disconnect(0),h._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var z=0;z<h._howls.length;z++)h._howls[z]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),h}},_obtainHtml5Audio:function(){var h=this||t;if(h._html5AudioPool.length)return h._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(h){var d=this||t;return h._unlocked&&d._html5AudioPool.push(h),d},_autoSuspend:function(){var h=this;if(!(!h.autoSuspend||!h.ctx||typeof h.ctx.suspend>"u"||!t.usingWebAudio)){for(var d=0;d<h._howls.length;d++)if(h._howls[d]._webAudio){for(var m=0;m<h._howls[d]._sounds.length;m++)if(!h._howls[d]._sounds[m]._paused)return h}return h._suspendTimer&&clearTimeout(h._suspendTimer),h._suspendTimer=setTimeout(function(){if(h.autoSuspend){h._suspendTimer=null,h.state="suspending";var x=function(){h.state="suspended",h._resumeAfterSuspend&&(delete h._resumeAfterSuspend,h._autoResume())};h.ctx.suspend().then(x,x)}},3e4),h}},_autoResume:function(){var h=this;if(!(!h.ctx||typeof h.ctx.resume>"u"||!t.usingWebAudio))return h.state==="running"&&h.ctx.state!=="interrupted"&&h._suspendTimer?(clearTimeout(h._suspendTimer),h._suspendTimer=null):h.state==="suspended"||h.state==="running"&&h.ctx.state==="interrupted"?(h.ctx.resume().then(function(){h.state="running";for(var d=0;d<h._howls.length;d++)h._howls[d]._emit("resume")}),h._suspendTimer&&(clearTimeout(h._suspendTimer),h._suspendTimer=null)):h.state==="suspending"&&(h._resumeAfterSuspend=!0),h}};var t=new e,r=function(h){var d=this;if(!h.src||h.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(h)};r.prototype={init:function(h){var d=this;return t.ctx||_(),d._autoplay=h.autoplay||!1,d._format=typeof h.format!="string"?h.format:[h.format],d._html5=h.html5||!1,d._muted=h.mute||!1,d._loop=h.loop||!1,d._pool=h.pool||5,d._preload=typeof h.preload=="boolean"||h.preload==="metadata"?h.preload:!0,d._rate=h.rate||1,d._sprite=h.sprite||{},d._src=typeof h.src!="string"?h.src:[h.src],d._volume=h.volume!==void 0?h.volume:1,d._xhr={method:h.xhr&&h.xhr.method?h.xhr.method:"GET",headers:h.xhr&&h.xhr.headers?h.xhr.headers:null,withCredentials:h.xhr&&h.xhr.withCredentials?h.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=h.onend?[{fn:h.onend}]:[],d._onfade=h.onfade?[{fn:h.onfade}]:[],d._onload=h.onload?[{fn:h.onload}]:[],d._onloaderror=h.onloaderror?[{fn:h.onloaderror}]:[],d._onplayerror=h.onplayerror?[{fn:h.onplayerror}]:[],d._onpause=h.onpause?[{fn:h.onpause}]:[],d._onplay=h.onplay?[{fn:h.onplay}]:[],d._onstop=h.onstop?[{fn:h.onstop}]:[],d._onmute=h.onmute?[{fn:h.onmute}]:[],d._onvolume=h.onvolume?[{fn:h.onvolume}]:[],d._onrate=h.onrate?[{fn:h.onrate}]:[],d._onseek=h.onseek?[{fn:h.onseek}]:[],d._onunlock=h.onunlock?[{fn:h.onunlock}]:[],d._onresume=[],d._webAudio=t.usingWebAudio&&!d._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var h=this,d=null;if(t.noAudio){h._emit("loaderror",null,"No audio support.");return}typeof h._src=="string"&&(h._src=[h._src]);for(var m=0;m<h._src.length;m++){var x,w;if(h._format&&h._format[m])x=h._format[m];else{if(w=h._src[m],typeof w!="string"){h._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}x=/^data:audio\/([^;,]+);/i.exec(w),x||(x=/\.([^.]+)$/.exec(w.split("?",1)[0])),x&&(x=x[1].toLowerCase())}if(x||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),x&&t.codecs(x)){d=h._src[m];break}}if(!d){h._emit("loaderror",null,"No codec support for selected audio sources.");return}return h._src=d,h._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(h._html5=!0,h._webAudio=!1),new i(h),h._webAudio&&o(h),h},play:function(h,d){var m=this,x=null;if(typeof h=="number")x=h,h=null;else{if(typeof h=="string"&&m._state==="loaded"&&!m._sprite[h])return null;if(typeof h>"u"&&(h="__default",!m._playLock)){for(var w=0,T=0;T<m._sounds.length;T++)m._sounds[T]._paused&&!m._sounds[T]._ended&&(w++,x=m._sounds[T]._id);w===1?h=null:x=null}}var E=x?m._soundById(x):m._inactiveSound();if(!E)return null;if(x&&!h&&(h=E._sprite||"__default"),m._state!=="loaded"){E._sprite=h,E._ended=!1;var I=E._id;return m._queue.push({event:"play",action:function(){m.play(I)}}),I}if(x&&!E._paused)return d||m._loadQueue("play"),E._id;m._webAudio&&t._autoResume();var D=Math.max(0,E._seek>0?E._seek:m._sprite[h][0]/1e3),z=Math.max(0,(m._sprite[h][0]+m._sprite[h][1])/1e3-D),O=z*1e3/Math.abs(E._rate),U=m._sprite[h][0]/1e3,y=(m._sprite[h][0]+m._sprite[h][1])/1e3;E._sprite=h,E._ended=!1;var te=function(){E._paused=!1,E._seek=D,E._start=U,E._stop=y,E._loop=!!(E._loop||m._sprite[h][2])};if(D>=y){m._ended(E);return}var F=E._node;if(m._webAudio){var W=function(){m._playLock=!1,te(),m._refreshBuffer(E);var ye=E._muted||m._muted?0:E._volume;F.gain.setValueAtTime(ye,t.ctx.currentTime),E._playStart=t.ctx.currentTime,typeof F.bufferSource.start>"u"?E._loop?F.bufferSource.noteGrainOn(0,D,86400):F.bufferSource.noteGrainOn(0,D,z):E._loop?F.bufferSource.start(0,D,86400):F.bufferSource.start(0,D,z),O!==1/0&&(m._endTimers[E._id]=setTimeout(m._ended.bind(m,E),O)),d||setTimeout(function(){m._emit("play",E._id),m._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?W():(m._playLock=!0,m.once("resume",W),m._clearTimer(E._id))}else{var ne=function(){F.currentTime=D,F.muted=E._muted||m._muted||t._muted||F.muted,F.volume=E._volume*t.volume(),F.playbackRate=E._rate;try{var ye=F.play();if(ye&&typeof Promise<"u"&&(ye instanceof Promise||typeof ye.then=="function")?(m._playLock=!0,te(),ye.then(function(){m._playLock=!1,F._unlocked=!0,d?m._loadQueue():m._emit("play",E._id)}).catch(function(){m._playLock=!1,m._emit("playerror",E._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),E._ended=!0,E._paused=!0})):d||(m._playLock=!1,te(),m._emit("play",E._id)),F.playbackRate=E._rate,F.paused){m._emit("playerror",E._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}h!=="__default"||E._loop?m._endTimers[E._id]=setTimeout(m._ended.bind(m,E),O):(m._endTimers[E._id]=function(){m._ended(E),F.removeEventListener("ended",m._endTimers[E._id],!1)},F.addEventListener("ended",m._endTimers[E._id],!1))}catch(K){m._emit("playerror",E._id,K)}};F.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(F.src=m._src,F.load());var ee=window&&window.ejecta||!F.readyState&&t._navigator.isCocoonJS;if(F.readyState>=3||ee)ne();else{m._playLock=!0,m._state="loading";var ue=function(){m._state="loaded",ne(),F.removeEventListener(t._canPlayEvent,ue,!1)};F.addEventListener(t._canPlayEvent,ue,!1),m._clearTimer(E._id)}}return E._id},pause:function(h){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(h)}}),d;for(var m=d._getSoundIds(h),x=0;x<m.length;x++){d._clearTimer(m[x]);var w=d._soundById(m[x]);if(w&&!w._paused&&(w._seek=d.seek(m[x]),w._rateSeek=0,w._paused=!0,d._stopFade(m[x]),w._node))if(d._webAudio){if(!w._node.bufferSource)continue;typeof w._node.bufferSource.stop>"u"?w._node.bufferSource.noteOff(0):w._node.bufferSource.stop(0),d._cleanBuffer(w._node)}else(!isNaN(w._node.duration)||w._node.duration===1/0)&&w._node.pause();arguments[1]||d._emit("pause",w?w._id:null)}return d},stop:function(h,d){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"stop",action:function(){m.stop(h)}}),m;for(var x=m._getSoundIds(h),w=0;w<x.length;w++){m._clearTimer(x[w]);var T=m._soundById(x[w]);T&&(T._seek=T._start||0,T._rateSeek=0,T._paused=!0,T._ended=!0,m._stopFade(x[w]),T._node&&(m._webAudio?T._node.bufferSource&&(typeof T._node.bufferSource.stop>"u"?T._node.bufferSource.noteOff(0):T._node.bufferSource.stop(0),m._cleanBuffer(T._node)):(!isNaN(T._node.duration)||T._node.duration===1/0)&&(T._node.currentTime=T._start||0,T._node.pause(),T._node.duration===1/0&&m._clearSound(T._node))),d||m._emit("stop",T._id))}return m},mute:function(h,d){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"mute",action:function(){m.mute(h,d)}}),m;if(typeof d>"u")if(typeof h=="boolean")m._muted=h;else return m._muted;for(var x=m._getSoundIds(d),w=0;w<x.length;w++){var T=m._soundById(x[w]);T&&(T._muted=h,T._interval&&m._stopFade(T._id),m._webAudio&&T._node?T._node.gain.setValueAtTime(h?0:T._volume,t.ctx.currentTime):T._node&&(T._node.muted=t._muted?!0:h),m._emit("mute",T._id))}return m},volume:function(){var h=this,d=arguments,m,x;if(d.length===0)return h._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var w=h._getSoundIds(),T=w.indexOf(d[0]);T>=0?x=parseInt(d[0],10):m=parseFloat(d[0])}else d.length>=2&&(m=parseFloat(d[0]),x=parseInt(d[1],10));var E;if(typeof m<"u"&&m>=0&&m<=1){if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"volume",action:function(){h.volume.apply(h,d)}}),h;typeof x>"u"&&(h._volume=m),x=h._getSoundIds(x);for(var I=0;I<x.length;I++)E=h._soundById(x[I]),E&&(E._volume=m,d[2]||h._stopFade(x[I]),h._webAudio&&E._node&&!E._muted?E._node.gain.setValueAtTime(m,t.ctx.currentTime):E._node&&!E._muted&&(E._node.volume=m*t.volume()),h._emit("volume",E._id))}else return E=x?h._soundById(x):h._sounds[0],E?E._volume:0;return h},fade:function(h,d,m,x){var w=this;if(w._state!=="loaded"||w._playLock)return w._queue.push({event:"fade",action:function(){w.fade(h,d,m,x)}}),w;h=Math.min(Math.max(0,parseFloat(h)),1),d=Math.min(Math.max(0,parseFloat(d)),1),m=parseFloat(m),w.volume(h,x);for(var T=w._getSoundIds(x),E=0;E<T.length;E++){var I=w._soundById(T[E]);if(I){if(x||w._stopFade(T[E]),w._webAudio&&!I._muted){var D=t.ctx.currentTime,z=D+m/1e3;I._volume=h,I._node.gain.setValueAtTime(h,D),I._node.gain.linearRampToValueAtTime(d,z)}w._startFadeInterval(I,h,d,m,T[E],typeof x>"u")}}return w},_startFadeInterval:function(h,d,m,x,w,T){var E=this,I=d,D=m-d,z=Math.abs(D/.01),O=Math.max(4,z>0?x/z:x),U=Date.now();h._fadeTo=m,h._interval=setInterval(function(){var y=(Date.now()-U)/x;U=Date.now(),I+=D*y,I=Math.round(I*100)/100,D<0?I=Math.max(m,I):I=Math.min(m,I),E._webAudio?h._volume=I:E.volume(I,h._id,!0),T&&(E._volume=I),(m<d&&I<=m||m>d&&I>=m)&&(clearInterval(h._interval),h._interval=null,h._fadeTo=null,E.volume(m,h._id),E._emit("fade",h._id))},O)},_stopFade:function(h){var d=this,m=d._soundById(h);return m&&m._interval&&(d._webAudio&&m._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(m._interval),m._interval=null,d.volume(m._fadeTo,h),m._fadeTo=null,d._emit("fade",h)),d},loop:function(){var h=this,d=arguments,m,x,w;if(d.length===0)return h._loop;if(d.length===1)if(typeof d[0]=="boolean")m=d[0],h._loop=m;else return w=h._soundById(parseInt(d[0],10)),w?w._loop:!1;else d.length===2&&(m=d[0],x=parseInt(d[1],10));for(var T=h._getSoundIds(x),E=0;E<T.length;E++)w=h._soundById(T[E]),w&&(w._loop=m,h._webAudio&&w._node&&w._node.bufferSource&&(w._node.bufferSource.loop=m,m&&(w._node.bufferSource.loopStart=w._start||0,w._node.bufferSource.loopEnd=w._stop,h.playing(T[E])&&(h.pause(T[E],!0),h.play(T[E],!0)))));return h},rate:function(){var h=this,d=arguments,m,x;if(d.length===0)x=h._sounds[0]._id;else if(d.length===1){var w=h._getSoundIds(),T=w.indexOf(d[0]);T>=0?x=parseInt(d[0],10):m=parseFloat(d[0])}else d.length===2&&(m=parseFloat(d[0]),x=parseInt(d[1],10));var E;if(typeof m=="number"){if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"rate",action:function(){h.rate.apply(h,d)}}),h;typeof x>"u"&&(h._rate=m),x=h._getSoundIds(x);for(var I=0;I<x.length;I++)if(E=h._soundById(x[I]),E){h.playing(x[I])&&(E._rateSeek=h.seek(x[I]),E._playStart=h._webAudio?t.ctx.currentTime:E._playStart),E._rate=m,h._webAudio&&E._node&&E._node.bufferSource?E._node.bufferSource.playbackRate.setValueAtTime(m,t.ctx.currentTime):E._node&&(E._node.playbackRate=m);var D=h.seek(x[I]),z=(h._sprite[E._sprite][0]+h._sprite[E._sprite][1])/1e3-D,O=z*1e3/Math.abs(E._rate);(h._endTimers[x[I]]||!E._paused)&&(h._clearTimer(x[I]),h._endTimers[x[I]]=setTimeout(h._ended.bind(h,E),O)),h._emit("rate",E._id)}}else return E=h._soundById(x),E?E._rate:h._rate;return h},seek:function(){var h=this,d=arguments,m,x;if(d.length===0)h._sounds.length&&(x=h._sounds[0]._id);else if(d.length===1){var w=h._getSoundIds(),T=w.indexOf(d[0]);T>=0?x=parseInt(d[0],10):h._sounds.length&&(x=h._sounds[0]._id,m=parseFloat(d[0]))}else d.length===2&&(m=parseFloat(d[0]),x=parseInt(d[1],10));if(typeof x>"u")return 0;if(typeof m=="number"&&(h._state!=="loaded"||h._playLock))return h._queue.push({event:"seek",action:function(){h.seek.apply(h,d)}}),h;var E=h._soundById(x);if(E)if(typeof m=="number"&&m>=0){var I=h.playing(x);I&&h.pause(x,!0),E._seek=m,E._ended=!1,h._clearTimer(x),!h._webAudio&&E._node&&!isNaN(E._node.duration)&&(E._node.currentTime=m);var D=function(){I&&h.play(x,!0),h._emit("seek",x)};if(I&&!h._webAudio){var z=function(){h._playLock?setTimeout(z,0):D()};setTimeout(z,0)}else D()}else if(h._webAudio){var O=h.playing(x)?t.ctx.currentTime-E._playStart:0,U=E._rateSeek?E._rateSeek-E._seek:0;return E._seek+(U+O*Math.abs(E._rate))}else return E._node.currentTime;return h},playing:function(h){var d=this;if(typeof h=="number"){var m=d._soundById(h);return m?!m._paused:!1}for(var x=0;x<d._sounds.length;x++)if(!d._sounds[x]._paused)return!0;return!1},duration:function(h){var d=this,m=d._duration,x=d._soundById(h);return x&&(m=d._sprite[x._sprite][1]/1e3),m},state:function(){return this._state},unload:function(){for(var h=this,d=h._sounds,m=0;m<d.length;m++)d[m]._paused||h.stop(d[m]._id),h._webAudio||(h._clearSound(d[m]._node),d[m]._node.removeEventListener("error",d[m]._errorFn,!1),d[m]._node.removeEventListener(t._canPlayEvent,d[m]._loadFn,!1),d[m]._node.removeEventListener("ended",d[m]._endFn,!1),t._releaseHtml5Audio(d[m]._node)),delete d[m]._node,h._clearTimer(d[m]._id);var x=t._howls.indexOf(h);x>=0&&t._howls.splice(x,1);var w=!0;for(m=0;m<t._howls.length;m++)if(t._howls[m]._src===h._src||h._src.indexOf(t._howls[m]._src)>=0){w=!1;break}return s&&w&&delete s[h._src],t.noAudio=!1,h._state="unloaded",h._sounds=[],h=null,null},on:function(h,d,m,x){var w=this,T=w["_on"+h];return typeof d=="function"&&T.push(x?{id:m,fn:d,once:x}:{id:m,fn:d}),w},off:function(h,d,m){var x=this,w=x["_on"+h],T=0;if(typeof d=="number"&&(m=d,d=null),d||m)for(T=0;T<w.length;T++){var E=m===w[T].id;if(d===w[T].fn&&E||!d&&E){w.splice(T,1);break}}else if(h)x["_on"+h]=[];else{var I=Object.keys(x);for(T=0;T<I.length;T++)I[T].indexOf("_on")===0&&Array.isArray(x[I[T]])&&(x[I[T]]=[])}return x},once:function(h,d,m){var x=this;return x.on(h,d,m,1),x},_emit:function(h,d,m){for(var x=this,w=x["_on"+h],T=w.length-1;T>=0;T--)(!w[T].id||w[T].id===d||h==="load")&&(setTimeout(function(E){E.call(this,d,m)}.bind(x,w[T].fn),0),w[T].once&&x.off(h,w[T].fn,w[T].id));return x._loadQueue(h),x},_loadQueue:function(h){var d=this;if(d._queue.length>0){var m=d._queue[0];m.event===h&&(d._queue.shift(),d._loadQueue()),h||m.action()}return d},_ended:function(h){var d=this,m=h._sprite;if(!d._webAudio&&h._node&&!h._node.paused&&!h._node.ended&&h._node.currentTime<h._stop)return setTimeout(d._ended.bind(d,h),100),d;var x=!!(h._loop||d._sprite[m][2]);if(d._emit("end",h._id),!d._webAudio&&x&&d.stop(h._id,!0).play(h._id),d._webAudio&&x){d._emit("play",h._id),h._seek=h._start||0,h._rateSeek=0,h._playStart=t.ctx.currentTime;var w=(h._stop-h._start)*1e3/Math.abs(h._rate);d._endTimers[h._id]=setTimeout(d._ended.bind(d,h),w)}return d._webAudio&&!x&&(h._paused=!0,h._ended=!0,h._seek=h._start||0,h._rateSeek=0,d._clearTimer(h._id),d._cleanBuffer(h._node),t._autoSuspend()),!d._webAudio&&!x&&d.stop(h._id,!0),d},_clearTimer:function(h){var d=this;if(d._endTimers[h]){if(typeof d._endTimers[h]!="function")clearTimeout(d._endTimers[h]);else{var m=d._soundById(h);m&&m._node&&m._node.removeEventListener("ended",d._endTimers[h],!1)}delete d._endTimers[h]}return d},_soundById:function(h){for(var d=this,m=0;m<d._sounds.length;m++)if(h===d._sounds[m]._id)return d._sounds[m];return null},_inactiveSound:function(){var h=this;h._drain();for(var d=0;d<h._sounds.length;d++)if(h._sounds[d]._ended)return h._sounds[d].reset();return new i(h)},_drain:function(){var h=this,d=h._pool,m=0,x=0;if(!(h._sounds.length<d)){for(x=0;x<h._sounds.length;x++)h._sounds[x]._ended&&m++;for(x=h._sounds.length-1;x>=0;x--){if(m<=d)return;h._sounds[x]._ended&&(h._webAudio&&h._sounds[x]._node&&h._sounds[x]._node.disconnect(0),h._sounds.splice(x,1),m--)}}},_getSoundIds:function(h){var d=this;if(typeof h>"u"){for(var m=[],x=0;x<d._sounds.length;x++)m.push(d._sounds[x]._id);return m}else return[h]},_refreshBuffer:function(h){var d=this;return h._node.bufferSource=t.ctx.createBufferSource(),h._node.bufferSource.buffer=s[d._src],h._panner?h._node.bufferSource.connect(h._panner):h._node.bufferSource.connect(h._node),h._node.bufferSource.loop=h._loop,h._loop&&(h._node.bufferSource.loopStart=h._start||0,h._node.bufferSource.loopEnd=h._stop||0),h._node.bufferSource.playbackRate.setValueAtTime(h._rate,t.ctx.currentTime),d},_cleanBuffer:function(h){var d=this,m=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!h.bufferSource)return d;if(t._scratchBuffer&&h.bufferSource&&(h.bufferSource.onended=null,h.bufferSource.disconnect(0),m))try{h.bufferSource.buffer=t._scratchBuffer}catch{}return h.bufferSource=null,d},_clearSound:function(h){var d=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);d||(h.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(h){this._parent=h,this.init()};i.prototype={init:function(){var h=this,d=h._parent;return h._muted=d._muted,h._loop=d._loop,h._volume=d._volume,h._rate=d._rate,h._seek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++t._counter,d._sounds.push(h),h.create(),h},create:function(){var h=this,d=h._parent,m=t._muted||h._muted||h._parent._muted?0:h._volume;return d._webAudio?(h._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),h._node.gain.setValueAtTime(m,t.ctx.currentTime),h._node.paused=!0,h._node.connect(t.masterGain)):t.noAudio||(h._node=t._obtainHtml5Audio(),h._errorFn=h._errorListener.bind(h),h._node.addEventListener("error",h._errorFn,!1),h._loadFn=h._loadListener.bind(h),h._node.addEventListener(t._canPlayEvent,h._loadFn,!1),h._endFn=h._endListener.bind(h),h._node.addEventListener("ended",h._endFn,!1),h._node.src=d._src,h._node.preload=d._preload===!0?"auto":d._preload,h._node.volume=m*t.volume(),h._node.load()),h},reset:function(){var h=this,d=h._parent;return h._muted=d._muted,h._loop=d._loop,h._volume=d._volume,h._rate=d._rate,h._seek=0,h._rateSeek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++t._counter,h},_errorListener:function(){var h=this;h._parent._emit("loaderror",h._id,h._node.error?h._node.error.code:0),h._node.removeEventListener("error",h._errorFn,!1)},_loadListener:function(){var h=this,d=h._parent;d._duration=Math.ceil(h._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),h._node.removeEventListener(t._canPlayEvent,h._loadFn,!1)},_endListener:function(){var h=this,d=h._parent;d._duration===1/0&&(d._duration=Math.ceil(h._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(h)),h._node.removeEventListener("ended",h._endFn,!1)}};var s={},o=function(h){var d=h._src;if(s[d]){h._duration=s[d].duration,v(h);return}if(/^data:[^;]+;base64,/.test(d)){for(var m=atob(d.split(",")[1]),x=new Uint8Array(m.length),w=0;w<m.length;++w)x[w]=m.charCodeAt(w);c(x.buffer,h)}else{var T=new XMLHttpRequest;T.open(h._xhr.method,d,!0),T.withCredentials=h._xhr.withCredentials,T.responseType="arraybuffer",h._xhr.headers&&Object.keys(h._xhr.headers).forEach(function(E){T.setRequestHeader(E,h._xhr.headers[E])}),T.onload=function(){var E=(T.status+"")[0];if(E!=="0"&&E!=="2"&&E!=="3"){h._emit("loaderror",null,"Failed loading audio file with status: "+T.status+".");return}c(T.response,h)},T.onerror=function(){h._webAudio&&(h._html5=!0,h._webAudio=!1,h._sounds=[],delete s[d],h.load())},u(T)}},u=function(h){try{h.send()}catch{h.onerror()}},c=function(h,d){var m=function(){d._emit("loaderror",null,"Decoding audio data failed.")},x=function(w){w&&d._sounds.length>0?(s[d._src]=w,v(d,w)):m()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(h).then(x).catch(m):t.ctx.decodeAudioData(h,x,m)},v=function(h,d){d&&!h._duration&&(h._duration=d.duration),Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue())},_=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var h=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),d=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),m=d?parseInt(d[1],10):null;if(h&&m&&m<9){var x=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!x&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};n.Howler=t,n.Howl=r,typeof Ss<"u"?(Ss.HowlerGlobal=e,Ss.Howler=t,Ss.Howl=r,Ss.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var i=r._howls.length-1;i>=0;i--)r._howls[i].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,r,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,r,i,s,o,u){var c=this;if(!c.ctx||!c.ctx.listener)return c;var v=c._orientation;if(r=typeof r!="number"?v[1]:r,i=typeof i!="number"?v[2]:i,s=typeof s!="number"?v[3]:s,o=typeof o!="number"?v[4]:o,u=typeof u!="number"?v[5]:u,typeof t=="number")c._orientation=[t,r,i,s,o,u],typeof c.ctx.listener.forwardX<"u"?(c.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),c.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),c.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),c.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),c.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),c.ctx.listener.upZ.setTargetAtTime(u,Howler.ctx.currentTime,.1)):c.ctx.listener.setOrientation(t,r,i,s,o,u);else return v;return c},Howl.prototype.init=function(t){return function(r){var i=this;return i._orientation=r.orientation||[1,0,0],i._stereo=r.stereo||null,i._pos=r.pos||null,i._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},i._onstereo=r.onstereo?[{fn:r.onstereo}]:[],i._onpos=r.onpos?[{fn:r.onpos}]:[],i._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,r)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var o=i._getSoundIds(r),u=0;u<o.length;u++){var c=i._soundById(o[u]);if(c)if(typeof t=="number")c._stereo=t,c._pos=[t,0,0],c._node&&(c._pannerAttr.panningModel="equalpower",(!c._panner||!c._panner.pan)&&e(c,s),s==="spatial"?typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):c._panner.setPosition(t,0,0):c._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",c._id);else return c._stereo}return i},Howl.prototype.pos=function(t,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,r,i,s)}}),o;if(r=typeof r!="number"?0:r,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")o._pos=[t,r,i];else return o._pos;for(var u=o._getSoundIds(s),c=0;c<u.length;c++){var v=o._soundById(u[c]);if(v)if(typeof t=="number")v._pos=[t,r,i],v._node&&((!v._panner||v._panner.pan)&&e(v,"spatial"),typeof v._panner.positionX<"u"?(v._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),v._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),v._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):v._panner.setPosition(t,r,i)),o._emit("pos",v._id);else return v._pos}return o},Howl.prototype.orientation=function(t,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,r,i,s)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof t=="number")o._orientation=[t,r,i];else return o._orientation;for(var u=o._getSoundIds(s),c=0;c<u.length;c++){var v=o._soundById(u[c]);if(v)if(typeof t=="number")v._orientation=[t,r,i],v._node&&(v._panner||(v._pos||(v._pos=o._pos||[0,0,-.5]),e(v,"spatial")),typeof v._panner.orientationX<"u"?(v._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),v._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),v._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):v._panner.setOrientation(t,r,i)),o._emit("orientation",v._id);else return v._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,i,s,o;if(!t._webAudio)return t;if(r.length===0)return t._pannerAttr;if(r.length===1)if(typeof r[0]=="object")i=r[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(r[0],10)),o?o._pannerAttr:t._pannerAttr;else r.length===2&&(i=r[0],s=parseInt(r[1],10));for(var u=t._getSoundIds(s),c=0;c<u.length;c++)if(o=t._soundById(u[c]),o){var v=o._pannerAttr;v={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:v.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:v.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:v.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:v.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:v.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:v.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:v.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:v.panningModel};var _=o._panner;_||(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"),_=o._panner),_.coneInnerAngle=v.coneInnerAngle,_.coneOuterAngle=v.coneOuterAngle,_.coneOuterGain=v.coneOuterGain,_.distanceModel=v.distanceModel,_.maxDistance=v.maxDistance,_.refDistance=v.refDistance,_.rolloffFactor=v.rolloffFactor,_.panningModel=v.panningModel}return t},Sound.prototype.init=function(t){return function(){var r=this,i=r._parent;r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,t.call(this),r._stereo?i.stereo(r._stereo):r._pos&&i.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var r=this,i=r._parent;return r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,r._stereo?i.stereo(r._stereo):r._pos?i.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,i._refreshBuffer(r)),t.call(this)}}(Sound.prototype.reset);var e=function(t,r){r=r||"spatial",r==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()}(Kv)),Kv}var n1=OR();let RR=class{constructor(e,t,r="ja"){e in t?this.language=e:this.language=r,this.file_url=t[this.language]}load_file(){return new Promise((e,t)=>{fetch(this.file_url).then(r=>{r.ok?r.text().then(i=>{this.resource=JSON.parse(i),e()}):t()})})}translator(e){return e in this.resource.translation?this.resource.translation[e]:"##i18n error##"}get_label(e){return this.is_label_included(e)?this.resource.labels[e]:e}is_label_included(e){return e in this.resource.labels}get_translator(){return this.translator.bind(this)}get_label_getter(){return this.get_label.bind(this)}};const MR=`precision highp float;
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
gl_Position.xyw = projectionMatrix * aVertexPosition;
gl_Position.z = 0.0;

vTextureCoord = aTextureCoord;
vTextureId = aTextureId;
vColor = aColor;
}
`,kR=`
varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
vec4 color;
%forloop%
gl_FragColor = color * vColor;
}`;class DR extends To{constructor(e=!1){super(),this._buffer=new sr(null,e,!1),this._indexBuffer=new sr(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,3,!1,Ke.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Ke.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ke.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ke.FLOAT).addIndex(this._indexBuffer)}}class NR{static create(e){const{vertex:t,fragment:r,vertexSize:i,geometryClass:s}=Object.assign({vertex:MR,fragment:kR,geometryClass:DR,vertexSize:7},e);return class extends Hu{constructor(u){super(u),this.shaderGenerator=new Pm(t,r),this.geometryClass=s,this.vertexSize=i}packInterleavedGeometry(u,c,v,_,h){const{uint32View:d,float32View:m}=c,x=_/this.vertexSize,w=u.uvs,T=u.indices,E=u.vertexData,I=u.vertexData2d,D=u._texture.baseTexture._batchLocation,z=Math.min(u.worldAlpha,1),O=z<1&&u._texture.baseTexture.alphaMode?uc(u._tintRGB,z):u._tintRGB+(z*255<<24);if(I){let U=0;for(let y=0;y<I.length;y+=3,U+=2)m[_++]=I[y],m[_++]=I[y+1],m[_++]=I[y+2],m[_++]=w[U],m[_++]=w[U+1],d[_++]=O,m[_++]=D}else for(let U=0;U<E.length;U+=2)m[_++]=E[U],m[_++]=E[U+1],m[_++]=1,m[_++]=w[U],m[_++]=w[U+1],d[_++]=O,m[_++]=D;for(let U=0;U<T.length;U++)v[h++]=x+T[U]}}}}class Vf{constructor(e,t=!0){Vf.prototype.__init.call(this),this.legacy=e,t&&(this.enabled=!0),this.legacy.proj=this}__init(){this._enabled=!1}get enabled(){return this._enabled}set enabled(e){this._enabled=e}clear(){}}var ln;(function(n){n[n.NONE=0]="NONE";const t=4;n[n.BEFORE_PROJ=t]="BEFORE_PROJ";const r=5;n[n.PROJ=r]="PROJ";const i=9;n[n.ALL=i]="ALL"})(ln||(ln={}));var qi;(function(n){n[n.NONE=0]="NONE";const t=1;n[n.FREE=t]="FREE";const r=2;n[n.AXIS_X=r]="AXIS_X";const i=3;n[n.AXIS_Y=i]="AXIS_Y";const s=4;n[n.POINT=s]="POINT";const o=5;n[n.AXIS_XR=o]="AXIS_XR"})(qi||(qi={}));function FR(n){const e=this.proj,t=this,r=n._worldID,i=t.localTransform,s=e.scaleAfterAffine&&e.affine>=2;t._localID!==t._currentLocalID&&(s?(i.a=t._cx,i.b=t._sx,i.c=t._cy,i.d=t._sy,i.tx=t.position._x,i.ty=t.position._y):(i.a=t._cx*t.scale._x,i.b=t._sx*t.scale._x,i.c=t._cy*t.scale._y,i.d=t._sy*t.scale._y,i.tx=t.position._x-(t.pivot._x*i.a+t.pivot._y*i.c),i.ty=t.position._y-(t.pivot._x*i.b+t.pivot._y*i.d)),t._currentLocalID=t._localID,e._currentProjID=-1);const o=e._projID;if(e._currentProjID!==o&&(e._currentProjID=o,e.updateLocalTransform(i),t._parentID=-1),t._parentID!==r){const u=n.proj;u&&!u._affine?e.world.setToMult(u.world,e.local):e.world.setToMultLegacy(n.worldTransform,e.local);const c=t.worldTransform;e.world.copyTo(c,e._affine,e.affinePreserveOrientation),s&&(c.a*=t.scale._x,c.b*=t.scale._x,c.c*=t.scale._y,c.d*=t.scale._y,c.tx-=t.pivot._x*c.a+t.pivot._y*c.c,c.ty-=t.pivot._x*c.b+t.pivot._y*c.d),t._parentID=r,t._worldID++}}class _a extends Vf{constructor(...e){super(...e),_a.prototype.__init.call(this),_a.prototype.__init2.call(this),_a.prototype.__init3.call(this),_a.prototype.__init4.call(this),_a.prototype.__init5.call(this)}updateLocalTransform(e){}__init(){this._projID=0}__init2(){this._currentProjID=-1}__init3(){this._affine=qi.NONE}__init4(){this.affinePreserveOrientation=!1}__init5(){this.scaleAfterAffine=!0}set affine(e){this._affine!==e&&(this._affine=e,this._currentProjID=-1,this.legacy._currentLocalID=-1)}get affine(){return this._affine}set enabled(e){e!==this._enabled&&(this._enabled=e,e?(this.legacy.updateTransform=FR,this.legacy._parentID=-1):(this.legacy.updateTransform=Nl.prototype.updateTransform,this.legacy._parentID=-1))}clear(){this._currentProjID=-1,this._projID=0}}class Ff extends Hu{constructor(...e){super(...e),Ff.prototype.__init.call(this),Ff.prototype.__init2.call(this)}__init(){this.forceMaxTextures=0}getUniforms(e){return this.defUniforms}syncUniforms(e){if(!e)return;const t=this._shader;for(const r in e)t.uniforms[r]=e[r]}__init2(){this.defUniforms={}}buildDrawCalls(e,t,r){const i=this,{_bufferedElements:s,_attributeBuffer:o,_indexBuffer:u,vertexSize:c}=this,v=Hu._drawCallPool;let _=this._dcIndex,h=this._aIndex,d=this._iIndex,m=v[_];m.start=this._iIndex,m.texArray=e;for(let x=t;x<r;++x){const w=s[x],T=w._texture.baseTexture,E=Tm[T.alphaMode?1:0][w.blendMode],I=this.getUniforms(w);s[x]=null,t<x&&(m.blend!==E||m.uniforms!==I)&&(m.size=d-m.start,t=x,m=v[++_],m.texArray=e,m.start=d),this.packInterleavedGeometry(w,o,u,h,d),h+=w.vertexData.length/2*c,d+=w.indices.length,m.blend=E,m.uniforms=I}t<r&&(m.size=d-m.start,++_),i._dcIndex=_,i._aIndex=h,i._iIndex=d}drawBatches(){const e=this._dcIndex,{gl:t,state:r,shader:i}=this.renderer,s=Hu._drawCallPool;let o=null,u=null;for(let c=0;c<e;c++){const{texArray:v,type:_,size:h,start:d,blend:m,uniforms:x}=s[c];u!==v&&(u=v,this.bindAndClearTexArray(v)),o!==x&&(o=x,this.syncUniforms(x),i.syncUniformGroup(this._shader.uniformGroup)),this.state.blendMode=m,r.set(this.state),t.drawElements(_,h,t.UNSIGNED_SHORT,d*2)}}contextChange(){if(!this.forceMaxTextures){super.contextChange(),this.syncUniforms(this.defUniforms);return}const e=this;e.MAX_TEXTURES=this.forceMaxTextures,this._shader=e.shaderGenerator.generateShader(this.MAX_TEXTURES),this.syncUniforms(this.defUniforms);for(let t=0;t<e._packedGeometryPoolSize;t++)e._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}}dc.registerPlugin("batch2d",NR.create({}));function LR(n,e,t,r,i){const s=e.x-n.x,o=t.x-r.x,u=t.x-n.x,c=e.y-n.y,v=t.y-r.y,_=t.y-n.y,h=s*v-c*o;if(Math.abs(h)<1e-7)return i.x=s,i.y=c,0;const d=u*v-_*o,m=s*_-c*u,x=d/h,w=m/h;return w<1e-6||w-1>-1e-6?-1:(i.x=n.x+x*(e.x-n.x),i.y=n.y+x*(e.y-n.y),1)}const BR=[1,0,0,0,1,0,0,0,1];class un{static __initStatic(){this.IDENTITY=new un}static __initStatic2(){this.TEMP_MATRIX=new un}__init(){this.floatArray=null}constructor(e){un.prototype.__init.call(this),this.mat3=new Float64Array(e||BR)}get a(){return this.mat3[0]/this.mat3[8]}set a(e){this.mat3[0]=e*this.mat3[8]}get b(){return this.mat3[1]/this.mat3[8]}set b(e){this.mat3[1]=e*this.mat3[8]}get c(){return this.mat3[3]/this.mat3[8]}set c(e){this.mat3[3]=e*this.mat3[8]}get d(){return this.mat3[4]/this.mat3[8]}set d(e){this.mat3[4]=e*this.mat3[8]}get tx(){return this.mat3[6]/this.mat3[8]}set tx(e){this.mat3[6]=e*this.mat3[8]}get ty(){return this.mat3[7]/this.mat3[8]}set ty(e){this.mat3[7]=e*this.mat3[8]}set(e,t,r,i,s,o){const u=this.mat3;return u[0]=e,u[1]=t,u[2]=0,u[3]=r,u[4]=i,u[5]=0,u[6]=s,u[7]=o,u[8]=1,this}toArray(e,t){this.floatArray||(this.floatArray=new Float32Array(9));const r=t||this.floatArray,i=this.mat3;return e?(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8]):(r[0]=i[0],r[1]=i[3],r[2]=i[6],r[3]=i[1],r[4]=i[4],r[5]=i[7],r[6]=i[2],r[7]=i[5],r[8]=i[8]),r}apply(e,t){t=t||new _t;const r=this.mat3,i=e.x,s=e.y,o=1/(r[2]*i+r[5]*s+r[8]);return t.x=o*(r[0]*i+r[3]*s+r[6]),t.y=o*(r[1]*i+r[4]*s+r[7]),t}translate(e,t){const r=this.mat3;return r[0]+=e*r[2],r[1]+=t*r[2],r[3]+=e*r[5],r[4]+=t*r[5],r[6]+=e*r[8],r[7]+=t*r[8],this}scale(e,t){const r=this.mat3;return r[0]*=e,r[1]*=t,r[3]*=e,r[4]*=t,r[6]*=e,r[7]*=t,this}scaleAndTranslate(e,t,r,i){const s=this.mat3;s[0]=e*s[0]+r*s[2],s[1]=t*s[1]+i*s[2],s[3]=e*s[3]+r*s[5],s[4]=t*s[4]+i*s[5],s[6]=e*s[6]+r*s[8],s[7]=t*s[7]+i*s[8]}applyInverse(e,t){t=t||new _t;const r=this.mat3,i=e.x,s=e.y,o=r[0],u=r[3],c=r[6],v=r[1],_=r[4],h=r[7],d=r[2],m=r[5],x=r[8],w=(x*_-h*m)*i+(-x*u+c*m)*s+(h*u-c*_),T=(-x*v+h*d)*i+(x*o-c*d)*s+(-h*o+c*v),E=(m*v-_*d)*i+(-m*o+u*d)*s+(_*o-u*v);return t.x=w/E,t.y=T/E,t}invert(){const e=this.mat3,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],u=e[5],c=e[6],v=e[7],_=e[8],h=_*o-u*v,d=-_*s+u*c,m=v*s-o*c;let x=t*h+r*d+i*m;return x?(x=1/x,e[0]=h*x,e[1]=(-_*r+i*v)*x,e[2]=(u*r-i*o)*x,e[3]=d*x,e[4]=(_*t-i*c)*x,e[5]=(-u*t+i*s)*x,e[6]=m*x,e[7]=(-v*t+r*c)*x,e[8]=(o*t-r*s)*x,this):this}identity(){const e=this.mat3;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this}clone(){return new un(this.mat3)}copyTo2dOr3d(e){const t=this.mat3,r=e.mat3;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],e}copyTo(e,t,r){const i=this.mat3,s=1/i[8],o=i[6]*s,u=i[7]*s;if(e.a=(i[0]-i[2]*o)*s,e.b=(i[1]-i[2]*u)*s,e.c=(i[3]-i[5]*o)*s,e.d=(i[4]-i[5]*u)*s,e.tx=o,e.ty=u,t>=2){let c=e.a*e.d-e.b*e.c;r||(c=Math.abs(c)),t===qi.POINT?(c>0?c=1:c=-1,e.a=c,e.b=0,e.c=0,e.d=c):t===qi.AXIS_X?(c/=Math.sqrt(e.b*e.b+e.d*e.d),e.c=0,e.d=c):t===qi.AXIS_Y?(c/=Math.sqrt(e.a*e.a+e.c*e.c),e.a=c,e.c=0):t===qi.AXIS_XR&&(e.a=e.d*c,e.c=-e.b*c)}return e}copyFrom(e){const t=this.mat3;return t[0]=e.a,t[1]=e.b,t[2]=0,t[3]=e.c,t[4]=e.d,t[5]=0,t[6]=e.tx,t[7]=e.ty,t[8]=1,this}setToMultLegacy(e,t){const r=this.mat3,i=t.mat3,s=e.a,o=e.b,u=e.c,c=e.d,v=e.tx,_=e.ty,h=i[0],d=i[1],m=i[2],x=i[3],w=i[4],T=i[5],E=i[6],I=i[7],D=i[8];return r[0]=h*s+d*u+m*v,r[1]=h*o+d*c+m*_,r[2]=m,r[3]=x*s+w*u+T*v,r[4]=x*o+w*c+T*_,r[5]=T,r[6]=E*s+I*u+D*v,r[7]=E*o+I*c+D*_,r[8]=D,this}setToMultLegacy2(e,t){const r=this.mat3,i=e.mat3,s=i[0],o=i[1],u=i[2],c=i[3],v=i[4],_=i[5],h=i[6],d=i[7],m=i[8],x=t.a,w=t.b,T=t.c,E=t.d,I=t.tx,D=t.ty;return r[0]=x*s+w*c,r[1]=x*o+w*v,r[2]=x*u+w*_,r[3]=T*s+E*c,r[4]=T*o+E*v,r[5]=T*u+E*_,r[6]=I*s+D*c+h,r[7]=I*o+D*v+d,r[8]=I*u+D*_+m,this}setToMult(e,t){const r=this.mat3,i=e.mat3,s=t.mat3,o=i[0],u=i[1],c=i[2],v=i[3],_=i[4],h=i[5],d=i[6],m=i[7],x=i[8],w=s[0],T=s[1],E=s[2],I=s[3],D=s[4],z=s[5],O=s[6],U=s[7],y=s[8];return r[0]=w*o+T*v+E*d,r[1]=w*u+T*_+E*m,r[2]=w*c+T*h+E*x,r[3]=I*o+D*v+z*d,r[4]=I*u+D*_+z*m,r[5]=I*c+D*h+z*x,r[6]=O*o+U*v+y*d,r[7]=O*u+U*_+y*m,r[8]=O*c+U*h+y*x,this}prepend(e){return e.mat3?this.setToMult(e,this):this.setToMultLegacy(e,this)}}un.__initStatic();un.__initStatic2();const i1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec3 vTextureCoord;

void main(void)
{
gl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);

vTextureCoord = uTransform * vec3(aTextureCoord, 1.0);
}
`,jR=`
varying vec3 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
vec2 coord = mod(vTextureCoord.xy / vTextureCoord.z - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;
coord = (uMapCoord * vec3(coord, 1.0)).xy;
coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

vec4 sample = texture2D(uSampler, coord);
gl_FragColor = sample * uColor;
}
`,UR=`
varying vec3 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
vec4 sample = texture2D(uSampler, vTextureCoord.xy / vTextureCoord.z);
gl_FragColor = sample * uColor;
}
`,no=new un;class Rm extends hc{constructor(e){super(e),Rm.prototype.__init.call(this);const t={globals:this.renderer.globalUniforms};this.shader=$i.from(i1,jR,t),this.simpleShader=$i.from(i1,UR,t)}__init(){this.quad=new Am}render(e){const t=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(i=r.uvs,i[0]=i[6]=-e.anchor.x,i[1]=i[3]=-e.anchor.y,i[2]=i[4]=1-e.anchor.x,i[5]=i[7]=1-e.anchor.y),r.invalidate();const s=e._texture,o=s.baseTexture,u=e.tileProj.world,c=e.uvMatrix;let v=o.isPowerOfTwo&&s.frame.width===o.width&&s.frame.height===o.height;v&&(o._glTextures[t.CONTEXT_UID]?v=o.wrapMode!==Bn.CLAMP:o.wrapMode===Bn.CLAMP&&(o.wrapMode=Bn.REPEAT));const _=v?this.simpleShader:this.shader;no.identity(),no.scale(s.width,s.height),no.prepend(u),no.scale(1/e._width,1/e._height),no.invert(),v?no.prepend(c.mapCoord):(_.uniforms.uMapCoord=c.mapCoord.toArray(!0),_.uniforms.uClampFrame=c.uClampFrame,_.uniforms.uClampOffset=c.uClampOffset),_.uniforms.uTransform=no.toArray(!0),_.uniforms.uColor=Em(e.tint,e.worldAlpha,_.uniforms.uColor,o.premultiplyAlpha),_.uniforms.translationMatrix=e.worldTransform.toArray(!0),_.uniforms.uSampler=s,t.shader.bind(_,!1),t.geometry.bind(r,void 0),t.state.setBlendMode(Sm(e.blendMode,o.premultiplyAlpha)),t.geometry.draw(Jn.TRIANGLES,6,0)}}const Xr=new _t,Ui=[new _t,new _t,new _t,new _t],Au=new pt,s1=new un;class ei extends _a{constructor(e,t){super(e,t),ei.prototype.__init.call(this),ei.prototype.__init2.call(this),ei.prototype.__init3.call(this),this.local=new un,this.world=new un}__init(){this.matrix=new un}__init2(){this.pivot=new ma(this.onChange,this,0,0)}__init3(){this.reverseLocalOrder=!1}onChange(){const e=this.pivot,t=this.matrix.mat3;t[6]=-(e._x*t[0]+e._y*t[3]),t[7]=-(e._x*t[1]+e._y*t[4]),this._projID++}setAxisX(e,t=1){const r=e.x,i=e.y,s=Math.sqrt(r*r+i*i),o=this.matrix.mat3;o[0]=r/s,o[1]=i/s,o[2]=t/s,this.onChange()}setAxisY(e,t=1){const r=e.x,i=e.y,s=Math.sqrt(r*r+i*i),o=this.matrix.mat3;o[3]=r/s,o[4]=i/s,o[5]=t/s,this.onChange()}mapSprite(e,t){const r=e.texture;Au.x=-e.anchor.x*r.orig.width,Au.y=-e.anchor.y*r.orig.height,Au.width=r.orig.width,Au.height=r.orig.height,this.mapQuad(Au,t)}mapQuad(e,t){Ui[0].set(e.x,e.y),Ui[1].set(e.x+e.width,e.y),Ui[2].set(e.x+e.width,e.y+e.height),Ui[3].set(e.x,e.y+e.height);let r=1,i=2,s=3;if(LR(t[0],t[2],t[1],t[3],Xr)!==0)r=1,i=3,s=2;else return;const u=Math.sqrt((t[0].x-Xr.x)*(t[0].x-Xr.x)+(t[0].y-Xr.y)*(t[0].y-Xr.y)),c=Math.sqrt((t[r].x-Xr.x)*(t[r].x-Xr.x)+(t[r].y-Xr.y)*(t[r].y-Xr.y)),v=Math.sqrt((t[i].x-Xr.x)*(t[i].x-Xr.x)+(t[i].y-Xr.y)*(t[i].y-Xr.y)),_=Math.sqrt((t[s].x-Xr.x)*(t[s].x-Xr.x)+(t[s].y-Xr.y)*(t[s].y-Xr.y)),h=(u+_)/_,d=(c+v)/v,m=(c+v)/c;let x=this.matrix.mat3;x[0]=Ui[0].x*h,x[1]=Ui[0].y*h,x[2]=h,x[3]=Ui[r].x*d,x[4]=Ui[r].y*d,x[5]=d,x[6]=Ui[i].x*m,x[7]=Ui[i].y*m,x[8]=m,this.matrix.invert(),x=s1.mat3,x[0]=t[0].x,x[1]=t[0].y,x[2]=1,x[3]=t[r].x,x[4]=t[r].y,x[5]=1,x[6]=t[i].x,x[7]=t[i].y,x[8]=1,this.matrix.setToMult(s1,this.matrix),this._projID++}updateLocalTransform(e){this._projID!==0?this.reverseLocalOrder?this.local.setToMultLegacy2(this.matrix,e):this.local.setToMultLegacy(e,this.matrix):this.local.copyFrom(e)}clear(){super.clear(),this.matrix.identity(),this.pivot.set(0,0)}}function GR(){return this.proj.affine?this.transform.worldTransform:this.proj.world}class zb extends mr{constructor(){super(),this.proj=new ei(this.transform)}toLocal(e,t,r,i,s=ln.ALL){return t&&(e=t.toGlobal(e,r,i)),i||this._recursivePostUpdateTransform(),s>=ln.PROJ?(i||this.displayObjectUpdateTransform(),this.proj.affine?this.transform.worldTransform.applyInverse(e,r):this.proj.world.applyInverse(e,r)):(this.parent?r=this.parent.worldTransform.applyInverse(e,r):(r.x=e.x,r.y=e.y),s===ln.NONE?r:this.transform.localTransform.applyInverse(r,r))}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}const Mm=zb.prototype.toLocal;function HR(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}class gi extends xo{static __initStatic(){this.defaultVertexShader=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
gl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);
gl_Position.z = 0.0;

vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`}static __initStatic2(){this.defaultFragmentShader=`
varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}`}constructor(e,t,r,i){super(e,t,r,i),gi.prototype.__init.call(this),this.proj=new ei(this.transform)}__init(){this.vertexData2d=null}calculateVertices(){if(this.proj._affine){this.vertexData2d=null,super.calculateVertices();return}const e=this.geometry,t=e.buffers[0].data,r=this;if(e.vertexDirtyId===r.vertexDirty&&r._transformID===r.transform._worldID)return;r._transformID=r.transform._worldID,r.vertexData.length!==t.length&&(r.vertexData=new Float32Array(t.length)),(!this.vertexData2d||this.vertexData2d.length!==t.length*3/2)&&(this.vertexData2d=new Float32Array(t.length*3));const i=this.proj.world.mat3,s=this.vertexData2d,o=r.vertexData;for(let u=0;u<o.length/2;u++){const c=t[u*2],v=t[u*2+1],_=i[0]*c+i[3]*v+i[6],h=i[1]*c+i[4]*v+i[7],d=i[2]*c+i[5]*v+i[8];s[u*3]=_,s[u*3+1]=h,s[u*3+2]=d,o[u*2]=_/d,o[u*2+1]=h/d}r.vertexDirty=e.vertexDirtyId}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),HR([t,"access",r=>r.program,"access",r=>r.uniformData,"optionalAccess",r=>r.translationMatrix])&&(t.uniforms.translationMatrix=this.worldTransform.toArray(!0)),e.shader.bind(t,!1),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}toLocal(e,t,r,i,s=ln.ALL){return Mm.call(this,e,t,r,i,s)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}gi.__initStatic();gi.__initStatic2();class wi extends Or{constructor(e){super(e),wi.prototype.__init.call(this),this.proj=new ei(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}_calculateBounds(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)}calculateVertices(){const e=this._texture,t=this;if(this.proj._affine){this.vertexData2d=null,super.calculateVertices();return}this.vertexData2d||(this.vertexData2d=new Float32Array(12));const r=this.transform._worldID,i=e._updateID;if(t._transformID===r&&this._textureID===i)return;this._textureID!==i&&(this.uvs=e._uvs.uvsFloat32),t._transformID=r,this._textureID=i;const s=this.proj.world.mat3,o=this.vertexData2d,u=this.vertexData,c=e.trim,v=e.orig,_=this._anchor;let h,d,m,x;c?(d=c.x-_._x*v.width,h=d+c.width,x=c.y-_._y*v.height,m=x+c.height):(d=-_._x*v.width,h=d+v.width,x=-_._y*v.height,m=x+v.height),o[0]=s[0]*d+s[3]*x+s[6],o[1]=s[1]*d+s[4]*x+s[7],o[2]=s[2]*d+s[5]*x+s[8],o[3]=s[0]*h+s[3]*x+s[6],o[4]=s[1]*h+s[4]*x+s[7],o[5]=s[2]*h+s[5]*x+s[8],o[6]=s[0]*h+s[3]*m+s[6],o[7]=s[1]*h+s[4]*m+s[7],o[8]=s[2]*h+s[5]*m+s[8],o[9]=s[0]*d+s[3]*m+s[6],o[10]=s[1]*d+s[4]*m+s[7],o[11]=s[2]*d+s[5]*m+s[8],u[0]=o[0]/o[2],u[1]=o[1]/o[2],u[2]=o[3]/o[5],u[3]=o[4]/o[5],u[4]=o[6]/o[8],u[5]=o[7]/o[8],u[6]=o[9]/o[11],u[7]=o[10]/o[11]}calculateTrimmedVertices(){if(this.proj._affine){super.calculateTrimmedVertices();return}const e=this.transform._worldID,t=this._texture._updateID,r=this;if(!r.vertexTrimmedData)r.vertexTrimmedData=new Float32Array(8);else if(r._transformTrimmedID===e&&this._textureTrimmedID===t)return;r._transformTrimmedID=e,this._textureTrimmedID=t;const i=this._texture,s=r.vertexTrimmedData,o=i.orig,u=this.tileProj?this._width:o.width,c=this.tileProj?this._height:o.height,v=this._anchor,_=this.proj.world.mat3,h=-v._x*u,d=h+u,m=-v._y*c,x=m+c;let w=1/(_[2]*h+_[5]*m+_[8]);s[0]=w*(_[0]*h+_[3]*m+_[6]),s[1]=w*(_[1]*h+_[4]*m+_[7]),w=1/(_[2]*d+_[5]*m+_[8]),s[2]=w*(_[0]*d+_[3]*m+_[6]),s[3]=w*(_[1]*d+_[4]*m+_[7]),w=1/(_[2]*d+_[5]*x+_[8]),s[4]=w*(_[0]*d+_[3]*x+_[6]),s[5]=w*(_[1]*d+_[4]*x+_[7]),w=1/(_[2]*h+_[5]*x+_[8]),s[6]=w*(_[0]*h+_[3]*x+_[6]),s[7]=w*(_[1]*h+_[4]*x+_[7])}toLocal(e,t,r,i,s=ln.ALL){return Mm.call(this,e,t,r,i,s)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}const zR=new Nl;class XR extends Nb{constructor(e,t,r){super(e,t,r),this.tileProj=new ei(this.tileTransform),this.tileProj.reverseLocalOrder=!0,this.proj=new ei(this.transform),this.pluginName="tilingSprite2d",this.uvRespectAnchor=!0}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(e,t,r,i,s=ln.ALL){return Mm.call(this,e,t,r,i,s)}_render(e){const t=this._texture;!t||!t.valid||(this.tileTransform.updateTransform(zR),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}}function qf(){this.proj||(this.proj=new ei(this.transform),this.toLocal=zb.prototype.toLocal,Object.defineProperty(this,"worldTransform",{get:GR,enumerable:!0,configurable:!0}))}mr.prototype.convertTo2d=qf;Or.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=wi.prototype.calculateVertices,this.calculateTrimmedVertices=wi.prototype.calculateTrimmedVertices,this._calculateBounds=wi.prototype._calculateBounds,this.pluginName="batch2d",qf.call(this))};mr.prototype.convertSubtreeTo2d=function(){this.convertTo2d();for(let e=0;e<this.children.length;e++)this.children[e].convertSubtreeTo2d()};Hb.prototype.convertTo2d=Gb.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=gi.prototype.calculateVertices,this._renderDefault=gi.prototype._renderDefault,this.material.pluginName!=="batch2d"&&(this.material=new bo(this.material.texture,{program:So.from(gi.defaultVertexShader,gi.defaultFragmentShader),pluginName:"batch2d"})),qf.call(this))};Nb.prototype.convertTo2d=function(){this.proj||(this.tileProj=new ei(this.tileTransform),this.tileProj.reverseLocalOrder=!0,this.uvRespectAnchor=!0,this.calculateTrimmedVertices=wi.prototype.calculateTrimmedVertices,this._calculateBounds=wi.prototype._calculateBounds,this._render=XR.prototype._render,this.pluginName="tilingSprite2d",qf.call(this))};class pc extends Fl{constructor(e,t,r){super(e,t,r),pc.prototype.__init.call(this),this.proj=new ei(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}}pc.prototype.calculateVertices=wi.prototype.calculateVertices;pc.prototype.calculateTrimmedVertices=wi.prototype.calculateTrimmedVertices;pc.prototype._calculateBounds=wi.prototype._calculateBounds;const VR=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec3 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

vTextureCoord = aTextureCoord;
vMaskCoord = otherMatrix * vec3( aTextureCoord, 1.0);
}
`,qR=`
varying vec3 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform vec4 maskClamp;

void main(void)
{
vec2 uv = vMaskCoord.xy / vMaskCoord.z;

float clip = step(3.5,
    step(maskClamp.x, uv.x) +
    step(maskClamp.y, uv.y) +
    step(uv.x, maskClamp.z) +
    step(uv.y, maskClamp.w));

vec4 original = texture2D(uSampler, vTextureCoord);
vec4 masky = texture2D(mask, uv);

original *= (masky.r * masky.a * alpha * clip);

gl_FragColor = original;
}
`,a1=new un;class Lf extends Fs{constructor(e){super(VR,qR),Lf.prototype.__init.call(this),e.renderable=!1,this.maskSprite=e}__init(){this.maskMatrix=new un}apply(e,t,r,i){const s=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new fc(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=s.texture,this.uniforms.otherMatrix=Lf.calculateSpriteMatrix(t,this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,r,i))}static calculateSpriteMatrix(e,t,r){const i=r.proj,s=e.filterFrame,o=i&&!i._affine?i.world.copyTo2dOr3d(a1):a1.copyFrom(r.transform.worldTransform),u=r.texture.orig;return t.set(e.width,0,0,e.height,s.x,s.y),o.invert(),t.setToMult(o,t),t.scaleAndTranslate(1/u.width,1/u.height,r.anchor.x,r.anchor.y),t}}bb.prototype.pushSpriteMask=function(e){const{maskObject:t}=e,r=e._target;let i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new Lf(t)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=t;const s=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=s,this.alphaMaskIndex++};dc.registerPlugin("tilingSprite2d",Rm);class o1 extends _t{constructor(e,t,r){super(e,t),this.z=r}set(e,t,r){return this.x=e||0,this.y=t===void 0?this.x:t||0,this.z=t===void 0?this.x:r||0,this}copyFrom(e){return this.set(e.x,e.y,e.z||0),this}copyTo(e){return e.set(this.x,this.y,this.z),e}}class zu extends ma{constructor(...e){super(...e),zu.prototype.__init.call(this)}__init(){this._z=0}get z(){return this._z}set z(e){this._z!==e&&(this._z=e,this.cb.call(this.scope))}set(e,t,r){const i=e||0,s=t===void 0?i:t||0,o=t===void 0?i:r||0;return(this._x!==i||this._y!==s||this._z!==o)&&(this._x=i,this._y=s,this._z=o,this.cb.call(this.scope)),this}copyFrom(e){return this.set(e.x,e.y,e.z||0),this}copyTo(e){return e.set(this._x,this._y,this._z),e}}class xl{constructor(e,t,r){xl.prototype.__init.call(this),xl.prototype.__init2.call(this),xl.prototype.__init3.call(this),this._x=e||0,this._y=t||0,this._z=r||0,this.quaternion=new Float64Array(4),this.quaternion[3]=1,this.update()}__init(){this._quatUpdateId=-1}__init2(){this._quatDirtyId=0}__init3(){this._sign=1}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._quatDirtyId++)}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._quatDirtyId++)}get z(){return this._z}set z(e){this._z!==e&&(this._z=e,this._quatDirtyId++)}get pitch(){return this._x}set pitch(e){this._x!==e&&(this._x=e,this._quatDirtyId++)}get yaw(){return this._y}set yaw(e){this._y!==e&&(this._y=e,this._quatDirtyId++)}get roll(){return this._z}set roll(e){this._z!==e&&(this._z=e,this._quatDirtyId++)}set(e,t,r){const i=e||0,s=t||0,o=r||0;(this._x!==i||this._y!==s||this._z!==o)&&(this._x=i,this._y=s,this._z=o,this._quatDirtyId++)}copyFrom(e){const t=e.x,r=e.y,i=e.z;return(this._x!==t||this._y!==r||this._z!==i)&&(this._x=t,this._y=r,this._z=i,this._quatDirtyId++),this}copyTo(e){return e.set(this._x,this._y,this._z),e}equals(e){return this._x===e.x&&this._y===e.y&&this._z===e.z}clone(){return new xl(this._x,this._y,this._z)}update(){if(this._quatUpdateId===this._quatDirtyId)return!1;this._quatUpdateId=this._quatDirtyId;const e=Math.cos(this._x/2),t=Math.cos(this._y/2),r=Math.cos(this._z/2),i=this._sign,s=i*Math.sin(this._x/2),o=i*Math.sin(this._y/2),u=i*Math.sin(this._z/2),c=this.quaternion;return c[0]=s*t*r+e*o*u,c[1]=e*o*r-s*t*u,c[2]=e*t*u+s*o*r,c[3]=e*t*r-s*o*u,!0}}class Xu{constructor(e,t,r,i,s){this.cb=e,this.scope=t,Xu.prototype.__init.call(this),Xu.prototype.__init2.call(this),Xu.prototype.__init3.call(this),this._x=r||0,this._y=i||0,this._z=s||0,this.quaternion=new Float64Array(4),this.quaternion[3]=1,this.update()}__init(){this._quatUpdateId=-1}__init2(){this._quatDirtyId=0}__init3(){this._sign=1}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._quatDirtyId++,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._quatDirtyId++,this.cb.call(this.scope))}get z(){return this._z}set z(e){this._z!==e&&(this._z=e,this._quatDirtyId++,this.cb.call(this.scope))}get pitch(){return this._x}set pitch(e){this._x!==e&&(this._x=e,this._quatDirtyId++,this.cb.call(this.scope))}get yaw(){return this._y}set yaw(e){this._y!==e&&(this._y=e,this._quatDirtyId++,this.cb.call(this.scope))}get roll(){return this._z}set roll(e){this._z!==e&&(this._z=e,this._quatDirtyId++,this.cb.call(this.scope))}set(e,t,r){const i=e||0,s=t||0,o=r||0;return(this._x!==i||this._y!==s||this._z!==o)&&(this._x=i,this._y=s,this._z=o,this._quatDirtyId++,this.cb.call(this.scope)),this}copyFrom(e){const t=e.x,r=e.y,i=e.z;return(this._x!==t||this._y!==r||this._z!==i)&&(this._x=t,this._y=r,this._z=i,this._quatDirtyId++,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y,this._z),e}equals(e){return this._x===e.x&&this._y===e.y&&this._z===e.z}clone(){return new xl(this._x,this._y,this._z)}update(){if(this._quatUpdateId===this._quatDirtyId)return!1;this._quatUpdateId=this._quatDirtyId;const e=Math.cos(this._x/2),t=Math.cos(this._y/2),r=Math.cos(this._z/2),i=this._sign,s=i*Math.sin(this._x/2),o=i*Math.sin(this._y/2),u=i*Math.sin(this._z/2),c=this.quaternion;return c[0]=s*t*r+e*o*u,c[1]=e*o*r-s*t*u,c[2]=e*t*u+s*o*r,c[3]=e*t*r-s*o*u,!0}}const WR=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];class Ir{static __initStatic(){this.IDENTITY=new Ir}static __initStatic2(){this.TEMP_MATRIX=new Ir}__init(){this.floatArray=null}__init2(){this._dirtyId=0}__init3(){this._updateId=-1}__init4(){this._mat4inv=null}__init5(){this.cacheInverse=!1}constructor(e){Ir.prototype.__init.call(this),Ir.prototype.__init2.call(this),Ir.prototype.__init3.call(this),Ir.prototype.__init4.call(this),Ir.prototype.__init5.call(this),this.mat4=new Float64Array(e||WR)}get a(){return this.mat4[0]/this.mat4[15]}set a(e){this.mat4[0]=e*this.mat4[15]}get b(){return this.mat4[1]/this.mat4[15]}set b(e){this.mat4[1]=e*this.mat4[15]}get c(){return this.mat4[4]/this.mat4[15]}set c(e){this.mat4[4]=e*this.mat4[15]}get d(){return this.mat4[5]/this.mat4[15]}set d(e){this.mat4[5]=e*this.mat4[15]}get tx(){return this.mat4[12]/this.mat4[15]}set tx(e){this.mat4[12]=e*this.mat4[15]}get ty(){return this.mat4[13]/this.mat4[15]}set ty(e){this.mat4[13]=e*this.mat4[15]}set(e,t,r,i,s,o){const u=this.mat4;return u[0]=e,u[1]=t,u[2]=0,u[3]=0,u[4]=r,u[5]=i,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=s,u[13]=o,u[14]=0,u[15]=1,this}toArray(e,t){this.floatArray||(this.floatArray=new Float32Array(9));const r=t||this.floatArray,i=this.mat4;return e?(r[0]=i[0],r[1]=i[1],r[2]=i[3],r[3]=i[4],r[4]=i[5],r[5]=i[7],r[6]=i[12],r[7]=i[13],r[8]=i[15]):(r[0]=i[0],r[1]=i[4],r[2]=i[12],r[3]=i[2],r[4]=i[6],r[5]=i[13],r[6]=i[3],r[7]=i[7],r[8]=i[15]),r}setToTranslation(e,t,r){const i=this.mat4;i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=e,i[13]=t,i[14]=r,i[15]=1}setToRotationTranslationScale(e,t,r,i,s,o,u){const c=this.mat4,v=e[0],_=e[1],h=e[2],d=e[3],m=v+v,x=_+_,w=h+h,T=v*m,E=v*x,I=v*w,D=_*x,z=_*w,O=h*w,U=d*m,y=d*x,te=d*w;return c[0]=(1-(D+O))*s,c[1]=(E+te)*s,c[2]=(I-y)*s,c[3]=0,c[4]=(E-te)*o,c[5]=(1-(T+O))*o,c[6]=(z+U)*o,c[7]=0,c[8]=(I+y)*u,c[9]=(z-U)*u,c[10]=(1-(T+D))*u,c[11]=0,c[12]=t,c[13]=r,c[14]=i,c[15]=1,c}apply(e,t){t=t||new o1;const r=this.mat4,i=e.x,s=e.y,o=e.z||0,u=1/(r[3]*i+r[7]*s+r[11]*o+r[15]);return t.x=u*(r[0]*i+r[4]*s+r[8]*o+r[12]),t.y=u*(r[1]*i+r[5]*s+r[9]*o+r[13]),t.z=u*(r[2]*i+r[6]*s+r[10]*o+r[14]),t}translate(e,t,r){const i=this.mat4;return i[12]=i[0]*e+i[4]*t+i[8]*r+i[12],i[13]=i[1]*e+i[5]*t+i[9]*r+i[13],i[14]=i[2]*e+i[6]*t+i[10]*r+i[14],i[15]=i[3]*e+i[7]*t+i[11]*r+i[15],this}scale(e,t,r){const i=this.mat4;return i[0]*=e,i[1]*=e,i[2]*=e,i[3]*=e,i[4]*=t,i[5]*=t,i[6]*=t,i[7]*=t,r!==void 0&&(i[8]*=r,i[9]*=r,i[10]*=r,i[11]*=r),this}scaleAndTranslate(e,t,r,i,s,o){const u=this.mat4;u[0]=e*u[0]+i*u[3],u[1]=t*u[1]+s*u[3],u[2]=r*u[2]+o*u[3],u[4]=e*u[4]+i*u[7],u[5]=t*u[5]+s*u[7],u[6]=r*u[6]+o*u[7],u[8]=e*u[8]+i*u[11],u[9]=t*u[9]+s*u[11],u[10]=r*u[10]+o*u[11],u[12]=e*u[12]+i*u[15],u[13]=t*u[13]+s*u[15],u[14]=r*u[14]+o*u[15]}applyInverse(e,t){t=t||new o1,this._mat4inv||(this._mat4inv=new Float64Array(16));const r=this._mat4inv,i=this.mat4,s=e.x,o=e.y;let u=e.z||0;(!this.cacheInverse||this._updateId!==this._dirtyId)&&(this._updateId=this._dirtyId,Ir.glMatrixMat4Invert(r,i));const c=1/(r[3]*s+r[7]*o+r[11]*u+r[15]),v=c*(r[0]*s+r[4]*o+r[8]*u+r[12]),_=c*(r[1]*s+r[5]*o+r[9]*u+r[13]),h=c*(r[2]*s+r[6]*o+r[10]*u+r[14]);u+=1;const d=1/(r[3]*s+r[7]*o+r[11]*u+r[15]),m=d*(r[0]*s+r[4]*o+r[8]*u+r[12]),x=d*(r[1]*s+r[5]*o+r[9]*u+r[13]),w=d*(r[2]*s+r[6]*o+r[10]*u+r[14]);Math.abs(h-w)<1e-10&&t.set(NaN,NaN,0);const T=(0-h)/(w-h);return t.set((m-v)*T+v,(x-_)*T+_,0),t}invert(){return Ir.glMatrixMat4Invert(this.mat4,this.mat4),this}invertCopyTo(e){this._mat4inv||(this._mat4inv=new Float64Array(16));const t=this._mat4inv,r=this.mat4;(!this.cacheInverse||this._updateId!==this._dirtyId)&&(this._updateId=this._dirtyId,Ir.glMatrixMat4Invert(t,r)),e.mat4.set(t)}identity(){const e=this.mat4;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}clone(){return new Ir(this.mat4)}copyTo3d(e){const t=this.mat4,r=e.mat4;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],e}copyTo2d(e){const t=this.mat4,r=e.mat3;return r[0]=t[0],r[1]=t[1],r[2]=t[3],r[3]=t[4],r[4]=t[5],r[5]=t[7],r[6]=t[12],r[7]=t[13],r[8]=t[15],e}copyTo2dOr3d(e){return e instanceof un?this.copyTo2d(e):this.copyTo3d(e)}copyTo(e,t,r){const i=this.mat4,s=1/i[15],o=i[12]*s,u=i[13]*s;if(e.a=(i[0]-i[3]*o)*s,e.b=(i[1]-i[3]*u)*s,e.c=(i[4]-i[7]*o)*s,e.d=(i[5]-i[7]*u)*s,e.tx=o,e.ty=u,t>=2){let c=e.a*e.d-e.b*e.c;r||(c=Math.abs(c)),t===qi.POINT?(c>0?c=1:c=-1,e.a=c,e.b=0,e.c=0,e.d=c):t===qi.AXIS_X?(c/=Math.sqrt(e.b*e.b+e.d*e.d),e.c=0,e.d=c):t===qi.AXIS_Y&&(c/=Math.sqrt(e.a*e.a+e.c*e.c),e.a=c,e.c=0)}return e}copyFrom(e){const t=this.mat4;return t[0]=e.a,t[1]=e.b,t[2]=0,t[3]=0,t[4]=e.c,t[5]=e.d,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e.tx,t[13]=e.ty,t[14]=0,t[15]=1,this._dirtyId++,this}setToMultLegacy(e,t){const r=this.mat4,i=t.mat4,s=e.a,o=e.b,u=e.c,c=e.d,v=e.tx,_=e.ty;let h=i[0],d=i[1],m=i[2],x=i[3];return r[0]=h*s+d*u+x*v,r[1]=h*o+d*c+x*_,r[2]=m,r[3]=x,h=i[4],d=i[5],m=i[6],x=i[7],r[4]=h*s+d*u+x*v,r[5]=h*o+d*c+x*_,r[6]=m,r[7]=x,h=i[8],d=i[9],m=i[10],x=i[11],r[8]=h*s+d*u+x*v,r[9]=h*o+d*c+x*_,r[10]=m,r[11]=x,h=i[12],d=i[13],m=i[14],x=i[15],r[12]=h*s+d*u+x*v,r[13]=h*o+d*c+x*_,r[14]=m,r[15]=x,this._dirtyId++,this}setToMultLegacy2(e,t){const r=this.mat4,i=e.mat4,s=i[0],o=i[1],u=i[2],c=i[3],v=i[4],_=i[5],h=i[6],d=i[7],m=t.a,x=t.b,w=t.c,T=t.d,E=t.tx,I=t.ty;return r[0]=m*s+x*v,r[1]=m*o+x*_,r[2]=m*u+x*h,r[3]=m*c+x*d,r[4]=w*s+T*v,r[5]=w*o+T*_,r[6]=w*u+T*h,r[7]=w*c+T*d,r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=E*s+I*v+i[12],r[13]=E*o+I*_+i[13],r[14]=E*u+I*h+i[14],r[15]=E*c+I*d+i[15],this._dirtyId++,this}setToMult(e,t){return Ir.glMatrixMat4Multiply(this.mat4,e.mat4,t.mat4),this._dirtyId++,this}prepend(e){e.mat4?this.setToMult(e,this):this.setToMultLegacy(e,this)}static glMatrixMat4Invert(e,t){const r=t[0],i=t[1],s=t[2],o=t[3],u=t[4],c=t[5],v=t[6],_=t[7],h=t[8],d=t[9],m=t[10],x=t[11],w=t[12],T=t[13],E=t[14],I=t[15],D=r*c-i*u,z=r*v-s*u,O=r*_-o*u,U=i*v-s*c,y=i*_-o*c,te=s*_-o*v,F=h*T-d*w,W=h*E-m*w,ne=h*I-x*w,ee=d*E-m*T,ue=d*I-x*T,ye=m*I-x*E;let K=D*ye-z*ue+O*ee+U*ne-y*W+te*F;return K?(K=1/K,e[0]=(c*ye-v*ue+_*ee)*K,e[1]=(s*ue-i*ye-o*ee)*K,e[2]=(T*te-E*y+I*U)*K,e[3]=(m*y-d*te-x*U)*K,e[4]=(v*ne-u*ye-_*W)*K,e[5]=(r*ye-s*ne+o*W)*K,e[6]=(E*O-w*te-I*z)*K,e[7]=(h*te-m*O+x*z)*K,e[8]=(u*ue-c*ne+_*F)*K,e[9]=(i*ne-r*ue-o*F)*K,e[10]=(w*y-T*O+I*D)*K,e[11]=(d*O-h*y-x*D)*K,e[12]=(c*W-u*ee-v*F)*K,e[13]=(r*ee-i*W+s*F)*K,e[14]=(T*z-w*U-E*D)*K,e[15]=(h*U-d*z+m*D)*K,e):null}static glMatrixMat4Multiply(e,t,r){const i=t[0],s=t[1],o=t[2],u=t[3],c=t[4],v=t[5],_=t[6],h=t[7],d=t[8],m=t[9],x=t[10],w=t[11],T=t[12],E=t[13],I=t[14],D=t[15];let z=r[0],O=r[1],U=r[2],y=r[3];return e[0]=z*i+O*c+U*d+y*T,e[1]=z*s+O*v+U*m+y*E,e[2]=z*o+O*_+U*x+y*I,e[3]=z*u+O*h+U*w+y*D,z=r[4],O=r[5],U=r[6],y=r[7],e[4]=z*i+O*c+U*d+y*T,e[5]=z*s+O*v+U*m+y*E,e[6]=z*o+O*_+U*x+y*I,e[7]=z*u+O*h+U*w+y*D,z=r[8],O=r[9],U=r[10],y=r[11],e[8]=z*i+O*c+U*d+y*T,e[9]=z*s+O*v+U*m+y*E,e[10]=z*o+O*_+U*x+y*I,e[11]=z*u+O*h+U*w+y*D,z=r[12],O=r[13],U=r[14],y=r[15],e[12]=z*i+O*c+U*d+y*T,e[13]=z*s+O*v+U*m+y*E,e[14]=z*o+O*_+U*x+y*I,e[15]=z*u+O*h+U*w+y*D,e}}Ir.__initStatic();Ir.__initStatic2();const l1=new Ir;class Qn extends _a{constructor(e,t){super(e,t),Qn.prototype.__init.call(this),Qn.prototype.__init2.call(this),Qn.prototype.__init3.call(this),Qn.prototype.__init4.call(this),Qn.prototype.__init5.call(this),Qn.prototype.__init6.call(this),this.local=new Ir,this.world=new Ir,this.local.cacheInverse=!0,this.world.cacheInverse=!0,this.position._z=0,this.scale._z=1,this.pivot._z=0}__init(){this.cameraMatrix=null}__init2(){this._cameraMode=!1}get cameraMode(){return this._cameraMode}set cameraMode(e){this._cameraMode!==e&&(this._cameraMode=e,this.euler._sign=this._cameraMode?-1:1,this.euler._quatDirtyId++,e&&(this.cameraMatrix=new Ir))}__init3(){this.position=new zu(this.onChange,this,0,0)}__init4(){this.scale=new zu(this.onChange,this,1,1)}__init5(){this.euler=new Xu(this.onChange,this,0,0,0)}__init6(){this.pivot=new zu(this.onChange,this,0,0)}onChange(){this._projID++}clear(){this.cameraMatrix&&this.cameraMatrix.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.euler.set(0,0,0),this.pivot.set(0,0,0),super.clear()}updateLocalTransform(e){if(this._projID===0){this.local.copyFrom(e);return}const t=this.local,r=this.euler,i=this.position,s=this.scale,o=this.pivot;if(r.update(),!this.cameraMode){t.setToRotationTranslationScale(r.quaternion,i._x,i._y,i._z,s._x,s._y,s._z),t.translate(-o._x,-o._y,-o._z),t.setToMultLegacy(e,t);return}t.setToMultLegacy(e,this.cameraMatrix),t.translate(o._x,o._y,o._z),t.scale(1/s._x,1/s._y,1/s._z),l1.setToRotationTranslationScale(r.quaternion,0,0,0,1,1,1),t.setToMult(t,l1),t.translate(-i._x,-i._y,-i._z),this.local._dirtyId++}}function $R(){return this.proj.affine?this.transform.worldTransform:this.proj.world}class Al extends mr{constructor(){super(),this.proj=new Qn(this.transform)}isFrontFace(e=!1){e&&(this._recursivePostUpdateTransform(),this.displayObjectUpdateTransform());const t=this.proj.world.mat4,r=t[0]*t[15]-t[3]*t[12],i=t[1]*t[15]-t[3]*t[13],s=t[4]*t[15]-t[7]*t[12],o=t[5]*t[15]-t[7]*t[13];return r*o-s*i>0}getDepth(e=!1){e&&(this._recursivePostUpdateTransform(),this.displayObjectUpdateTransform());const t=this.proj.world.mat4;return t[14]/t[15]}toLocal(e,t,r,i,s=ln.ALL){return t&&(e=t.toGlobal(e,r,i)),i||this._recursivePostUpdateTransform(),s===ln.ALL?(i||this.displayObjectUpdateTransform(),this.proj.affine?this.transform.worldTransform.applyInverse(e,r):this.proj.world.applyInverse(e,r)):(this.parent?r=this.parent.worldTransform.applyInverse(e,r):(r.x=e.x,r.y=e.y,r.z=e.z),s===ln.NONE||(r=this.transform.localTransform.applyInverse(r,r),s===ln.PROJ&&this.proj.cameraMode&&(r=this.proj.cameraMatrix.applyInverse(r,r))),r)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}get position3d(){return this.proj.position}set position3d(e){this.proj.position.copyFrom(e)}get scale3d(){return this.proj.scale}set scale3d(e){this.proj.scale.copyFrom(e)}get euler(){return this.proj.euler}set euler(e){this.proj.euler.copyFrom(e)}get pivot3d(){return this.proj.pivot}set pivot3d(e){this.proj.pivot.copyFrom(e)}}const km=Al.prototype.toLocal,Dm=Al.prototype.getDepth,Nm=Al.prototype.isFrontFace;class nc extends xo{constructor(e,t,r,i){super(e,t,r,i),nc.prototype.__init.call(this),this.proj=new Qn(this.transform)}__init(){this.vertexData2d=null}calculateVertices(){if(this.proj._affine){this.vertexData2d=null,super.calculateVertices();return}const e=this.geometry,t=e.buffers[0].data,r=this;if(e.vertexDirtyId===r.vertexDirty&&r._transformID===r.transform._worldID)return;r._transformID=r.transform._worldID,r.vertexData.length!==t.length&&(r.vertexData=new Float32Array(t.length)),(!this.vertexData2d||this.vertexData2d.length!==t.length*3/2)&&(this.vertexData2d=new Float32Array(t.length*3));const i=this.proj.world.mat4,s=this.vertexData2d,o=r.vertexData;for(let u=0;u<o.length/2;u++){const c=t[u*2],v=t[u*2+1],_=i[0]*c+i[4]*v+i[12],h=i[1]*c+i[5]*v+i[13],d=i[3]*c+i[7]*v+i[15];s[u*3]=_,s[u*3+1]=h,s[u*3+2]=d,o[u*2]=_/d,o[u*2+1]=h/d}r.vertexDirty=e.vertexDirtyId}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(e,t,r,i,s=ln.ALL){return km.call(this,e,t,r,i,s)}isFrontFace(e){return Nm.call(this,e)}getDepth(e){return Dm.call(this,e)}get position3d(){return this.proj.position}set position3d(e){this.proj.position.copyFrom(e)}get scale3d(){return this.proj.scale}set scale3d(e){this.proj.scale.copyFrom(e)}get euler(){return this.proj.euler}set euler(e){this.proj.euler.copyFrom(e)}get pivot3d(){return this.proj.pivot}set pivot3d(e){this.proj.pivot.copyFrom(e)}}nc.prototype._renderDefault=gi.prototype._renderDefault;class Ln extends Or{constructor(e){super(e),Ln.prototype.__init.call(this),Ln.prototype.__init2.call(this),Ln.prototype.__init3.call(this),this.proj=new Qn(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}__init2(){this.culledByFrustrum=!1}__init3(){this.trimmedCulledByFrustrum=!1}calculateVertices(){const e=this._texture;if(this.proj._affine){this.vertexData2d=null,super.calculateVertices();return}this.vertexData2d||(this.vertexData2d=new Float32Array(12));const t=this.transform._worldID,r=e._updateID,i=this;if(i._transformID===t&&this._textureID===r)return;this._textureID!==r&&(this.uvs=e._uvs.uvsFloat32),i._transformID=t,this._textureID=r;const s=this.proj.world.mat4,o=this.vertexData2d,u=this.vertexData,c=e.trim,v=e.orig,_=this._anchor;let h,d,m,x;c?(d=c.x-_._x*v.width,h=d+c.width,x=c.y-_._y*v.height,m=x+c.height):(d=-_._x*v.width,h=d+v.width,x=-_._y*v.height,m=x+v.height);let w=!1,T;o[0]=s[0]*d+s[4]*x+s[12],o[1]=s[1]*d+s[5]*x+s[13],T=s[2]*d+s[6]*x+s[14],o[2]=s[3]*d+s[7]*x+s[15],w=w||T<0,o[3]=s[0]*h+s[4]*x+s[12],o[4]=s[1]*h+s[5]*x+s[13],T=s[2]*h+s[6]*x+s[14],o[5]=s[3]*h+s[7]*x+s[15],w=w||T<0,o[6]=s[0]*h+s[4]*m+s[12],o[7]=s[1]*h+s[5]*m+s[13],T=s[2]*h+s[6]*m+s[14],o[8]=s[3]*h+s[7]*m+s[15],w=w||T<0,o[9]=s[0]*d+s[4]*m+s[12],o[10]=s[1]*d+s[5]*m+s[13],T=s[2]*d+s[6]*m+s[14],o[11]=s[3]*d+s[7]*m+s[15],w=w||T<0,this.culledByFrustrum=w,u[0]=o[0]/o[2],u[1]=o[1]/o[2],u[2]=o[3]/o[5],u[3]=o[4]/o[5],u[4]=o[6]/o[8],u[5]=o[7]/o[8],u[6]=o[9]/o[11],u[7]=o[10]/o[11]}calculateTrimmedVertices(){if(this.proj._affine){super.calculateTrimmedVertices();return}const e=this.transform._worldID,t=this._texture._updateID,r=this;if(!r.vertexTrimmedData)r.vertexTrimmedData=new Float32Array(8);else if(r._transformTrimmedID===e&&this._textureTrimmedID===t)return;r._transformTrimmedID=e,this._textureTrimmedID=t;const i=this._texture,s=r.vertexTrimmedData,o=i.orig,u=this._anchor,c=this.proj.world.mat4,v=-u._x*o.width,_=v+o.width,h=-u._y*o.height,d=h+o.height;let m=!1,x,w=1/(c[3]*v+c[7]*h+c[15]);s[0]=w*(c[0]*v+c[4]*h+c[12]),s[1]=w*(c[1]*v+c[5]*h+c[13]),x=c[2]*v+c[6]*h+c[14],m=m||x<0,w=1/(c[3]*_+c[7]*h+c[15]),s[2]=w*(c[0]*_+c[4]*h+c[12]),s[3]=w*(c[1]*_+c[5]*h+c[13]),x=c[2]*_+c[6]*h+c[14],m=m||x<0,w=1/(c[3]*_+c[7]*d+c[15]),s[4]=w*(c[0]*_+c[4]*d+c[12]),s[5]=w*(c[1]*_+c[5]*d+c[13]),x=c[2]*_+c[6]*d+c[14],m=m||x<0,w=1/(c[3]*v+c[7]*d+c[15]),s[6]=w*(c[0]*v+c[4]*d+c[12]),s[7]=w*(c[1]*v+c[5]*d+c[13]),x=c[2]*v+c[6]*d+c[14],m=m||x<0,this.culledByFrustrum=m}_calculateBounds(){if(this.calculateVertices(),this.culledByFrustrum)return;const e=this._texture.trim,t=this._texture.orig;if(!e||e.width===t.width&&e.height===t.height){this._bounds.addQuad(this.vertexData);return}this.calculateTrimmedVertices(),this.trimmedCulledByFrustrum||this._bounds.addQuad(this.vertexTrimmedData)}_render(e){this.calculateVertices(),!this.culledByFrustrum&&(e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}containsPoint(e){return this.culledByFrustrum?!1:super.containsPoint(e)}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(e,t,r,i,s=ln.ALL){return km.call(this,e,t,r,i,s)}isFrontFace(e){return Nm.call(this,e)}getDepth(e){return Dm.call(this,e)}get position3d(){return this.proj.position}set position3d(e){this.proj.position.copyFrom(e)}get scale3d(){return this.proj.scale}set scale3d(e){this.proj.scale.copyFrom(e)}get euler(){return this.proj.euler}set euler(e){this.proj.euler.copyFrom(e)}get pivot3d(){return this.proj.pivot}set pivot3d(e){this.proj.pivot.copyFrom(e)}}const YR={worldTransform:{get:$R,enumerable:!0,configurable:!0},position3d:{get(){return this.proj.position},set(n){this.proj.position.copy(n)}},scale3d:{get(){return this.proj.scale},set(n){this.proj.scale.copy(n)}},pivot3d:{get(){return this.proj.pivot},set(n){this.proj.pivot.copy(n)}},euler:{get(){return this.proj.euler},set(n){this.proj.euler.copy(n)}}};function Fm(){this.proj||(this.proj=new Qn(this.transform),this.toLocal=Al.prototype.toLocal,this.isFrontFace=Al.prototype.isFrontFace,this.getDepth=Al.prototype.getDepth,Object.defineProperties(this,YR))}mr.prototype.convertTo3d=Fm;Or.prototype.convertTo3d=function(){this.proj||(this.calculateVertices=Ln.prototype.calculateVertices,this.calculateTrimmedVertices=Ln.prototype.calculateTrimmedVertices,this._calculateBounds=Ln.prototype._calculateBounds,this.containsPoint=Ln.prototype.containsPoint,this.pluginName="batch2d",Fm.call(this))};mr.prototype.convertSubtreeTo3d=function(){this.convertTo3d();for(let e=0;e<this.children.length;e++)this.children[e].convertSubtreeTo3d()};Hb.prototype.convertTo3d=Gb.prototype.convertTo3d=function(){this.proj||(this.calculateVertices=nc.prototype.calculateVertices,this._renderDefault=nc.prototype._renderDefault,this.material.pluginName!=="batch2d"&&(this.material=new bo(this.material.texture,{program:So.from(gi.defaultVertexShader,gi.defaultFragmentShader),pluginName:"batch2d"})),Fm.call(this))};class Co extends Fl{constructor(e,t,r){super(e,t,r),Co.prototype.__init.call(this),this.proj=new Qn(this.transform),this.pluginName="batch2d"}__init(){this.vertexData2d=null}get worldTransform(){return this.proj.affine?this.transform.worldTransform:this.proj.world}toLocal(e,t,r,i,s=ln.ALL){return km.call(this,e,t,r,i,s)}isFrontFace(e){return Nm.call(this,e)}getDepth(e){return Dm.call(this,e)}get position3d(){return this.proj.position}set position3d(e){this.proj.position.copyFrom(e)}get scale3d(){return this.proj.scale}set scale3d(e){this.proj.scale.copyFrom(e)}get euler(){return this.proj.euler}set euler(e){this.proj.euler.copyFrom(e)}get pivot3d(){return this.proj.pivot}set pivot3d(e){this.proj.pivot.copyFrom(e)}}Co.prototype.calculateVertices=Ln.prototype.calculateVertices;Co.prototype.calculateTrimmedVertices=Ln.prototype.calculateTrimmedVertices;Co.prototype._calculateBounds=Ln.prototype._calculateBounds;Co.prototype.containsPoint=Ln.prototype.containsPoint;Co.prototype._render=Ln.prototype._render;var Pu;const KR=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec3 aTrans1;
attribute vec3 aTrans2;
attribute vec2 aSamplerSize;
attribute vec4 aFrame;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;

varying vec2 vertexPosition;
varying vec3 vTrans1;
varying vec3 vTrans2;
varying vec2 vSamplerSize;
varying vec4 vFrame;
varying vec4 vColor;
varying float vTextureId;

void main(void){
gl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);
gl_Position.z = 0.0;

vertexPosition = aVertexPosition;
vTrans1 = aTrans1;
vTrans2 = aTrans2;
vTextureId = aTextureId;
vColor = aColor;
vSamplerSize = aSamplerSize;
vFrame = aFrame;
}
`,QR=`precision highp float;
varying vec2 vertexPosition;
varying vec3 vTrans1;
varying vec3 vTrans2;
varying vec2 vSamplerSize;
varying vec4 vFrame;
varying vec4 vColor;
varying float vTextureId;

uniform sampler2D uSamplers[%count%];
uniform vec4 distortion;

void main(void){
vec2 surface;
vec2 surface2;

float vx = vertexPosition.x;
float vy = vertexPosition.y;
float dx = distortion.x;
float dy = distortion.y;
float revx = distortion.z;
float revy = distortion.w;

if (distortion.x == 0.0) {
surface.x = vx;
surface.y = vy / (1.0 + dy * vx);
surface2 = surface;
} else
if (distortion.y == 0.0) {
surface.y = vy;
surface.x = vx / (1.0 + dx * vy);
surface2 = surface;
} else {
float c = vy * dx - vx * dy;
float b = (c + 1.0) * 0.5;
float b2 = (-c + 1.0) * 0.5;
float d = b * b + vx * dy;
if (d < -0.00001) {
    discard;
}
d = sqrt(max(d, 0.0));
surface.x = (- b + d) * revy;
surface2.x = (- b - d) * revy;
surface.y = (- b2 + d) * revx;
surface2.y = (- b2 - d) * revx;
}

vec2 uv;
uv.x = vTrans1.x * surface.x + vTrans1.y * surface.y + vTrans1.z;
uv.y = vTrans2.x * surface.x + vTrans2.y * surface.y + vTrans2.z;

vec2 pixels = uv * vSamplerSize;

if (pixels.x < vFrame.x || pixels.x > vFrame.z ||
pixels.y < vFrame.y || pixels.y > vFrame.w) {
uv.x = vTrans1.x * surface2.x + vTrans1.y * surface2.y + vTrans1.z;
uv.y = vTrans2.x * surface2.x + vTrans2.y * surface2.y + vTrans2.z;
pixels = uv * vSamplerSize;

if (pixels.x < vFrame.x || pixels.x > vFrame.z ||
   pixels.y < vFrame.y || pixels.y > vFrame.w) {
   discard;
}
}

vec4 edge;
edge.xy = clamp(pixels - vFrame.xy + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));
edge.zw = clamp(vFrame.zw - pixels + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));

float alpha = 1.0; //edge.x * edge.y * edge.z * edge.w;
vec4 rColor = vColor * alpha;

float textureId = floor(vTextureId+0.5);
vec2 vTextureCoord = uv;
vec4 color;
%forloop%
gl_FragColor = color * rColor;
}`;class ZR extends To{constructor(e=!1){super(),this._buffer=new sr(null,e,!1),this._indexBuffer=new sr(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Ke.FLOAT).addAttribute("aTrans1",this._buffer,3,!1,Ke.FLOAT).addAttribute("aTrans2",this._buffer,3,!1,Ke.FLOAT).addAttribute("aSamplerSize",this._buffer,2,!1,Ke.FLOAT).addAttribute("aFrame",this._buffer,4,!1,Ke.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ke.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ke.FLOAT).addIndex(this._indexBuffer)}}class JR{static create(e){const{vertex:t,fragment:r,vertexSize:i,geometryClass:s}=Object.assign({vertex:KR,fragment:QR,geometryClass:ZR,vertexSize:16},e);return Pu=class extends Ff{constructor(u){super(u),Pu.prototype.__init.call(this),Pu.prototype.__init2.call(this),Pu.prototype.__init3.call(this),this.shaderGenerator=new Pm(t,r),this.geometryClass=s,this.vertexSize=i}__init(){this.defUniforms={translationMatrix:new er,distortion:new Float32Array([0,0,1/0,1/0])}}__init2(){this.size=1e3}__init3(){this.forceMaxTextures=1}getUniforms(u){const{proj:c}=u;return c.surface!==null?c.uniforms:c._activeProjection!==null?c._activeProjection.uniforms:this.defUniforms}packInterleavedGeometry(u,c,v,_,h){const{uint32View:d,float32View:m}=c,x=_/this.vertexSize,w=u.indices,T=u.vertexData,I=u._texture._frame,D=u.aTrans,{_batchLocation:z,realWidth:O,realHeight:U,resolution:y}=u._texture.baseTexture,te=Math.min(u.worldAlpha,1),F=te<1&&u._texture.baseTexture.alphaMode?uc(u._tintRGB,te):u._tintRGB+(te*255<<24);for(let W=0;W<T.length;W+=2)m[_]=T[W],m[_+1]=T[W+1],m[_+2]=D.a,m[_+3]=D.c,m[_+4]=D.tx,m[_+5]=D.b,m[_+6]=D.d,m[_+7]=D.ty,m[_+8]=O,m[_+9]=U,m[_+10]=I.x*y,m[_+11]=I.y*y,m[_+12]=(I.x+I.width)*y,m[_+13]=(I.y+I.height)*y,d[_+14]=F,m[_+15]=z,_+=16;for(let W=0;W<w.length;W++)v[h++]=x+w[W]}},Pu}}const Ye=[new _t,new _t,new _t,new _t],io=[0,0,0,0];class bl{constructor(){bl.prototype.__init.call(this),bl.prototype.__init2.call(this),bl.prototype.__init3.call(this),bl.prototype.__init4.call(this)}__init(){this.surfaceID="default"}__init2(){this._updateID=0}__init3(){this.vertexSrc=""}__init4(){this.fragmentSrc=""}fillUniforms(e){}clear(){}boundsQuad(e,t,r){let i=t[0],s=t[1],o=t[0],u=t[1];for(let c=2;c<8;c+=2)i>t[c]&&(i=t[c]),o<t[c]&&(o=t[c]),s>t[c+1]&&(s=t[c+1]),u<t[c+1]&&(u=t[c+1]);if(Ye[0].set(i,s),this.apply(Ye[0],Ye[0]),Ye[1].set(o,s),this.apply(Ye[1],Ye[1]),Ye[2].set(o,u),this.apply(Ye[2],Ye[2]),Ye[3].set(i,u),this.apply(Ye[3],Ye[3]),r)r.apply(Ye[0],Ye[0]),r.apply(Ye[1],Ye[1]),r.apply(Ye[2],Ye[2]),r.apply(Ye[3],Ye[3]),t[0]=Ye[0].x,t[1]=Ye[0].y,t[2]=Ye[1].x,t[3]=Ye[1].y,t[4]=Ye[2].x,t[5]=Ye[2].y,t[6]=Ye[3].x,t[7]=Ye[3].y;else{for(let c=1;c<=3;c++)if(Ye[c].y<Ye[0].y||Ye[c].y===Ye[0].y&&Ye[c].x<Ye[0].x){const v=Ye[0];Ye[0]=Ye[c],Ye[c]=v}for(let c=1;c<=3;c++)io[c]=Math.atan2(Ye[c].y-Ye[0].y,Ye[c].x-Ye[0].x);for(let c=1;c<=3;c++)for(let v=c+1;v<=3;v++)if(io[c]>io[v]){const _=Ye[c];Ye[c]=Ye[v],Ye[v]=_;const h=io[c];io[c]=io[v],io[v]=h}if(t[0]=Ye[0].x,t[1]=Ye[0].y,t[2]=Ye[1].x,t[3]=Ye[1].y,t[4]=Ye[2].x,t[5]=Ye[2].y,t[6]=Ye[3].x,t[7]=Ye[3].y,(Ye[3].x-Ye[2].x)*(Ye[1].y-Ye[2].y)-(Ye[1].x-Ye[2].x)*(Ye[3].y-Ye[2].y)<0){t[4]=Ye[3].x,t[5]=Ye[3].y;return}}}}const eM=new er,Iu=new pt,Ou=new _t;class Bf extends bl{constructor(...e){super(...e),Bf.prototype.__init.call(this)}__init(){this.distortion=new _t}clear(){this.distortion.set(0,0)}apply(e,t){t=t||new _t;const r=this.distortion,i=e.x*e.y;return t.x=e.x+r.x*i,t.y=e.y+r.y*i,t}applyInverse(e,t){t=t||new _t;const r=e.x,i=e.y,s=this.distortion.x,o=this.distortion.y;if(s===0)t.x=r,t.y=i/(1+o*r);else if(o===0)t.y=i,t.x=r/(1+s*i);else{const u=(i*s-r*o+1)*.5/o,c=u*u+r/o;if(c<=1e-5)return t.set(NaN,NaN),t;o>0?t.x=-u+Math.sqrt(c):t.x=-u-Math.sqrt(c),t.y=(r/t.x-1)/s}return t}mapSprite(e,t,r){const i=e.texture;return Iu.x=-e.anchor.x*i.orig.width,Iu.y=-e.anchor.y*i.orig.height,Iu.width=i.orig.width,Iu.height=i.orig.height,this.mapQuad(Iu,t,r||e.transform)}mapQuad(e,t,r){const i=-e.x/e.width,s=-e.y/e.height,o=(1-e.x)/e.width,u=(1-e.y)/e.height,c=t[0].x*(1-i)+t[1].x*i,v=t[0].y*(1-i)+t[1].y*i,_=t[0].x*(1-o)+t[1].x*o,h=t[0].y*(1-o)+t[1].y*o,d=t[3].x*(1-i)+t[2].x*i,m=t[3].y*(1-i)+t[2].y*i,x=t[3].x*(1-o)+t[2].x*o,w=t[3].y*(1-o)+t[2].y*o,T=c*(1-s)+d*s,E=v*(1-s)+m*s,I=_*(1-s)+x*s,D=h*(1-s)+w*s,z=c*(1-u)+d*u,O=v*(1-u)+m*u,U=_*(1-u)+x*u,y=h*(1-u)+w*u,te=eM;return te.tx=T,te.ty=E,te.a=I-T,te.b=D-E,te.c=z-T,te.d=O-E,Ou.set(U,y),te.applyInverse(Ou,Ou),this.distortion.set(Ou.x-1,Ou.y-1),r.setFromMatrix(te),this}fillUniforms(e){e.distortion=e.distortion||new Float32Array([0,0,0,0]);const t=Math.abs(this.distortion.x),r=Math.abs(this.distortion.y);e.distortion[0]=t*1e4<=r?0:this.distortion.x,e.distortion[1]=r*1e4<=t?0:this.distortion.y,e.distortion[2]=1/e.distortion[0],e.distortion[3]=1/e.distortion[1]}}const u1=Nl.prototype.updateTransform;function tM(n){const e=this.proj,t=n.proj,r=this;if(!t){u1.call(this,n),e._activeProjection=null;return}if(t._surface){e._activeProjection=t,this.updateLocalTransform(),this.localTransform.copyTo(this.worldTransform),r._parentID<0&&++r._worldID;return}u1.call(this,n),e._activeProjection=t._activeProjection}class Ps extends Vf{constructor(...e){super(...e),Ps.prototype.__init.call(this),Ps.prototype.__init2.call(this),Ps.prototype.__init3.call(this),Ps.prototype.__init4.call(this),Ps.prototype.__init5.call(this)}__init(){this._surface=null}__init2(){this._activeProjection=null}set enabled(e){e!==this._enabled&&(this._enabled=e,e?(this.legacy.updateTransform=tM,this.legacy._parentID=-1):(this.legacy.updateTransform=Nl.prototype.updateTransform,this.legacy._parentID=-1))}get surface(){return this._surface}set surface(e){this._surface!==e&&(this._surface=e||null,this.legacy._parentID=-1)}applyPartial(e,t){return this._activeProjection!==null?(t=this.legacy.worldTransform.apply(e,t),this._activeProjection.surface.apply(t,t)):this._surface!==null?this.surface.apply(e,t):this.legacy.worldTransform.apply(e,t)}apply(e,t){return this._activeProjection!==null?(t=this.legacy.worldTransform.apply(e,t),this._activeProjection.surface.apply(t,t),this._activeProjection.legacy.worldTransform.apply(t,t)):this._surface!==null?(t=this.surface.apply(e,t),this.legacy.worldTransform.apply(t,t)):this.legacy.worldTransform.apply(e,t)}applyInverse(e,t){return this._activeProjection!==null?(t=this._activeProjection.legacy.worldTransform.applyInverse(e,t),this._activeProjection._surface.applyInverse(t,t),this.legacy.worldTransform.applyInverse(t,t)):this._surface!==null?(t=this.legacy.worldTransform.applyInverse(e,t),this._surface.applyInverse(t,t)):this.legacy.worldTransform.applyInverse(e,t)}mapBilinearSprite(e,t){this._surface instanceof Bf||(this.surface=new Bf),this.surface.mapSprite(e,t,this.legacy)}__init3(){this._currentSurfaceID=-1}__init4(){this._currentLegacyID=-1}__init5(){this._lastUniforms=null}clear(){this.surface&&this.surface.clear()}get uniforms(){return this._currentLegacyID===this.legacy._worldID&&this._currentSurfaceID===this.surface._updateID?this._lastUniforms:(this._lastUniforms=this._lastUniforms||{},this._lastUniforms.translationMatrix=this.legacy.worldTransform,this._surface.fillUniforms(this._lastUniforms),this._lastUniforms)}}class xa extends Or{constructor(e){super(e),xa.prototype.__init.call(this),this.proj=new Ps(this.transform),this.pluginName="batch_bilinear"}__init(){this.aTrans=new er}_calculateBounds(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)}calculateVertices(){const e=this.transform._worldID,t=this._texture._updateID,r=this;if(r._transformID===e&&this._textureID===t)return;r._transformID=e,this._textureID=t;const i=this._texture,s=this.vertexData,o=i.trim,u=i.orig,c=this._anchor;let v,_,h,d;if(o?(_=o.x-c._x*u.width,v=_+o.width,d=o.y-c._y*u.height,h=d+o.height):(_=-c._x*u.width,v=_+u.width,d=-c._y*u.height,h=d+u.height),this.proj._surface)s[0]=_,s[1]=d,s[2]=v,s[3]=d,s[4]=v,s[5]=h,s[6]=_,s[7]=h,this.proj._surface.boundsQuad(s,s);else{const x=this.transform.worldTransform,w=x.a,T=x.b,E=x.c,I=x.d,D=x.tx,z=x.ty;s[0]=w*_+E*d+D,s[1]=I*d+T*_+z,s[2]=w*v+E*d+D,s[3]=I*d+T*v+z,s[4]=w*v+E*h+D,s[5]=I*h+T*v+z,s[6]=w*_+E*h+D,s[7]=I*h+T*_+z,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(s,s)}i.uvMatrix||(i.uvMatrix=new fc(i)),i.uvMatrix.update();const m=this.aTrans;m.set(u.width,0,0,u.height,_,d),this.proj._surface===null&&m.prepend(this.transform.worldTransform),m.invert(),m.prepend(i.uvMatrix.mapCoord)}calculateTrimmedVertices(){const e=this.transform._worldID,t=this._texture._updateID,r=this;if(!r.vertexTrimmedData)r.vertexTrimmedData=new Float32Array(8);else if(r._transformTrimmedID===e&&this._textureTrimmedID===t)return;r._transformTrimmedID=e,this._textureTrimmedID=t;const i=this._texture,s=r.vertexTrimmedData,o=i.orig,u=this._anchor,c=-u._x*o.width,v=c+o.width,_=-u._y*o.height,h=_+o.height;if(this.proj._surface)s[0]=c,s[1]=_,s[2]=v,s[3]=_,s[4]=v,s[5]=h,s[6]=c,s[7]=h,this.proj._surface.boundsQuad(s,s,this.transform.worldTransform);else{const d=this.transform.worldTransform,m=d.a,x=d.b,w=d.c,T=d.d,E=d.tx,I=d.ty;s[0]=m*c+w*_+E,s[1]=T*_+x*c+I,s[2]=m*v+w*_+E,s[3]=T*_+x*v+I,s[4]=m*v+w*h+E,s[5]=T*h+x*v+I,s[6]=m*c+w*h+E,s[7]=T*h+x*c+I,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(s,s,this.proj._activeProjection.legacy.worldTransform)}}get worldTransform(){return this.proj}}Or.prototype.convertTo2s=function(){this.proj||(this.pluginName="sprite_bilinear",this.aTrans=new er,this.calculateVertices=xa.prototype.calculateVertices,this.calculateTrimmedVertices=xa.prototype.calculateTrimmedVertices,this._calculateBounds=xa.prototype._calculateBounds,mr.prototype.convertTo2s.call(this))};mr.prototype.convertTo2s=function(){this.proj||(this.proj=new Ps(this.transform),Object.defineProperty(this,"worldTransform",{get(){return this.proj},enumerable:!0,configurable:!0}))};mr.prototype.convertSubtreeTo2s=function(){this.convertTo2s();for(let e=0;e<this.children.length;e++)this.children[e].convertSubtreeTo2s()};class vc extends Fl{constructor(e,t,r){super(e,t,r),vc.prototype.__init.call(this),this.proj=new Ps(this.transform),this.pluginName="batch_bilinear"}__init(){this.aTrans=new er}get worldTransform(){return this.proj}}vc.prototype.calculateVertices=xa.prototype.calculateVertices;vc.prototype.calculateTrimmedVertices=xa.prototype.calculateTrimmedVertices;vc.prototype._calculateBounds=xa.prototype._calculateBounds;dc.registerPlugin("batch_bilinear",JR.create({}));var Pt={},c1;function rM(){if(c1)return Pt;c1=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.linear=n,Pt.easeInSine=e,Pt.easeOutSine=t,Pt.easeInOutSine=r,Pt.easeInQuad=i,Pt.easeOutQuad=s,Pt.easeInOutQuad=o,Pt.easeInCubic=u,Pt.easeOutCubic=c,Pt.easeInOutCubic=v,Pt.easeInQuart=_,Pt.easeOutQuart=h,Pt.easeInOutQuart=d,Pt.easeInQuint=m,Pt.easeOutQuint=x,Pt.easeInOutQuint=w,Pt.easeInExpo=T,Pt.easeOutExpo=E,Pt.easeInOutExpo=I,Pt.easeInCirc=D,Pt.easeOutCirc=z,Pt.easeInOutCirc=O,Pt.easeInBack=U,Pt.easeOutBack=y,Pt.easeInOutBack=te,Pt.easeInElastic=F,Pt.easeOutElastic=W,Pt.easeInOutElastic=ne,Pt.easeOutBounce=ee,Pt.easeInBounce=ue,Pt.easeInOutBounce=ye;function n(K){return K}function e(K){return-1*Math.cos(K*(Math.PI/2))+1}function t(K){return Math.sin(K*(Math.PI/2))}function r(K){return-.5*(Math.cos(Math.PI*K)-1)}function i(K){return K*K}function s(K){return K*(2-K)}function o(K){return K<.5?2*K*K:-1+(4-2*K)*K}function u(K){return K*K*K}function c(K){var B=K-1;return B*B*B+1}function v(K){return K<.5?4*K*K*K:(K-1)*(2*K-2)*(2*K-2)+1}function _(K){return K*K*K*K}function h(K){var B=K-1;return 1-B*B*B*B}function d(K){var B=K-1;return K<.5?8*K*K*K*K:1-8*B*B*B*B}function m(K){return K*K*K*K*K}function x(K){var B=K-1;return 1+B*B*B*B*B}function w(K){var B=K-1;return K<.5?16*K*K*K*K*K:1+16*B*B*B*B*B}function T(K){return K===0?0:Math.pow(2,10*(K-1))}function E(K){return K===1?1:-Math.pow(2,-10*K)+1}function I(K){if(K===0||K===1)return K;var B=K*2,V=B-1;return B<1?.5*Math.pow(2,10*V):.5*(-Math.pow(2,-10*V)+2)}function D(K){var B=K/1;return-1*(Math.sqrt(1-B*K)-1)}function z(K){var B=K-1;return Math.sqrt(1-B*B)}function O(K){var B=K*2,V=B-2;return B<1?-.5*(Math.sqrt(1-B*B)-1):.5*(Math.sqrt(1-V*V)+1)}function U(K){var B=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],V=K/1;return V*V*((B+1)*V-B)}function y(K){var B=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],V=K/1-1;return V*V*((B+1)*V+B)+1}function te(K){var B=arguments.length<=1||arguments[1]===void 0?1.70158:arguments[1],V=K*2,G=V-2,Y=B*1.525;return V<1?.5*V*V*((Y+1)*V-Y):.5*(G*G*((Y+1)*G+Y)+2)}function F(K){var B=arguments.length<=1||arguments[1]===void 0?.7:arguments[1];if(K===0||K===1)return K;var V=K/1,G=V-1,Y=1-B,q=Y/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*G)*Math.sin((G-q)*(2*Math.PI)/Y))}function W(K){var B=arguments.length<=1||arguments[1]===void 0?.7:arguments[1],V=1-B,G=K*2;if(K===0||K===1)return K;var Y=V/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*G)*Math.sin((G-Y)*(2*Math.PI)/V)+1}function ne(K){var B=arguments.length<=1||arguments[1]===void 0?.65:arguments[1],V=1-B;if(K===0||K===1)return K;var G=K*2,Y=G-1,q=V/(2*Math.PI)*Math.asin(1);return G<1?-.5*(Math.pow(2,10*Y)*Math.sin((Y-q)*(2*Math.PI)/V)):Math.pow(2,-10*Y)*Math.sin((Y-q)*(2*Math.PI)/V)*.5+1}function ee(K){var B=K/1;if(B<1/2.75)return 7.5625*B*B;if(B<2/2.75){var V=B-.5454545454545454;return 7.5625*V*V+.75}else if(B<2.5/2.75){var G=B-.8181818181818182;return 7.5625*G*G+.9375}else{var Y=B-.9545454545454546;return 7.5625*Y*Y+.984375}}function ue(K){return 1-ee(1-K)}function ye(K){return K<.5?ue(K*2)*.5:ee(K*2-1)*.5+.5}return Pt}var Lm=rM();const nM=Rl(Lm),pl=wT({__proto__:null,default:nM},[Lm]),iM="modulepreload",sM=function(n,e){return new URL(n,e).href},h1={},aM=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");i=Promise.allSettled(t.map(v=>{if(v=sM(v,r),v in h1)return;h1[v]=!0;const _=v.endsWith(".css"),h=_?'[rel="stylesheet"]':"";if(!!r)for(let x=o.length-1;x>=0;x--){const w=o[x];if(w.href===v&&(!_||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${h}`))return;const m=document.createElement("link");if(m.rel=_?"stylesheet":iM,_||(m.as="script"),m.crossOrigin="",m.href=v,c&&m.setAttribute("nonce",c),document.head.appendChild(m),_)return new Promise((x,w)=>{m.addEventListener("load",x),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${v}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};async function oM(n,e={}){const t={env:Object.assign(Object.create(globalThis),e.env||{},{abort(F,W,ne,ee){F=o(F>>>0),W=o(W>>>0),ne=ne>>>0,ee=ee>>>0,(()=>{throw Error(`${F} in ${W}:${ne}:${ee}`)})()},"console.error"(F){F=o(F>>>0),console.error(F)},seed(){return Date.now()*Math.random()},"console.warn"(F){F=o(F>>>0),console.warn(F)},"console.log"(F){F=o(F>>>0),console.log(F)}})},{exports:r}=await WebAssembly.instantiate(n,t),i=r.memory||e.env.memory,s=Object.setPrototypeOf({Blocks:{valueOf(){return this.value},get value(){return x(r.Blocks.value>>>0)}},add_node(F,W){W=v(O,23,2,W)||I(),r.add_node(F,W)},add_tex_transforms(F,W){W=v(O,23,2,W)||I(),r.add_tex_transforms(F,W)},draw_sprites_info:{valueOf(){return this.value},get value(){return c(F=>_(te,2,y(F)),2,r.draw_sprites_info.value>>>0)},set value(F){r.draw_sprites_info.value=v((W,ne)=>{z(W,h(O,7,2,ne,Float32Array)||I())},12,2,F)||I()}},draw_sprites_uvs:{valueOf(){return this.value},get value(){return c(F=>_(te,2,y(F)),2,r.draw_sprites_uvs.value>>>0)},set value(F){r.draw_sprites_uvs.value=v((W,ne)=>{z(W,h(O,7,2,ne,Float32Array)||I())},12,2,F)||I()}},request_serialized_draw_queue(){return _(te,2,r.request_serialized_draw_queue()>>>0)},effect_queue:{valueOf(){return this.value},get value(){return c(F=>_(te,2,y(F)),2,r.effect_queue.value>>>0)},set value(F){r.effect_queue.value=v((W,ne)=>{z(W,h(O,7,2,ne,Float32Array)||I())},12,2,F)||I()}},update_background:{valueOf(){return this.value},get value(){return r.update_background.value!=0},set value(F){r.update_background.value=F?1:0}},add_entity(F,W,ne){W=W?1:0,ne=ne?1:0,r.add_entity(F,W,ne)},add_archetype(F,W,ne,ee,ue,ye,K,B,V,G,Y,q,L,k,X,se,fe){fe=fe?1:0,r.add_archetype(F,W,ne,ee,ue,ye,K,B,V,G,Y,q,L,k,X,se,fe)},particle_queue:{valueOf(){return this.value},get value(){return c(F=>_(te,2,y(F)),2,r.particle_queue.value>>>0)},set value(F){r.particle_queue.value=v((W,ne)=>{z(W,h(O,7,2,ne,Float32Array)||I())},12,2,F)||I()}},add_ptc_transforms(F,W){W=v(O,23,2,W)||I(),r.add_ptc_transforms(F,W)},add_changing_BPM(F){F=v(O,23,2,F)||I(),r.add_changing_BPM(F)},add_changing_TIMESCALE(F){F=v(O,23,2,F)||I(),r.add_changing_TIMESCALE(F)},initializeProperties(F,W,ne,ee,ue,ye,K){K=K?1:0,r.initializeProperties(F,W,ne,ee,ue,ye,K)},get_block_vals(F){return c(te,2,r.get_block_vals(F)>>>0)},get_block_keys(F){return c(U,2,r.get_block_keys(F)>>>0)},set_block_vals(F,W){W=v(O,23,2,W)||I(),r.set_block_vals(F,W)},init_blocks(F,W,ne){F=T(v(O,23,2,F)||I()),W=T(v(O,23,2,W)||I()),ne=v(O,23,2,ne)||I();try{r.init_blocks(F,W,ne)}finally{E(F),E(W)}},get_function_names(){return c(F=>o(y(F)),2,r.get_function_names()>>>0)},name2func_id(F){return F=u(F)||I(),r.name2func_id(F)},despawning(){return c(F=>c(te,2,y(F)),2,r.despawning()>>>0)},run_nodes(F,W){return F=h(O,7,2,F,Float32Array)||I(),_(te,2,r.run_nodes(F,W)>>>0)}},r);function o(F){if(!F)return null;const W=F+new Uint32Array(i.buffer)[F-4>>>2]>>>1,ne=new Uint16Array(i.buffer);let ee=F>>>1,ue="";for(;W-ee>1024;)ue+=String.fromCharCode(...ne.subarray(ee,ee+=1024));return ue+String.fromCharCode(...ne.subarray(ee,W))}function u(F){if(F==null)return 0;const W=F.length,ne=r.__new(W<<1,2)>>>0,ee=new Uint16Array(i.buffer);for(let ue=0;ue<W;++ue)ee[(ne>>>1)+ue]=F.charCodeAt(ue);return ne}function c(F,W,ne){if(!ne)return null;const ee=y(ne+4),ue=D.getUint32(ne+12,!0),ye=new Array(ue);for(let K=0;K<ue;++K)ye[K]=F(ee+(K<<W>>>0));return ye}function v(F,W,ne,ee){if(ee==null)return 0;const ue=ee.length,ye=r.__pin(r.__new(ue<<ne,1))>>>0,K=r.__pin(r.__new(16,W))>>>0;z(K+0,ye),D.setUint32(K+4,ye,!0),D.setUint32(K+8,ue<<ne,!0),D.setUint32(K+12,ue,!0);for(let B=0;B<ue;++B)F(ye+(B<<ne>>>0),ee[B]);return r.__unpin(ye),r.__unpin(K),K}function _(F,W,ne){if(!ne)return null;const ee=y(ne-4)>>>W,ue=new Array(ee);for(let ye=0;ye<ee;++ye)ue[ye]=F(ne+(ye<<W>>>0));return ue}function h(F,W,ne,ee,ue){if(ee==null)return 0;const ye=ee.length,K=r.__pin(r.__new(ye<<ne,W))>>>0;if(ue)new ue(i.buffer,K,ye).set(ee);else for(let B=0;B<ye;B++)F(K+(B<<ne>>>0),ee[B]);return r.__unpin(K),K}class d extends Number{}const m=new FinalizationRegistry(E);function x(F){if(!F)return null;const W=new d(T(F));return m.register(W,F),W}const w=new Map;function T(F){if(F){const W=w.get(F);W?w.set(F,W+1):w.set(r.__pin(F),1)}return F}function E(F){if(F){const W=w.get(F);if(W===1)r.__unpin(F),w.delete(F);else if(W)w.set(F,W-1);else throw Error(`invalid refcount '${W}' for reference '${F}'`)}}function I(){throw TypeError("value must not be null")}let D=new DataView(i.buffer);function z(F,W){try{D.setUint32(F,W,!0)}catch{D=new DataView(i.buffer),D.setUint32(F,W,!0)}}function O(F,W){try{D.setFloat32(F,W,!0)}catch{D=new DataView(i.buffer),D.setFloat32(F,W,!0)}}function U(F){try{return D.getInt32(F,!0)}catch{return D=new DataView(i.buffer),D.getInt32(F,!0)}}function y(F){try{return D.getUint32(F,!0)}catch{return D=new DataView(i.buffer),D.getUint32(F,!0)}}function te(F){try{return D.getFloat32(F,!0)}catch{return D=new DataView(i.buffer),D.getFloat32(F,!0)}}return s}const{memory:lM,Blocks:uM,init_nodes:Xb,add_node:pf,add_tex_transforms:Vb,draw_sprites_info:cM,draw_sprites_uvs:hM,spawned_entities:im,refresh_draw_queue:qb,request_serialized_draw_queue:Wb,effect_queue:$b,refresh_effect_queue:Yb,update_background:sm,add_entity:ml,init_archetypes:Kb,add_archetype:Qb,particle_queue:Zb,add_ptc_transforms:Jb,refresh_ptc_queue:ew,add_changing_BPM:tw,add_changing_TIMESCALE:rw,add_tex_id:nw,add_efc_id:iw,add_ptc_id:sw,initializeProperties:aw,get_block_vals:ow,get_block_keys:lw,set_block_vals:vf,get_block_val:uw,set_block_val:Jr,init_blocks:cw,reset_vars:hw,get_function_names:fw,name2func_id:dw,execute_cycle_process:fM,preprocess:pw,spawnOrder:vw,shouldSpawn:_w,initialize:mw,updateSequential:yw,input_callback:gw,updateParallel:xw,despawning:bw,run_node:dM,run_nodes:pM}=await(async n=>oM(await(async()=>typeof process<"u"&&process.versions!=null&&(process.versions.node!=null||process.versions.bun!=null)?globalThis.WebAssembly.compile(await(await aM(async()=>{const{readFile:t}=await Promise.resolve().then(()=>Q1);return{readFile:t}},void 0,import.meta.url)).readFile(n)):await globalThis.WebAssembly.compileStreaming(globalThis.fetch(n)))(),{}))(new URL(""+new URL("node_calc.wasm",import.meta.url).href,import.meta.url)),vM=Object.freeze(Object.defineProperty({__proto__:null,Blocks:uM,add_archetype:Qb,add_changing_BPM:tw,add_changing_TIMESCALE:rw,add_efc_id:iw,add_entity:ml,add_node:pf,add_ptc_id:sw,add_ptc_transforms:Jb,add_tex_id:nw,add_tex_transforms:Vb,despawning:bw,draw_sprites_info:cM,draw_sprites_uvs:hM,effect_queue:$b,execute_cycle_process:fM,get_block_keys:lw,get_block_val:uw,get_block_vals:ow,get_function_names:fw,init_archetypes:Kb,init_blocks:cw,init_nodes:Xb,initialize:mw,initializeProperties:aw,input_callback:gw,memory:lM,name2func_id:dw,particle_queue:Zb,preprocess:pw,refresh_draw_queue:qb,refresh_effect_queue:Yb,refresh_ptc_queue:ew,request_serialized_draw_queue:Wb,reset_vars:hw,run_node:dM,run_nodes:pM,set_block_val:Jr,set_block_vals:vf,shouldSpawn:_w,spawnOrder:vw,spawned_entities:im,updateParallel:xw,updateSequential:yw,update_background:sm},Symbol.toStringTag,{value:"Module"}));class _M{constructor(e,t,{engine_data:r,engine_config:i,skin_data:s,skin_tex:o,effect_data:u,BGM:c,level_data:v,particle_data:_,particle_tex:h,background_data:d,background_config:m,background_tex:x,level_option:w,system_tex:T},{key_assign:E=null,debug:I=!1,vertices:D=4,curv_vertices:z=4,audio_offset:O=0,input_offset:U=0,render_scale:y=1,texture_scale:te=.5,anti_aliasing:F=0,effect_volume:W=100,bgm_volume:ne=100},{leave_callback:ee,retry_callback:ue,result_callback:ye,log_callback:K}){this.canvas=e.view,"aspect-ratio"in(E||{})?(this.AspectRatio=E["aspect-ratio"],window.innerWidth/window.innerHeight>this.AspectRatio?(this.canvas.height=window.innerHeight,this.canvas.width=window.innerHeight*this.AspectRatio):(this.canvas.width=window.innerWidth,this.canvas.height=window.innerWidth/this.AspectRatio),this.C_width=this.canvas.width,this.C_height=this.canvas.height,document.body.style.backgroundColor=d.color):(this.C_width=window.innerWidth,this.C_height=window.innerHeight,this.AspectRatio=this.C_width/this.C_height),this.BGM=c,this.start_time,this.BGM_ended=!1,this.bgmOffset=v.bgmOffset||0,this.wait_time=1e3,this.BGM.volume(ne/100),this.hex={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15},this.result_callback=ye,this.system_tex=new Ct(T),this.system_TF={judge_miss:new pt(0,84,230,50),judge_good:new pt(0,34,230,50),judge_great:new pt(230,34,230,50),judge_perfect:new pt(230,84,230,50),KeyAssign:new pt(0,0,286,34),metric:new pt(0,134,300,60),pause_button:new pt(300,134,60,60),skip_button:new pt(360,134,60,60),pause_menu:new pt(0,194,269,140)},this.i18n=t,this.app=e,this.app.renderer.resize(this.C_width,this.C_height),this.app.stage.sortableChildren=!0,this.engine_stage=new mr,this.engine_stage.sortableChildren=!0,this.engine_stage.zIndex=1,this.app.stage.addChild(this.engine_stage),this.UI_stage=new mr,this.UI_stage.sortableChildren=!0,this.UI_stage.zIndex=2,this.app.stage.addChild(this.UI_stage),this.buckets=r.buckets,this.archetypes=r.archetypes,this.arc_name2idx=k=>this.archetypes.findIndex(X=>X.name==k),this.arc_idx2name=k=>this.archetypes[k].name||null,this.efc_name2idx=k=>(r.effect.clips.find(X=>X.name==k)||{id:-1}).id,this.efc_idx2name=k=>(r.effect.clips.find(X=>X.id==k)||{name:null}).name,this.ptc_name2idx=k=>(r.particle.effects.find(X=>X.name==k)||{id:-1}).id,this.ptc_idx2name=k=>(r.particle.effects.find(X=>X.id==k)||{name:null}).name,this.skn_name2idx=k=>(r.skin.sprites.find(X=>X.name==k)||{id:-1}).id,this.skn_idx2name=k=>(r.skin.sprites.find(X=>X.id==k)||{name:null}).name,Kb(this.archetypes.length);for(let k of this.archetypes)Qb((k.preprocess||{index:-1}).index,(k.preprocess||{}).order||0,(k.spawnOrder||{index:-1}).index,(k.spawnOrder||{}).order||0,(k.shouldSpawn||{index:-1}).index,(k.shouldSpawn||{}).order||0,(k.initialize||{index:-1}).index,(k.initialize||{}).order||0,(k.updateSequential||{index:-1}).index,(k.updateSequential||{}).order||0,(k.touch||{index:-1}).index,(k.touch||{}).order||0,(k.updateParallel||{index:-1}).index,(k.updateParallel||{}).order||0,(k.terminate||{index:-1}).index,(k.terminate||{}).order||0,k.hasInput);this.nodes=r.nodes,Xb(this.nodes.length);let B=fw();for(let k of this.nodes)"value"in k?pf(0,[k.value]):B.includes(k.func)?pf(B.findIndex(X=>X==k.func),k.args):(pf(dw("UnknownFunction"),k.args),console.error(`"${k.func}"`));this.engine_config=i,this.debug=I,this.vertices=D,this.curv_vertices=z,this.audio_offset=O,this.input_offset=U,this.render_scale=y,this.anti_aliasing=F,this.engine_config.options.forEach((k,X)=>{switch(k.name){case"#SPEED":this.BGM.rate(w[X]);break}}),this.entities=[],this.active_entities=[],this.init_entities=[],this.blocks_names={1e3:"RuntimeEnvironment",1001:"RuntimeUpdate",1002:"RuntimeTouchArray",1003:"RuntimeSkinTransform",1004:"RuntimeParticleTransform",1005:"RuntimeBackground",1006:"RuntimeUI",1007:"RuntimeUIConfiguration",2e3:"LevelMemory",2001:"LevelData",2002:"LevelOption",2003:"LevelBucket",2004:"LevelScore",2005:"LevelLife",3e3:"EngineRom",4e3:"EntityMemory",4001:"EntityData",4002:"EntitySharedMemory",4003:"EntityInfo",4004:"EntityDespawn",4005:"EntityInput",4101:"EntityDataArray",4102:"EntitySharedMemoryArray",4103:"EntityInfoArray",5e3:"ArchetypeLife",1e4:"TemporaryMemory"},cw([this.debug?1:0,this.AspectRatio,O,U],[i.ui.menuVisibility.scale,i.ui.menuVisibility.alpha,i.ui.judgmentVisibility.scale,i.ui.judgmentVisibility.alpha,i.ui.comboVisibility.scale,i.ui.comboVisibility.alpha,i.ui.primaryMetricVisibility.scale,i.ui.primaryMetricVisibility.alpha,i.ui.secondaryMetricVisibility.scale,i.ui.secondaryMetricVisibility.alpha],w),this.can_write={RuntimeEnvironment:!0,RuntimeUpdate:!0,RuntimeTouchArray:!0,RuntimeSkinTransform:!0,RuntimeParticleTransform:!0,RuntimeBackground:!0,RuntimeUI:!0,RuntimeUIConfiguration:!0,LevelMemory:!0,LevelData:!0,LevelOption:!0,LevelBucket:!0,LevelScore:!0,LevelLife:!0,EngineRom:!0,EntityMemory:!0,EntityData:!0,EntitySharedMemory:!0,EntityInfo:!0,EntityDespawn:!0,EntityInput:!0,EntityDataArray:!0,EntitySharedMemoryArray:!0,EntityInfoArray:!0,ArchetypeLife:!0,TemporaryMemory:!0},this.sprites=[],this.now_num=0,this.spawnQ=[],this.spawnFQ=[],this.texture_scale=te,this.tex_cvs=[],this.textures=[],this.tex_transforms=[];let V=["x1","y1","x2","y2","x3","y3","x4","y4"];for(let k of r.skin.sprites){let X=s.sprites.find(se=>se.name==k.name);if(X){let se=document.createElement("canvas");se.width=Math.round(X.w*this.texture_scale),se.height=Math.round(X.h*this.texture_scale),se.getContext("2d").drawImage(o,X.x,X.y,X.w,X.h,0,0,se.width,se.height),this.textures[k.id]=new rt.from(se),this.tex_cvs[k.id]=se,nw(k.id),this.tex_transforms[k.id]=X.transform;let be=[];for(let Ee=0;Ee<8;Ee++)for(let Ae=0;Ae<8;Ae++)be.push(X.transform[V[Ee]][V[Ae]]||0);Vb(k.id,be)}else console.warn(`"${k.name}"`)}this.functions=["ExportValue","RemapClamped","Negate","Abs","Add","And","Arccos","Arcsin","Arctan","Arctan2","TimeToScaledTime","TimeToStartingScaledTime","TimeToStartingTime","TimeToTimeScale","BeatToBPM","BeatToStartingBeat","BeatToStartingTime","BeatToTime","Block","Break","DecrementPost","DecrementPostPointed","DecrementPostShifted","DecrementPre","DecrementPrePointed","DecrementPreShifted","IncrementPost","IncrementPostPointed","IncrementPostShifted","IncrementPre","IncrementPrePointed","IncrementPreShifted","Rem","GetPointed","SetPointed","SetAdd","SetAddPointed","SetAddShifted","SetDivide","SetDividePointed","SetDivideShifted","SetMod","SetModPointed","SetModShifted","SetMultiply","SetMultiplyPointed","SetMultiplyShifted","SetPower","SetPowerPointed","SetPowerShifted","SetRem","SetRemPointed","SetRemShifted","SetSubtract","SetSubtractPointed","SetSubtractShifted","Ceil","Clamp","Cos","Cosh","DebugLog","DebugPause","Degree","DestroyParticleEffect","Divide","Draw","Arguments","Return","Remarks","DrawCurvedB","DrawCurvedBT","DrawCurvedL","DrawCurvedLR","DrawCurvedR","DrawCurvedT","Equal","Execute","Floor","Frac","Get","GetShifted","Greater","GreaterOr","HasEffectClip","HasParticleEffect","HasSkinSprite","If","IsDebug","Judge","JudgeSimple","JumpLoop","Lerp","LerpClamped","Less","LessOr","Log","Max","Min","Mod","MoveParticleEffect","Multiply","Not","NotEqual","Or","Play","PlayLooped","PlayLoopedScheduled","PlayScheduled","Power","Radian","Random","RandomInteger","Remap","Round","Set","SetShifted","Sign","Sin","Sinh","Smoothstep","Spawn","SpawnParticleEffect","StopLooped","StopLoopedScheduled","Subtract","Switch","SwitchWithDefault","SwitchInteger","SwitchIntegerWithDefault","Tan","Tanh","Trunc","Unlerp","UnlerpClamped","While"],this.ease_functions=["Sine","Quad","Cubic","Quart","Quint","Expo","Circ","Back","Elastic"],this.functions_without_prerun=["While","DoWhile","Execute","Execute0","If","Switch","SwitchWithDefault","SwitchInteger","SwitchIntegerWithDefault","And","Or"],this.effect_data=u,this.effect_schedule=[],this.effect_loop_end_schedule=[],this.effect_object=[],this.looped_sound_id=[];for(let k of r.effect.clips)k.name in this.effect_data?(this.effect_object[k.id]=this.effect_data[k.name],this.effect_object[k.id].volume(W/100),iw(k.id)):console.warn(`"${k.name}"`);this.level_data=v,this.level_option=w,this.maximum_combo=0;let G=[],Y=[];this.level_data.entities.forEach((k,X)=>{if(k.archetype)if(k.archetype=="#BPM_CHANGE")G.push({timing:k.data.find(se=>se.name=="#BEAT").value,target_bpm:k.data.find(se=>se.name=="#BPM").value}),ml(-1,!1,!1);else if(k.archetype=="#TIMESCALE_CHANGE")Y.push({timing:k.data.find(se=>se.name=="#BEAT").value,target_timescale:k.data.find(se=>se.name=="#TIMESCALE").value}),ml(-1,!1,!1);else if(this.arc_name2idx(k.archetype||"")!=-1){Jr(X,4005,0,0),Jr(X,4005,1,0),Jr(X,4005,2,-1),Jr(X,4005,3,0),Jr(X,4004,0,0),this.sprites[X]=[],Jr(X,4003,0,X),Jr(X,4003,1,this.arc_name2idx(k.archetype)),Jr(X,4003,2,0);let se=this.archetypes[this.arc_name2idx(k.archetype)];if("data"in k)for(let fe of k.data){let be=se.imports.find(Ee=>Ee.name==fe.name);if(be!==void 0){if("value"in fe)Jr(X,4001,be.index,fe.value);else if("ref"in fe){let Ee=this.level_data.entities.findIndex(Ae=>(Ae.name||Ae.ref)==fe.ref);Jr(X,4001,be.index,Ee)}}}se.hasInput&&this.maximum_combo++,this.entities[X]={archetype:this.arc_name2idx(k.archetype),from_function:!1},ml(this.arc_name2idx(k.archetype),!1,!0)}else console.warn(` index:${X}"${k.archetype}"`),ml(-1,!1,!1);else console.warn(` index:${X}`),ml(-1,!1,!1)}),this.init_BPM=60,G.sort((k,X)=>k.timing-X.timing),this.changing_BPM=[];let q=0,L=0;for(let k=0;k<G.length;k++){let X=G[k].target_bpm/60;q=G[k].timing,k+1<G.length?(this.changing_BPM.push({start_beat:G[k].timing,end_beat:G[k+1].timing,start_time:L,end_time:L+(G[k+1].timing-G[k].timing)/X,BPM:G[k].target_bpm,offset:q-X*L}),L+=(G[k+1].timing-G[k].timing)/X):this.changing_BPM.push({start_beat:G[k].timing,start_time:L,BPM:G[k].target_bpm,offset:q-X*L})}for(let k of this.changing_BPM)tw([k.start_beat,k.end_beat||1e6,k.start_time,k.end_time||1e6,k.BPM,k.offset]);if(this.beat_to_time=function(k){for(let X of this.changing_BPM)if(k>=X.start_beat&&k<=(X.end_beat||1/0))return(k-X.offset)/(X.BPM/60);return(k-0)/(this.init_BPM/60)},Y.sort((k,X)=>k.timing-X.timing),this.changing_TIMESCALE=[],Y.length>0){let k=this.beat_to_time(Y[0].timing);for(let X=0;X<Y.length;X++)if(X+1<Y.length){let se=this.beat_to_time(Y[X].timing),fe=this.beat_to_time(Y[X+1].timing);this.changing_TIMESCALE.push({start_beat:Y[X].timing,end_beat:Y[X+1].timing,start_time:se,end_time:fe,TIMESCALE:Y[X].target_timescale,offset:k-Y[X].target_timescale*se}),k+=(fe-se)*Y[X].target_timescale}else{let se=this.beat_to_time(Y[X].timing);this.changing_TIMESCALE.push({start_beat:Y[X].timing,start_time:se,TIMESCALE:Y[X].target_timescale,offset:k-Y[X].target_timescale*se})}}for(let k of this.changing_TIMESCALE)rw([k.start_beat,k.end_beat||1e6,k.start_time,k.end_time||1e6,k.TIMESCALE,k.offset]);this.particles=[],this.particle_textures=[];for(let k of _.sprites){let X=document.createElement("canvas");X.width=Math.round(k.w*this.texture_scale),X.height=Math.round(k.h*this.texture_scale),X.getContext("2d").drawImage(h,k.x,k.y,k.w,k.h,0,0,Math.round(k.w*this.texture_scale),Math.round(k.h*this.texture_scale)),this.particle_textures.push(new rt.from(X))}this.particle_effects=[],this.particle_transforms=[];for(let k of r.particle.effects){let X=_.effects.find(se=>se.name==k.name);if(X){this.particle_effects[k.id]=X.groups,this.particle_transforms[k.id]=X.transform,sw(k.id);let se=[];for(let fe=0;fe<8;fe++)for(let be=0;be<8;be++)se.push(X.transform[V[fe]][V[be]]||0);Jb(k.id,se)}else console.warn(`"${k.name}"`)}if(this.background_data={data:d,config:m},this.background_sprite=new wi(new rt(new Ct(x))),(m.blur|0)!=0){let k=new CR.BlurFilter;k.blur=m.blur,this.background_sprite.filters=[k]}switch(d.fit){case"width":this.fit_width();break;case"height":this.fit_height();break;case"contain":this.AspectRatio>this.background_data.data.aspectRatio?this.fit_height():this.fit_width();break;case"cover":this.AspectRatio>this.background_data.data.aspectRatio?this.fit_width():this.fit_height();break;default:console.error(`Background fitting called "${d.fit}" is not exist.`);break}if(this.background_sprite.zIndex=0,this.app.stage.addChild(this.background_sprite),this.touch_pool=[],this.touches=[],this.key_assign=E,this.key_assign){this.KA_sprite=new Or(new rt(this.system_tex,this.system_TF.KeyAssign)),this.KA_sprite.anchor.x=1,this.KA_sprite.anchor.y=1,this.KA_sprite.x=this.C_width,this.KA_sprite.y=this.C_height,this.KA_sprite.alpha=.1,this.KA_sprite.zIndex=1e3,this.UI_stage.addChild(this.KA_sprite),this.touch_func={},this.flick_enable=!1,this.flick_key=null;try{for(let k in this.key_assign.keys){let X=this.key_assign.keys[k];if(X.type==2)switch(X.func){case"flick":this.touch_func[k]={func:"flick",press:!1,first_press:null},this.flick_key=k;break;case"pause":this.touch_func[k]={func:"pause"};break;default:this.touch_func[k]={func:"except"},console.warn(`Key function called "${X.func}" is not exist.`);break}else if(X.type==1){let se=new Or(rt.WHITE);se.width=5,se.height=5,se.anchor.set(.5),se.alpha=.8,se.position.set(...this.center2LT(X.x,X.y)),this.UI_stage.addChild(se);let fe=new Fl(k,{fontFamily:"Arial",fontSize:20,fill:2105376,align:"center"});fe.anchor.set(.5),fe.position.set(...this.center2LT(X.x,X.y)),fe.alpha=.9,this.UI_stage.addChild(fe)}else console.warn(`Key type = ${X.type} is not exist.`)}}catch(k){console.error(k),ee(),alert(this.i18n.translator(""));return}this.touch_keys={},this.touch_id=0,document.addEventListener("keydown",this.CB_KD=k=>{if(k.code in this.touch_func)switch(this.touch_func[k.code].func){case"flick":this.touch_func[k.code].press||(this.touch_func[k.code].press=!0,this.touch_func[k.code].first_press=null,this.flick_enable=!0);break;case"pause":this.pause();break}else if(k.code in this.key_assign.keys&&!(k.code in this.touch_keys)){let X=this.center2LT(this.key_assign.keys[k.code].x,this.key_assign.keys[k.code].y);this.touch_pool[this.touch_id]={x:X[0],y:X[1],t:(performance.now()-this.start_time)/1e3,sx:X[0],sy:X[1],st:(performance.now()-this.start_time)/1e3,bx:X[0],by:X[1],start:!0,end:!1},this.touch_keys[k.code]=this.touch_id,this.touch_id++}}),document.addEventListener("keyup",this.CB_KU=k=>{if(k.code in this.touch_func)switch(this.touch_func[k.code].func){case"flick":this.touch_func[k.code].press=!1;break}else k.code in this.key_assign.keys&&(this.touch_pool[this.touch_keys[k.code]].t=(performance.now()-this.start_time)/1e3,this.touch_pool[this.touch_keys[k.code]].end=!0,this.flick_enable&&(this.touch_func[this.flick_key].first_press==null&&(this.touch_func[this.flick_key].first_press=performance.now()),performance.now()-this.touch_func[this.flick_key].first_press<300?this.touch_pool[this.touch_keys[k.code]].y+=this.center2LT(0,.2)[1]:this.flick_enable=!1),delete this.touch_keys[k.code])})}else document.body.addEventListener("touchstart",this.CB_TS=k=>{k.preventDefault();for(let X of k.changedTouches)this.touch_pool[X.identifier]={x:X.clientX,y:X.clientY,t:(performance.now()-this.start_time)/1e3,sx:X.clientX,sy:X.clientY,st:(performance.now()-this.start_time)/1e3,bx:X.clientX,by:X.clientY,start:!0,end:!1}}),document.body.addEventListener("touchmove",this.CB_TM=k=>{k.preventDefault();for(let X of k.changedTouches)this.touch_pool[X.identifier].x=X.clientX,this.touch_pool[X.identifier].y=X.clientY,this.touch_pool[X.identifier].t=(performance.now()-this.start_time)/1e3}),document.body.addEventListener("touchend",this.CB_TE=k=>{for(let X of k.changedTouches)this.touch_pool[X.identifier].x=X.clientX,this.touch_pool[X.identifier].y=X.clientY,this.touch_pool[X.identifier].t=(performance.now()-this.start_time)/1e3,this.touch_pool[X.identifier].end=!0}),document.body.addEventListener("touchcancel",this.CB_TC=k=>{for(let X of k.changedTouches)this.touch_pool[X.identifier].x=X.clientX,this.touch_pool[X.identifier].y=X.clientY,this.touch_pool[X.identifier].t=(performance.now()-this.start_time)/1e3,this.touch_pool[X.identifier].end=!0});this.judge_sprites={good:new Or(new rt(this.system_tex,this.system_TF.judge_good)),great:new Or(new rt(this.system_tex,this.system_TF.judge_great)),miss:new Or(new rt(this.system_tex,this.system_TF.judge_miss)),perfect:new Or(new rt(this.system_tex,this.system_TF.judge_perfect))},this.judge_sprites.good.visible=!1,this.judge_sprites.good.zIndex=2010,this.judge_sprites.great.visible=!1,this.judge_sprites.great.zIndex=2010,this.judge_sprites.perfect.visible=!1,this.judge_sprites.perfect.zIndex=2010,this.judge_sprites.miss.visible=!1,this.judge_sprites.miss.zIndex=2010,this.UI_stage.addChild(this.judge_sprites.good),this.UI_stage.addChild(this.judge_sprites.great),this.UI_stage.addChild(this.judge_sprites.perfect),this.UI_stage.addChild(this.judge_sprites.miss),this.judge_cache={type:null,start_time:null},this.judge_A=this.engine_config.ui.judgmentAnimation,this.judge_options={time_length:Math.max(this.judge_A.scale.duration,this.judge_A.alpha.duration),w:null,h:null},this.combo=0,this.max_combo=0,this.comboVS=new tf("",{fontName:"SansFont",fontSize:100,tint:13392844,align:"center"}),this.comboTS=new tf("COMBO",{fontName:"SansFont",fontSize:25,tint:13392844,align:"center"}),this.comboTS.visible=this.comboVS.visible=!1,this.UI_stage.addChild(this.comboVS),this.UI_stage.addChild(this.comboTS),this.arcade_score=0,this.accuracy_score=0,this.health=1e3,this.acc_result={perfect:0,great:0,good:0,miss:0},this.metric_pos={primary:{x:null,y:null,w:null,h:null},secondary:{x:null,y:null,w:null,h:null}},new rt(this.system_tex,this.system_TF.metric),this.primaryMetric_graphics=new ga,this.primaryMetric_graphics.zIndex=0,this.primaryMetric_graphics.position.set(0,0),this.UI_stage.addChild(this.primaryMetric_graphics),this.primaryMetric_bar=new ga,this.primaryMetric_bar.zIndex=1,this.primaryMetric_bar.position.set(0,0),this.UI_stage.addChild(this.primaryMetric_bar),this.primaryMetric_text=new tf("",{fontName:"SansFont",fontSize:20,tint:16777215,align:"center"}),this.primaryMetric_text.position.set(150,30),this.primaryMetric_text.anchor.set(.5,.5),this.primaryMetric_text.zIndex=2,this.UI_stage.addChild(this.primaryMetric_text),this.secondaryMetric_graphics=new ga,this.secondaryMetric_graphics.zIndex=0,this.secondaryMetric_graphics.position.set(0,0),this.UI_stage.addChild(this.secondaryMetric_graphics),this.secondaryMetric_bar=new ga,this.secondaryMetric_bar.zIndex=1,this.secondaryMetric_bar.position.set(0,0),this.UI_stage.addChild(this.secondaryMetric_bar),this.secondaryMetric_text=new tf("",{fontName:"SansFont",fontSize:20,tint:16777215,align:"center"}),this.secondaryMetric_text.position.set(150,30),this.secondaryMetric_text.anchor.set(.5,.5),this.secondaryMetric_text.zIndex=2,this.UI_stage.addChild(this.secondaryMetric_text),this.pause_button=new Or(new rt(this.system_tex,this.system_TF.pause_button)),this.pause_button.position.set(this.C_width-70,10),this.pause_button.interactive=!0,this.UI_stage.addChild(this.pause_button),this.pause_menu=new Or(new rt(this.system_tex,this.system_TF.pause_menu)),this.pause_menu.anchor.set(.5,.5),this.pause_menu.position.set(this.C_width/2,this.C_height/2),this.pause_menu.zIndex=2e4,this.pause_menu.visible=!1,this.UI_stage.addChild(this.pause_menu),this.despawned_sprites=0,this.can_skip=!1,this.skip_button_tex=new rt(this.system_tex,this.system_TF.skip_button),this.pause_button.on("click",this.CB_PC=k=>{this.paused||(this.can_skip?(this.BGM.stop(),this.result_callback()):this.pause())}),this.canvas.addEventListener("touchstart",this.CB_PM=k=>{if(this.paused){let X=this.canvas.getBoundingClientRect();for(let se of k.changedTouches||[k]){let fe=se.pageX-X.left,be=se.pageY-X.top;fe-=this.C_width/2,be-=this.C_height/2,-10<=be&&50>=be&&(-120<=fe&&-65>=fe&&ue(),-20<=fe&&30>=fe&&this.unpause(),64<=fe&&115>=fe&&ee())}}}),this.canvas.addEventListener("mousedown",this.CB_PM),this.histgram_bars=50,this.bucket_values=[];for(let k of this.buckets)this.bucket_values.push({perfect:[],great:[],good:[],miss:[]});this.before_time,this.process_completed=!0,this.paused=!1,this.pause_start=0,this.output_result=!1,aw(this.vertices,this.curv_vertices,this.AspectRatio,this.C_height,this.C_width,this.init_BPM,this.debug)}get_block(e){let t=ow(e),r=lw(e),i=[];for(let s=0;s<r.length;s++)i[r[s]]=t[s];return i}fit_width(){vf(1005,[-this.AspectRatio,-this.AspectRatio/this.background_data.data.aspectRatio,-this.AspectRatio,this.AspectRatio/this.background_data.data.aspectRatio,this.AspectRatio,this.AspectRatio/this.background_data.data.aspectRatio,this.AspectRatio,-this.AspectRatio/this.background_data.data.aspectRatio])}fit_height(){vf(1005,[-this.background_data.data.aspectRatio,-1,-this.background_data.data.aspectRatio,1,this.background_data.data.aspectRatio,1,this.background_data.data.aspectRatio,-1])}set_background(){let e=this.get_block(1005);this.background_sprite.proj.mapSprite(this.background_sprite,[new _t((this.C_width+e[2]*this.C_height)/2,(this.C_height-e[3]*this.C_height)/2),new _t((this.C_width+e[4]*this.C_height)/2,(this.C_height-e[5]*this.C_height)/2),new _t((this.C_width+e[6]*this.C_height)/2,(this.C_height-e[7]*this.C_height)/2),new _t((this.C_width+e[0]*this.C_height)/2,(this.C_height-e[1]*this.C_height)/2)])}destroy(){this.pause_button.off("click",this.CB_PC),this.canvas.removeEventListener("touchstart",this.CB_PM),this.canvas.removeEventListener("mousedown",this.CB_PM),this.key_assign?(document.removeEventListener("keydown",this.CB_KD),document.removeEventListener("keyup",this.CB_KU)):(document.body.removeEventListener("touchstart",this.CB_TS),document.body.removeEventListener("touchmove",this.CB_TM),document.body.removeEventListener("touchend",this.CB_TE),document.body.removeEventListener("touchcancel",this.CB_TC)),this.app.ticker.remove(this.game_tick),this.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),hw()}pause(){this.paused=!0,this.pause_start=performance.now(),this.BGM.pause(),this.pause_menu.visible=!0;for(let[e,t]of Object.entries(this.looped_sound_id))this.effect_object[t.effect_id].pause(t.sound_id)}unpause(){this.paused=!1;let e=performance.now()-this.pause_start;this.start_time+=e,this.before_time+=e,this.BGM.play(),this.pause_menu.visible=!1;for(let[t,r]of Object.entries(this.looped_sound_id))this.effect_object[r.effect_id].play(r.sound_id)}calc_scale(e,t,r,i){return r?i?[r*this.C_height/1.5/e,i*this.C_height/1.5/t]:[r*this.C_height/1.5/e,r*this.C_height/1.5/e]:[i*this.C_height/1.5/t,i*this.C_height/1.5/t]}preparation(){pw();let e=this.get_block(1006);this.pause_button.position.set(...this.center2LT(e[0],e[1])),this.pause_button.anchor.set(e[2],1-e[3]),this.pause_button.width=this.C_height/2*e[4],this.pause_button.height=this.C_height/2*e[5],this.pause_button.rotation=e[6],this.pause_button.alpha=e[7],this.judge_options.w=this.judge_options.h=e[15]*this.C_height/2/50;for(let[o,u]of Object.entries(this.judge_sprites))u.anchor.set(e[12],e[13]),u.position.set(...this.center2LT(e[10],e[11])),u.scale.set(this.judge_options.w,this.judge_options.h);this.comboVS.anchor.set(e[22],1-e[23]),this.comboVS.position.set(...this.center2LT(e[20],e[21])),this.comboVS.fontSize=Math.round(this.C_height/2*e[25]),this.comboVS.alpha=e[27],this.comboTS.anchor.set(e[32],1-e[33]),this.comboTS.position.set(...this.center2LT(e[30],e[31])),this.comboTS.fontSize=Math.round(this.C_height/2*e[35]),this.comboTS.alpha=e[37];var[t,r]=this.center2LT(e[40],e[41]),i=this.C_height/2*e[44],s=this.C_height/2*e[45];t-=e[42]*i,r-=(1-e[43])*s,this.primaryMetric_graphics.beginFill(5242960),this.primaryMetric_graphics.drawRect(t,r,i,s),this.primaryMetric_graphics.beginFill(3145776),this.primaryMetric_graphics.drawRect(t+this.C_height*.02,r+s*.25,i-this.C_height*.04,s*.5),this.primaryMetric_graphics.endFill(),this.primaryMetric_graphics.alpha=e[47],this.metric_pos.primary={x:t+this.C_height*.02,y:r+s*.25,w:i-this.C_height*.04,h:s*.5},this.primaryMetric_text.anchor.set(e[52],1-e[53]),this.primaryMetric_text.position.set(...this.center2LT(e[50],e[51])),this.primaryMetric_text.fontSize=Math.round(this.C_height/2.5*e[55]),this.primaryMetric_text.align=e[58]==-1?"left":e[58]==0?"center":"right",this.primaryMetric_text.alpha=e[57];var[t,r]=this.center2LT(e[60],e[61]),i=this.C_height/2*e[64],s=this.C_height/2*e[65];t-=e[62]*i,r-=(1-e[63])*s,this.secondaryMetric_graphics.beginFill(5242960),this.secondaryMetric_graphics.drawRect(t,r,i,s),this.secondaryMetric_graphics.beginFill(3145776),this.secondaryMetric_graphics.drawRect(t+this.C_height*.02,r+s*.25,i-this.C_height*.04,s*.5),this.secondaryMetric_graphics.endFill(),this.secondaryMetric_graphics.alpha=e[67],this.metric_pos.secondary={x:t+this.C_height*.02,y:r+s*.25,w:i-this.C_height*.04,h:s*.5},this.secondaryMetric_text.anchor.set(e[72],1-e[73]),this.secondaryMetric_text.position.set(...this.center2LT(e[70],e[71])),this.secondaryMetric_text.fontSize=Math.round(this.C_height/2.5*e[75]),this.secondaryMetric_text.align=e[78]==-1?"left":e[78]==0?"center":"right",this.secondaryMetric_text.alpha=e[77],this.set_background(),this.bucket_config=this.get_block(2003),vw(),this.game_start()}async game_tick(){this.frames++,this.paused||(this.play_effect(),this.particle_update(),this.sprite_update(),this.UI_update(),this.update_block(),_w(),mw(),yw(),this.update_touch(),gw(),xw(),this.despawn_process(bw()))}game_start(){this.BGM.once("play",()=>{ke("#player #progress").hide(),ke("#player #window").show(),ke("#player").append(this.canvas),this.start_time=performance.now()+this.bgmOffset*1e3+this.audio_offset*1e3,this.before_time=performance.now()+this.bgmOffset*1e3+this.audio_offset*1e3,this.frames=0,this.app.ticker.add(this.game_tick.bind(this)),this.fps_interval=setInterval(()=>{this.paused||console.log(`${this.frames}fps ${1e3/this.frames}ms`),this.frames=0},1e3)}),this.BGM.on("end",()=>{this.despawned_sprites>=this.maximum_combo?this.result_callback():this.BGM_ended=!1}),this.BGM.play()}game_end(){clearInterval(this.fps_interval),this.BGM.stop();for(let[e,t]of Object.entries(this.looped_sound_id))this.effect_object[t.effect_id].stop(t.sound_id);this.bucket_rendering(),this.destroy()}bucket_rendering(){this.rendered_bucket_graph=[];for(let[e,t]of Object.entries(this.buckets)){let r=Math.min(this.bucket_config[e*6],Math.min(this.bucket_config[e*6+2],this.bucket_config[e*6+4])),i=Math.max(this.bucket_config[e*6+1],Math.max(this.bucket_config[e*6+3],this.bucket_config[e*6+5])),s={};for(let o of["all","perfect","great","good","miss"]){let u=document.createElement("canvas");u.width=1e3,u.height=300;let c=u.getContext("2d");c.lineWidth=4,c.strokeStyle="#FFFFFF",c.beginPath(),c.moveTo(28,70),c.lineTo(28,262),c.lineTo(972,262),c.lineTo(972,70),c.stroke(),c.fillStyle="#FFFFFF",c.textAlign="center",c.textBaseline="top";for(let x=0;x<=10;x++){let w=r+(i-r)*(x/10);c.font="15px Arial",c.fillText(String(Math.floor(w*100)/100),30+940*(x/10),273),c.font="10px Arial",this.i18n.is_label_included(t.unit)&&c.fillText(this.i18n.get_label(t.unit),30+940*(x/10),288),c.fillRect(26+944*(x/10),264,4,6)}let v=[],_=1;for(let x=0;x<this.histgram_bars;x++){let w=r+(i-r)*(x/this.histgram_bars),T=r+(i-r)*((x+1)/this.histgram_bars);if(v.push(0),o=="perfect"||o=="all")for(let E of this.bucket_values[e].perfect)E>=w&&E<T&&v[x]++;if(o=="great"||o=="all")for(let E of this.bucket_values[e].great)E>=w&&E<T&&v[x]++;if(o=="good"||o=="all")for(let E of this.bucket_values[e].good)E>=w&&E<T&&v[x]++;if(o=="miss"||o=="all")for(let E of this.bucket_values[e].miss)E>=w&&E<T&&v[x]++;v[x]>_&&(_=v[x])}c.fillStyle="#aaaaaaaa";for(let x=0;x<this.histgram_bars;x++)c.fillRect(30+940*(x/this.histgram_bars),70+190*(1-v[x]/_),940/this.histgram_bars,190*(v[x]/_));let h=0,d=0;for(let x of t.sprites){let w=x.rotation*Math.PI/180,T=Math.sin(w)*(-x.w/2)+Math.cos(w)*x.h/2+x.y;h<T&&(h=T),d>T&&(d=T),T=Math.sin(w)*x.w/2+Math.cos(w)*x.h/2+x.y,h<T&&(h=T),d>T&&(d=T),T=Math.sin(w)*x.w/2+Math.cos(w)*(-x.h/2)+x.y,h<T&&(h=T),d>T&&(d=T),T=Math.sin(w)*(-x.w/2)+Math.cos(w)*(-x.h/2)+x.y,h<T&&(h=T),d>T&&(d=T)}let m=50/(h-d);for(let x of t.sprites)x.id in this.tex_cvs?this.drawRotatedImage(c,this.tex_cvs[x.id],500+x.x*m,50/2-x.y*m,x.w*m,x.h*m,x.rotation):x.fallbackId in this.tex_cvs?this.drawRotatedImage(c,this.tex_cvs[x.fallbackId],500+x.x*m,50/2-x.y*m,x.w*m,x.h*m,x.rotation):console.warn(`"${x.id}"(fallback:${x.fallbackId})`);u.classList.add("bucket-graph"),s[o]=u}this.rendered_bucket_graph.push(s)}}drawRotatedImage(e,t,r,i,s,o,u){e.save(),e.translate(r,i),e.rotate(-u*Math.PI/180),e.drawImage(t,-(s/2),-(o/2),s,o),e.restore()}metric_update(e,t,r){if(e=="primary"){let i=this.metric_pos.primary;this.primaryMetric_text.text=t,this.primaryMetric_bar.clear(),this.primaryMetric_bar.beginFill(9830550),this.primaryMetric_bar.drawRect(i.x,i.y,Math.round(r*i.w),i.h),this.primaryMetric_bar.endFill()}else{let i=this.metric_pos.secondary;this.secondaryMetric_text.text=t,this.secondaryMetric_bar.clear(),this.secondaryMetric_bar.beginFill(9830550),this.secondaryMetric_bar.drawRect(i.x,i.y,Math.round(r*i.w),i.h),this.secondaryMetric_bar.endFill()}}UI_update(){if(this.judge_cache.type&&!uw(0,1006,19)){let e=(performance.now()-this.judge_cache.start_time)/1e3;if(e>this.judge_options.time_length)this.judge_sprites[this.judge_cache.type].visible=!1,this.judge_cache.type=null;else{if(e<this.judge_A.scale.duration){let t=this.judge_A.scale.from+(this.judge_A.scale.to-this.judge_A.scale.from)*this.ease_function(this.judge_A.scale.ease,e/this.judge_A.scale.duration);this.judge_sprites[this.judge_cache.type].scale.set(this.judge_options.w*t,this.judge_options.h*t)}if(e<this.judge_A.alpha.duration){let t=this.judge_A.alpha.from+(this.judge_A.alpha.to-this.judge_A.alpha.from)*this.ease_function(this.judge_A.alpha.ease,e/this.judge_A.alpha.duration);this.judge_sprites[this.judge_cache.type].alpha=t}}}switch(this.engine_config.ui.primaryMetric){case"arcade":this.metric_update("primary",`SCORE: ${Math.round(this.arcade_score/this.maximum_combo*1e6)}`,this.arcade_score/this.maximum_combo);break;case"accuracy":this.metric_update("primary",`ACCURACY: ${Math.round(this.accuracy_score/this.maximum_combo*1e6)}`,this.accuracy_score/this.maximum_combo);break;case"life":this.metric_update("primary",`LIFE: ${this.health}`,this.health/1e3);break;default:this.metric_update("primary",`${this.engine_config.ui.primaryMetric}: unknown`,.5);break}switch(this.engine_config.ui.secondaryMetric){case"arcade":this.metric_update("secondary",`SCORE: ${Math.round(this.arcade_score/this.maximum_combo*1e6)}`,this.arcade_score/this.maximum_combo);break;case"accuracy":this.metric_update("secondary",`ACCURACY: ${Math.round(this.accuracy_score/this.maximum_combo*1e6)}`,this.accuracy_score/this.maximum_combo);break;case"life":this.metric_update("secondary",`LIFE: ${this.health}`,this.health/1e3);break;default:this.metric_update("secondary",`${this.engine_config.ui.secondaryMetric}: unknown`,.5);break}sm.value&&(this.set_background(),sm.value=!1)}update_block(){let e=performance.now(),t=(e-this.start_time)/1e3;Jr(0,1001,0,t),Jr(0,1001,1,(e-this.before_time)/1e3);let r=!1;for(let i of this.changing_TIMESCALE)if(t>=i.start_time&&t<=(i.end_time||1/0)){Jr(0,1001,2,i.TIMESCALE*t+i.offset),r=!0;break}r||Jr(0,1001,2,t),this.before_time=e}sprite_update(){let e=im.value;for(let i=0;i<e;i++)this.sprites.push([]),this.entities.push({archetype:0,from_function:!0});im.value=0;let t=Wb(),r=0;for(;r<t.length;){let i=t.slice(r,r+6),s=t[r+6],o=t.slice(r+7,r+7+s);switch(i[5]){case 0:this.draw_process(i[0],i[1],i[2],i[3],o);break;case 1:this.draw_curved_LR_process(i[0],i[1],i[2],i[3],i[4],o);break;case 2:this.draw_curved_TB_process(i[0],i[1],i[2],i[3],i[4],o);break}r+=7+s}qb();for(let i of this.sprites)for(let s in i)i[s].num!=this.now_num&&(i[s].sprite.destroy(),delete i[s]);this.now_num++}draw_process(e,t,r,i,s){let o;try{for(let u of this.sprites[e])if(u&&u.id==t&&u.num!=this.now_num&&u.type=="quad-mesh"){o=u;break}if(o){let u=o.sprite.geometry.buffers[0].data,c=(this.vertices-1)*2,v=this.vertices*2*(this.vertices-1),_=this.vertices*2*this.vertices-2;s[0]==u[0]&&s[1]==u[1]&&s[c]==u[c]&&s[c+1]==u[c+1]&&s[v]==u[v]&&s[v+1]==u[v+1]&&s[_]==u[_]&&s[_+1]==u[_+1]||(o.sprite.geometry.buffers[0].data=s,o.sprite.geometry.buffers[0].update()),o.sprite.zIndex!=r&&(o.sprite.zIndex=r),o.sprite.alpha!=i&&(o.sprite.alpha=i),o.num=this.now_num}else{let u=new Du(this.textures[t],this.vertices,this.vertices);u.geometry.buffers[0].data=s,u.geometry.buffers[0].update(),u.zIndex=r,u.alpha=i,this.engine_stage.addChild(u),this.sprites[e].push({id:t,sprite:u,num:this.now_num,n:0,type:"quad-mesh"})}}catch(u){console.warn(u)}}draw_curved_LR_process(e,t,r,i,s,o){let u;for(let c of this.sprites[e])if(c&&c.id==t&&c.num!=this.now_num&&c.type=="curv_LR"&&s==c.n){u=c;break}if(u){let c=u.sprite.geometry.buffers[0].data,v=(this.curv_vertices-1)*2,_=this.curv_vertices*2*(s-1),h=this.curv_vertices*2*s-2;o[0]==c[0]&&o[1]==c[1]&&o[v]==c[v]&&o[v+1]==c[v+1]&&o[_]==c[_]&&o[_+1]==c[_+1]&&o[h]==c[h]&&o[h+1]==c[h+1]||(u.sprite.geometry.buffers[0].data=o,u.sprite.geometry.buffers[0].update()),u.sprite.zIndex!=r&&(u.sprite.zIndex=r),u.sprite.alpha!=i&&(u.sprite.alpha=i),u.num=this.now_num}else{let c=new Du(this.textures[t],this.curv_vertices,s);c.geometry.buffers[0].data=o,c.geometry.buffers[0].update(),c.zIndex=r,c.alpha=i,this.engine_stage.addChild(c),this.sprites[e].push({id:t,sprite:c,num:this.now_num,n:s,type:"curv_LR"})}}draw_curved_TB_process(e,t,r,i,s,o){let u;for(let c of this.sprites[e])if(c&&c.id==t&&c.num!=this.now_num&&c.type=="curv_TB"&&s==c.n){u=c;break}if(u){let c=u.sprite.geometry.buffers[0].data,v=(s-1)*2,_=s*2*(this.curv_vertices-1),h=this.curv_vertices*2*s-2;o[0]==c[0]&&o[1]==c[1]&&o[v]==c[v]&&o[v+1]==c[v+1]&&o[_]==c[_]&&o[_+1]==c[_+1]&&o[h]==c[h]&&o[h+1]==c[h+1]||(u.sprite.geometry.buffers[0].data=o,u.sprite.geometry.buffers[0].update()),u.sprite.zIndex!=r&&(u.sprite.zIndex=r),u.sprite.alpha!=i&&(u.sprite.alpha=i),u.num=this.now_num}else{let c=new Du(this.textures[t],s,this.curv_vertices);c.geometry.buffers[0].data=o,c.geometry.buffers[0].update(),c.zIndex=r,c.alpha=i,this.engine_stage.addChild(c),this.sprites[e].push({id:t,sprite:c,num:this.now_num,n:s,type:"curv_TB"})}}play_effect(){$b.value.forEach((r,i)=>{r[0]==-1?this.effect_loop_end_schedule.push({time:r[1]*1e3,loop_id:r[2]}):r[2]==-1?this.effect_schedule.push({time:r[1]*1e3,effect_id:r[0],loop_id:-1}):this.effect_schedule.push({time:r[1]*1e3,effect_id:r[0],loop_id:r[2]})}),Yb();let t=performance.now()-this.start_time;this.effect_schedule=this.effect_schedule.filter((r,i)=>{if(r.time<=t){if(r.loop_id!=-1){let s=this.effect_object[r.effect_id].play();this.effect_object[r.effect_id].loop(!0,s),this.looped_sound_id[r.loop_id]={sound_id:s,effect_id:r.effect_id}}else{let s=this.effect_object[r.effect_id].play();this.effect_object[r.effect_id].loop(!1,s)}return!1}else return!0}),this.effect_loop_end_schedule=this.effect_loop_end_schedule.filter((r,i)=>{if(r.time<=t){if(r.loop_id in this.looped_sound_id){let s=this.looped_sound_id[r.loop_id];this.effect_object[s.effect_id].stop(s.sound_id),delete this.looped_sound_id[r.loop_id]}else console.warn(`loop_id:${r.loop_id} `);return!1}else return!0})}particle_update(){for(let t of Zb.value)t[1]==0?this.SpawnParticleEffect(...t.slice(2),t[0]):t[1]==1?this.MoveParticleEffect(t[0],...t.slice(2)):t[1]==2?this.DestroyParticleEffect(t[0]):console.error(`${t[1]}particle order`);ew();let e=performance.now();for(let[t,r]of Object.entries(this.particles)){let i=e-r.start_time;if(i>=r.duration)if(r.loop)r.start_time=e;else{for(let s of r.sprites)s.sprite.destroy();delete this.particles[t];continue}for(let s of r.sprites){let o=this.particle_effects[r.effect][s.group_index].particles[s.particle_index];if(r.duration*o.start<=i&&i<=r.duration*(o.start+o.duration)){let u=(i-r.duration*o.start)/(r.duration*o.duration),c=this.calc_property_with_ease(u,s.from.x,s.to.x,o.x.ease),v=this.calc_property_with_ease(u,s.from.y,s.to.y,o.y.ease),_=this.calc_property_with_ease(u,s.from.w,s.to.w,o.w.ease),h=this.calc_property_with_ease(u,s.from.h,s.to.h,o.h.ease),d=this.calc_property_with_ease(u,s.from.r,s.to.r,o.r.ease),m=this.calc_property_with_ease(u,s.from.a,s.to.a,o.a.ease);s.sprite.alpha=m;let[x,w,T,E,I,D,z,O]=this.calc_particle_positon(r.anchor.x1,r.anchor.y1,r.anchor.x2,r.anchor.y2,r.anchor.x3,r.anchor.y3,r.anchor.x4,r.anchor.y4,c,v,_,h,d),U=s.sprite.geometry.buffers[0].data;u=0;for(let y=0;y<this.vertices;y++){u=y/(this.vertices-1);let te=(x-T)*u+T,F=(w-E)*u+E,W=(z-I)*u+I,ne=(O-D)*u+D;for(let ee=0;ee<this.vertices;ee++)u=ee/(this.vertices-1),U[y*this.vertices*2+ee*2]=(W-te)*u+te,U[y*this.vertices*2+ee*2+1]=(ne-F)*u+F}s.sprite.geometry.buffers[0].update(),s.sprite.visible=!0}else s.sprite.visible=!1}}}calc_property_with_ease(e,t,r,i){return i?(r-t)*this.ease_function(i,e)+t:(r-t)*e+t}calc_particle_positon(e,t,r,i,s,o,u,c,v,_,h,d,m){let x=v-h,w=_+d,T=v+h,E=_+d,I=v-h,D=_-d,z=v+h,O=_-d,U=Math.sin(m),y=Math.cos(m),te=(x-v)*y-(w-_)*U+v,F=(T-v)*y-(E-_)*U+v,W=(I-v)*y-(D-_)*U+v,ne=(z-v)*y-(O-_)*U+v;w=(x-v)*U+(w-_)*y+_,E=(T-v)*U+(E-_)*y+_,D=(I-v)*U+(D-_)*y+_,O=(z-v)*U+(O-_)*y+_,x=te,T=F,I=W,z=ne;let[ee,ue]=this.bilinear_interpolate(e,t,r,i,s,o,u,c,I,D),[ye,K]=this.bilinear_interpolate(e,t,r,i,s,o,u,c,x,w),[B,V]=this.bilinear_interpolate(e,t,r,i,s,o,u,c,T,E),[G,Y]=this.bilinear_interpolate(e,t,r,i,s,o,u,c,z,O);return[ee,ue,ye,K,B,V,G,Y]}bilinear_interpolate(e,t,r,i,s,o,u,c,v,_){v=(v+1)/2,_=(1-_)/2;let h=(e-r)*_+r,d=(t-i)*_+i,m=(u-s)*_+s,x=(c-o)*_+o;return[(m-h)*v+h,(x-d)*v+d]}sequential_order(e,t,r=!0){let i=[];for(let s of e){let o=this.archetypes[this.entities[s].archetype];t in o?"order"in o[t]?i.push({id:s,order:o[t].order}):i.push({id:s,order:0}):r||i.push({id:s,order:1/0})}return i.sort((s,o)=>s.order-o.order),r?i.map(s=>s.id):i.map(s=>[s.id,s.order!=1/0])}get_node_index_of_archetype(e,t){let r=this.archetypes[this.entities[e].archetype];return t in r?{enable:!0,index:r[t].index}:{enable:!1,index:null}}preprocess(){for(let e of this.sequential_order(Object.keys(this.entities),"preprocess"))e=Number(e),this.run_node(this.get_node_index_of_archetype(e,"preprocess").index,e)}spawnOrder(){this.can_write={RuntimeEnvironment:!1,RuntimeUpdate:!1,RuntimeTouchArray:!1,RuntimeSkinTransform:!1,RuntimeParticleTransform:!1,RuntimeBackground:!1,RuntimeUI:!1,RuntimeUIConfiguration:!1,LevelMemory:!1,LevelData:!1,LevelOption:!1,LevelBucket:!1,LevelScore:!1,LevelLife:!1,EngineRom:!1,EntityMemory:!0,EntityData:!1,EntitySharedMemory:!1,EntityInfo:!1,EntityDespawn:!0,EntityInput:!0,EntityDataArray:!1,EntitySharedMemoryArray:!1,EntityInfoArray:!1,ArchetypeLife:!1,TemporaryMemory:!0};let e=[];for(let[t,r]of this.sequential_order(Object.keys(this.entities),"spawnOrder",!1))t=Number(t),r?e.push({value:this.run_node(this.get_node_index_of_archetype(t,"spawnOrder").index,t),entity_id:t}):e.push({value:0,entity_id:t});e.sort((t,r)=>r.value-t.value),this.spawnQ=e.map(t=>t.entity_id),this.spawnQ_debug=e}shouldSpawn(){for(;this.spawnQ.length;){let e=this.spawnQ[this.spawnQ.length-1],t=this.archetypes[this.entities[e].archetype];if("shouldSpawn"in t)if(this.run_node(t.shouldSpawn.index,e))this.active_entities.push(e),this.init_entities.push(e),this.spawnQ.pop(),this.blocks.EntityInfoArray[3*e+2]=1;else break;else this.active_entities.push(e),this.init_entities.push(e),this.spawnQ.pop(),this.blocks.EntityInfoArray[3*e+2]=1}for(let e of this.spawnFQ)this.active_entities.push(e),this.init_entities.push(e),this.blocks.EntityInfoArray[3*e+2]=1;this.spawnFQ=[],this.blocks.EntityInfoArray[2]=0}async initialize(){let e=[];for(let t of this.init_entities)e.push((async r=>{r=Number(r);let i=this.archetypes[this.entities[r].archetype];i?"initialize"in i&&this.run_node(i.initialize.index,r):console.warn(`${r}${this.entities[r].archetype}`)})(t));await Promise.all(e),this.init_entities=[]}updateSequential(){this.can_write={RuntimeEnvironment:!1,RuntimeUpdate:!1,RuntimeTouchArray:!1,RuntimeSkinTransform:!0,RuntimeParticleTransform:!0,RuntimeBackground:!0,RuntimeUI:!1,RuntimeUIConfiguration:!1,LevelMemory:!0,LevelData:!1,LevelOption:!1,LevelBucket:!1,LevelScore:!1,LevelLife:!1,EngineRom:!1,EntityMemory:!0,EntityData:!1,EntitySharedMemory:!0,EntityInfo:!1,EntityDespawn:!0,EntityInput:!0,EntityDataArray:!1,EntitySharedMemoryArray:!0,EntityInfoArray:!1,ArchetypeLife:!1,TemporaryMemory:!0};for(let e of this.sequential_order(this.active_entities,"updateSequential"))e=Number(e),this.run_node(this.get_node_index_of_archetype(e,"updateSequential").index,e)}input_callback(){if(this.touches.length>0)for(let e of this.sequential_order(this.active_entities,"touch"))e=Number(e),this.run_node(this.get_node_index_of_archetype(e,"touch").index,e)}update_touch(){let e=[],t=(performance.now()-this.before_touch_time)/1e3;Jr(0,1001,3,Object.keys(this.touch_pool).length);for(let[r,i]of Object.entries(this.touch_pool)){let s=(i.x-i.bx)/this.C_height*2,o=(i.by-i.y)/this.C_height*2,u=s/t,c=o/t;e=[...e,Number(r),i.start?1:0,i.end?1:0,i.t,i.st,...this.canvaspos2CCS(i.x,i.y),...this.canvaspos2CCS(i.sx,i.sy),s,o,u,c,Math.sqrt(u**2+c**2),Math.atan2(c,u)],i.end?delete this.touch_pool[r]:(i.start=!1,i.bx=i.x,i.by=i.y)}this.before_touch_time=performance.now(),vf(1002,e)}canvaspos2CCS(e,t){return[e/this.C_height*2-this.AspectRatio,1-t/this.C_height*2]}async updateParallel(){this.can_write={RuntimeEnvironment:!1,RuntimeUpdate:!1,RuntimeTouchArray:!1,RuntimeSkinTransform:!1,RuntimeParticleTransform:!1,RuntimeBackground:!1,RuntimeUI:!1,RuntimeUIConfiguration:!1,LevelMemory:!1,LevelData:!1,LevelOption:!1,LevelBucket:!1,LevelScore:!1,LevelLife:!1,EngineRom:!1,EntityMemory:!0,EntityData:!1,EntitySharedMemory:!1,EntityInfo:!1,EntityDespawn:!0,EntityInput:!0,EntityDataArray:!1,EntitySharedMemoryArray:!1,EntityInfoArray:!1,ArchetypeLife:!1,TemporaryMemory:!0};let e=[];for(let t of this.active_entities)e.push((async r=>{r=Number(r);let i=this.archetypes[this.entities[r].archetype];"updateParallel"in i&&this.run_node(i.updateParallel.index,r)})(t));await Promise.all(e)}async despawning(){let e=[],t=[];for(let r of this.active_entities)this.blocks.EntityDespawn[r][0]!=0&&t.push(r);for(let r of t)e.push((async i=>{i=Number(i);let s=this.archetypes[this.entities[i].archetype];if("terminate"in s&&this.run_node(s.terminate.index,i),this.active_entities=this.active_entities.filter(o=>o!=i),this.entities[i].from_function||(this.blocks.EntityInfoArray[3*i+2]=2),s.hasInput&&!this.entities[i].from_function){let o=this.entities[i].archetype;switch(this.blocks.EntityInput[i][0]){case 0:this.judge_cache.type="miss",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!0,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!1,this.combo=0,this.combo_update(),this.health+=this.blocks.ArchetypeLife[o*4+3]||0,this.acc_result.miss++;break;case 1:this.judge_cache.type="perfect",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!0,this.combo++,this.max_combo<this.combo&&(this.max_combo=this.combo),this.combo_update(),this.arcade_score+=1,this.health+=this.blocks.ArchetypeLife[o*4]||0,this.accuracy_score+=Math.max(1-Math.abs(this.blocks.EntityInput[i][1]),0),this.acc_result.perfect++;break;case 2:this.judge_cache.type="great",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!0,this.judge_sprites.perfect.visible=!1,this.combo++,this.max_combo<this.combo&&(this.max_combo=this.combo),this.combo_update(),this.arcade_score+=this.blocks.LevelScore[1]/this.blocks.LevelScore[0],this.health+=this.blocks.ArchetypeLife[o*4+1]||0,this.accuracy_score+=Math.max(1-Math.abs(this.blocks.EntityInput[i][1]),0),this.acc_result.great++;break;case 3:this.judge_cache.type="good",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!0,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!1,this.combo=0,this.combo_update(),this.arcade_score+=this.blocks.LevelScore[2]/this.blocks.LevelScore[0],this.health+=this.blocks.ArchetypeLife[o*4+2]||0,this.accuracy_score+=Math.max(1-Math.abs(this.blocks.EntityInput[i][1]),0),this.acc_result.good++;break}this.health<0&&(this.health=0),this.despawned_sprites++}})(r));await Promise.all(e),this.despawned_sprites>=this.maximum_combo&&(this.BGM_ended?this.result_callback():(this.pause_button.texture=this.skip_button_tex,this.can_skip=!0))}despawn_process(e){for(let t of e){switch(this.health+=t[1],this.accuracy_score+=t[2],this.arcade_score+=t[3],t[0]){case 0:this.judge_cache.type="miss",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!0,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!1,this.combo=0,this.combo_update(),this.acc_result.miss++,this.bucket_values.length>t[4]&&t[4]>=0?this.bucket_values[t[4]].miss.push(t[5]):t[4]!=-1&&console.warn(`${t[4]} ID`);break;case 1:this.judge_cache.type="perfect",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!0,this.combo++,this.max_combo<this.combo&&(this.max_combo=this.combo),this.combo_update(),this.acc_result.perfect++,this.bucket_values.length>t[4]&&t[4]>=0?this.bucket_values[t[4]].perfect.push(t[5]):t[4]!=-1&&console.warn(`${t[4]} ID`);break;case 2:this.judge_cache.type="great",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!1,this.judge_sprites.great.visible=!0,this.judge_sprites.perfect.visible=!1,this.combo++,this.max_combo<this.combo&&(this.max_combo=this.combo),this.combo_update(),this.acc_result.great++,this.bucket_values.length>t[4]&&t[4]>=0?this.bucket_values[t[4]].great.push(t[5]):t[4]!=-1&&console.warn(`${t[4]} ID`);break;case 3:this.judge_cache.type="good",this.judge_cache.start_time=performance.now(),this.judge_sprites.miss.visible=!1,this.judge_sprites.good.visible=!0,this.judge_sprites.great.visible=!1,this.judge_sprites.perfect.visible=!1,this.combo=0,this.combo_update(),this.acc_result.good++,this.bucket_values.length>t[4]&&t[4]>=0?this.bucket_values[t[4]].good.push(t[5]):t[4]!=-1&&console.warn(`${t[4]} ID`);break;default:console.error(`${t[0]}`);break}this.health<0&&(this.health=0),this.despawned_sprites++}this.despawned_sprites>=this.maximum_combo&&(this.BGM_ended?this.result_callback():(this.pause_button.texture=this.skip_button_tex,this.can_skip=!0))}combo_update(){this.combo>0?(this.comboVS.visible=this.comboTS.visible=!0,this.comboVS.text=String(this.combo)):(this.comboVS.visible=this.comboTS.visible=!1,this.comboVS.text="0")}ease_function(e,t){return e=="linear"||e=="Linear"?Lm.linear(t):e=="none"||e=="None"?0:e.substr(0,5)=="InOut"||e.substr(0,3)=="inOut"?(e=e.substr(5),this.ease_functions.includes(e)?t<.5?pl[`easeIn${e}`](t*2)*.5:pl[`easeOut${e}`](t*2-1)*.5+.5:(console.error(`"InOut${e}"`),0)):e.substr(0,5)=="OutIn"||e.substr(0,5)=="outIn"?(e=e.substr(5),this.ease_functions.includes(e)?t<.5?pl[`easeOut${e}`](t*2)*.5:pl[`easeIn${e}`](t*2-1)*.5+.5:(console.error(`"OutIn${e}"`),0)):e.substr(0,2)=="In"||e.substr(0,2)=="in"?(e=e.substr(2),this.ease_functions.includes(e)?pl[`easeIn${e}`](t):(console.error(`"In${e}"`),0)):e.substr(0,3)=="Out"||e.substr(0,3)=="out"?(e=e.substr(3),this.ease_functions.includes(e)?pl[`easeOut${e}`](t):(console.error(`"Out${e}"`),0)):(console.error(`"${e}"`),0)}hex_to_tint(e){return e.length==7?parseInt(e.slice(1),16):e.length==4?parseInt(e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)+e.charAt(3)+e.charAt(3),16):(console.error(`${e} is not valit hex color`),0)}center2LT(e,t){return[Math.round((e+this.AspectRatio)/2*this.C_height),Math.round((1-t)/2*this.C_height)]}generate_random(){return[Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random(),Math.random()]}calc_property(e,t,r){if(e){let i=0;"c"in e&&(i+=e.c);for(let s=0;s<8;s++)`r${s+1}`in e&&(i+=e[`r${s+1}`]*t[s]),`sinr${s+1}`in e&&(i+=e[`sinr${s+1}`]*Math.sin(2*Math.PI*t[s])),`cosr${s+1}`in e&&(i+=e[`cosr${s+1}`]*Math.cos(2*Math.PI*t[s]));return i}else return r}SpawnParticleEffect(e,t,r,i,s,o,u,c,v,_,h,d){let m=performance.now(),x={effect:e,duration:_*1e3,loop:!!h,start_time:m,anchor:{x1:t,x2:i,x3:o,x4:c,y1:r,y2:s,y3:u,y4:v},sprites:[]};return this.particle_effects[e].forEach((w,T)=>{for(let E=0;E<w.count;E++){let I=this.generate_random();w.particles.forEach((D,z)=>{let O=new Du(this.particle_textures[D.sprite],this.vertices,this.vertices);O.tint=this.hex_to_tint(D.color),O.visible=!1,O.zIndex=2e3,this.engine_stage.addChild(O),x.sprites.push({sprite:O,group_index:T,particle_index:z,from:{x:this.calc_property(D.x.from,I,0),y:this.calc_property(D.y.from,I,0),w:this.calc_property(D.w.from,I,0),h:this.calc_property(D.h.from,I,0),r:this.calc_property(D.r.from,I,0),a:this.calc_property(D.a.from,I,0)},to:{x:this.calc_property(D.x.to,I,0),y:this.calc_property(D.y.to,I,0),w:this.calc_property(D.w.to,I,0),h:this.calc_property(D.h.to,I,0),r:this.calc_property(D.r.to,I,0),a:this.calc_property(D.a.to,I,0)},random:I})})}}),this.particles[d]=x,d}MoveParticleEffect(e,t,r,i,s,o,u,c,v){let _=this.particles[e];_.anchor={x1:t,x2:i,x3:o,x4:c,y1:r,y2:s,y3:u,y4:v}}DestroyParticleEffect(e){for(let t of this.particles[e].sprites)t.sprite.destroy();delete this.particles[e]}}const Vr=[];for(let n=0;n<256;++n)Vr.push((n+256).toString(16).slice(1));function mM(n,e=0){return(Vr[n[e+0]]+Vr[n[e+1]]+Vr[n[e+2]]+Vr[n[e+3]]+"-"+Vr[n[e+4]]+Vr[n[e+5]]+"-"+Vr[n[e+6]]+Vr[n[e+7]]+"-"+Vr[n[e+8]]+Vr[n[e+9]]+"-"+Vr[n[e+10]]+Vr[n[e+11]]+Vr[n[e+12]]+Vr[n[e+13]]+Vr[n[e+14]]+Vr[n[e+15]]).toLowerCase()}let Qv;const yM=new Uint8Array(16);function gM(){if(!Qv){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Qv=crypto.getRandomValues.bind(crypto)}return Qv(yM)}const xM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),f1={randomUUID:xM};function bM(n,e,t){if(f1.randomUUID&&!n)return f1.randomUUID();n=n||{};const r=n.random??n.rng?.()??gM();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,mM(r)}const wM=window.Zlib.Gunzip,TM=window.Zlib.Unzip;window.node_calc=vM;function SM(n){return{authentications:"authentication",multiplayers:"multiplayer",posts:"post",playlists:"playlist",levels:"level",skins:"skin",backgrounds:"background",effects:"effect",particles:"particle",engines:"engine",replays:"replay",rooms:"room",configurations:"configuration"}[n]}function EM(n){return{authentication:"authentications",multiplayer:"multiplayers",post:"posts",playlist:"playlists",level:"levels",skin:"skins",background:"backgrounds",effect:"effects",particle:"particles",engine:"engines",replay:"replays",room:"rooms",configuration:"configurations"}[n]}class CM extends Lt.Component{constructor(e){super(e),this.state={menu_scene:"LoadingLocalization",visible:!0,increment:0},this.menu_route=["LoadingLocalization"]}render(){if(this.state.visible)switch(this.state.menu_scene){case"LoadingLocalization":return N.jsx("h1",{children:"Loading Localization File..."});case"Title":return N.jsx(AM,{C:this});case"TOS":return N.jsx(PM,{C:this});case"ServerMenu":return N.jsx(OM,{C:this});case"AddServerMenu":return N.jsx(FM,{C:this});case"AddCollectionMenu":return N.jsx(BM,{C:this});case"EditServerMenu":return N.jsx(UM,{C:this});case"EditCollectionMenu":return N.jsx(zM,{C:this});case"ServerInfo":return N.jsx($M,{C:this});case"ServerMore":return N.jsx(QM,{C:this});case"LevelInfo":return N.jsx(ek,{C:this});case"LevelInfoOffline":return N.jsx(tk,{C:this});case"LevelOption":return N.jsx(nk,{C:this});case"ResultMenu":return N.jsx(lk,{C:this});case"ItemInfo":return N.jsx(ik,{C:this});case"PostInfo":return N.jsx(sk,{C:this});case"PlayListInfo":return N.jsx(JM,{C:this});case"SourceLoad":return N.jsx(ak,{C:this});case"OfflineMenu":return N.jsx(ok,{C:this});case"BucketMenu":return N.jsx(uk,{C:this});default:return this.Unknown_menu()}else return N.jsx(N.Fragment,{})}componentDidMount(){vt.load_file().then(()=>{this.change_menu("Title","write")}).catch(()=>{alert("ERROR: CANNOT LOAD LOCALIZATION FILE.")})}change_menu(e,t="next"){switch(this.setState({menu_scene:e}),t){case"next":this.menu_route[this.menu_route.length-2]==e?this.menu_route.pop():this.menu_route.push(e);break;case"add":this.menu_route.push(e);break;case"write":this.menu_route=[e];break}console.log(this.menu_route)}back_menu(e=1){let t=this.menu_route[this.menu_route.length-e-1];return this.setState({menu_scene:t}),this.menu_route=this.menu_route.slice(0,e*-1),console.log(this.menu_route),t}render_menu(){this.setState({increment:new Date().getTime()})}Unknown_menu(){return N.jsx("h1",{children:vt.translator("")})}change_visible(e){this.setState({visible:e})}}class AM extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,t=vt.get_translator();return N.jsxs("div",{id:"title-div",children:[N.jsx("h1",{className:"title",children:"Sonolus Web Player"}),N.jsx("div",{id:"start-trig",onClick:async()=>{ke("#loading-cover").show(),await IM(),e.change_menu("ServerMenu"),ke("#loading-cover").hide()},children:t("")}),N.jsxs("div",{className:"TOStext",children:[t(""),N.jsx("a",{className:"TOStag",onClick:()=>{e.change_menu("TOS")},children:t("")}),t("")]}),N.jsxs("div",{className:"feedback",children:[t("Discord"),": ",N.jsx("a",{href:"https://discordapp.com/users/951455786423439400",children:"ponz8264"})]}),N.jsxs("div",{id:"version",children:["Player Version: beta-0.2.0",N.jsx("br",{}),"Sonolus Version: beta-0.8.4"]})]})}}const PM=n=>N.jsxs("div",{id:"rule",children:[N.jsx("h2",{children:vt.translator("")}),N.jsxs("div",{className:"content",children:["1. (*1)(*2)",N.jsx("br",{}),"2. ",N.jsx("br",{}),"3. Sonolus custom servers()(*3)",N.jsx("br",{}),"4. ()",N.jsx("br",{}),"5. ()",N.jsx("br",{}),"6. ",N.jsx("br",{}),"7. ",N.jsx("br",{}),N.jsx("br",{}),"*1https://1217pond.github.io/sonolus-web-player/ HTML",N.jsx("br",{}),"*2 ",N.jsx("br",{}),"a. ()(DOM)",N.jsx("br",{}),"b. ()",N.jsx("br",{}),"c. ()",N.jsx("br",{}),"d. ()",N.jsx("br",{}),"*3 Sonolus",N.jsx("br",{})]}),N.jsx("a",{onClick:()=>{n.C.back_menu()},className:"text-trigger leave-TOS-trg",children:vt.translator("")})]});async function IM(){let e=(await It.servers.get("#master")||{option:{system_option:{}}}).option.system_option;console.log(e),await It.servers.put({name:"#master",address:null,option:{system_option:{bgm_volume:e.bgm_volume||100,effect_volume:e.effect_volume||100,audio_offset:e.audio_offset||0,input_offset:e.input_offset||0,render_scale:e.render_scale||1,homography:e.homography||!1,mesh_vertexes:e.mesh_vertexes||3,curv_vertexes:e.curv_vertexes||3,max_fps:e.max_fps||0,texture_scale:e.texture_scale||.5}},display_name:null,version:ic});let t=await It.collections.toArray(),r=[];t.forEach(o=>{(o.version||1)<$f&&r.push(o.name)}),console.log("should delete colls:",r),await It.collections.bulkDelete(r);let i=await It.servers.toArray(),s=[];i.forEach(o=>{(o.version||1)<ic&&s.push(o.name)}),console.log("should delete servs:",s),await It.servers.bulkDelete(s)}class OM extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={Server_list:[],Collection_list:[]},le.collection_list={}}render(){const e=this.Menu_Controller,t=vt.get_translator();return N.jsxs("div",{id:"menu",children:[N.jsx("h3",{className:"Menu-title",children:t("")}),N.jsx("h4",{id:"decache-trg",onClick:MM,children:t("")}),N.jsxs("div",{id:"serv",className:"selector-window",children:[this.state.Server_list.map(r=>N.jsx(kM,{serv:r,C:e},r.name)),N.jsxs("a",{id:"serv-adder",className:"text-trigger",onClick:()=>e.change_menu("AddServerMenu"),children:["+ ",t(""),"..."]})]}),N.jsx("h3",{className:"Menu-title",children:t("")}),N.jsxs("div",{id:"colec",className:"selector-window",children:[this.state.Collection_list.map(r=>N.jsx(NM,{name:r,C:e},r)),N.jsxs("a",{id:"colec-adder",className:"text-trigger",onClick:()=>e.change_menu("AddCollectionMenu"),children:["+ ",t(""),"..."]}),N.jsx("br",{}),N.jsx("span",{children:t("")})]})]})}async componentDidMount(){let[e,t]=await RM();console.log("hoge",e,t),this.setState({Server_list:e,Collection_list:Object.keys(t)}),le.collection_list=t}}async function RM(){let n=await It.servers.toArray();n=n.filter(r=>r.name!="#master");let e=await It.collections.toArray(),t={};return e.forEach(r=>{t[r.name]=r.data}),[n,t]}async function MM(){if(confirm("")){let e=(await It.cache.toArray()).map(t=>t.hash);await It.cache.bulkDelete(e),alert("")}}const kM=n=>{const e=n.C,t=n.serv;return console.log(t),vt.get_translator(),N.jsxs("div",{className:"menu-selector",onClick:async()=>{e.menu_route[e.menu_route.length-1]!="EditServerMenu"&&(ke("#loading-cover").show(),Gt=t.address,Zn=t.name,le.serv_display_name=t.display_name,DM(Gt).then(r=>{le.server_info_data=r,console.log(r),e.change_menu("ServerInfo"),ke("#loading-cover").hide()}).catch(r=>{alert(`${r.status} : ${r.statusText}`),ke("#loading-cover").hide()}))},children:[N.jsx("span",{children:t.display_name}),N.jsx("span",{className:"src-label",children:t.address}),N.jsx("img",{src:"textures/edit.svg",className:"item_editor",width:"20",onClick:()=>{e.change_menu("EditServerMenu"),le.server=t}})]})};async function DM(n){return new Promise((e,t)=>{Wf(n,"/sonolus/info",{localization:jl}).then(r=>{e(JSON.parse(r))}).catch(r=>{t(r)})})}const NM=n=>{const e=n.C;return vt.get_translator(),N.jsx("div",{className:"menu-selector",onClick:()=>{e.change_menu("EditCollectionMenu"),le.name=n.name},children:N.jsx("span",{children:n.name})})},FM=n=>{const e=n.C,t=vt.get_translator();return N.jsxs("div",{id:"serv-add-menu",children:[N.jsx("h1",{className:"Menu-title",children:t("")}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsx("input",{type:"text",style:{width:"300px",fontSize:"20px"},id:"name"}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsx("input",{type:"text",style:{width:"300px",fontSize:"20px"},id:"address"}),N.jsx("br",{}),N.jsx("br",{}),N.jsx("button",{id:"cancel-trig",className:"btn",onClick:()=>{e.back_menu(),ke("#serv-add-menu #name").val(""),ke("#serv-add-menu #address").val("")},children:t("")}),N.jsx("button",{id:"add-trig",className:"btn",onClick:()=>{let r=ke("#serv-add-menu #name").val(),i=ke("#serv-add-menu #address").val();r&&i?(i.slice(-1)=="/"&&(i=i.slice(0,-1)),LM(r,i),e.back_menu(),ke("#serv-add-menu #name").val(""),ke("#serv-add-menu #address").val("")):alert(t(""))},children:t("")})]})};async function LM(n,e){await It.servers.put({name:bM(),display_name:n,address:e,option:{},version:ic})}const BM=n=>{const e=n.C,t=vt.get_translator();return N.jsxs("div",{id:"colec-add-menu",children:[N.jsx("h1",{className:"Menu-title",children:t("")}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsx("input",{type:"text",style:{width:"300px",fontSize:"20px"},id:"name"}),N.jsx("br",{}),N.jsx("br",{}),N.jsx("button",{id:"cancel-trig",className:"btn",onClick:()=>{e.back_menu(),ke("#colec-add-menu #name").val("")},children:t("")}),N.jsx("button",{id:"add-trig",className:"btn",onClick:async()=>{let r=ke("#colec-add-menu #name").val();if(r){let i=[];e.menu_route[e.menu_route.length-2]=="ServerMenu"?i=Object.keys(le.collection_list):(e.menu_route[e.menu_route.length-2]=="ItemInfo"||e.menu_route[e.menu_route.length-2]=="LevelInfo")&&(i=le.collection_names),i.includes(r)?alert(t("")):(ke("#loading-cover").show(),await jM(r),(e.menu_route[e.menu_route.length-2]=="ItemInfo"||e.menu_route[e.menu_route.length-2]=="LevelInfo")&&le.collection_names.push(r),ke("#loading-cover").hide(),e.back_menu(),ke("#colec-add-menu #name").val(""))}else alert(t(""))},children:t("")})]})};async function jM(n){await It.collections.put({name:n,data:{},version:$f})}const UM=n=>{const e=n.C,t=vt.get_translator();return N.jsxs("div",{id:"serv-editor",children:[N.jsx("h1",{className:"Menu-title",children:t("")}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsx("input",{type:"text",style:{width:"500px",fontSize:"20px"},id:"name",defaultValue:le.server.display_name}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsx("input",{type:"text",style:{width:"500px",fontSize:"20px"},id:"address",defaultValue:le.server.address}),N.jsx("br",{}),N.jsx("br",{}),N.jsx("button",{id:"cancel-trig",className:"btn",onClick:()=>{delete le.server,e.back_menu()},children:t("")}),N.jsx("button",{id:"delete-trig",className:"btn red-btn",onClick:async()=>{confirm(t(""))&&(await HM(le.server.name),delete le.server,e.back_menu())},children:t("")}),N.jsx("button",{id:"edit-trig",className:"btn",onClick:async()=>{ke("#serv-editor #name").val(),ke("#serv-editor #address").val()?(ke("#serv-editor #address").val().slice(-1)=="/"&&ke("#serv-editor #address").val(ke("#serv-editor #address").val().slice(0,-1)),await GM(ke("#serv-editor #name").val(),ke("#serv-editor #address").val()),delete le.server,e.back_menu()):alert(t(""))},children:t("")})]})};async function GM(n,e){await It.servers.put({name:le.server.name,display_name:n,address:e,option:le.server.option,version:ic})}async function HM(n){await It.servers.delete(n)}class zM extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.name=le.name,le.edited_collection={};let t=le.collection_list[this.name];for(let r in t)le.edited_collection[r]=!1}render(){const e=this.Menu_Controller,t=vt.get_translator();let r=le.collection_list[this.name];return N.jsxs("div",{id:"colec-editor",children:[N.jsx("h1",{className:"Menu-title",children:t("")}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsx("input",{type:"text",style:{width:"300px",fontSize:"20px"},id:"name",defaultValue:this.name}),N.jsx("div",{id:"window",className:"selector-window",children:Object.keys(r).map(i=>{let s=r[i];return s.type=="levels"?N.jsx(VM,{C:e,item:s,name:i},i):N.jsx(XM,{C:e,title:s.title,type:s.type,thumbnail:s.thumbnail,name:i},i)})}),N.jsx("button",{id:"cancel-trig",className:"btn",onClick:()=>{e.back_menu(),delete le.edited_collection},children:t("")}),N.jsx("button",{id:"delete-trig",className:"btn red-btn",onClick:()=>{confirm(t(""))&&(WM(this.name),e.back_menu(),delete le.edited_collection)},children:t("")}),N.jsx("button",{id:"edit-trig",className:"btn",onClick:async()=>{if(confirm(t("")))if(ke("#colec-editor #name").val()){for(let s in le.edited_collection)le.edited_collection[s]&&delete r[s];await qM(this.name,r),e.back_menu(),delete le.edited_collection}else alert(t(""))},children:t("")})]})}}class XM extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.title=e.title,this.type=e.type,this.thumbnail=URL.createObjectURL(e.thumbnail),this.name=e.name,this.state={removed:!1}}render(){this.Menu_Controller;const e=vt.get_translator();return N.jsxs("div",{style:{height:"70px",backgroundColor:this.state.removed?"red":"#20203c"},className:"menu-selector disable_pointer",children:[N.jsx("img",{src:this.thumbnail,style:{width:"70px",height:"70px"}}),N.jsx("div",{className:"ItemSelector-title",children:this.title}),N.jsx("div",{className:"ItemSelector-author",children:e(this.type)}),N.jsx("img",{src:this.state.removed?"textures/cancel.svg":"textures/delete.svg",className:"colec-delete-trg",width:"20",onClick:()=>{le.edited_collection[this.name]=!this.state.removed,this.setState({removed:!this.state.removed})}})]})}}class VM extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.item=e.item,this.title=e.item.title,this.level=e.item.level_info_data,this.name=e.name,this.thumbnail=URL.createObjectURL(e.item.thumbnail),this.state={removed:!1}}render(){const e=this.Menu_Controller,t=vt.get_translator();return N.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px",backgroundColor:this.state.removed?"red":"#20203c"},children:[N.jsx("span",{className:"colec-play-trg",onClick:async()=>{ke("#loading-cover").show(),le.coll_level=this.item,le.collection_names=(await It.collections.toArray()||[]).map(r=>r.name),e.change_menu("LevelInfoOffline"),ke("#loading-cover").hide()},children:t("")}),N.jsx("img",{src:this.thumbnail,style:{width:"100px",height:"100px"}}),N.jsx("span",{className:"selector-title",children:this.title}),N.jsx("br",{}),N.jsxs("span",{className:"level-author",children:[t(""),": ",this.level.author,N.jsx("br",{}),t(""),": ",this.level.artists]}),N.jsx("br",{}),N.jsx("span",{className:"level-rating",children:this.level.rating}),N.jsx("img",{src:this.state.removed?"textures/cancel.svg":"textures/delete.svg",className:"colec-delete-trg",width:"20",onClick:()=>{le.edited_collection[this.name]=!this.state.removed,this.setState({removed:!this.state.removed})}})]})}}async function qM(n,e){await It.collections.delete(n),await It.collections.put({name:ke("#colec-editor #name").val(),data:e,version:$f})}async function WM(n){await It.collections.delete(n)}class Ea extends Lt.Component{constructor(e){super(e),this.src=e.src,this.className=e.className||"",this.style=e.style||{},this.requestable=!1,this.className+=" enable_pointer",this.src in Jv?this.state={src:Jv[this.src]}:this.state={src:this.src}}render(){return N.jsx("img",{src:this.state.src,className:this.className,style:this.style,onClick:()=>{this.requestable&&(this.requestable=!1,this.setState({src:"./textures/loading.svg"}),fetch(jf,{method:"POST",body:JSON.stringify({type:"content",url:this.src})}).then(e=>{e?e.ok?e.blob().then(t=>{this.obj_url=URL.createObjectURL(t),this.setState({src:this.obj_url}),Jv[this.src]=this.obj_url}):(this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0,console.log(`thumbnail res: ${e.status},${e.statusText}`)):(this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0,console.log("thumbnail res: "))}).catch(e=>{e?(this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0,console.log(`thumbnail res: ${e.status},${e.statusText}`)):(this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0,console.log("thumbnail res: "))}))},onError:()=>{this.setState({src:"./textures/cloud_download.png"}),this.requestable=!0}})}}class $M extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,t=vt.get_translator(),r=le.server_info_data;return N.jsxs("div",{id:"serv-info",children:["banner"in r?N.jsx(Ea,{src:Yi(Gt,r.banner.url),className:"banner"}):N.jsx(N.Fragment,{}),N.jsx("button",{id:"back-trg",className:"btn",onClick:()=>{e.back_menu()},children:t("")}),N.jsx("h1",{className:"Menu-title",children:r.title}),N.jsx("h3",{className:"Menu-title",children:r.description}),r.buttons.map((i,s)=>{switch(i.type){case"authentication":case"multiplayer":case"replay":case"configuration":return N.jsx(N.Fragment,{});default:return N.jsx(YM,{type:EM(i.type),C:e},s)}})]})}}class YM extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.item_type=e.type,this.data_loaded=!1,this.info_data={},this.state={opened:!1}}render(){const e=this.Menu_Controller,t=vt.get_translator(),r=vt.get_label_getter();return this.state.opened?N.jsxs("div",{className:"selector-window",children:[N.jsx("h3",{className:"Menu-title",children:t(this.item_type)}),N.jsx("img",{src:"./textures/close.svg",width:"40",className:"info-close-trg",onClick:()=>{this.setState({opened:!1})}}),N.jsx("div",{className:"selector-window",children:this.info_data.sections.map((i,s)=>N.jsx(KM,{title:r(i.title),children:i.items.map((o,u)=>i.itemType=="level"?N.jsx(Bm,{C:e,level:o},u):i.itemType=="post"?N.jsx(ww,{C:e,post:o},u):i.itemType=="playlist"?N.jsx(Tw,{C:e,playlist:o},u):N.jsx(Sw,{C:e,item:o,type:this.item_type},u))},s))}),N.jsxs("button",{id:"more",className:"text-trigger btn","data-type":"particles",onClick:async()=>{ke("#loading-cover").show(),le.item_type=this.item_type,le.server_more_data=await Nu(Gt,this.item_type,0),console.log(le.server_more_data),e.change_menu("ServerMore"),ke("#loading-cover").hide()},children:["+ ",t(this.item_type+""),"..."]})]}):N.jsx("div",{className:"info-selector",onClick:()=>{this.open_info()},children:t(this.item_type)})}open_info(){this.data_loaded?this.setState({opened:!0}):(ke("#loading-cover").show(),Wf(Gt,`/sonolus/${this.item_type}/info`,{localization:jl}).then(e=>{this.info_data=JSON.parse(e),console.log(this.info_data),this.data_loaded=!0,this.setState({opened:!0}),ke("#loading-cover").hide()}).catch(e=>{alert(`${e.status} : ${e.statusText}`),ke("#loading-cover").hide()}))}}const KM=function(n){return N.jsxs("div",{children:[N.jsx("div",{className:"section-title",children:n.title}),n.children]})};async function Nu(n,e,t,r={}){console.log(r);let i=await Wf(n,`/sonolus/${e}/list`,{localization:jl,page:t,...r});return JSON.parse(i)}function Wf(n,e,t){return new Promise(async(r,i)=>{let s=await fetch(jf,{method:"POST",body:JSON.stringify({type:"info",domain:n,endpoint:e,params:JSON.stringify(t)})});s.ok?r(await s.text()):i(s)})}class ww extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C;let t=this.post=e.post;this.thumbnail=t.thumbnail.url||"./textures/unknown.png",this.title=t.title,this.author=t.author,this.time=t.time}render(){const e=this.Menu_Controller,t=vt.get_translator();let r=this.post.source||Gt;return N.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px"},children:[N.jsx("span",{className:"selector-play-trg",onClick:async()=>{ke("#loading-cover").show(),[le.post_info_data,le.collection_names]=await Bl(r,"posts",this.post.name),e.change_menu("PostInfo"),ke("#loading-cover").hide()},children:t("")}),N.jsx(Ea,{src:Yi(r,this.thumbnail),style:{width:"100px",height:"100px"}}),N.jsx("span",{className:"selector-title",children:this.title}),N.jsx("br",{}),N.jsxs("span",{className:"level-author",children:[t(""),": ",this.author,N.jsx("br",{}),t(""),": ",new Date(this.time).toLocaleString()]})]})}}class Tw extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C;let t=this.item=e.playlist;this.thumbnail=(t.thumbnail||{url:"./textures/unknown.png"}).url,this.title=t.title,this.subtitle=t.subtitle,this.author=t.author}render(){const e=this.Menu_Controller,t=vt.get_translator();let r=this.item.source||Gt;return N.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px"},children:[N.jsx("span",{className:"selector-play-trg",onClick:async()=>{ke("#loading-cover").show(),le.item_type=this.type||le.item_type,[le.item_info_data,le.collection_names]=await Bl(r,"playlists",this.item.name),e.change_menu("PlayListInfo"),ke("#loading-cover").hide()},children:t("")}),N.jsx(Ea,{src:Yi(r,this.thumbnail),style:{width:"100px",height:"100px"}}),N.jsx("span",{className:"selector-title",children:this.title}),N.jsx("br",{}),N.jsxs("span",{className:"selector-author",children:[this.subtitle,N.jsx("br",{}),t(""),": ",this.author]})]})}}class Bm extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C;let t=this.level=e.level;this.thumbnail=t.cover.url||"./textures/unknown.png",this.title=t.title,this.author=t.author,this.artists=t.artists,this.rating=t.rating,this.do_request="do_request"in e?e.do_request:!0}render(){const e=this.Menu_Controller,t=vt.get_translator();let r=this.level.source||Gt;return N.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px"},children:[N.jsx("span",{className:"selector-play-trg",onClick:async()=>{ke("#loading-cover").show(),this.do_request&&([le.level_info_data,le.collection_names]=await Bl(r,"levels",this.level.name)),e.change_menu("LevelInfo"),ke("#loading-cover").hide()},children:t("")}),N.jsx(Ea,{src:Yi(r,this.thumbnail),style:{width:"100px",height:"100px"}}),N.jsx("span",{className:"selector-title",children:this.title}),N.jsx("br",{}),N.jsxs("span",{className:"level-author",children:[t(""),": ",this.author,N.jsx("br",{}),t(""),": ",this.artists]}),N.jsx("br",{}),N.jsx("span",{className:"level-rating",children:this.rating})]})}}class Sw extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C;let t=this.item=e.item;this.thumbnail=(t.thumbnail||{url:"./textures/unknown.png"}).url,this.title=t.title,this.subtitle=t.subtitle,this.author=t.author,this.type=e.type}render(){const e=this.Menu_Controller,t=vt.get_translator();let r=this.item.source||Gt;return N.jsxs("div",{className:"menu-selector disable_pointer",style:{height:"100px"},children:[N.jsx("span",{className:"selector-play-trg",onClick:async()=>{ke("#loading-cover").show(),le.item_type=this.type||le.item_type,[le.item_info_data,le.collection_names]=await Bl(r,le.item_type,this.item.name),e.change_menu("ItemInfo"),ke("#loading-cover").hide()},children:t("")}),N.jsx(Ea,{src:Yi(r,this.thumbnail),style:{width:"100px",height:"100px"}}),N.jsx("span",{className:"selector-title",children:this.title}),N.jsx("br",{}),N.jsxs("span",{className:"selector-author",children:[this.subtitle,N.jsx("br",{}),t(""),": ",this.author]})]})}}function Yi(n,e){return~e.indexOf("http")||~e.indexOf("./")?e:(n.slice(-1)=="/"&&(n=n.slice(0,-1)),e.slice(0,1)=="/"&&(e=e.slice(1)),n+"/"+e)}async function Bl(n,e,t){let r=await Wf(n,`/sonolus/${e}/${t}`,{localization:jl}),i=(await It.collections.toArray()||[]).map(s=>s.name);return console.log(JSON.parse(r)),[JSON.parse(r),i]}class QM extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.searches=le.server_more_data.searches||[],console.log(le.server_more_data),this.search_queries=[],this.queries={},this.searches.length>0?(this.searches.forEach((t,r)=>{this.search_queries.push({});for(let i of t.options)this.search_queries[r][i.query]=i.def}),this.state={search_type:0,page_index:0}):this.state={search_type:-1,page_index:0}}render(){const e=this.Menu_Controller,t=vt.get_translator(),r=vt.get_label_getter();return N.jsxs("div",{id:"serv-more",children:[N.jsx("h3",{id:"title",className:"page-title",children:t(le.item_type)}),N.jsxs("div",{className:"selector-window",id:"filter",children:[N.jsx("h3",{className:"Menu-title",children:""}),N.jsx("br",{}),N.jsx("select",{onChange:i=>{this.setState({search_type:i.target.value})},children:this.searches.map((i,s)=>N.jsx("option",{value:s,children:r(i.title)},s))}),N.jsx("div",{children:this.state.search_type==-1?N.jsx("span",{children:t("")}):this.searches[this.state.search_type].options.map((i,s)=>N.jsx(ZM,{option:i,search_queries:this.search_queries[this.state.search_type]},s))}),N.jsx("button",{id:"search",className:"btn",onClick:async()=>{ke("#loading-cover").show();let i={},s=!0;for(let o of this.searches[this.state.search_type].options)switch(o.type){case"toggle":i[o.query]=this.search_queries[this.state.search_type][o.query]?1:0,o.def==this.search_queries[o.query]&&o.required&&(s=!1);break;case"text":case"slider":case"select":i[o.query]=this.search_queries[this.state.search_type][o.query],o.def==this.search_queries[o.query]&&o.required&&(s=!1);break;default:console.warn(`type=${o.type}`);break}s?(this.queries=i,le.server_more_data=await Nu(Gt,le.item_type,this.state.page_index,i),console.log(le.server_more_data),this.setState({search_type:this.state.search_type,page_index:this.state.page_index})):alert(""),ke("#loading-cover").hide()},children:t("")}),N.jsx("button",{id:"cancel",className:"btn red-btn",onClick:async()=>{this.queries={},ke("#loading-cover").show(),le.server_more_data=await Nu(Gt,le.item_type,this.state.page_index),console.log(le.server_more_data),this.setState({search_type:this.state.search_type,page_index:this.state.page_index}),ke("#loading-cover").hide()},children:t("")})]}),N.jsxs("div",{className:"selector-window",id:"window",children:[this.prev_button(),this.next_button(),this.back_button(),le.server_more_data.items.map((i,s)=>le.item_type=="levels"?N.jsx(Bm,{C:e,level:i},i.name):le.item_type=="posts"?N.jsx(ww,{C:e,post:i},i.name):le.item_type=="playlists"?N.jsx(Tw,{C:e,playlist:i},i.name):N.jsx(Sw,{C:e,item:i},i.name)),this.prev_button(),this.next_button(),this.back_button(),N.jsxs("p",{id:"page-number",children:[this.state.page_index+1,"/",le.server_more_data.pageCount]})]})]})}prev_button(){return this.Menu_Controller,N.jsx("button",{id:"prev",disabled:this.state.page_index<=0,className:"btn",onClick:async()=>{ke("#loading-cover").show();let e=this.state.page_index-1;le.server_more_data=await Nu(Gt,le.item_type,e,this.queries),console.log(le.server_more_data),this.setState({search_type:this.state.search_type,page_index:e}),ke("#loading-cover").hide()},children:" "})}next_button(){return this.Menu_Controller,N.jsx("button",{id:"next",disabled:this.state.page_index+1>=le.server_more_data.pageCount,className:"btn",onClick:async()=>{ke("#loading-cover").show();let e=this.state.page_index+1;le.server_more_data=await Nu(Gt,le.item_type,e,this.queries),console.log(le.server_more_data),this.setState({search_type:this.state.search_type,page_index:e}),ke("#loading-cover").hide()},children:" "})}back_button(){const e=this.Menu_Controller;return N.jsx("button",{id:"back",className:"btn",onClick:()=>{e.back_menu(),le.item_type="",delete le.server_more_data},children:""})}}class ZM extends Lt.Component{constructor(e){super(e),this.option=e.option,this.search_queries=e.search_queries,this.option.type=="slider"&&(this.state={val:this.search_queries[this.option.query]})}render(){vt.get_translator();const e=vt.get_label_getter();switch(this.option.type){case"text":return N.jsxs("div",{children:[N.jsx("span",{children:e(this.option.name)}),this.option.required?N.jsx("img",{src:"./textures/caution_orange.svg",height:"30"}):N.jsx(N.Fragment,{}),"",N.jsx("input",{type:"text",className:"search-option",placeholder:this.option.placeholder,defaultValue:this.search_queries[this.option.query],onChange:t=>{this.search_queries[this.option.query]=t.target.value}}),this.option.description?N.jsx("div",{style:{fontSize:"10px",color:"lightgray"},children:this.option.description}):N.jsx(N.Fragment,{})]});case"slider":return N.jsxs("div",{children:[N.jsx("span",{children:e(this.option.name)}),"",N.jsx("input",{type:"range",className:"search-option",max:this.option.max,min:this.option.min,step:this.option.step,defaultValue:this.search_queries[this.option.query],onChange:t=>{this.search_queries[this.option.query]=t.target.value,this.setState({val:t.target.value})}}),N.jsx("span",{children:this.state.val}),N.jsx("span",{children:this.option.unit||""}),this.option.description?N.jsx("div",{style:{fontSize:"10px",color:"lightgray"},children:this.option.description}):N.jsx(N.Fragment,{})]});case"toggle":return N.jsxs("div",{children:[N.jsx("span",{children:e(this.option.name)}),"",N.jsx("input",{type:"checkbox",defaultChecked:this.search_queries[this.option.query],onChange:t=>{this.search_queries[this.option.query]=t.target.checked}}),this.option.description?N.jsx("div",{style:{fontSize:"10px",color:"lightgray"},children:this.option.description}):N.jsx(N.Fragment,{})]});case"select":return N.jsxs("div",{children:[N.jsx("span",{children:e(this.option.name)}),"",N.jsx("select",{defaultValue:this.search_queries[this.option.query],onChange:t=>{this.search_queries[this.option.query]=t.target.value},children:this.option.values.map((t,r)=>N.jsx("option",{value:t.name,children:t.title},r))})]});default:return console.warn(`type=${this.option.type}`),N.jsx(N.Fragment,{})}}}class JM extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={data:le.item_info_data}}render(){const e=this.Menu_Controller,t=vt.get_translator();return N.jsxs("div",{id:"item-info",children:[N.jsx("h2",{id:"title",className:"Menu-title",children:this.state.data.item.title}),N.jsx("h3",{id:"subtitle",style:{color:"gray"},className:"Menu-title",children:this.state.data.item.subtitle}),N.jsx("div",{className:"selector-window",id:"info",children:N.jsxs("div",{children:[t(""),": ",this.state.data.item.author,N.jsx("br",{}),N.jsx("br",{}),t(""),": ",this.state.data.description,N.jsx("br",{}),N.jsx("br",{}),t(""),": ",(this.state.data.item.tags||[]).map(r=>r.title).join(", ")]})}),N.jsx("div",{className:"Info-controller",children:N.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete le.item_info_data,e.back_menu()},children:t("")})}),N.jsx("div",{className:"selector-window",id:"list",children:this.state.data.item.levels.map((r,i)=>N.jsx(Bm,{C:e,level:r},i))})]})}}function am(n,e=!1){return e?{data:n,ref_items:[],source_items:{skin:{item:{unselected:!0}},background:{item:{unselected:!0}},effect:{item:{unselected:!0}},particle:{item:{unselected:!0}},engine:{item:{unselected:!0}}}}:{data:n,ref_items:[{default:!0,type:"skins",item:n.item.useSkin.useDefault?n.item.engine.skin:n.item.useSkin.item},{default:!0,type:"backgrounds",item:n.item.useBackground.useDefault?n.item.engine.background:n.item.useBackground.item},{default:!0,type:"effects",item:n.item.useEffect.useDefault?n.item.engine.effect:n.item.useEffect.item},{default:!0,type:"particles",item:n.item.useParticle.useDefault?n.item.engine.particle:n.item.useParticle.item},{default:!0,type:"engines",item:n.item.engine}],source_items:{skin:{default:!0,type:"skins",item:n.item.useSkin.useDefault?n.item.engine.skin:n.item.useSkin.item},background:{default:!0,type:"backgrounds",item:n.item.useBackground.useDefault?n.item.engine.background:n.item.useBackground.item},effect:{default:!0,type:"effects",item:n.item.useEffect.useDefault?n.item.engine.effect:n.item.useEffect.item},particle:{default:!0,type:"particles",item:n.item.useParticle.useDefault?n.item.engine.particle:n.item.useParticle.item},engine:{default:!0,type:"engines",item:n.item.engine}}}}class ek extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state=am(le.level_info_data)}render(){const e=this.Menu_Controller,t=vt.get_translator(),r=this.state.data.item;return N.jsxs("div",{id:"level-info",children:[N.jsx("h1",{id:"title",className:"page-title",children:r.title}),N.jsxs("div",{className:"selector-window",id:"info",style:{display:"flex"},children:[N.jsx("figure",{className:"level-cover",children:N.jsx(Ea,{src:Yi(Gt,r.cover.url),style:{width:"300px",height:"300px"}})}),N.jsxs("div",{style:{marginLeft:"20px"},children:[t(""),": ",r.author,N.jsx("br",{}),t(""),": ",r.artists,N.jsx("br",{}),N.jsx("br",{}),t(""),": ",this.state.data.description,N.jsx("br",{}),N.jsx("br",{}),t(""),":",(this.state.data.recommended||[]).map(i=>N.jsx("div",{className:"text-trigger",onClick:async()=>{ke("#loading-cover").show(),[le.level_info_data,le.collection_names]=await Bl(Gt,"levels",i.name),this.setState(am(le.level_info_data)),ke("#loading-cover").hide()},children:i.title},i.name)),N.jsx("br",{}),N.jsx("br",{}),t(""),": ",(r.tags||[]).map(i=>i.title).join(", ")]})]}),N.jsxs("div",{className:"Info-controller",children:[N.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete le.level_info_data,e.back_menu()},children:t("")}),N.jsx("div",{className:"Info-opt-trig",id:"option",onClick:async()=>{if(this.state.source_items.engine.default){let i=this.state.source_items.engine.item.configuration,s=await rk(Gt,i.url,i.hash);le.engine_option_data=s.options}else le.engine_option_data=this.state.source_items.engine.item.engine_config.options;[le.engine_option,le.system_option]=await Ew(Zn),e.change_menu("LevelOption")},children:t("")}),N.jsxs("div",{className:"LevelInfo-selector",children:[N.jsx("button",{id:"add-coll",className:"btn",onClick:async()=>{let i=ke(".LevelInfo-selector #coll_selector").val();i?(ke("#loading-cover").show(),(await Cw(i)).includes(this.state.data.item.name+"(level)")?alert(t("")):(Aw(Gt,i,this.state.data.item,"levels"),alert(t(""))),ke("#loading-cover").hide()):alert(t(""))},children:t("")}),"",t(""),":",N.jsxs("select",{id:"coll_selector",onChange:()=>{let i=ke(".LevelInfo-selector #coll_selector");i.val()=="#add"&&(i.val(""),e.change_menu("AddCollectionMenu"))},children:[N.jsx("option",{value:"",id:"init",children:t("")}),le.collection_names.map(i=>N.jsx("option",{children:i},i)),N.jsxs("option",{value:"#add",children:[t(""),"..."]})]})]}),N.jsx("div",{className:"LevelInfo-run-trig",id:"next",onClick:()=>{le.source_items=this.state.source_items,le.is_offline_level=!1,e.change_menu("SourceLoad")},children:t("")})]}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsxs("div",{className:"selector-window",id:"source-selector",children:[N.jsx(zi,{C:e,type:"skins",item:this.state.source_items.skin.item}),N.jsx(zi,{C:e,type:"backgrounds",item:this.state.source_items.background.item}),N.jsx(zi,{C:e,type:"effects",item:this.state.source_items.effect.item}),N.jsx(zi,{C:e,type:"particles",item:this.state.source_items.particle.item}),N.jsx(zi,{C:e,type:"engines",item:this.state.source_items.engine.item})]}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsxs("div",{className:"selector-window",id:"item-selector",children:[t(""),"",N.jsxs("select",{className:"select-ref",onChange:async()=>{ke("#loading-cover").show();let i=ke("#level-info #item-selector select").val();if(i=="default"){let s=le.level_info_data;this.setState({ref_items:[{default:!0,type:"skins",item:s.item.useSkin.useDefault?s.item.engine.skin:s.item.useSkin.item},{default:!0,type:"backgrounds",item:s.item.useBackground.useDefault?s.item.engine.background:s.item.useBackground.item},{default:!0,type:"effects",item:s.item.useEffect.useDefault?s.item.engine.effect:s.item.useEffect.item},{default:!0,type:"particles",item:s.item.useParticle.useDefault?s.item.engine.particle:s.item.useParticle.item},{default:!0,type:"engines",item:s.item.engine}]})}else{let s=await Um(i),o=[];for(let[u,c]of Object.entries(s))c.name=u,c.type!="levels"&&o.push({default:!1,type:c.type,item:c});this.setState({ref_items:o})}ke("#loading-cover").hide()},children:[N.jsx("option",{value:"default",children:t("")}),le.collection_names.map(i=>N.jsx("option",{children:i},i))]}),N.jsx("br",{}),N.jsx("div",{id:"window",children:this.state.ref_items.map(i=>N.jsx(jm,{C:e,onClick:()=>{let s=this.state.source_items;s[i.type.slice(0,-1)]=i,this.setState({source_items:s})},type:i.type,item:i},`${i.item.name||"default"}(${i.type})`))})]})]})}}class tk extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state=am(le.level_info_data,!0)}render(){const e=this.Menu_Controller,t=vt.get_translator(),r=le.coll_level;Zn=r.server_name;const i=r.level_info_data;return le.level_info_data={item:i},N.jsxs("div",{id:"level-info",children:[N.jsx("h1",{id:"title",className:"page-title",children:i.title}),N.jsxs("div",{className:"selector-window",id:"info",style:{display:"flex"},children:[N.jsx("figure",{className:"level-cover",children:N.jsx("img",{src:URL.createObjectURL(r.thumbnail),style:{width:"300px",height:"300px"}})}),N.jsxs("div",{style:{marginLeft:"20px"},children:[t(""),": ",i.author,N.jsx("br",{}),t(""),": ",i.artists,N.jsx("br",{}),N.jsx("br",{}),t(""),": ",i.description,N.jsx("br",{}),N.jsx("br",{}),t(""),":",(i.recommended||[]).map(s=>N.jsx("div",{className:"text-trigger",children:s.title},s.name))]})]}),N.jsxs("div",{className:"Info-controller",children:[N.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete le.coll_level,delete le.level_info_data,e.back_menu()},children:t("")}),N.jsx("div",{className:"Info-opt-trig",id:"option",onClick:async()=>{this.state.source_items.engine.item.unselected?alert(t("")):(le.engine_option_data=this.state.source_items.engine.item.engine_config.options,[le.engine_option,le.system_option]=await Ew(r.server_name),e.change_menu("LevelOption"))},children:t("")}),N.jsx("div",{className:"LevelInfo-run-trig",id:"next",onClick:()=>{this.state.source_items.skin.item.unselected||this.state.source_items.background.item.unselected||this.state.source_items.effect.item.unselected||this.state.source_items.particle.item.unselected||this.state.source_items.engine.item.unselected?alert(t("")):(le.source_items=this.state.source_items,le.is_offline_level=!0,e.change_menu("SourceLoad"))},children:t("")})]}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsxs("div",{className:"selector-window",id:"source-selector",children:[N.jsx(zi,{C:e,type:"skins",item:this.state.source_items.skin.item}),N.jsx(zi,{C:e,type:"backgrounds",item:this.state.source_items.background.item}),N.jsx(zi,{C:e,type:"effects",item:this.state.source_items.effect.item}),N.jsx(zi,{C:e,type:"particles",item:this.state.source_items.particle.item}),N.jsx(zi,{C:e,type:"engines",item:this.state.source_items.engine.item})]}),N.jsx("h3",{className:"Item-name",children:t("")}),N.jsxs("div",{className:"selector-window",id:"item-selector",children:[t(""),"",N.jsxs("select",{className:"select-ref",onChange:async()=>{ke("#loading-cover").show();let s=ke("#level-info #item-selector select").val();if(s){let o=await Um(s),u=[];for(let[c,v]of Object.entries(o))v.name=c,v.type!="levels"&&u.push({default:!1,type:v.type,item:v});this.setState({ref_items:u})}else this.setState({ref_items:[]});ke("#loading-cover").hide()},children:[N.jsx("option",{value:"",children:t("")}),le.collection_names.map(s=>N.jsx("option",{children:s},s))]}),N.jsx("br",{}),N.jsx("div",{id:"window",children:this.state.ref_items.map(s=>N.jsx(jm,{C:e,onClick:()=>{let o=this.state.source_items;o[s.type.slice(0,-1)]=s,this.setState({source_items:o})},type:s.type,item:s},`${s.item.name||"default"}(${s.type})`))})]})]})}}const zi=n=>{const e=vt.get_translator();if(n.item.unselected)return N.jsxs("div",{style:{height:"70px"},className:"menu-selector",children:[N.jsx("img",{src:"./textures/caution.svg",style:{width:"70px",height:"70px"}}),N.jsx("div",{className:"ItemSelector-title",children:""}),N.jsx("div",{className:"ItemSelector-author",children:e(n.type)})]});{let t=n.item,r,i=t.title;return"type"in t?r=URL.createObjectURL(t.thumbnail):r=(t.thumbnail||{url:"./textures/unknown.png"}).url,N.jsxs("div",{style:{height:"70px"},className:"menu-selector",children:[N.jsx(Ea,{src:Yi(Gt,r),style:{width:"70px",height:"70px"}},r),N.jsx("div",{className:"ItemSelector-title",children:i}),N.jsx("div",{className:"ItemSelector-author",children:e(n.type)})]})}};class jm extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.item=e.item.item,e.item.default?(this.thumbnail=(this.item.thumbnail||{url:"./textures/unknown.png"}).url,this.title=this.item.title):(this.thumbnail=URL.createObjectURL(this.item.thumbnail),this.title=this.item.title),this.type=e.type,this.onClick=e.onClick}render(){this.Menu_Controller;const e=vt.get_translator();return N.jsxs("div",{style:{height:"70px"},className:"menu-selector disable_pointer",children:[N.jsx(Ea,{src:Yi(Gt,this.thumbnail),style:{width:"70px",height:"70px"}}),N.jsx("div",{className:"ItemSelector-title",children:this.title}),N.jsx("div",{className:"ItemSelector-author",children:e(this.type)}),N.jsx("span",{className:"selector-coll-trg",onClick:this.onClick,children:e("")})]})}}async function rk(n,e,t){let r=await vr(n,e,t);return JSON.parse(await Kn(r))}async function Ew(n){let e=(await It.servers.get(n)).option,t=(await It.servers.get("#master")).option.system_option;return console.log(t),[e,t]}async function Um(n){return(await It.collections.get(n)).data}class nk extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={data:le.item_info_data},le.tmp_system_option=Object.assign({},le.system_option),le.tmp_engine_option={}}render(){const e=this.Menu_Controller,t=vt.get_translator(),r=vt.get_label_getter(),i=le.system_option,s=(o,u=1)=>c=>{switch(c.target.type){case"range":le.tmp_system_option[o]=Number(c.target.value)*u;break;case"checkbox":le.tmp_system_option[o]=c.target.value=="on";break;case"select":le.tmp_system_option[o]=Number(c.target.value);break;default:console.error(`"${c.target.type}"option type`);break}};return N.jsxs("div",{id:"level-option",children:[N.jsx("h2",{className:"Menu-title",children:""}),N.jsx("h3",{className:"Item-name",children:""}),N.jsx("div",{className:"selector-window",id:"level-op",children:le.engine_option_data.map(o=>{let u;if("scope"in o)o.scope in le.engine_option&&o.name in le.engine_option[o.scope]?u=le.engine_option[o.scope][o.name]:u=o.def;else{const c="level:"+le.level_info_data.item.name;c in le.engine_option&&o.name in le.engine_option[c]?u=le.engine_option[c][o.name]:u=o.def}switch(le.tmp_engine_option[o.name]=u,o.type){case"slider":return N.jsx(Yn,{C:e,type:"slider",min:o.min,max:o.max,step:o.step,def:u,standard:o.standard||!1,onChange:c=>le.tmp_engine_option[o.name]=Number(c.target.value),unit:"",children:r(o.name)},o.name);case"toggle":return N.jsx(Yn,{C:e,type:"toggle",def:u==1,onChange:c=>le.tmp_engine_option[o.name]=c.target.checked?1:0,children:r(o.name)},o.name)}})}),N.jsx("h3",{className:"Item-name",children:""}),N.jsxs("div",{className:"selector-window",id:"system-op",children:[N.jsx(Yn,{C:e,type:"slider",min:0,max:100,step:.1,def:i.bgm_volume,onChange:s("bgm_volume"),unit:"%",children:"BGM"}),N.jsx(Yn,{C:e,type:"slider",min:0,max:100,step:.1,def:i.effect_volume,onChange:s("effect_volume"),unit:"%",children:""}),N.jsx(Yn,{C:e,type:"slider",min:-500,max:500,step:5,def:i.audio_offset*1e3,onChange:s("audio_offset",1/1e3),unit:"ms",children:""}),N.jsx(Yn,{C:e,type:"slider",min:-500,max:500,step:5,def:i.input_offset*1e3,onChange:s("input_offset",1/1e3),unit:"ms",children:""}),N.jsx(Yn,{C:e,type:"slider",min:2,max:8,step:1,def:i.mesh_vertexes,onChange:s("mesh_vertexes"),unit:"",children:""}),N.jsx(Yn,{C:e,type:"slider",min:2,max:8,step:1,def:i.curv_vertexes,onChange:s("curv_vertexes"),unit:"",children:""}),N.jsx(Yn,{C:e,type:"slider",min:0,max:120,step:1,def:i.max_fps,onChange:s("max_fps"),unit:"fps",children:"fps(0)"}),N.jsx(Yn,{C:e,type:"slider",min:.2,max:1,step:.05,def:i.texture_scale,onChange:s("texture_scale"),unit:"x",children:"()"}),N.jsx(Yn,{C:e,type:"toggle",def:!1,children:""})]}),N.jsxs("div",{className:"selector-window",children:[N.jsx(Yn,{C:e,type:"toggle",def:le.key_assign_enabled,onChange:o=>{le.key_assign_enabled=o.target.checked},children:""}),le.key_assign_enabled?t(""):t(""),N.jsx("input",{type:"file",id:"key_assign_file_selector"})]}),N.jsx("button",{id:"LevelOption-back",className:"btn",onClick:()=>{e.back_menu()},children:""}),N.jsx("button",{id:"LevelOption-save",className:"btn",onClick:async()=>{le.system_option=le.tmp_system_option;for(let c of le.engine_option_data)if("scope"in c)c.scope in le.engine_option||(le.engine_option[c.scope]={}),le.engine_option[c.scope][c.name]=le.tmp_engine_option[c.name];else{const v="level:"+le.level_info_data.item.name;v in le.engine_option||(le.engine_option[v]={}),le.engine_option[v][c.name]=le.tmp_engine_option[c.name]}delete le.engine_option["level:undefined"];let o=await It.servers.get(Zn);await It.servers.put({address:o.address,name:Zn,option:le.engine_option,display_name:o.display_name,version:ic});let u=await It.servers.get("#master");if(u.option.system_option=le.system_option,await It.servers.put(u),le.key_assign_enabled&&ke("#key_assign_file_selector").val())try{le.key_assign_data=await new Promise(c=>{let v=ke("#key_assign_file_selector").prop("files")[0],_=new FileReader;_.onload=()=>{c(JSON.parse(_.result))},_.readAsText(v)}),console.log("keyassign:",le.key_assign_data)}catch(c){console.warn(c),alert(t(""));return}e.back_menu()},children:""})]})}}class Yn extends Lt.Component{constructor(e){switch(super(e),this.Menu_Controller=e.C,this.type=e.type,this.label=e.children,this.standard=e.standard,this.type){case"slider":this.min=e.min,this.max=e.max,this.step=e.step,this.unit=e.unit,this.def=e.def,this.state={value:e.def};break;case"toggle":this.def=e.def;break;case"select":this.def=e.def,this.values=e.values;break;default:console.warn(`Option type "${this.type}" does not exist.`);break}this.onChange=e.onChange}render(){vt.get_translator();let e=this.standard?N.jsx("img",{src:"./textures/caution.svg",style:{height:"1em",width:"1em"}}):N.jsx(N.Fragment,{});switch(this.type){case"slider":return N.jsxs("div",{children:[this.label,e,": ",N.jsx("input",{type:"range",min:this.min,max:this.max,step:this.step,defaultValue:this.def,onChange:t=>{this.onChange&&this.onChange(t),this.setState({value:t.target.value})}}),"",this.state.value,this.unit]});case"toggle":return N.jsxs("div",{children:[this.label,e,": ",N.jsx("input",{type:"checkbox",defaultChecked:this.def,onChange:t=>{this.onChange&&this.onChange(t)}})]});case"select":return N.jsxs("div",{children:[this.label,e,": ",N.jsx("select",{onChange:t=>{this.onChange&&this.onChange(t)},children:Object.entries(this.values).map((t,r)=>N.jsx("option",{value:t,selected:t==this.def,children:r},r))})]});default:return N.jsxs("div",{children:[this.label,": Error Option"]})}}}class ik extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={data:le.item_info_data},this.type=le.item_type}render(){const e=this.Menu_Controller,t=vt.get_translator();return N.jsxs("div",{id:"item-info",children:[N.jsx("h2",{id:"title",className:"Menu-title",children:this.state.data.item.title}),N.jsx("h3",{id:"subtitle",style:{color:"gray"},className:"Menu-title",children:this.state.data.item.subtitle}),N.jsx("div",{className:"selector-window",id:"info",children:N.jsxs("div",{children:[t(""),": ",this.state.data.item.author,N.jsx("br",{}),N.jsx("br",{}),t(""),": ",this.state.data.description,N.jsx("br",{}),N.jsx("br",{}),t(""),":",(this.state.data.recommended||[]).map(r=>N.jsx("div",{className:"text-trigger",onClick:async()=>{ke("#loading-cover").show(),[le.item_info_data,le.collection_names]=await Bl(Gt,le.item_type,r.name),this.setState({data:le.item_info_data}),ke("#loading-cover").hide()},children:r.title},r.name)),N.jsx("br",{}),N.jsx("br",{}),t(""),": ",(this.state.data.item.tags||[]).map(r=>r.title).join(", ")]})}),N.jsxs("div",{className:"Info-controller",children:[N.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete le.item_info_data,e.back_menu()},children:t("")}),N.jsxs("div",{className:"ItemInfo-selector",children:[N.jsx("button",{id:"next",className:"btn",onClick:async()=>{let r=ke("#item-info .ItemInfo-selector #selector").val();r?(ke("#loading-cover").show(),(await Cw(r)).includes(`${this.state.data.item.name}(${SM(this.type)})`)?alert(t("")):(Aw(Gt,r,this.state.data.item,this.type),alert(t(""))),ke("#loading-cover").hide()):alert(t(""))},children:t("")}),"",t(""),":",N.jsxs("select",{id:"selector",onChange:()=>{let r=ke("#item-info .ItemInfo-selector #selector");r.val()=="#add"&&(r.val(""),e.change_menu("AddCollectionMenu"))},children:[N.jsx("option",{value:"",id:"init",children:t("")}),le.collection_names.map(r=>N.jsx("option",{children:r},r)),N.jsxs("option",{value:"#add",children:[t(""),"..."]})]})]})]})]})}}function Cw(n){return new Promise((e,t)=>{It.collections.get(n).then(r=>{e(Object.keys(r.data))})})}function Aw(n,e,t,r){console.log(t),It.collections.get(e).then(async i=>{r=="levels"&&(t.thumbnail=t.cover);let s=await vr(n,t.thumbnail.url,t.thumbnail.hash);switch(r){case"levels":let o=await vr(n,t.data.url,t.data.hash);o=JSON.parse(await Kn(o));let u=await vr(n,t.bgm.url,t.bgm.hash);i.data[t.name+"(level)"]={type:"levels",title:t.title,level_data:o,level_info_data:t,level_BGM:u,thumbnail:s,server_name:Zn};break;case"skins":let c=await vr(n,t.data.url,t.data.hash);c=JSON.parse(await Kn(c));let v=await vr(n,t.texture.url,t.texture.hash);i.data[t.name+"(skin)"]={type:"skins",title:t.title,texture_data:c,texture_img:v,thumbnail:s,server_name:Zn};break;case"backgrounds":let _=await vr(n,t.data.url,t.data.hash);_=JSON.parse(await Kn(_));let h=await vr(n,t.configuration.url,t.configuration.hash);h=JSON.parse(await Kn(h));let d=await vr(n,t.image.url,t.image.hash);i.data[t.name+"(background)"]={type:"backgrounds",title:t.title,background_data:_,background_config:h,background_img:d,thumbnail:s,server_name:Zn};break;case"effects":let m=await vr(n,t.data.url,t.data.hash);m=JSON.parse(await Kn(m));let x=await vr(n,t.audio.url,t.audio.hash);x=await Pw(x),i.data[t.name+"(effect)"]={type:"effects",title:t.title,effect_data:m,effect_audio:x,thumbnail:s,server_name:Zn};break;case"particles":let w=await vr(n,t.data.url,t.data.hash);w=JSON.parse(await Kn(w));let T=await vr(n,t.texture.url,t.texture.hash);i.data[t.name+"(particle)"]={type:"particles",title:t.title,particle_data:w,particle_tex:T,thumbnail:s,server_name:Zn};break;case"engines":let E=await vr(n,(t.playData||t.data).url,(t.playData||t.data).hash);E=JSON.parse(await Kn(E));let I=await vr(n,t.configuration.url,t.configuration.hash);I=JSON.parse(await Kn(I)),i.data[t.name+"(engine)"]={type:"engines",title:t.title,engine_data:E,engine_config:I,thumbnail:s,server_name:Zn};break;default:console.error(`"${r}" is not found.`);break}It.collections.put({name:e,data:i.data,version:$f}).catch(o=>console.error(o)),i=null})}class sk extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.state={data:le.post_info_data}}render(){const e=this.Menu_Controller,t=vt.get_translator();return N.jsxs("div",{id:"item-info",children:[N.jsx("h2",{id:"title",children:this.state.data.item.title}),N.jsx("h3",{id:"time",style:{color:"gray"},children:new Date(this.state.data.item.time).toLocaleString()}),N.jsx("div",{className:"selector-window",id:"info",children:N.jsxs("div",{children:[t(""),": ",this.state.data.item.author,N.jsx("br",{}),N.jsx("br",{}),t(""),":",N.jsx("br",{})]})}),N.jsx("div",{className:"Info-back-trig",id:"back",onClick:()=>{delete le.post_info_data,e.back_menu()},children:t("")})]})}}const d1=n=>n.successful?N.jsx("div",{className:"log-text-successful",children:n.children}):N.jsx("div",{className:"log-text",children:n.children});class ak extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C,this.log_texts=[],this.sources={},this.state={log:[],can_start:!1},this.canceled=!1}componentDidMount(){this.load_sources()}render(){this.Menu_Controller;const e=vt.get_translator();return N.jsxs("div",{children:[N.jsx("h1",{children:e("")}),N.jsx("div",{className:"loading-log",children:this.state.log}),N.jsxs("div",{className:"start-play-trg-container",children:[N.jsx("div",{className:"start-cancel-trg",onClick:()=>{this.state.can_start?(ke("#processing-cover").show(),this.cancel()):(ke("#processing-cover").show(),this.canceled=!0)},children:e("")}),N.jsx("div",{className:"start-play-trg",disabled:!this.state.can_start,onClick:()=>{this.state.can_start&&(console.log(this.sources),ke("#processing-cover").show(),setTimeout(()=>{this.play()},100))},children:e("")})]})]})}add(e,t=!0){const r=vt.get_translator();let i=this.state.log;i.length>0&&t&&(i[i.length-1]=N.jsxs(d1,{successful:!0,children:[this.log_texts[this.log_texts.length-1]," ... ",r("")]},i.length-1)),i.push(N.jsx(d1,{successful:!1,children:e},i.length)),this.setState({log:i}),this.log_texts.push(e)}async load_sources(){const e=vt.get_translator();let t=le.level_info_data.item,r=le.source_items;console.log(t);try{if(this.add(e("")),this.sources.engine_data=await vl("engine","engine_data",["playData","data"]),this.canceled)return this.cancel();this.add(e(""));let i=await vl("engine","engine_config",["configuration"]),s=(await It.servers.get(Zn)).option,o=[];for(let _ of i.options){let h=_.scope||`level:${t.name}`;h in s&&_.name in s[h]?o.push(s[h][_.name]):o.push(_.def)}if(this.sources.engine_config=i,this.sources.level_option=o,this.canceled)return this.cancel();if(this.add(e("")),this.sources.texture_data=await vl("skin","texture_data",["data"]),this.canceled)return this.cancel();this.add(e(""));let u;if(le.is_offline_level?(u=le.coll_level.level_data,this.sources.level_data=u):(u=await vr(Gt,t.data.url,t.data.hash),u=JSON.parse(await Kn(u)),this.sources.level_data=u),this.canceled)return this.cancel();if(this.add(e("")),this.sources.particle_data=await vl("particle","particle_data",["data"]),this.canceled)return this.cancel();if(this.add(e("")),this.sources.background_data=await vl("background","background_data",["data"]),this.canceled)return this.cancel();if(this.add(e("")),this.sources.background_config=await vl("background","background_config",["configuration"]),this.canceled)return this.cancel();if(this.add(e("")),this.sources.system_options=(await It.servers.get("#master")).option.system_option,this.canceled)return this.cancel();this.add(e(""));let c=[];try{if(r.effect.default){let _=await vr(Gt,r.effect.item.data.url,r.effect.item.data.hash);_=JSON.parse(await Kn(_));let h=await vr(Gt,r.effect.item.audio.url,r.effect.item.audio.hash);h=await Pw(h);for(let d of _.clips)c[d.name]=h[d.filename]}else for(let _ of r.effect.item.effect_data.clips)c[_.name]=r.effect.item.effect_audio[_.filename];for(let[_,h]of Object.entries(c)){let d=URL.createObjectURL(h);c[_]=new n1.Howl({src:d,format:"mp3"}),c[_].state()=="unloaded"&&await _f(c[_],"load"),URL.revokeObjectURL(d)}}catch(_){console.warn(_.message)}if(this.sources.effect_data=c,this.canceled)return this.cancel();if(this.add(e("")),this.sources.texture_img=await Zv("skin","texture_img","texture"),this.canceled)return this.cancel();if(this.add(e("")),this.sources.particle_img=await Zv("particle","particle_tex","texture"),this.canceled)return this.cancel();if(this.add(e("")),this.sources.background_img=await Zv("background","background_img","image"),this.canceled)return this.cancel();if(this.add(e("")),this.sources.system_tex=new Image,this.sources.system_tex.src="./textures/system_tex.webp",await _f(this.sources.system_tex),this.canceled)return this.cancel();this.add(e(""));let v;if(le.is_offline_level?v=URL.createObjectURL(le.coll_level.level_BGM):v=URL.createObjectURL(await vr(Gt,t.bgm.url,t.bgm.hash)),this.sources.BGM=new n1.Howl({src:v,format:"mp3"}),this.canceled)return this.cancel();if(this.add(e("")),this.sources.BGM.state()=="unloaded"&&await _f(this.sources.BGM,"load"),URL.revokeObjectURL(v),this.canceled)return this.cancel();if(le.key_assign_enabled?(this.add(e("")),this.sources.key_assign_data=le.key_assign_data):this.sources.key_assign_data=null,this.canceled)return this.cancel();this.add(e("")),this.setState({can_start:!0})}catch(i){this.add(`(${i.name}: ${i.message})`,!1)}}cancel(){ke("#processing-cover").hide(),this.Menu_Controller.back_menu()}play(){const e=vt.get_translator();vt.get_label_getter();const t=this.Menu_Controller;let r=this.sources,i=this.sources.system_options;this.add(e(""),!1),Hi.from("SansFont",{fontFamily:"sans-serif",fill:"#FFFFFF",fontSize:50},{chars:Hi.ASCII}),this.add(e("")),t.change_visible(!1),ke("#player-window").show();let s=async()=>{ke("#processing-cover").hide();let o=ke('<canvas id="main-canvas"></canvas>')[0];ke("#player-window").append(o);let u=new Ub({antialias:!1,view:o});console.log("fps",i.max_fps),u.ticker.maxFPS=i.max_fps||320;let c;window.app=c=new _M(u,vt,{skin_data:r.texture_data,skin_tex:r.texture_img,engine_data:r.engine_data,engine_config:r.engine_config,effect_data:r.effect_data,BGM:r.BGM,level_data:r.level_data,particle_data:r.particle_data,particle_tex:r.particle_img,background_data:r.background_data,background_config:r.background_config,background_tex:r.background_img,level_option:r.level_option,system_tex:r.system_tex},{key_assign:r.key_assign_data,debug:!0,bgm_volume:i.bgm_volume,effect_volume:i.effect_volume,vertices:i.mesh_vertexes,curv_vertices:i.curv_vertexes,audio_offset:i.audio_offset,input_offset:i.input_offset,render_scale:i.render_scale,texture_scale:i.texture_scale,anti_aliasing:0},{leave_callback:()=>{c.game_end(),document.body.style.backgroundColor="#000020",le.game_result={arcade_score:Math.round(c.arcade_score/c.maximum_combo*1e6),accuracy_score:Math.round(c.accuracy_score/c.maximum_combo*1e6),max_combo:c.max_combo,possible_combo:c.maximum_combo,acc_result:c.acc_result,game_completed:!1,bucket_graphs:c.rendered_bucket_graph},t.change_visible(!0),ke("#player-window").hide(),t.change_menu("ResultMenu"),c=null,s=null},retry_callback:async()=>{c.game_end(),c=null,ke("#processing-cover").show(),setTimeout(async()=>{await s()},100)},result_callback:()=>{c.game_end(),document.body.style.backgroundColor="#000020",le.game_result={arcade_score:Math.round(c.arcade_score/c.maximum_combo*1e6),accuracy_score:Math.round(c.accuracy_score/c.maximum_combo*1e6),max_combo:c.max_combo,possible_combo:c.maximum_combo,acc_result:c.acc_result,game_completed:!0,bucket_graphs:c.rendered_bucket_graph},t.change_visible(!0),ke("#player-window").hide(),t.change_menu("ResultMenu"),c=null,s=null},log_callback:(v,_)=>{this.add(e(v),_)}}),c.preparation()};s()}}class ok extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,t=vt.get_translator();return N.jsxs("div",{className:"selector-window",id:"item-selector",children:[t(""),"",N.jsxs("select",{onChange:async()=>{ke("#loading-cover").show();let r=ke("#level-info #item-selector select").val();if(r!="default"){let i=await Um(r),s=[];for(let[o,u]of Object.entries(i))u.name=o,s.push({default:!1,type:u.type,item:u});this.setState({ref_items:s})}ke("#loading-cover").hide()},children:[N.jsx("option",{value:"default",children:t("")}),le.collection_names.map(r=>N.jsx("option",{children:r},r))]}),N.jsx("br",{}),N.jsx("div",{id:"window",children:this.state.ref_items.map(r=>N.jsx(jm,{C:e,onClick:()=>{let i=this.state.source_items;i[r.type.slice(0,-1)]=r,this.setState({source_items:i})},type:r.type,item:r},`${r.item.name||"default"}(${r.type})`))})]})}}async function vl(n,e,t){let r,i=le.source_items[n];if(i.default){for(let s of t)if(s in i.item)return r=await vr(Gt,i.item[s].url,i.item[s].hash),r=JSON.parse(await Kn(r)),r;throw new Error(`ERROR: The data of ${n} is not found in  item.`)}else{if(e in i.item)return r=i.item[e],r;throw new Error(`ERROR: The data of ${n} is not found in collection.`)}}async function Zv(n,e,t){let r=new Image,i=le.source_items[n];if(i.default)r.src=URL.createObjectURL(await vr(Gt,i.item[t].url,i.item[t].hash));else{let s=i.item[e];r.src=URL.createObjectURL(s)}return await _f(r),URL.revokeObjectURL(r.src),r}function _f(n,e="#onload"){return new Promise((t,r)=>{switch(e){case"#onload":n.onload=t;break;case"#meta":n.onloadedmetadata=t;break;default:n.on(e,t);break}})}async function Kn(n,e=!0){let r=new wM(await Iw(n)).decompress();return e?new TextDecoder().decode(r):Ow(r)}async function Pw(n){let e=new TM(await Iw(n)),t={};for(let r of e.getFilenames())t[r]=e.decompress(r),t[r]=Ow(t[r]);return t}async function Iw(n){return new Uint8Array(await n.arrayBuffer())}function Ow(n){return new Blob([n.buffer],{type:"application/octet-stream"})}async function vr(n,e,t){if(t){let r=await It.cache.get(t);if(r)return r.file;{let s=await(await fetch(jf,{method:"POST",body:JSON.stringify({type:"content",url:Yi(n,e)})})).blob();return It.cache.put({hash:t,file:s}),s}}else return await(await fetch(jf,{method:"POST",body:JSON.stringify({type:"content",url:Yi(n,e)})})).blob()}class lk extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,t=vt.get_translator();return N.jsxs("div",{id:"result",children:[N.jsx("h3",{className:"Menu-title",children:t("")}),N.jsxs("div",{id:"window",className:"selector-window",children:[N.jsx("h3",{id:"title",children:le.level_info_data.item.title}),N.jsxs("p",{id:"arcade",children:[t(""),":",le.game_result.arcade_score,"/1000000"]}),N.jsxs("p",{id:"accuracy",children:[t(""),":",le.game_result.accuracy_score,"/1000000"]}),N.jsxs("p",{id:"max_combo",children:[t(""),":",le.game_result.max_combo,"/",le.game_result.possible_combo]}),N.jsxs("p",{id:"acc_result",children:["PERFECT:",le.game_result.acc_result.perfect,N.jsx("br",{}),"GREAT:",le.game_result.acc_result.great,N.jsx("br",{}),"GOOD:",le.game_result.acc_result.good,N.jsx("br",{}),"MISS:",le.game_result.acc_result.miss]})]}),N.jsx("button",{id:"back",className:"btn",onClick:()=>{e.back_menu(2)},children:t("")}),N.jsx("button",{id:"back",className:"btn",onClick:()=>{e.change_menu("BucketMenu")},children:t("")})]})}}class uk extends Lt.Component{constructor(e){super(e),this.Menu_Controller=e.C}render(){const e=this.Menu_Controller,t=vt.get_translator();return N.jsxs("div",{id:"result",children:[N.jsx("h3",{className:"Menu-title",children:t("")}),N.jsx("div",{id:"window",className:"selector-window",children:le.game_result.bucket_graphs.map((r,i)=>N.jsx(ck,{graphs:r},i))}),N.jsx("button",{id:"back",className:"btn",onClick:()=>{e.back_menu()},children:t("")})]})}}class ck extends Lt.Component{constructor(e){super(e),this.graphs=e.graphs,this.state={graph:"all"},this.frame_ref=Lt.createRef()}render(){const e=vt.get_translator();return N.jsxs("div",{children:[N.jsx("div",{ref:this.frame_ref}),N.jsxs("select",{className:"select-ref",onChange:t=>{this.setState({graph:t.target.value})},children:[N.jsx("option",{value:"all",children:e("")}),N.jsx("option",{value:"perfect",children:"PERFECT"}),N.jsx("option",{value:"great",children:"GREAT"}),N.jsx("option",{value:"good",children:"GOOD"}),N.jsx("option",{value:"miss",children:"MISS"})]})]})}componentDidMount(){this.frame_ref.current.innerHTML="",this.frame_ref.current.appendChild(this.graphs[this.state.graph])}componentDidUpdate(){this.frame_ref.current.innerHTML="",this.frame_ref.current.appendChild(this.graphs[this.state.graph])}}const p1=new URL(window.location.href).searchParams,jl=p1.has("lang")?p1.get("lang"):window.navigator.language;console.log("language:",jl);const vt=new RR(jl,{ja:"./localization/ja-localization-react.json",en:"./localization/en-localization-react.json"}),hk=kT.createRoot(document.getElementById("root"));hk.render(N.jsx(CM,{}));const It=new fo("contents_data");It.version(3).stores({servers:"name,address,option,display_name,version",collections:"name,data,version",cache:"hash,file"});document.readyState==="complete"?ke("#loading-cover").hide():window.addEventListener("load",function(){ke("#loading-cover").hide()});"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js");let le=window.TEMP={},Gt="",Zn="";const jf="https://swp-server.ponz.workers.dev/";let Jv={};const $f=4,ic=2;
